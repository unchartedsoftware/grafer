var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __require = /* @__PURE__ */ ((x2) => typeof require !== "undefined" ? require : typeof Proxy !== "undefined" ? new Proxy(x2, {
  get: (a3, b3) => (typeof require !== "undefined" ? require : a3)[b3]
}) : x2)(function(x2) {
  if (typeof require !== "undefined")
    return require.apply(this, arguments);
  throw new Error('Dynamic require of "' + x2 + '" is not supported');
});
var __commonJS = (cb, mod) => function __require2() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key2 of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key2) && key2 !== except)
        __defProp(to, key2, { get: () => from[key2], enumerable: !(desc = __getOwnPropDesc(from, key2)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __decorateClass = (decorators, target, key2, kind) => {
  var result = kind > 1 ? void 0 : kind ? __getOwnPropDesc(target, key2) : target;
  for (var i4 = decorators.length - 1, decorator; i4 >= 0; i4--)
    if (decorator = decorators[i4])
      result = (kind ? decorator(target, key2, result) : decorator(result)) || result;
  if (kind && result)
    __defProp(target, key2, result);
  return result;
};

// node_modules/tweakpane/dist/tweakpane.js
var require_tweakpane = __commonJS({
  "node_modules/tweakpane/dist/tweakpane.js"(exports, module) {
    (function webpackUniversalModuleDefinition(root, factory) {
      if (typeof exports === "object" && typeof module === "object")
        module.exports = factory();
      else if (typeof define === "function" && define.amd)
        define([], factory);
      else if (typeof exports === "object")
        exports["tweakpane"] = factory();
      else
        root["Tweakpane"] = factory();
    })(typeof self !== "undefined" ? self : exports, function() {
      return function(modules) {
        var installedModules = {};
        function __webpack_require__(moduleId) {
          if (installedModules[moduleId]) {
            return installedModules[moduleId].exports;
          }
          var module2 = installedModules[moduleId] = {
            i: moduleId,
            l: false,
            exports: {}
          };
          modules[moduleId].call(module2.exports, module2, module2.exports, __webpack_require__);
          module2.l = true;
          return module2.exports;
        }
        __webpack_require__.m = modules;
        __webpack_require__.c = installedModules;
        __webpack_require__.d = function(exports2, name, getter) {
          if (!__webpack_require__.o(exports2, name)) {
            Object.defineProperty(exports2, name, { enumerable: true, get: getter });
          }
        };
        __webpack_require__.r = function(exports2) {
          if (typeof Symbol !== "undefined" && Symbol.toStringTag) {
            Object.defineProperty(exports2, Symbol.toStringTag, { value: "Module" });
          }
          Object.defineProperty(exports2, "__esModule", { value: true });
        };
        __webpack_require__.t = function(value, mode) {
          if (mode & 1)
            value = __webpack_require__(value);
          if (mode & 8)
            return value;
          if (mode & 4 && typeof value === "object" && value && value.__esModule)
            return value;
          var ns = /* @__PURE__ */ Object.create(null);
          __webpack_require__.r(ns);
          Object.defineProperty(ns, "default", { enumerable: true, value });
          if (mode & 2 && typeof value != "string")
            for (var key2 in value)
              __webpack_require__.d(ns, key2, function(key3) {
                return value[key3];
              }.bind(null, key2));
          return ns;
        };
        __webpack_require__.n = function(module2) {
          var getter = module2 && module2.__esModule ? function getDefault() {
            return module2["default"];
          } : function getModuleExports() {
            return module2;
          };
          __webpack_require__.d(getter, "a", getter);
          return getter;
        };
        __webpack_require__.o = function(object, property) {
          return Object.prototype.hasOwnProperty.call(object, property);
        };
        __webpack_require__.p = "";
        return __webpack_require__(__webpack_require__.s = "./src/main/js/index.ts");
      }({
        "./node_modules/css-loader/lib/css-base.js": function(module2, exports2) {
          module2.exports = function(useSourceMap) {
            var list = [];
            list.toString = function toString() {
              return this.map(function(item) {
                var content = cssWithMappingToString(item, useSourceMap);
                if (item[2]) {
                  return "@media " + item[2] + "{" + content + "}";
                } else {
                  return content;
                }
              }).join("");
            };
            list.i = function(modules, mediaQuery) {
              if (typeof modules === "string")
                modules = [[null, modules, ""]];
              var alreadyImportedModules = {};
              for (var i4 = 0; i4 < this.length; i4++) {
                var id = this[i4][0];
                if (typeof id === "number")
                  alreadyImportedModules[id] = true;
              }
              for (i4 = 0; i4 < modules.length; i4++) {
                var item = modules[i4];
                if (typeof item[0] !== "number" || !alreadyImportedModules[item[0]]) {
                  if (mediaQuery && !item[2]) {
                    item[2] = mediaQuery;
                  } else if (mediaQuery) {
                    item[2] = "(" + item[2] + ") and (" + mediaQuery + ")";
                  }
                  list.push(item);
                }
              }
            };
            return list;
          };
          function cssWithMappingToString(item, useSourceMap) {
            var content = item[1] || "";
            var cssMapping = item[3];
            if (!cssMapping) {
              return content;
            }
            if (useSourceMap && typeof btoa === "function") {
              var sourceMapping = toComment(cssMapping);
              var sourceURLs = cssMapping.sources.map(function(source) {
                return "/*# sourceURL=" + cssMapping.sourceRoot + source + " */";
              });
              return [content].concat(sourceURLs).concat([sourceMapping]).join("\n");
            }
            return [content].join("\n");
          }
          function toComment(sourceMap) {
            var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));
            var data = "sourceMappingURL=data:application/json;charset=utf-8;base64," + base64;
            return "/*# " + data + " */";
          }
        },
        "./node_modules/process/browser.js": function(module2, exports2) {
          var process2 = module2.exports = {};
          var cachedSetTimeout;
          var cachedClearTimeout;
          function defaultSetTimout() {
            throw new Error("setTimeout has not been defined");
          }
          function defaultClearTimeout() {
            throw new Error("clearTimeout has not been defined");
          }
          (function() {
            try {
              if (typeof setTimeout === "function") {
                cachedSetTimeout = setTimeout;
              } else {
                cachedSetTimeout = defaultSetTimout;
              }
            } catch (e5) {
              cachedSetTimeout = defaultSetTimout;
            }
            try {
              if (typeof clearTimeout === "function") {
                cachedClearTimeout = clearTimeout;
              } else {
                cachedClearTimeout = defaultClearTimeout;
              }
            } catch (e5) {
              cachedClearTimeout = defaultClearTimeout;
            }
          })();
          function runTimeout(fun) {
            if (cachedSetTimeout === setTimeout) {
              return setTimeout(fun, 0);
            }
            if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
              cachedSetTimeout = setTimeout;
              return setTimeout(fun, 0);
            }
            try {
              return cachedSetTimeout(fun, 0);
            } catch (e5) {
              try {
                return cachedSetTimeout.call(null, fun, 0);
              } catch (e6) {
                return cachedSetTimeout.call(this, fun, 0);
              }
            }
          }
          function runClearTimeout(marker) {
            if (cachedClearTimeout === clearTimeout) {
              return clearTimeout(marker);
            }
            if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
              cachedClearTimeout = clearTimeout;
              return clearTimeout(marker);
            }
            try {
              return cachedClearTimeout(marker);
            } catch (e5) {
              try {
                return cachedClearTimeout.call(null, marker);
              } catch (e6) {
                return cachedClearTimeout.call(this, marker);
              }
            }
          }
          var queue = [];
          var draining = false;
          var currentQueue;
          var queueIndex = -1;
          function cleanUpNextTick() {
            if (!draining || !currentQueue) {
              return;
            }
            draining = false;
            if (currentQueue.length) {
              queue = currentQueue.concat(queue);
            } else {
              queueIndex = -1;
            }
            if (queue.length) {
              drainQueue();
            }
          }
          function drainQueue() {
            if (draining) {
              return;
            }
            var timeout = runTimeout(cleanUpNextTick);
            draining = true;
            var len5 = queue.length;
            while (len5) {
              currentQueue = queue;
              queue = [];
              while (++queueIndex < len5) {
                if (currentQueue) {
                  currentQueue[queueIndex].run();
                }
              }
              queueIndex = -1;
              len5 = queue.length;
            }
            currentQueue = null;
            draining = false;
            runClearTimeout(timeout);
          }
          process2.nextTick = function(fun) {
            var args = new Array(arguments.length - 1);
            if (arguments.length > 1) {
              for (var i4 = 1; i4 < arguments.length; i4++) {
                args[i4 - 1] = arguments[i4];
              }
            }
            queue.push(new Item(fun, args));
            if (queue.length === 1 && !draining) {
              runTimeout(drainQueue);
            }
          };
          function Item(fun, array) {
            this.fun = fun;
            this.array = array;
          }
          Item.prototype.run = function() {
            this.fun.apply(null, this.array);
          };
          process2.title = "browser";
          process2.browser = true;
          process2.env = {};
          process2.argv = [];
          process2.version = "";
          process2.versions = {};
          function noop() {
          }
          process2.on = noop;
          process2.addListener = noop;
          process2.once = noop;
          process2.off = noop;
          process2.removeListener = noop;
          process2.removeAllListeners = noop;
          process2.emit = noop;
          process2.prependListener = noop;
          process2.prependOnceListener = noop;
          process2.listeners = function(name) {
            return [];
          };
          process2.binding = function(name) {
            throw new Error("process.binding is not supported");
          };
          process2.cwd = function() {
            return "/";
          };
          process2.chdir = function(dir) {
            throw new Error("process.chdir is not supported");
          };
          process2.umask = function() {
            return 0;
          };
        },
        "./src/main/js/api/button.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.ButtonApi = void 0;
          var ButtonApi = function() {
            function ButtonApi2(buttonController) {
              this.controller = buttonController;
            }
            Object.defineProperty(ButtonApi2.prototype, "hidden", {
              get: function() {
                return this.controller.viewModel.hidden;
              },
              set: function(hidden) {
                this.controller.viewModel.hidden = hidden;
              },
              enumerable: false,
              configurable: true
            });
            ButtonApi2.prototype.dispose = function() {
              this.controller.viewModel.dispose();
            };
            ButtonApi2.prototype.on = function(eventName, handler) {
              var emitter = this.controller.button.emitter;
              emitter.on(eventName, handler.bind(this));
              return this;
            };
            return ButtonApi2;
          }();
          exports2.ButtonApi = ButtonApi;
        },
        "./src/main/js/api/event-handler-adapters.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.folder = exports2.monitor = exports2.input = void 0;
          function input(_a6) {
            var binding = _a6.binding, eventName = _a6.eventName, handler = _a6.handler;
            if (eventName === "change") {
              var emitter = binding.emitter;
              emitter.on("change", function(ev) {
                handler(ev.sender.getValueToWrite(ev.rawValue));
              });
            }
          }
          exports2.input = input;
          function monitor(_a6) {
            var binding = _a6.binding, eventName = _a6.eventName, handler = _a6.handler;
            if (eventName === "update") {
              var emitter = binding.emitter;
              emitter.on("update", function(ev) {
                handler(ev.sender.target.read());
              });
            }
          }
          exports2.monitor = monitor;
          function folder(_a6) {
            var eventName = _a6.eventName, folder2 = _a6.folder, handler = _a6.handler, uiContainer = _a6.uiContainer;
            if (eventName === "change") {
              var emitter = uiContainer.emitter;
              emitter.on("inputchange", function(ev) {
                handler(ev.inputBinding.getValueToWrite(ev.value));
              });
            }
            if (eventName === "update") {
              var emitter = uiContainer.emitter;
              emitter.on("monitorupdate", function(ev) {
                handler(ev.monitorBinding.target.read());
              });
            }
            if (eventName === "fold") {
              uiContainer.emitter.on("itemfold", function(ev) {
                handler(ev.expanded);
              });
              folder2 === null || folder2 === void 0 ? void 0 : folder2.emitter.on("change", function(ev) {
                if (ev.propertyName !== "expanded") {
                  return;
                }
                handler(ev.sender.expanded);
              });
            }
          }
          exports2.folder = folder;
        },
        "./src/main/js/api/folder.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          var __assign = this && this.__assign || function() {
            __assign = Object.assign || function(t4) {
              for (var s4, i4 = 1, n5 = arguments.length; i4 < n5; i4++) {
                s4 = arguments[i4];
                for (var p3 in s4)
                  if (Object.prototype.hasOwnProperty.call(s4, p3))
                    t4[p3] = s4[p3];
              }
              return t4;
            };
            return __assign.apply(this, arguments);
          };
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.FolderApi = void 0;
          var InputBindingControllerCreators = __webpack_require__("./src/main/js/controller/binding-creators/input.ts");
          var MonitorBindingControllerCreators = __webpack_require__("./src/main/js/controller/binding-creators/monitor.ts");
          var button_1 = __webpack_require__("./src/main/js/controller/button.ts");
          var folder_1 = __webpack_require__("./src/main/js/controller/folder.ts");
          var separator_1 = __webpack_require__("./src/main/js/controller/separator.ts");
          var target_1 = __webpack_require__("./src/main/js/model/target.ts");
          var view_model_1 = __webpack_require__("./src/main/js/model/view-model.ts");
          var button_2 = __webpack_require__("./src/main/js/api/button.ts");
          var EventHandlerAdapters = __webpack_require__("./src/main/js/api/event-handler-adapters.ts");
          var input_binding_1 = __webpack_require__("./src/main/js/api/input-binding.ts");
          var monitor_binding_1 = __webpack_require__("./src/main/js/api/monitor-binding.ts");
          var separator_2 = __webpack_require__("./src/main/js/api/separator.ts");
          var FolderApi = function() {
            function FolderApi2(folderController) {
              this.controller = folderController;
            }
            Object.defineProperty(FolderApi2.prototype, "expanded", {
              get: function() {
                return this.controller.folder.expanded;
              },
              set: function(expanded) {
                this.controller.folder.expanded = expanded;
              },
              enumerable: false,
              configurable: true
            });
            Object.defineProperty(FolderApi2.prototype, "hidden", {
              get: function() {
                return this.controller.viewModel.hidden;
              },
              set: function(hidden) {
                this.controller.viewModel.hidden = hidden;
              },
              enumerable: false,
              configurable: true
            });
            FolderApi2.prototype.dispose = function() {
              this.controller.viewModel.dispose();
            };
            FolderApi2.prototype.addInput = function(object, key2, opt_params) {
              var params = opt_params || {};
              var uc = InputBindingControllerCreators.create(this.controller.document, new target_1.Target(object, key2, params.presetKey), params);
              this.controller.uiContainer.add(uc, params.index);
              return new input_binding_1.InputBindingApi(uc);
            };
            FolderApi2.prototype.addMonitor = function(object, key2, opt_params) {
              var params = opt_params || {};
              var uc = MonitorBindingControllerCreators.create(this.controller.document, new target_1.Target(object, key2), params);
              this.controller.uiContainer.add(uc, params.index);
              return new monitor_binding_1.MonitorBindingApi(uc);
            };
            FolderApi2.prototype.addFolder = function(params) {
              var uc = new folder_1.FolderController(this.controller.document, __assign(__assign({}, params), { viewModel: new view_model_1.ViewModel() }));
              this.controller.uiContainer.add(uc, params.index);
              return new FolderApi2(uc);
            };
            FolderApi2.prototype.addButton = function(params) {
              var uc = new button_1.ButtonController(this.controller.document, __assign(__assign({}, params), { viewModel: new view_model_1.ViewModel() }));
              this.controller.uiContainer.add(uc, params.index);
              return new button_2.ButtonApi(uc);
            };
            FolderApi2.prototype.addSeparator = function(opt_params) {
              var params = opt_params || {};
              var uc = new separator_1.SeparatorController(this.controller.document, {
                viewModel: new view_model_1.ViewModel()
              });
              this.controller.uiContainer.add(uc, params.index);
              return new separator_2.SeparatorApi(uc);
            };
            FolderApi2.prototype.on = function(eventName, handler) {
              EventHandlerAdapters.folder({
                eventName,
                folder: this.controller.folder,
                handler: handler.bind(this),
                uiContainer: this.controller.uiContainer
              });
              return this;
            };
            return FolderApi2;
          }();
          exports2.FolderApi = FolderApi;
        },
        "./src/main/js/api/input-binding.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.InputBindingApi = void 0;
          var HandlerAdapters = __webpack_require__("./src/main/js/api/event-handler-adapters.ts");
          var InputBindingApi = function() {
            function InputBindingApi2(bindingController) {
              this.controller = bindingController;
            }
            Object.defineProperty(InputBindingApi2.prototype, "hidden", {
              get: function() {
                return this.controller.viewModel.hidden;
              },
              set: function(hidden) {
                this.controller.viewModel.hidden = hidden;
              },
              enumerable: false,
              configurable: true
            });
            InputBindingApi2.prototype.dispose = function() {
              this.controller.viewModel.dispose();
            };
            InputBindingApi2.prototype.on = function(eventName, handler) {
              HandlerAdapters.input({
                binding: this.controller.binding,
                eventName,
                handler: handler.bind(this)
              });
              return this;
            };
            InputBindingApi2.prototype.refresh = function() {
              this.controller.binding.read();
            };
            return InputBindingApi2;
          }();
          exports2.InputBindingApi = InputBindingApi;
        },
        "./src/main/js/api/monitor-binding.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.MonitorBindingApi = void 0;
          var EventHandlerAdapters = __webpack_require__("./src/main/js/api/event-handler-adapters.ts");
          var MonitorBindingApi = function() {
            function MonitorBindingApi2(bindingController) {
              this.controller = bindingController;
            }
            Object.defineProperty(MonitorBindingApi2.prototype, "hidden", {
              get: function() {
                return this.controller.viewModel.hidden;
              },
              set: function(hidden) {
                this.controller.viewModel.hidden = hidden;
              },
              enumerable: false,
              configurable: true
            });
            MonitorBindingApi2.prototype.dispose = function() {
              this.controller.viewModel.dispose();
            };
            MonitorBindingApi2.prototype.on = function(eventName, handler) {
              EventHandlerAdapters.monitor({
                binding: this.controller.binding,
                eventName,
                handler: handler.bind(this)
              });
              return this;
            };
            MonitorBindingApi2.prototype.refresh = function() {
              this.controller.binding.read();
            };
            return MonitorBindingApi2;
          }();
          exports2.MonitorBindingApi = MonitorBindingApi;
        },
        "./src/main/js/api/preset.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.importJson = exports2.exportJson = void 0;
          function exportJson(targets) {
            return targets.reduce(function(result, target) {
              var _a6;
              return Object.assign(result, (_a6 = {}, _a6[target.presetKey] = target.read(), _a6));
            }, {});
          }
          exports2.exportJson = exportJson;
          function importJson(targets, preset) {
            targets.forEach(function(target) {
              var value = preset[target.presetKey];
              if (value !== void 0) {
                target.write(value);
              }
            });
          }
          exports2.importJson = importJson;
        },
        "./src/main/js/api/root.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          var __assign = this && this.__assign || function() {
            __assign = Object.assign || function(t4) {
              for (var s4, i4 = 1, n5 = arguments.length; i4 < n5; i4++) {
                s4 = arguments[i4];
                for (var p3 in s4)
                  if (Object.prototype.hasOwnProperty.call(s4, p3))
                    t4[p3] = s4[p3];
              }
              return t4;
            };
            return __assign.apply(this, arguments);
          };
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.RootApi = void 0;
          var InputBindingControllerCreators = __webpack_require__("./src/main/js/controller/binding-creators/input.ts");
          var MonitorBindingControllerCreators = __webpack_require__("./src/main/js/controller/binding-creators/monitor.ts");
          var button_1 = __webpack_require__("./src/main/js/controller/button.ts");
          var folder_1 = __webpack_require__("./src/main/js/controller/folder.ts");
          var input_binding_1 = __webpack_require__("./src/main/js/controller/input-binding.ts");
          var monitor_binding_1 = __webpack_require__("./src/main/js/controller/monitor-binding.ts");
          var separator_1 = __webpack_require__("./src/main/js/controller/separator.ts");
          var UiUtil = __webpack_require__("./src/main/js/controller/ui-util.ts");
          var target_1 = __webpack_require__("./src/main/js/model/target.ts");
          var view_model_1 = __webpack_require__("./src/main/js/model/view-model.ts");
          var button_2 = __webpack_require__("./src/main/js/api/button.ts");
          var EventHandlerAdapters = __webpack_require__("./src/main/js/api/event-handler-adapters.ts");
          var folder_2 = __webpack_require__("./src/main/js/api/folder.ts");
          var input_binding_2 = __webpack_require__("./src/main/js/api/input-binding.ts");
          var monitor_binding_2 = __webpack_require__("./src/main/js/api/monitor-binding.ts");
          var Preset = __webpack_require__("./src/main/js/api/preset.ts");
          var separator_2 = __webpack_require__("./src/main/js/api/separator.ts");
          var RootApi = function() {
            function RootApi2(rootController) {
              this.controller = rootController;
            }
            Object.defineProperty(RootApi2.prototype, "element", {
              get: function() {
                return this.controller.view.element;
              },
              enumerable: false,
              configurable: true
            });
            Object.defineProperty(RootApi2.prototype, "expanded", {
              get: function() {
                var folder = this.controller.folder;
                return folder ? folder.expanded : true;
              },
              set: function(expanded) {
                var folder = this.controller.folder;
                if (folder) {
                  folder.expanded = expanded;
                }
              },
              enumerable: false,
              configurable: true
            });
            Object.defineProperty(RootApi2.prototype, "hidden", {
              get: function() {
                return this.controller.viewModel.hidden;
              },
              set: function(hidden) {
                this.controller.viewModel.hidden = hidden;
              },
              enumerable: false,
              configurable: true
            });
            RootApi2.prototype.dispose = function() {
              this.controller.viewModel.dispose();
            };
            RootApi2.prototype.addInput = function(object, key2, opt_params) {
              var params = opt_params || {};
              var uc = InputBindingControllerCreators.create(this.controller.document, new target_1.Target(object, key2, params.presetKey), params);
              this.controller.uiContainer.add(uc, params.index);
              return new input_binding_2.InputBindingApi(uc);
            };
            RootApi2.prototype.addMonitor = function(object, key2, opt_params) {
              var params = opt_params || {};
              var uc = MonitorBindingControllerCreators.create(this.controller.document, new target_1.Target(object, key2), params);
              this.controller.uiContainer.add(uc, params.index);
              return new monitor_binding_2.MonitorBindingApi(uc);
            };
            RootApi2.prototype.addButton = function(params) {
              var uc = new button_1.ButtonController(this.controller.document, __assign(__assign({}, params), { viewModel: new view_model_1.ViewModel() }));
              this.controller.uiContainer.add(uc, params.index);
              return new button_2.ButtonApi(uc);
            };
            RootApi2.prototype.addFolder = function(params) {
              var uc = new folder_1.FolderController(this.controller.document, __assign(__assign({}, params), { viewModel: new view_model_1.ViewModel() }));
              this.controller.uiContainer.add(uc, params.index);
              return new folder_2.FolderApi(uc);
            };
            RootApi2.prototype.addSeparator = function(opt_params) {
              var params = opt_params || {};
              var uc = new separator_1.SeparatorController(this.controller.document, {
                viewModel: new view_model_1.ViewModel()
              });
              this.controller.uiContainer.add(uc, params.index);
              return new separator_2.SeparatorApi(uc);
            };
            RootApi2.prototype.importPreset = function(preset) {
              var targets = UiUtil.findControllers(this.controller.uiContainer.items, input_binding_1.InputBindingController).map(function(ibc) {
                return ibc.binding.target;
              });
              Preset.importJson(targets, preset);
              this.refresh();
            };
            RootApi2.prototype.exportPreset = function() {
              var targets = UiUtil.findControllers(this.controller.uiContainer.items, input_binding_1.InputBindingController).map(function(ibc) {
                return ibc.binding.target;
              });
              return Preset.exportJson(targets);
            };
            RootApi2.prototype.on = function(eventName, handler) {
              EventHandlerAdapters.folder({
                eventName,
                folder: this.controller.folder,
                handler: handler.bind(this),
                uiContainer: this.controller.uiContainer
              });
              return this;
            };
            RootApi2.prototype.refresh = function() {
              UiUtil.findControllers(this.controller.uiContainer.items, input_binding_1.InputBindingController).forEach(function(ibc) {
                ibc.binding.read();
              });
              UiUtil.findControllers(this.controller.uiContainer.items, monitor_binding_1.MonitorBindingController).forEach(function(mbc) {
                mbc.binding.read();
              });
            };
            return RootApi2;
          }();
          exports2.RootApi = RootApi;
        },
        "./src/main/js/api/separator.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.SeparatorApi = void 0;
          var SeparatorApi = function() {
            function SeparatorApi2(controller) {
              this.controller = controller;
            }
            Object.defineProperty(SeparatorApi2.prototype, "hidden", {
              get: function() {
                return this.controller.viewModel.hidden;
              },
              set: function(hidden) {
                this.controller.viewModel.hidden = hidden;
              },
              enumerable: false,
              configurable: true
            });
            SeparatorApi2.prototype.dispose = function() {
              this.controller.viewModel.dispose();
            };
            return SeparatorApi2;
          }();
          exports2.SeparatorApi = SeparatorApi;
        },
        "./src/main/js/binding/input.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.InputBinding = void 0;
          var emitter_1 = __webpack_require__("./src/main/js/misc/emitter.ts");
          var InputBinding = function() {
            function InputBinding2(config) {
              this.onValueChange_ = this.onValueChange_.bind(this);
              this.reader_ = config.reader;
              this.writer_ = config.writer;
              this.emitter = new emitter_1.Emitter();
              this.value = config.value;
              this.value.emitter.on("change", this.onValueChange_);
              this.target = config.target;
              this.read();
            }
            InputBinding2.prototype.read = function() {
              var targetValue = this.target.read();
              if (targetValue !== void 0) {
                this.value.rawValue = this.reader_(targetValue);
              }
            };
            InputBinding2.prototype.getValueToWrite = function(rawValue) {
              return this.writer_(rawValue);
            };
            InputBinding2.prototype.write_ = function(rawValue) {
              this.target.write(this.getValueToWrite(rawValue));
            };
            InputBinding2.prototype.onValueChange_ = function(ev) {
              this.write_(ev.rawValue);
              this.emitter.emit("change", {
                rawValue: ev.rawValue,
                sender: this
              });
            };
            return InputBinding2;
          }();
          exports2.InputBinding = InputBinding;
        },
        "./src/main/js/binding/monitor.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.MonitorBinding = void 0;
          var emitter_1 = __webpack_require__("./src/main/js/misc/emitter.ts");
          var MonitorBinding = function() {
            function MonitorBinding2(config) {
              this.onTick_ = this.onTick_.bind(this);
              this.onValueUpdate_ = this.onValueUpdate_.bind(this);
              this.reader_ = config.reader;
              this.target = config.target;
              this.emitter = new emitter_1.Emitter();
              this.value = config.value;
              this.value.emitter.on("update", this.onValueUpdate_);
              this.ticker = config.ticker;
              this.ticker.emitter.on("tick", this.onTick_);
              this.read();
            }
            MonitorBinding2.prototype.dispose = function() {
              this.ticker.disposable.dispose();
            };
            MonitorBinding2.prototype.read = function() {
              var targetValue = this.target.read();
              if (targetValue !== void 0) {
                this.value.append(this.reader_(targetValue));
              }
            };
            MonitorBinding2.prototype.onTick_ = function(_2) {
              this.read();
            };
            MonitorBinding2.prototype.onValueUpdate_ = function(ev) {
              this.emitter.emit("update", {
                rawValue: ev.rawValue,
                sender: this
              });
            };
            return MonitorBinding2;
          }();
          exports2.MonitorBinding = MonitorBinding;
        },
        "./src/main/js/constraint/composite.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.CompositeConstraint = void 0;
          var CompositeConstraint = function() {
            function CompositeConstraint2(config) {
              this.constraints_ = config.constraints;
            }
            Object.defineProperty(CompositeConstraint2.prototype, "constraints", {
              get: function() {
                return this.constraints_;
              },
              enumerable: false,
              configurable: true
            });
            CompositeConstraint2.prototype.constrain = function(value) {
              return this.constraints_.reduce(function(result, c4) {
                return c4.constrain(result);
              }, value);
            };
            return CompositeConstraint2;
          }();
          exports2.CompositeConstraint = CompositeConstraint;
        },
        "./src/main/js/constraint/list.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.ListConstraint = void 0;
          var ListConstraint = function() {
            function ListConstraint2(config) {
              this.opts_ = config.options;
            }
            Object.defineProperty(ListConstraint2.prototype, "options", {
              get: function() {
                return this.opts_;
              },
              enumerable: false,
              configurable: true
            });
            ListConstraint2.prototype.constrain = function(value) {
              var opts = this.opts_;
              if (opts.length === 0) {
                return value;
              }
              var matched = opts.filter(function(item) {
                return item.value === value;
              }).length > 0;
              return matched ? value : opts[0].value;
            };
            return ListConstraint2;
          }();
          exports2.ListConstraint = ListConstraint;
        },
        "./src/main/js/constraint/point-2d.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.Point2dConstraint = void 0;
          var point_2d_1 = __webpack_require__("./src/main/js/model/point-2d.ts");
          var Point2dConstraint = function() {
            function Point2dConstraint2(config) {
              this.xConstraint = config.x;
              this.yConstraint = config.y;
            }
            Point2dConstraint2.prototype.constrain = function(value) {
              return new point_2d_1.Point2d(this.xConstraint ? this.xConstraint.constrain(value.x) : value.x, this.yConstraint ? this.yConstraint.constrain(value.y) : value.y);
            };
            return Point2dConstraint2;
          }();
          exports2.Point2dConstraint = Point2dConstraint;
        },
        "./src/main/js/constraint/range.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.RangeConstraint = void 0;
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          var RangeConstraint = function() {
            function RangeConstraint2(config) {
              this.maxValue = config.max;
              this.minValue = config.min;
            }
            RangeConstraint2.prototype.constrain = function(value) {
              var result = value;
              if (!type_util_1.TypeUtil.isEmpty(this.minValue)) {
                result = Math.max(result, this.minValue);
              }
              if (!type_util_1.TypeUtil.isEmpty(this.maxValue)) {
                result = Math.min(result, this.maxValue);
              }
              return result;
            };
            return RangeConstraint2;
          }();
          exports2.RangeConstraint = RangeConstraint;
        },
        "./src/main/js/constraint/step.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.StepConstraint = void 0;
          var StepConstraint = function() {
            function StepConstraint2(config) {
              this.step = config.step;
            }
            StepConstraint2.prototype.constrain = function(value) {
              var r5 = value < 0 ? -Math.round(-value / this.step) : Math.round(value / this.step);
              return r5 * this.step;
            };
            return StepConstraint2;
          }();
          exports2.StepConstraint = StepConstraint;
        },
        "./src/main/js/constraint/util.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.ConstraintUtil = void 0;
          var composite_1 = __webpack_require__("./src/main/js/constraint/composite.ts");
          exports2.ConstraintUtil = {
            findConstraint: function(c4, constraintClass) {
              if (c4 instanceof constraintClass) {
                return c4;
              }
              if (c4 instanceof composite_1.CompositeConstraint) {
                var result = c4.constraints.reduce(function(tmpResult, sc) {
                  if (tmpResult) {
                    return tmpResult;
                  }
                  return sc instanceof constraintClass ? sc : null;
                }, null);
                if (result) {
                  return result;
                }
              }
              return null;
            }
          };
        },
        "./src/main/js/controller/binding-creators/boolean-input.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.create = void 0;
          var input_1 = __webpack_require__("./src/main/js/binding/input.ts");
          var composite_1 = __webpack_require__("./src/main/js/constraint/composite.ts");
          var list_1 = __webpack_require__("./src/main/js/constraint/list.ts");
          var util_1 = __webpack_require__("./src/main/js/constraint/util.ts");
          var BooleanConverter = __webpack_require__("./src/main/js/converter/boolean.ts");
          var input_value_1 = __webpack_require__("./src/main/js/model/input-value.ts");
          var view_model_1 = __webpack_require__("./src/main/js/model/view-model.ts");
          var input_binding_1 = __webpack_require__("./src/main/js/controller/input-binding.ts");
          var checkbox_1 = __webpack_require__("./src/main/js/controller/input/checkbox.ts");
          var list_2 = __webpack_require__("./src/main/js/controller/input/list.ts");
          var UiUtil = __webpack_require__("./src/main/js/controller/ui-util.ts");
          function createConstraint(params) {
            var constraints = [];
            if ("options" in params && params.options !== void 0) {
              constraints.push(new list_1.ListConstraint({
                options: UiUtil.normalizeInputParamsOptions(params.options, BooleanConverter.fromMixed)
              }));
            }
            return new composite_1.CompositeConstraint({
              constraints
            });
          }
          function createController(document2, value) {
            var c4 = value.constraint;
            if (c4 && util_1.ConstraintUtil.findConstraint(c4, list_1.ListConstraint)) {
              return new list_2.ListInputController(document2, {
                viewModel: new view_model_1.ViewModel(),
                stringifyValue: BooleanConverter.toString,
                value
              });
            }
            return new checkbox_1.CheckboxInputController(document2, {
              viewModel: new view_model_1.ViewModel(),
              value
            });
          }
          function create7(document2, target, params) {
            var initialValue = target.read();
            if (typeof initialValue !== "boolean") {
              return null;
            }
            var value = new input_value_1.InputValue(false, createConstraint(params));
            var binding = new input_1.InputBinding({
              reader: BooleanConverter.fromMixed,
              target,
              value,
              writer: function(v2) {
                return v2;
              }
            });
            return new input_binding_1.InputBindingController(document2, {
              binding,
              controller: createController(document2, value),
              label: params.label || target.key
            });
          }
          exports2.create = create7;
        },
        "./src/main/js/controller/binding-creators/boolean-monitor.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.create = void 0;
          var monitor_1 = __webpack_require__("./src/main/js/binding/monitor.ts");
          var BooleanConverter = __webpack_require__("./src/main/js/converter/boolean.ts");
          var boolean_1 = __webpack_require__("./src/main/js/formatter/boolean.ts");
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          var monitor_value_1 = __webpack_require__("./src/main/js/model/monitor-value.ts");
          var view_model_1 = __webpack_require__("./src/main/js/model/view-model.ts");
          var monitor_binding_1 = __webpack_require__("./src/main/js/controller/monitor-binding.ts");
          var multi_log_1 = __webpack_require__("./src/main/js/controller/monitor/multi-log.ts");
          var single_log_1 = __webpack_require__("./src/main/js/controller/monitor/single-log.ts");
          var util_1 = __webpack_require__("./src/main/js/controller/binding-creators/util.ts");
          function create7(document2, target, params) {
            var initialValue = target.read();
            if (typeof initialValue !== "boolean") {
              return null;
            }
            var value = new monitor_value_1.MonitorValue(type_util_1.TypeUtil.getOrDefault(params.count, 1));
            var controller = value.totalCount === 1 ? new single_log_1.SingleLogMonitorController(document2, {
              viewModel: new view_model_1.ViewModel(),
              formatter: new boolean_1.BooleanFormatter(),
              value
            }) : new multi_log_1.MultiLogMonitorController(document2, {
              viewModel: new view_model_1.ViewModel(),
              formatter: new boolean_1.BooleanFormatter(),
              value
            });
            return new monitor_binding_1.MonitorBindingController(document2, {
              binding: new monitor_1.MonitorBinding({
                reader: BooleanConverter.fromMixed,
                target,
                ticker: util_1.createTicker(document2, params.interval),
                value
              }),
              controller,
              label: params.label || target.key
            });
          }
          exports2.create = create7;
        },
        "./src/main/js/controller/binding-creators/color-input.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.createWithObject = exports2.createWithNumber = exports2.createWithString = void 0;
          var input_1 = __webpack_require__("./src/main/js/binding/input.ts");
          var ColorConverter = __webpack_require__("./src/main/js/converter/color.ts");
          var color_1 = __webpack_require__("./src/main/js/formatter/color.ts");
          var color_2 = __webpack_require__("./src/main/js/model/color.ts");
          var input_value_1 = __webpack_require__("./src/main/js/model/input-value.ts");
          var view_model_1 = __webpack_require__("./src/main/js/model/view-model.ts");
          var NumberColorParser = __webpack_require__("./src/main/js/parser/number-color.ts");
          var StringColorParser = __webpack_require__("./src/main/js/parser/string-color.ts");
          var input_binding_1 = __webpack_require__("./src/main/js/controller/input-binding.ts");
          var color_swatch_text_1 = __webpack_require__("./src/main/js/controller/input/color-swatch-text.ts");
          function createWithString(document2, target, params) {
            var initialValue = target.read();
            if (typeof initialValue !== "string") {
              return null;
            }
            if ("input" in params && params.input === "string") {
              return null;
            }
            var notation = StringColorParser.getNotation(initialValue);
            if (!notation) {
              return null;
            }
            var converter = ColorConverter.fromString;
            var color = converter(initialValue);
            var value = new input_value_1.InputValue(color);
            var writer = ColorConverter.getStringifier(notation);
            return new input_binding_1.InputBindingController(document2, {
              binding: new input_1.InputBinding({
                reader: converter,
                target,
                value,
                writer
              }),
              controller: new color_swatch_text_1.ColorSwatchTextInputController(document2, {
                formatter: new color_1.ColorFormatter(writer),
                parser: StringColorParser.CompositeParser,
                supportsAlpha: StringColorParser.hasAlphaComponent(notation),
                value,
                viewModel: new view_model_1.ViewModel()
              }),
              label: params.label || target.key
            });
          }
          exports2.createWithString = createWithString;
          function createWithNumber(document2, target, params) {
            var initialValue = target.read();
            if (typeof initialValue !== "number") {
              return null;
            }
            if (!("input" in params)) {
              return null;
            }
            if (params.input !== "color" && params.input !== "color.rgb" && params.input !== "color.rgba") {
              return null;
            }
            var supportsAlpha = params.input === "color.rgba";
            var parser = supportsAlpha ? NumberColorParser.RgbaParser : NumberColorParser.RgbParser;
            var color = parser(initialValue);
            if (!color) {
              return null;
            }
            var formatter = supportsAlpha ? new color_1.ColorFormatter(ColorConverter.toHexRgbaString) : new color_1.ColorFormatter(ColorConverter.toHexRgbString);
            var reader = supportsAlpha ? ColorConverter.fromNumberToRgba : ColorConverter.fromNumberToRgb;
            var writer = supportsAlpha ? ColorConverter.toRgbaNumber : ColorConverter.toRgbNumber;
            var value = new input_value_1.InputValue(color);
            return new input_binding_1.InputBindingController(document2, {
              binding: new input_1.InputBinding({
                reader,
                target,
                value,
                writer
              }),
              controller: new color_swatch_text_1.ColorSwatchTextInputController(document2, {
                formatter,
                parser: StringColorParser.CompositeParser,
                supportsAlpha,
                value,
                viewModel: new view_model_1.ViewModel()
              }),
              label: params.label || target.key
            });
          }
          exports2.createWithNumber = createWithNumber;
          function createWithObject(document2, target, params) {
            var initialValue = target.read();
            if (!color_2.Color.isColorObject(initialValue)) {
              return null;
            }
            var color = color_2.Color.fromObject(initialValue);
            var supportsAlpha = color_2.Color.isRgbaColorObject(initialValue);
            var formatter = supportsAlpha ? new color_1.ColorFormatter(ColorConverter.toHexRgbaString) : new color_1.ColorFormatter(ColorConverter.toHexRgbString);
            var value = new input_value_1.InputValue(color);
            return new input_binding_1.InputBindingController(document2, {
              binding: new input_1.InputBinding({
                reader: ColorConverter.fromObject,
                target,
                value,
                writer: color_2.Color.toRgbaObject
              }),
              controller: new color_swatch_text_1.ColorSwatchTextInputController(document2, {
                viewModel: new view_model_1.ViewModel(),
                formatter,
                parser: StringColorParser.CompositeParser,
                supportsAlpha,
                value
              }),
              label: params.label || target.key
            });
          }
          exports2.createWithObject = createWithObject;
        },
        "./src/main/js/controller/binding-creators/input.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.create = void 0;
          var pane_error_1 = __webpack_require__("./src/main/js/misc/pane-error.ts");
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          var BooleanInputBindingControllerCreators = __webpack_require__("./src/main/js/controller/binding-creators/boolean-input.ts");
          var ColorInputBindingControllerCreators = __webpack_require__("./src/main/js/controller/binding-creators/color-input.ts");
          var NumberInputBindingControllerCreators = __webpack_require__("./src/main/js/controller/binding-creators/number-input.ts");
          var Point2dInputBindingControllerCreators = __webpack_require__("./src/main/js/controller/binding-creators/point-2d-input.ts");
          var StringInputBindingControllerCreators = __webpack_require__("./src/main/js/controller/binding-creators/string-input.ts");
          function create7(document2, target, params) {
            var initialValue = target.read();
            if (type_util_1.TypeUtil.isEmpty(initialValue)) {
              throw new pane_error_1.PaneError({
                context: {
                  key: target.key
                },
                type: "emptyvalue"
              });
            }
            var bc = [
              BooleanInputBindingControllerCreators.create,
              ColorInputBindingControllerCreators.createWithNumber,
              ColorInputBindingControllerCreators.createWithObject,
              ColorInputBindingControllerCreators.createWithString,
              NumberInputBindingControllerCreators.create,
              StringInputBindingControllerCreators.create,
              Point2dInputBindingControllerCreators.create
            ].reduce(function(result, createBindingController) {
              return result || createBindingController(document2, target, params);
            }, null);
            if (bc) {
              return bc;
            }
            throw new pane_error_1.PaneError({
              context: {
                key: target.key
              },
              type: "nomatchingcontroller"
            });
          }
          exports2.create = create7;
        },
        "./src/main/js/controller/binding-creators/monitor.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.create = void 0;
          var pane_error_1 = __webpack_require__("./src/main/js/misc/pane-error.ts");
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          var BooleanMonitorBindingControllerCreators = __webpack_require__("./src/main/js/controller/binding-creators/boolean-monitor.ts");
          var NumberMonitorBindingControllerCreators = __webpack_require__("./src/main/js/controller/binding-creators/number-monitor.ts");
          var StringMonitorBindingControllerCreators = __webpack_require__("./src/main/js/controller/binding-creators/string-monitor.ts");
          function create7(document2, target, params) {
            var initialValue = target.read();
            if (type_util_1.TypeUtil.isEmpty(initialValue)) {
              throw new pane_error_1.PaneError({
                context: {
                  key: target.key
                },
                type: "emptyvalue"
              });
            }
            var bc = [
              NumberMonitorBindingControllerCreators.create,
              StringMonitorBindingControllerCreators.create,
              BooleanMonitorBindingControllerCreators.create
            ].reduce(function(result, createBindingController) {
              return result || createBindingController(document2, target, params);
            }, null);
            if (bc) {
              return bc;
            }
            throw new pane_error_1.PaneError({
              context: {
                key: target.key
              },
              type: "nomatchingcontroller"
            });
          }
          exports2.create = create7;
        },
        "./src/main/js/controller/binding-creators/number-input.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.create = void 0;
          var input_1 = __webpack_require__("./src/main/js/binding/input.ts");
          var composite_1 = __webpack_require__("./src/main/js/constraint/composite.ts");
          var list_1 = __webpack_require__("./src/main/js/constraint/list.ts");
          var range_1 = __webpack_require__("./src/main/js/constraint/range.ts");
          var step_1 = __webpack_require__("./src/main/js/constraint/step.ts");
          var util_1 = __webpack_require__("./src/main/js/constraint/util.ts");
          var NumberConverter = __webpack_require__("./src/main/js/converter/number.ts");
          var number_1 = __webpack_require__("./src/main/js/formatter/number.ts");
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          var input_value_1 = __webpack_require__("./src/main/js/model/input-value.ts");
          var view_model_1 = __webpack_require__("./src/main/js/model/view-model.ts");
          var string_number_1 = __webpack_require__("./src/main/js/parser/string-number.ts");
          var input_binding_1 = __webpack_require__("./src/main/js/controller/input-binding.ts");
          var list_2 = __webpack_require__("./src/main/js/controller/input/list.ts");
          var number_text_1 = __webpack_require__("./src/main/js/controller/input/number-text.ts");
          var slider_text_1 = __webpack_require__("./src/main/js/controller/input/slider-text.ts");
          var UiUtil = __webpack_require__("./src/main/js/controller/ui-util.ts");
          function createConstraint(params) {
            var constraints = [];
            if ("step" in params && !type_util_1.TypeUtil.isEmpty(params.step)) {
              constraints.push(new step_1.StepConstraint({
                step: params.step
              }));
            }
            if ("max" in params && !type_util_1.TypeUtil.isEmpty(params.max) || "min" in params && !type_util_1.TypeUtil.isEmpty(params.min)) {
              constraints.push(new range_1.RangeConstraint({
                max: params.max,
                min: params.min
              }));
            }
            if ("options" in params && params.options !== void 0) {
              constraints.push(new list_1.ListConstraint({
                options: UiUtil.normalizeInputParamsOptions(params.options, NumberConverter.fromMixed)
              }));
            }
            return new composite_1.CompositeConstraint({
              constraints
            });
          }
          function createController(document2, value) {
            var c4 = value.constraint;
            if (c4 && util_1.ConstraintUtil.findConstraint(c4, list_1.ListConstraint)) {
              return new list_2.ListInputController(document2, {
                stringifyValue: NumberConverter.toString,
                value,
                viewModel: new view_model_1.ViewModel()
              });
            }
            if (c4 && util_1.ConstraintUtil.findConstraint(c4, range_1.RangeConstraint)) {
              return new slider_text_1.SliderTextInputController(document2, {
                formatter: new number_1.NumberFormatter(UiUtil.getSuitableDecimalDigits(value.constraint, value.rawValue)),
                parser: string_number_1.StringNumberParser,
                value,
                viewModel: new view_model_1.ViewModel()
              });
            }
            return new number_text_1.NumberTextInputController(document2, {
              formatter: new number_1.NumberFormatter(UiUtil.getSuitableDecimalDigits(value.constraint, value.rawValue)),
              parser: string_number_1.StringNumberParser,
              value,
              viewModel: new view_model_1.ViewModel()
            });
          }
          function create7(document2, target, params) {
            var initialValue = target.read();
            if (typeof initialValue !== "number") {
              return null;
            }
            var value = new input_value_1.InputValue(0, createConstraint(params));
            var binding = new input_1.InputBinding({
              reader: NumberConverter.fromMixed,
              target,
              value,
              writer: function(v2) {
                return v2;
              }
            });
            var controller = createController(document2, value);
            return new input_binding_1.InputBindingController(document2, {
              binding,
              controller,
              label: params.label || target.key
            });
          }
          exports2.create = create7;
        },
        "./src/main/js/controller/binding-creators/number-monitor.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.create = void 0;
          var monitor_1 = __webpack_require__("./src/main/js/binding/monitor.ts");
          var NumberConverter = __webpack_require__("./src/main/js/converter/number.ts");
          var number_1 = __webpack_require__("./src/main/js/formatter/number.ts");
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          var monitor_value_1 = __webpack_require__("./src/main/js/model/monitor-value.ts");
          var view_model_1 = __webpack_require__("./src/main/js/model/view-model.ts");
          var monitor_binding_1 = __webpack_require__("./src/main/js/controller/monitor-binding.ts");
          var graph_1 = __webpack_require__("./src/main/js/controller/monitor/graph.ts");
          var multi_log_1 = __webpack_require__("./src/main/js/controller/monitor/multi-log.ts");
          var single_log_1 = __webpack_require__("./src/main/js/controller/monitor/single-log.ts");
          var util_1 = __webpack_require__("./src/main/js/controller/binding-creators/util.ts");
          function createFormatter() {
            return new number_1.NumberFormatter(2);
          }
          function createTextMonitor(document2, target, params) {
            var value = new monitor_value_1.MonitorValue(type_util_1.TypeUtil.getOrDefault(params.count, 1));
            var controller = value.totalCount === 1 ? new single_log_1.SingleLogMonitorController(document2, {
              formatter: createFormatter(),
              value,
              viewModel: new view_model_1.ViewModel()
            }) : new multi_log_1.MultiLogMonitorController(document2, {
              formatter: createFormatter(),
              value,
              viewModel: new view_model_1.ViewModel()
            });
            return new monitor_binding_1.MonitorBindingController(document2, {
              binding: new monitor_1.MonitorBinding({
                reader: NumberConverter.fromMixed,
                target,
                ticker: util_1.createTicker(document2, params.interval),
                value
              }),
              controller,
              label: params.label || target.key
            });
          }
          function createGraphMonitor(document2, target, params) {
            var value = new monitor_value_1.MonitorValue(type_util_1.TypeUtil.getOrDefault(params.count, 64));
            var controller = new graph_1.GraphMonitorController(document2, {
              formatter: createFormatter(),
              maxValue: type_util_1.TypeUtil.getOrDefault("max" in params ? params.max : null, 100),
              minValue: type_util_1.TypeUtil.getOrDefault("min" in params ? params.min : null, 0),
              value,
              viewModel: new view_model_1.ViewModel()
            });
            return new monitor_binding_1.MonitorBindingController(document2, {
              binding: new monitor_1.MonitorBinding({
                reader: NumberConverter.fromMixed,
                target,
                ticker: util_1.createTicker(document2, params.interval),
                value
              }),
              controller,
              label: params.label || target.key
            });
          }
          function create7(document2, target, params) {
            var initialValue = target.read();
            if (typeof initialValue !== "number") {
              return null;
            }
            if ("view" in params && params.view === "graph") {
              return createGraphMonitor(document2, target, params);
            }
            return createTextMonitor(document2, target, params);
          }
          exports2.create = create7;
        },
        "./src/main/js/controller/binding-creators/point-2d-input.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.create = void 0;
          var input_1 = __webpack_require__("./src/main/js/binding/input.ts");
          var composite_1 = __webpack_require__("./src/main/js/constraint/composite.ts");
          var point_2d_1 = __webpack_require__("./src/main/js/constraint/point-2d.ts");
          var range_1 = __webpack_require__("./src/main/js/constraint/range.ts");
          var step_1 = __webpack_require__("./src/main/js/constraint/step.ts");
          var Point2dConverter = __webpack_require__("./src/main/js/converter/point-2d.ts");
          var number_1 = __webpack_require__("./src/main/js/formatter/number.ts");
          var pane_error_1 = __webpack_require__("./src/main/js/misc/pane-error.ts");
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          var input_value_1 = __webpack_require__("./src/main/js/model/input-value.ts");
          var view_model_1 = __webpack_require__("./src/main/js/model/view-model.ts");
          var any_point_2d_1 = __webpack_require__("./src/main/js/parser/any-point-2d.ts");
          var string_number_1 = __webpack_require__("./src/main/js/parser/string-number.ts");
          var input_binding_1 = __webpack_require__("./src/main/js/controller/input-binding.ts");
          var point_2d_pad_text_1 = __webpack_require__("./src/main/js/controller/input/point-2d-pad-text.ts");
          var UiUtil = __webpack_require__("./src/main/js/controller/ui-util.ts");
          function createDimensionConstraint(params) {
            if (!params) {
              return void 0;
            }
            var constraints = [];
            if (!type_util_1.TypeUtil.isEmpty(params.step)) {
              constraints.push(new step_1.StepConstraint({
                step: params.step
              }));
            }
            if (!type_util_1.TypeUtil.isEmpty(params.max) || !type_util_1.TypeUtil.isEmpty(params.min)) {
              constraints.push(new range_1.RangeConstraint({
                max: params.max,
                min: params.min
              }));
            }
            return new composite_1.CompositeConstraint({
              constraints
            });
          }
          function createConstraint(params) {
            return new point_2d_1.Point2dConstraint({
              x: createDimensionConstraint("x" in params ? params.x : void 0),
              y: createDimensionConstraint("y" in params ? params.y : void 0)
            });
          }
          function createController(document2, value, invertsY) {
            var c4 = value.constraint;
            if (!(c4 instanceof point_2d_1.Point2dConstraint)) {
              throw pane_error_1.PaneError.shouldNeverHappen();
            }
            return new point_2d_pad_text_1.Point2dPadTextInputController(document2, {
              invertsY,
              parser: string_number_1.StringNumberParser,
              value,
              viewModel: new view_model_1.ViewModel(),
              xFormatter: new number_1.NumberFormatter(UiUtil.getSuitableDecimalDigits(c4.xConstraint, value.rawValue.x)),
              yFormatter: new number_1.NumberFormatter(UiUtil.getSuitableDecimalDigits(c4.yConstraint, value.rawValue.y))
            });
          }
          function create7(document2, target, params) {
            var initialValue = target.read();
            var p3 = any_point_2d_1.AnyPoint2dParser(initialValue);
            if (!p3) {
              return null;
            }
            var value = new input_value_1.InputValue(p3, createConstraint(params));
            var binding = new input_1.InputBinding({
              reader: Point2dConverter.fromMixed,
              target,
              value,
              writer: function(v2) {
                return v2.toObject();
              }
            });
            var yParams = "y" in params ? params.y : void 0;
            var invertsY = yParams ? !!yParams.inverted : false;
            var controller = createController(document2, value, invertsY);
            return new input_binding_1.InputBindingController(document2, {
              binding,
              controller,
              label: params.label || target.key
            });
          }
          exports2.create = create7;
        },
        "./src/main/js/controller/binding-creators/string-input.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.create = void 0;
          var input_1 = __webpack_require__("./src/main/js/binding/input.ts");
          var composite_1 = __webpack_require__("./src/main/js/constraint/composite.ts");
          var list_1 = __webpack_require__("./src/main/js/constraint/list.ts");
          var util_1 = __webpack_require__("./src/main/js/constraint/util.ts");
          var StringConverter = __webpack_require__("./src/main/js/converter/string.ts");
          var string_1 = __webpack_require__("./src/main/js/formatter/string.ts");
          var input_value_1 = __webpack_require__("./src/main/js/model/input-value.ts");
          var view_model_1 = __webpack_require__("./src/main/js/model/view-model.ts");
          var input_binding_1 = __webpack_require__("./src/main/js/controller/input-binding.ts");
          var list_2 = __webpack_require__("./src/main/js/controller/input/list.ts");
          var text_1 = __webpack_require__("./src/main/js/controller/input/text.ts");
          var UiUtil = __webpack_require__("./src/main/js/controller/ui-util.ts");
          function createConstraint(params) {
            var constraints = [];
            if ("options" in params && params.options !== void 0) {
              constraints.push(new list_1.ListConstraint({
                options: UiUtil.normalizeInputParamsOptions(params.options, StringConverter.fromMixed)
              }));
            }
            return new composite_1.CompositeConstraint({
              constraints
            });
          }
          function createController(document2, value) {
            var c4 = value.constraint;
            if (c4 && util_1.ConstraintUtil.findConstraint(c4, list_1.ListConstraint)) {
              return new list_2.ListInputController(document2, {
                stringifyValue: StringConverter.toString,
                value,
                viewModel: new view_model_1.ViewModel()
              });
            }
            return new text_1.TextInputController(document2, {
              formatter: new string_1.StringFormatter(),
              parser: StringConverter.toString,
              value,
              viewModel: new view_model_1.ViewModel()
            });
          }
          function create7(document2, target, params) {
            var initialValue = target.read();
            if (typeof initialValue !== "string") {
              return null;
            }
            var value = new input_value_1.InputValue("", createConstraint(params));
            var binding = new input_1.InputBinding({
              reader: StringConverter.fromMixed,
              target,
              value,
              writer: function(v2) {
                return v2;
              }
            });
            var controller = createController(document2, value);
            return new input_binding_1.InputBindingController(document2, {
              binding,
              controller,
              label: params.label || target.key
            });
          }
          exports2.create = create7;
        },
        "./src/main/js/controller/binding-creators/string-monitor.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.create = void 0;
          var monitor_1 = __webpack_require__("./src/main/js/binding/monitor.ts");
          var StringConverter = __webpack_require__("./src/main/js/converter/string.ts");
          var string_1 = __webpack_require__("./src/main/js/formatter/string.ts");
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          var monitor_value_1 = __webpack_require__("./src/main/js/model/monitor-value.ts");
          var view_model_1 = __webpack_require__("./src/main/js/model/view-model.ts");
          var monitor_binding_1 = __webpack_require__("./src/main/js/controller/monitor-binding.ts");
          var multi_log_1 = __webpack_require__("./src/main/js/controller/monitor/multi-log.ts");
          var single_log_1 = __webpack_require__("./src/main/js/controller/monitor/single-log.ts");
          var util_1 = __webpack_require__("./src/main/js/controller/binding-creators/util.ts");
          function create7(document2, target, params) {
            var initialValue = target.read();
            if (typeof initialValue !== "string") {
              return null;
            }
            var value = new monitor_value_1.MonitorValue(type_util_1.TypeUtil.getOrDefault(params.count, 1));
            var multiline = value.totalCount > 1 || "multiline" in params && params.multiline;
            var controller = multiline ? new multi_log_1.MultiLogMonitorController(document2, {
              formatter: new string_1.StringFormatter(),
              value,
              viewModel: new view_model_1.ViewModel()
            }) : new single_log_1.SingleLogMonitorController(document2, {
              formatter: new string_1.StringFormatter(),
              value,
              viewModel: new view_model_1.ViewModel()
            });
            return new monitor_binding_1.MonitorBindingController(document2, {
              binding: new monitor_1.MonitorBinding({
                reader: StringConverter.fromMixed,
                target,
                ticker: util_1.createTicker(document2, params.interval),
                value
              }),
              controller,
              label: params.label || target.key
            });
          }
          exports2.create = create7;
        },
        "./src/main/js/controller/binding-creators/util.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.createTicker = void 0;
          var constants_1 = __webpack_require__("./src/main/js/misc/constants.ts");
          var interval_1 = __webpack_require__("./src/main/js/misc/ticker/interval.ts");
          var manual_1 = __webpack_require__("./src/main/js/misc/ticker/manual.ts");
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          function createTicker(document2, interval) {
            return interval === 0 ? new manual_1.ManualTicker() : new interval_1.IntervalTicker(document2, type_util_1.TypeUtil.getOrDefault(interval, constants_1.Constants.monitorDefaultInterval));
          }
          exports2.createTicker = createTicker;
        },
        "./src/main/js/controller/button.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.ButtonController = void 0;
          var button_1 = __webpack_require__("./src/main/js/model/button.ts");
          var button_2 = __webpack_require__("./src/main/js/view/button.ts");
          var ButtonController = function() {
            function ButtonController2(document2, config) {
              this.onButtonClick_ = this.onButtonClick_.bind(this);
              this.button = new button_1.Button(config.title);
              this.viewModel = config.viewModel;
              this.view = new button_2.ButtonView(document2, {
                button: this.button,
                model: this.viewModel
              });
              this.view.buttonElement.addEventListener("click", this.onButtonClick_);
            }
            ButtonController2.prototype.onButtonClick_ = function() {
              this.button.click();
            };
            return ButtonController2;
          }();
          exports2.ButtonController = ButtonController;
        },
        "./src/main/js/controller/container-util.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.computeExpandedFolderHeight = exports2.updateAllItemsPositions = void 0;
          var DomUtil = __webpack_require__("./src/main/js/misc/dom-util.ts");
          function updateAllItemsPositions(uiContainer) {
            var visibleItems = uiContainer.items.filter(function(uc) {
              return !uc.viewModel.hidden;
            });
            var firstVisibleItem = visibleItems[0];
            var lastVisibleItem = visibleItems[visibleItems.length - 1];
            uiContainer.items.forEach(function(uc) {
              var ps = [];
              if (uc === firstVisibleItem) {
                ps.push("first");
              }
              if (uc === lastVisibleItem) {
                ps.push("last");
              }
              uc.viewModel.positions = ps;
            });
          }
          exports2.updateAllItemsPositions = updateAllItemsPositions;
          function computeExpandedFolderHeight(folder, containerElement) {
            var height = 0;
            DomUtil.disableTransitionTemporarily(containerElement, function() {
              folder.expandedHeight = null;
              folder.temporaryExpanded = true;
              DomUtil.forceReflow(containerElement);
              height = containerElement.clientHeight;
              folder.temporaryExpanded = null;
              DomUtil.forceReflow(containerElement);
            });
            return height;
          }
          exports2.computeExpandedFolderHeight = computeExpandedFolderHeight;
        },
        "./src/main/js/controller/folder.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.FolderController = void 0;
          var DomUtil = __webpack_require__("./src/main/js/misc/dom-util.ts");
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          var folder_1 = __webpack_require__("./src/main/js/model/folder.ts");
          var ui_container_1 = __webpack_require__("./src/main/js/model/ui-container.ts");
          var folder_2 = __webpack_require__("./src/main/js/view/folder.ts");
          var ContainerUtil = __webpack_require__("./src/main/js/controller/container-util.ts");
          var FolderController = function() {
            function FolderController2(document2, config) {
              this.onContainerTransitionEnd_ = this.onContainerTransitionEnd_.bind(this);
              this.onFolderBeforeChange_ = this.onFolderBeforeChange_.bind(this);
              this.onTitleClick_ = this.onTitleClick_.bind(this);
              this.onUiContainerAdd_ = this.onUiContainerAdd_.bind(this);
              this.onUiContainerItemLayout_ = this.onUiContainerItemLayout_.bind(this);
              this.onUiContainerRemove_ = this.onUiContainerRemove_.bind(this);
              this.viewModel = config.viewModel;
              this.folder = new folder_1.Folder(config.title, type_util_1.TypeUtil.getOrDefault(config.expanded, true));
              this.folder.emitter.on("beforechange", this.onFolderBeforeChange_);
              this.ucList_ = new ui_container_1.UiContainer();
              this.ucList_.emitter.on("add", this.onUiContainerAdd_);
              this.ucList_.emitter.on("itemlayout", this.onUiContainerItemLayout_);
              this.ucList_.emitter.on("remove", this.onUiContainerRemove_);
              this.doc_ = document2;
              this.view = new folder_2.FolderView(this.doc_, {
                folder: this.folder,
                model: this.viewModel
              });
              this.view.titleElement.addEventListener("click", this.onTitleClick_);
              this.view.containerElement.addEventListener("transitionend", this.onContainerTransitionEnd_);
            }
            Object.defineProperty(FolderController2.prototype, "document", {
              get: function() {
                return this.doc_;
              },
              enumerable: false,
              configurable: true
            });
            Object.defineProperty(FolderController2.prototype, "uiContainer", {
              get: function() {
                return this.ucList_;
              },
              enumerable: false,
              configurable: true
            });
            FolderController2.prototype.onFolderBeforeChange_ = function(ev) {
              if (ev.propertyName !== "expanded") {
                return;
              }
              if (type_util_1.TypeUtil.isEmpty(this.folder.expandedHeight)) {
                this.folder.expandedHeight = ContainerUtil.computeExpandedFolderHeight(this.folder, this.view.containerElement);
              }
              this.folder.shouldFixHeight = true;
              DomUtil.forceReflow(this.view.containerElement);
            };
            FolderController2.prototype.onTitleClick_ = function() {
              this.folder.expanded = !this.folder.expanded;
            };
            FolderController2.prototype.applyUiContainerChange_ = function() {
              ContainerUtil.updateAllItemsPositions(this.uiContainer);
            };
            FolderController2.prototype.onUiContainerAdd_ = function(ev) {
              DomUtil.insertElementAt(this.view.containerElement, ev.uiController.view.element, ev.index);
              this.applyUiContainerChange_();
            };
            FolderController2.prototype.onUiContainerRemove_ = function(_2) {
              this.applyUiContainerChange_();
            };
            FolderController2.prototype.onUiContainerItemLayout_ = function(_2) {
              this.applyUiContainerChange_();
            };
            FolderController2.prototype.onContainerTransitionEnd_ = function(ev) {
              if (ev.propertyName !== "height") {
                return;
              }
              this.folder.shouldFixHeight = false;
              this.folder.expandedHeight = null;
            };
            return FolderController2;
          }();
          exports2.FolderController = FolderController;
        },
        "./src/main/js/controller/input-binding.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.InputBindingController = void 0;
          var labeled_1 = __webpack_require__("./src/main/js/view/labeled.ts");
          var InputBindingController = function() {
            function InputBindingController2(document2, config) {
              this.binding = config.binding;
              this.controller = config.controller;
              this.view = new labeled_1.LabeledView(document2, {
                model: this.controller.viewModel,
                label: config.label,
                view: this.controller.view
              });
            }
            Object.defineProperty(InputBindingController2.prototype, "viewModel", {
              get: function() {
                return this.controller.viewModel;
              },
              enumerable: false,
              configurable: true
            });
            return InputBindingController2;
          }();
          exports2.InputBindingController = InputBindingController;
        },
        "./src/main/js/controller/input/a-palette.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.APaletteInputController = void 0;
          var pointer_handler_1 = __webpack_require__("./src/main/js/misc/pointer-handler.ts");
          var color_1 = __webpack_require__("./src/main/js/model/color.ts");
          var a_palette_1 = __webpack_require__("./src/main/js/view/input/a-palette.ts");
          var UiUtil = __webpack_require__("./src/main/js/controller/ui-util.ts");
          var APaletteInputController = function() {
            function APaletteInputController2(document2, config) {
              this.onKeyDown_ = this.onKeyDown_.bind(this);
              this.onPointerDown_ = this.onPointerDown_.bind(this);
              this.onPointerMove_ = this.onPointerMove_.bind(this);
              this.onPointerUp_ = this.onPointerUp_.bind(this);
              this.value = config.value;
              this.viewModel = config.viewModel;
              this.view = new a_palette_1.APaletteInputView(document2, {
                model: this.viewModel,
                value: this.value
              });
              this.ptHandler_ = new pointer_handler_1.PointerHandler(document2, this.view.element);
              this.ptHandler_.emitter.on("down", this.onPointerDown_);
              this.ptHandler_.emitter.on("move", this.onPointerMove_);
              this.ptHandler_.emitter.on("up", this.onPointerUp_);
              this.view.element.addEventListener("keydown", this.onKeyDown_);
            }
            APaletteInputController2.prototype.handlePointerEvent_ = function(d3) {
              var alpha = d3.px;
              var c4 = this.value.rawValue;
              var _a6 = c4.getComponents("hsv"), h3 = _a6[0], s4 = _a6[1], v2 = _a6[2];
              this.value.rawValue = new color_1.Color([h3, s4, v2, alpha], "hsv");
              this.view.update();
            };
            APaletteInputController2.prototype.onPointerDown_ = function(ev) {
              this.handlePointerEvent_(ev.data);
            };
            APaletteInputController2.prototype.onPointerMove_ = function(ev) {
              this.handlePointerEvent_(ev.data);
            };
            APaletteInputController2.prototype.onPointerUp_ = function(ev) {
              this.handlePointerEvent_(ev.data);
            };
            APaletteInputController2.prototype.onKeyDown_ = function(ev) {
              var step = UiUtil.getStepForKey(UiUtil.getBaseStepForColor(true), UiUtil.getHorizontalStepKeys(ev));
              var c4 = this.value.rawValue;
              var _a6 = c4.getComponents("hsv"), h3 = _a6[0], s4 = _a6[1], v2 = _a6[2], a3 = _a6[3];
              this.value.rawValue = new color_1.Color([h3, s4, v2, a3 + step], "hsv");
            };
            return APaletteInputController2;
          }();
          exports2.APaletteInputController = APaletteInputController;
        },
        "./src/main/js/controller/input/checkbox.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.CheckboxInputController = void 0;
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          var checkbox_1 = __webpack_require__("./src/main/js/view/input/checkbox.ts");
          var CheckboxInputController = function() {
            function CheckboxInputController2(document2, config) {
              this.onInputChange_ = this.onInputChange_.bind(this);
              this.value = config.value;
              this.viewModel = config.viewModel;
              this.view = new checkbox_1.CheckboxInputView(document2, {
                model: this.viewModel,
                value: this.value
              });
              this.view.inputElement.addEventListener("change", this.onInputChange_);
            }
            CheckboxInputController2.prototype.onInputChange_ = function(e5) {
              var inputElem = type_util_1.TypeUtil.forceCast(e5.currentTarget);
              this.value.rawValue = inputElem.checked;
              this.view.update();
            };
            return CheckboxInputController2;
          }();
          exports2.CheckboxInputController = CheckboxInputController;
        },
        "./src/main/js/controller/input/color-component-texts.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.ColorComponentTextsInputController = void 0;
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          var color_1 = __webpack_require__("./src/main/js/model/color.ts");
          var color_component_texts_1 = __webpack_require__("./src/main/js/view/input/color-component-texts.ts");
          var UiUtil = __webpack_require__("./src/main/js/controller/ui-util.ts");
          var ColorComponentTextsInputController = function() {
            function ColorComponentTextsInputController2(document2, config) {
              var _this = this;
              this.onModeSelectChange_ = this.onModeSelectChange_.bind(this);
              this.onInputChange_ = this.onInputChange_.bind(this);
              this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);
              this.parser_ = config.parser;
              this.pickedColor = config.pickedColor;
              this.viewModel = config.viewModel;
              this.view = new color_component_texts_1.ColorComponentTextsInputView(document2, {
                model: this.viewModel,
                pickedColor: this.pickedColor
              });
              this.view.inputElements.forEach(function(inputElem) {
                inputElem.addEventListener("change", _this.onInputChange_);
                inputElem.addEventListener("keydown", _this.onInputKeyDown_);
              });
              this.view.modeSelectElement.addEventListener("change", this.onModeSelectChange_);
            }
            Object.defineProperty(ColorComponentTextsInputController2.prototype, "value", {
              get: function() {
                return this.pickedColor.value;
              },
              enumerable: false,
              configurable: true
            });
            ColorComponentTextsInputController2.prototype.findIndexOfInputElem_ = function(inputElem) {
              var inputElems = this.view.inputElements;
              for (var i4 = 0; i4 < inputElems.length; i4++) {
                if (inputElems[i4] === inputElem) {
                  return i4;
                }
              }
              return null;
            };
            ColorComponentTextsInputController2.prototype.updateComponent_ = function(index, newValue) {
              var mode = this.pickedColor.mode;
              var comps = this.value.rawValue.getComponents(mode);
              var newComps = comps.map(function(comp, i4) {
                return i4 === index ? newValue : comp;
              });
              this.value.rawValue = new color_1.Color(newComps, mode);
              this.view.update();
            };
            ColorComponentTextsInputController2.prototype.onInputChange_ = function(e5) {
              var inputElem = type_util_1.TypeUtil.forceCast(e5.currentTarget);
              var parsedValue = this.parser_(inputElem.value);
              if (type_util_1.TypeUtil.isEmpty(parsedValue)) {
                return;
              }
              var compIndex = this.findIndexOfInputElem_(inputElem);
              if (type_util_1.TypeUtil.isEmpty(compIndex)) {
                return;
              }
              this.updateComponent_(compIndex, parsedValue);
            };
            ColorComponentTextsInputController2.prototype.onInputKeyDown_ = function(e5) {
              var compIndex = this.findIndexOfInputElem_(e5.currentTarget);
              var step = UiUtil.getStepForKey(UiUtil.getBaseStepForColor(compIndex === 3), UiUtil.getVerticalStepKeys(e5));
              if (step === 0) {
                return;
              }
              var inputElem = type_util_1.TypeUtil.forceCast(e5.currentTarget);
              var parsedValue = this.parser_(inputElem.value);
              if (type_util_1.TypeUtil.isEmpty(parsedValue)) {
                return;
              }
              if (type_util_1.TypeUtil.isEmpty(compIndex)) {
                return;
              }
              this.updateComponent_(compIndex, parsedValue + step);
            };
            ColorComponentTextsInputController2.prototype.onModeSelectChange_ = function(ev) {
              var selectElem = ev.currentTarget;
              this.pickedColor.mode = selectElem.value;
            };
            return ColorComponentTextsInputController2;
          }();
          exports2.ColorComponentTextsInputController = ColorComponentTextsInputController;
        },
        "./src/main/js/controller/input/color-picker.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.ColorPickerInputController = void 0;
          var number_1 = __webpack_require__("./src/main/js/formatter/number.ts");
          var DomUtil = __webpack_require__("./src/main/js/misc/dom-util.ts");
          var color_1 = __webpack_require__("./src/main/js/model/color.ts");
          var foldable_1 = __webpack_require__("./src/main/js/model/foldable.ts");
          var input_value_1 = __webpack_require__("./src/main/js/model/input-value.ts");
          var ModelSync = __webpack_require__("./src/main/js/model/model-sync.ts");
          var string_number_1 = __webpack_require__("./src/main/js/parser/string-number.ts");
          var color_picker_1 = __webpack_require__("./src/main/js/view/input/color-picker.ts");
          var a_palette_1 = __webpack_require__("./src/main/js/controller/input/a-palette.ts");
          var color_component_texts_1 = __webpack_require__("./src/main/js/controller/input/color-component-texts.ts");
          var h_palette_1 = __webpack_require__("./src/main/js/controller/input/h-palette.ts");
          var number_text_1 = __webpack_require__("./src/main/js/controller/input/number-text.ts");
          var sv_palette_1 = __webpack_require__("./src/main/js/controller/input/sv-palette.ts");
          var ColorPickerInputController = function() {
            function ColorPickerInputController2(document2, config) {
              var _this = this;
              this.triggerElement = null;
              this.onFocusableElementBlur_ = this.onFocusableElementBlur_.bind(this);
              this.onKeyDown_ = this.onKeyDown_.bind(this);
              this.pickedColor = config.pickedColor;
              this.foldable = new foldable_1.Foldable();
              this.viewModel = config.viewModel;
              this.hPaletteIc_ = new h_palette_1.HPaletteInputController(document2, {
                value: this.pickedColor.value,
                viewModel: this.viewModel
              });
              this.svPaletteIc_ = new sv_palette_1.SvPaletteInputController(document2, {
                value: this.pickedColor.value,
                viewModel: this.viewModel
              });
              this.alphaIcs_ = config.supportsAlpha ? {
                palette: new a_palette_1.APaletteInputController(document2, {
                  value: this.pickedColor.value,
                  viewModel: this.viewModel
                }),
                text: new number_text_1.NumberTextInputController(document2, {
                  formatter: new number_1.NumberFormatter(2),
                  parser: string_number_1.StringNumberParser,
                  step: 0.1,
                  value: new input_value_1.InputValue(0),
                  viewModel: this.viewModel
                })
              } : null;
              if (this.alphaIcs_) {
                ModelSync.connect({
                  primary: {
                    apply: function(from, to) {
                      to.rawValue = from.value.rawValue.getComponents()[3];
                    },
                    emitter: function(m2) {
                      return m2.value.emitter;
                    },
                    value: this.pickedColor
                  },
                  secondary: {
                    apply: function(from, to) {
                      var comps = to.value.rawValue.getComponents();
                      comps[3] = from.rawValue;
                      to.value.rawValue = new color_1.Color(comps, to.value.rawValue.mode);
                    },
                    emitter: function(m2) {
                      return m2.emitter;
                    },
                    value: this.alphaIcs_.text.value
                  }
                });
              }
              this.compTextsIc_ = new color_component_texts_1.ColorComponentTextsInputController(document2, {
                parser: string_number_1.StringNumberParser,
                pickedColor: this.pickedColor,
                viewModel: this.viewModel
              });
              this.view = new color_picker_1.ColorPickerInputView(document2, {
                alphaInputViews: this.alphaIcs_ ? {
                  palette: this.alphaIcs_.palette.view,
                  text: this.alphaIcs_.text.view
                } : null,
                componentTextsView: this.compTextsIc_.view,
                foldable: this.foldable,
                hPaletteInputView: this.hPaletteIc_.view,
                model: this.viewModel,
                pickedColor: this.pickedColor,
                supportsAlpha: config.supportsAlpha,
                svPaletteInputView: this.svPaletteIc_.view
              });
              this.view.element.addEventListener("keydown", this.onKeyDown_);
              this.view.allFocusableElements.forEach(function(elem) {
                elem.addEventListener("blur", _this.onFocusableElementBlur_);
              });
            }
            Object.defineProperty(ColorPickerInputController2.prototype, "value", {
              get: function() {
                return this.pickedColor.value;
              },
              enumerable: false,
              configurable: true
            });
            ColorPickerInputController2.prototype.onFocusableElementBlur_ = function(ev) {
              var elem = this.view.element;
              var nextTarget = DomUtil.findNextTarget(ev);
              if (nextTarget && elem.contains(nextTarget)) {
                return;
              }
              if (nextTarget && nextTarget === this.triggerElement && !DomUtil.supportsTouch(elem.ownerDocument)) {
                return;
              }
              this.foldable.expanded = false;
            };
            ColorPickerInputController2.prototype.onKeyDown_ = function(ev) {
              if (ev.keyCode === 27) {
                this.foldable.expanded = false;
              }
            };
            return ColorPickerInputController2;
          }();
          exports2.ColorPickerInputController = ColorPickerInputController;
        },
        "./src/main/js/controller/input/color-swatch-text.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.ColorSwatchTextInputController = void 0;
          var color_swatch_text_1 = __webpack_require__("./src/main/js/view/input/color-swatch-text.ts");
          var color_swatch_1 = __webpack_require__("./src/main/js/controller/input/color-swatch.ts");
          var text_1 = __webpack_require__("./src/main/js/controller/input/text.ts");
          var ColorSwatchTextInputController = function() {
            function ColorSwatchTextInputController2(document2, config) {
              this.value = config.value;
              this.viewModel = config.viewModel;
              this.swatchIc_ = new color_swatch_1.ColorSwatchInputController(document2, {
                supportsAlpha: config.supportsAlpha,
                value: this.value,
                viewModel: this.viewModel
              });
              this.textIc_ = new text_1.TextInputController(document2, {
                formatter: config.formatter,
                parser: config.parser,
                value: this.value,
                viewModel: this.viewModel
              });
              this.view = new color_swatch_text_1.ColorSwatchTextInputView(document2, {
                swatchInputView: this.swatchIc_.view,
                textInputView: this.textIc_.view,
                model: this.viewModel
              });
            }
            return ColorSwatchTextInputController2;
          }();
          exports2.ColorSwatchTextInputController = ColorSwatchTextInputController;
        },
        "./src/main/js/controller/input/color-swatch.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.ColorSwatchInputController = void 0;
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          var picked_color_1 = __webpack_require__("./src/main/js/model/picked-color.ts");
          var color_swatch_1 = __webpack_require__("./src/main/js/view/input/color-swatch.ts");
          var color_picker_1 = __webpack_require__("./src/main/js/controller/input/color-picker.ts");
          var ColorSwatchInputController = function() {
            function ColorSwatchInputController2(document2, config) {
              this.onButtonBlur_ = this.onButtonBlur_.bind(this);
              this.onButtonClick_ = this.onButtonClick_.bind(this);
              this.value = config.value;
              this.viewModel = config.viewModel;
              this.pickerIc_ = new color_picker_1.ColorPickerInputController(document2, {
                pickedColor: new picked_color_1.PickedColor(this.value),
                supportsAlpha: config.supportsAlpha,
                viewModel: this.viewModel
              });
              this.view = new color_swatch_1.ColorSwatchInputView(document2, {
                model: this.viewModel,
                pickerInputView: this.pickerIc_.view,
                value: this.value
              });
              this.view.buttonElement.addEventListener("blur", this.onButtonBlur_);
              this.view.buttonElement.addEventListener("click", this.onButtonClick_);
              this.pickerIc_.triggerElement = this.view.buttonElement;
            }
            ColorSwatchInputController2.prototype.onButtonBlur_ = function(e5) {
              var elem = this.view.element;
              var nextTarget = type_util_1.TypeUtil.forceCast(e5.relatedTarget);
              if (!nextTarget || !elem.contains(nextTarget)) {
                this.pickerIc_.foldable.expanded = false;
              }
            };
            ColorSwatchInputController2.prototype.onButtonClick_ = function() {
              this.pickerIc_.foldable.expanded = !this.pickerIc_.foldable.expanded;
              if (this.pickerIc_.foldable.expanded) {
                this.pickerIc_.view.allFocusableElements[0].focus();
              }
            };
            return ColorSwatchInputController2;
          }();
          exports2.ColorSwatchInputController = ColorSwatchInputController;
        },
        "./src/main/js/controller/input/h-palette.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.HPaletteInputController = void 0;
          var number_util_1 = __webpack_require__("./src/main/js/misc/number-util.ts");
          var pointer_handler_1 = __webpack_require__("./src/main/js/misc/pointer-handler.ts");
          var color_1 = __webpack_require__("./src/main/js/model/color.ts");
          var h_palette_1 = __webpack_require__("./src/main/js/view/input/h-palette.ts");
          var UiUtil = __webpack_require__("./src/main/js/controller/ui-util.ts");
          var HPaletteInputController = function() {
            function HPaletteInputController2(document2, config) {
              this.onKeyDown_ = this.onKeyDown_.bind(this);
              this.onPointerDown_ = this.onPointerDown_.bind(this);
              this.onPointerMove_ = this.onPointerMove_.bind(this);
              this.onPointerUp_ = this.onPointerUp_.bind(this);
              this.value = config.value;
              this.viewModel = config.viewModel;
              this.view = new h_palette_1.HPaletteInputView(document2, {
                model: this.viewModel,
                value: this.value
              });
              this.ptHandler_ = new pointer_handler_1.PointerHandler(document2, this.view.element);
              this.ptHandler_.emitter.on("down", this.onPointerDown_);
              this.ptHandler_.emitter.on("move", this.onPointerMove_);
              this.ptHandler_.emitter.on("up", this.onPointerUp_);
              this.view.element.addEventListener("keydown", this.onKeyDown_);
            }
            HPaletteInputController2.prototype.handlePointerEvent_ = function(d3) {
              var hue = number_util_1.NumberUtil.map(d3.px, 0, 1, 0, 360);
              var c4 = this.value.rawValue;
              var _a6 = c4.getComponents("hsv"), s4 = _a6[1], v2 = _a6[2], a3 = _a6[3];
              this.value.rawValue = new color_1.Color([hue, s4, v2, a3], "hsv");
              this.view.update();
            };
            HPaletteInputController2.prototype.onPointerDown_ = function(ev) {
              this.handlePointerEvent_(ev.data);
            };
            HPaletteInputController2.prototype.onPointerMove_ = function(ev) {
              this.handlePointerEvent_(ev.data);
            };
            HPaletteInputController2.prototype.onPointerUp_ = function(ev) {
              this.handlePointerEvent_(ev.data);
            };
            HPaletteInputController2.prototype.onKeyDown_ = function(ev) {
              var step = UiUtil.getStepForKey(UiUtil.getBaseStepForColor(false), UiUtil.getHorizontalStepKeys(ev));
              var c4 = this.value.rawValue;
              var _a6 = c4.getComponents("hsv"), h3 = _a6[0], s4 = _a6[1], v2 = _a6[2], a3 = _a6[3];
              this.value.rawValue = new color_1.Color([h3 + step, s4, v2, a3], "hsv");
            };
            return HPaletteInputController2;
          }();
          exports2.HPaletteInputController = HPaletteInputController;
        },
        "./src/main/js/controller/input/list.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.ListInputController = void 0;
          var list_1 = __webpack_require__("./src/main/js/constraint/list.ts");
          var util_1 = __webpack_require__("./src/main/js/constraint/util.ts");
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          var list_2 = __webpack_require__("./src/main/js/view/input/list.ts");
          function findListItems(value) {
            var c4 = value.constraint ? util_1.ConstraintUtil.findConstraint(value.constraint, list_1.ListConstraint) : null;
            if (!c4) {
              return null;
            }
            return c4.options;
          }
          var ListInputController = function() {
            function ListInputController2(document2, config) {
              this.onSelectChange_ = this.onSelectChange_.bind(this);
              this.value_ = config.value;
              this.listItems_ = findListItems(this.value_) || [];
              this.viewModel = config.viewModel;
              this.view_ = new list_2.ListInputView(document2, {
                model: this.viewModel,
                options: this.listItems_,
                stringifyValue: config.stringifyValue,
                value: this.value_
              });
              this.view_.selectElement.addEventListener("change", this.onSelectChange_);
            }
            Object.defineProperty(ListInputController2.prototype, "value", {
              get: function() {
                return this.value_;
              },
              enumerable: false,
              configurable: true
            });
            Object.defineProperty(ListInputController2.prototype, "view", {
              get: function() {
                return this.view_;
              },
              enumerable: false,
              configurable: true
            });
            ListInputController2.prototype.onSelectChange_ = function(e5) {
              var selectElem = type_util_1.TypeUtil.forceCast(e5.currentTarget);
              var optElem = selectElem.selectedOptions.item(0);
              if (!optElem) {
                return;
              }
              var itemIndex = Number(optElem.dataset.index);
              this.value_.rawValue = this.listItems_[itemIndex].value;
              this.view_.update();
            };
            return ListInputController2;
          }();
          exports2.ListInputController = ListInputController;
        },
        "./src/main/js/controller/input/number-text.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          var __extends = this && this.__extends || function() {
            var extendStatics = function(d3, b3) {
              extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b4) {
                d4.__proto__ = b4;
              } || function(d4, b4) {
                for (var p3 in b4)
                  if (b4.hasOwnProperty(p3))
                    d4[p3] = b4[p3];
              };
              return extendStatics(d3, b3);
            };
            return function(d3, b3) {
              extendStatics(d3, b3);
              function __() {
                this.constructor = d3;
              }
              d3.prototype = b3 === null ? Object.create(b3) : (__.prototype = b3.prototype, new __());
            };
          }();
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.NumberTextInputController = void 0;
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          var UiUtil = __webpack_require__("./src/main/js/controller/ui-util.ts");
          var text_1 = __webpack_require__("./src/main/js/controller/input/text.ts");
          var NumberTextInputController = function(_super) {
            __extends(NumberTextInputController2, _super);
            function NumberTextInputController2(document2, config) {
              var _this = _super.call(this, document2, config) || this;
              _this.onInputKeyDown_ = _this.onInputKeyDown_.bind(_this);
              _this.step_ = type_util_1.TypeUtil.getOrDefault(config.step, UiUtil.getStepForTextInput(_this.value.constraint));
              _this.view.inputElement.addEventListener("keydown", _this.onInputKeyDown_);
              return _this;
            }
            NumberTextInputController2.prototype.onInputKeyDown_ = function(e5) {
              var step = UiUtil.getStepForKey(this.step_, UiUtil.getVerticalStepKeys(e5));
              if (step !== 0) {
                this.value.rawValue += step;
                this.view.update();
              }
            };
            return NumberTextInputController2;
          }(text_1.TextInputController);
          exports2.NumberTextInputController = NumberTextInputController;
        },
        "./src/main/js/controller/input/point-2d-pad-text.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.Point2dPadTextInputController = void 0;
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          var point_2d_pad_text_1 = __webpack_require__("./src/main/js/view/input/point-2d-pad-text.ts");
          var point_2d_pad_1 = __webpack_require__("./src/main/js/controller/input/point-2d-pad.ts");
          var point_2d_text_1 = __webpack_require__("./src/main/js/controller/input/point-2d-text.ts");
          var Point2dPadTextInputController = function() {
            function Point2dPadTextInputController2(document2, config) {
              this.onPadButtonBlur_ = this.onPadButtonBlur_.bind(this);
              this.onPadButtonClick_ = this.onPadButtonClick_.bind(this);
              this.value = config.value;
              this.viewModel = config.viewModel;
              this.padIc_ = new point_2d_pad_1.Point2dPadInputController(document2, {
                invertsY: config.invertsY,
                value: this.value,
                viewModel: this.viewModel
              });
              this.textIc_ = new point_2d_text_1.Point2dTextInputController(document2, {
                parser: config.parser,
                value: this.value,
                viewModel: this.viewModel,
                xFormatter: config.xFormatter,
                yFormatter: config.yFormatter
              });
              this.view = new point_2d_pad_text_1.Point2dPadTextInputView(document2, {
                model: this.viewModel,
                padInputView: this.padIc_.view,
                textInputView: this.textIc_.view
              });
              this.view.padButtonElement.addEventListener("blur", this.onPadButtonBlur_);
              this.view.padButtonElement.addEventListener("click", this.onPadButtonClick_);
              this.padIc_.triggerElement = this.view.padButtonElement;
            }
            Point2dPadTextInputController2.prototype.onPadButtonBlur_ = function(e5) {
              var elem = this.view.element;
              var nextTarget = type_util_1.TypeUtil.forceCast(e5.relatedTarget);
              if (!nextTarget || !elem.contains(nextTarget)) {
                this.padIc_.foldable.expanded = false;
              }
            };
            Point2dPadTextInputController2.prototype.onPadButtonClick_ = function() {
              this.padIc_.foldable.expanded = !this.padIc_.foldable.expanded;
              if (this.padIc_.foldable.expanded) {
                this.padIc_.view.allFocusableElements[0].focus();
              }
            };
            return Point2dPadTextInputController2;
          }();
          exports2.Point2dPadTextInputController = Point2dPadTextInputController;
        },
        "./src/main/js/controller/input/point-2d-pad.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.Point2dPadInputController = void 0;
          var point_2d_1 = __webpack_require__("./src/main/js/constraint/point-2d.ts");
          var DomUtil = __webpack_require__("./src/main/js/misc/dom-util.ts");
          var number_util_1 = __webpack_require__("./src/main/js/misc/number-util.ts");
          var pointer_handler_1 = __webpack_require__("./src/main/js/misc/pointer-handler.ts");
          var foldable_1 = __webpack_require__("./src/main/js/model/foldable.ts");
          var point_2d_2 = __webpack_require__("./src/main/js/model/point-2d.ts");
          var point_2d_pad_1 = __webpack_require__("./src/main/js/view/input/point-2d-pad.ts");
          var UiUtil = __webpack_require__("./src/main/js/controller/ui-util.ts");
          var Point2dPadInputController = function() {
            function Point2dPadInputController2(document2, config) {
              var _this = this;
              this.triggerElement = null;
              this.onFocusableElementBlur_ = this.onFocusableElementBlur_.bind(this);
              this.onKeyDown_ = this.onKeyDown_.bind(this);
              this.onPadKeyDown_ = this.onPadKeyDown_.bind(this);
              this.onPointerDown_ = this.onPointerDown_.bind(this);
              this.onPointerMove_ = this.onPointerMove_.bind(this);
              this.onPointerUp_ = this.onPointerUp_.bind(this);
              this.value = config.value;
              this.foldable = new foldable_1.Foldable();
              this.maxValue_ = UiUtil.getSuitableMaxValueForPoint2dPad(this.value.constraint, this.value.rawValue);
              this.invertsY_ = config.invertsY;
              var c4 = this.value.constraint;
              this.xStep_ = UiUtil.getStepForTextInput(c4 instanceof point_2d_1.Point2dConstraint ? c4.xConstraint : void 0);
              this.yStep_ = UiUtil.getStepForTextInput(c4 instanceof point_2d_1.Point2dConstraint ? c4.yConstraint : void 0);
              this.viewModel = config.viewModel;
              this.view = new point_2d_pad_1.Point2dPadInputView(document2, {
                foldable: this.foldable,
                invertsY: this.invertsY_,
                maxValue: this.maxValue_,
                model: this.viewModel,
                value: this.value
              });
              this.ptHandler_ = new pointer_handler_1.PointerHandler(document2, this.view.padElement);
              this.ptHandler_.emitter.on("down", this.onPointerDown_);
              this.ptHandler_.emitter.on("move", this.onPointerMove_);
              this.ptHandler_.emitter.on("up", this.onPointerUp_);
              this.view.padElement.addEventListener("keydown", this.onPadKeyDown_);
              this.view.element.addEventListener("keydown", this.onKeyDown_);
              this.view.allFocusableElements.forEach(function(elem) {
                elem.addEventListener("blur", _this.onFocusableElementBlur_);
              });
            }
            Point2dPadInputController2.prototype.handlePointerEvent_ = function(d3) {
              var max4 = this.maxValue_;
              var px = number_util_1.NumberUtil.map(d3.px, 0, 1, -max4, +max4);
              var py = number_util_1.NumberUtil.map(this.invertsY_ ? 1 - d3.py : d3.py, 0, 1, -max4, +max4);
              this.value.rawValue = new point_2d_2.Point2d(px, py);
              this.view.update();
            };
            Point2dPadInputController2.prototype.onPointerDown_ = function(ev) {
              this.handlePointerEvent_(ev.data);
            };
            Point2dPadInputController2.prototype.onPointerMove_ = function(ev) {
              this.handlePointerEvent_(ev.data);
            };
            Point2dPadInputController2.prototype.onPointerUp_ = function(ev) {
              this.handlePointerEvent_(ev.data);
            };
            Point2dPadInputController2.prototype.onPadKeyDown_ = function(ev) {
              if (UiUtil.isArrowKey(ev.keyCode)) {
                ev.preventDefault();
              }
              this.value.rawValue = new point_2d_2.Point2d(this.value.rawValue.x + UiUtil.getStepForKey(this.xStep_, UiUtil.getHorizontalStepKeys(ev)), this.value.rawValue.y + UiUtil.getStepForKey(this.yStep_, UiUtil.getVerticalStepKeys(ev)) * (this.invertsY_ ? 1 : -1));
            };
            Point2dPadInputController2.prototype.onFocusableElementBlur_ = function(ev) {
              var elem = this.view.element;
              var nextTarget = DomUtil.findNextTarget(ev);
              if (nextTarget && elem.contains(nextTarget)) {
                return;
              }
              if (nextTarget && nextTarget === this.triggerElement && !DomUtil.supportsTouch(elem.ownerDocument)) {
                return;
              }
              this.foldable.expanded = false;
            };
            Point2dPadInputController2.prototype.onKeyDown_ = function(ev) {
              if (ev.keyCode === 27) {
                this.foldable.expanded = false;
              }
            };
            return Point2dPadInputController2;
          }();
          exports2.Point2dPadInputController = Point2dPadInputController;
        },
        "./src/main/js/controller/input/point-2d-text.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.Point2dTextInputController = void 0;
          var point_2d_1 = __webpack_require__("./src/main/js/constraint/point-2d.ts");
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          var point_2d_2 = __webpack_require__("./src/main/js/model/point-2d.ts");
          var point_2d_text_1 = __webpack_require__("./src/main/js/view/input/point-2d-text.ts");
          var UiUtil = __webpack_require__("./src/main/js/controller/ui-util.ts");
          var Point2dTextInputController = function() {
            function Point2dTextInputController2(document2, config) {
              var _this = this;
              this.onInputChange_ = this.onInputChange_.bind(this);
              this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);
              this.parser_ = config.parser;
              this.value = config.value;
              var c4 = this.value.constraint;
              this.xStep_ = UiUtil.getStepForTextInput(c4 instanceof point_2d_1.Point2dConstraint ? c4.xConstraint : void 0);
              this.yStep_ = UiUtil.getStepForTextInput(c4 instanceof point_2d_1.Point2dConstraint ? c4.yConstraint : void 0);
              this.viewModel = config.viewModel;
              this.view = new point_2d_text_1.Point2dTextInputView(document2, {
                model: this.viewModel,
                value: this.value,
                xFormatter: config.xFormatter,
                yFormatter: config.yFormatter
              });
              this.view.inputElements.forEach(function(inputElem) {
                inputElem.addEventListener("change", _this.onInputChange_);
                inputElem.addEventListener("keydown", _this.onInputKeyDown_);
              });
            }
            Point2dTextInputController2.prototype.findIndexOfInputElem_ = function(inputElem) {
              var inputElems = this.view.inputElements;
              for (var i4 = 0; i4 < inputElems.length; i4++) {
                if (inputElems[i4] === inputElem) {
                  return i4;
                }
              }
              return null;
            };
            Point2dTextInputController2.prototype.updateComponent_ = function(index, newValue) {
              var comps = this.value.rawValue.getComponents();
              var newComps = comps.map(function(comp, i4) {
                return i4 === index ? newValue : comp;
              });
              this.value.rawValue = new point_2d_2.Point2d(newComps[0], newComps[1]);
              this.view.update();
            };
            Point2dTextInputController2.prototype.onInputChange_ = function(e5) {
              var inputElem = type_util_1.TypeUtil.forceCast(e5.currentTarget);
              var parsedValue = this.parser_(inputElem.value);
              if (type_util_1.TypeUtil.isEmpty(parsedValue)) {
                return;
              }
              var compIndex = this.findIndexOfInputElem_(inputElem);
              if (type_util_1.TypeUtil.isEmpty(compIndex)) {
                return;
              }
              this.updateComponent_(compIndex, parsedValue);
            };
            Point2dTextInputController2.prototype.onInputKeyDown_ = function(e5) {
              var inputElem = type_util_1.TypeUtil.forceCast(e5.currentTarget);
              var parsedValue = this.parser_(inputElem.value);
              if (type_util_1.TypeUtil.isEmpty(parsedValue)) {
                return;
              }
              var compIndex = this.findIndexOfInputElem_(inputElem);
              if (type_util_1.TypeUtil.isEmpty(compIndex)) {
                return;
              }
              var step = UiUtil.getStepForKey(compIndex === 0 ? this.xStep_ : this.yStep_, UiUtil.getVerticalStepKeys(e5));
              if (step === 0) {
                return;
              }
              this.updateComponent_(compIndex, parsedValue + step);
            };
            return Point2dTextInputController2;
          }();
          exports2.Point2dTextInputController = Point2dTextInputController;
        },
        "./src/main/js/controller/input/slider-text.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.SliderTextInputController = void 0;
          var slider_text_1 = __webpack_require__("./src/main/js/view/input/slider-text.ts");
          var number_text_1 = __webpack_require__("./src/main/js/controller/input/number-text.ts");
          var slider_1 = __webpack_require__("./src/main/js/controller/input/slider.ts");
          var SliderTextInputController = function() {
            function SliderTextInputController2(document2, config) {
              this.value_ = config.value;
              this.viewModel = config.viewModel;
              this.sliderIc_ = new slider_1.SliderInputController(document2, {
                value: config.value,
                viewModel: this.viewModel
              });
              this.textIc_ = new number_text_1.NumberTextInputController(document2, {
                formatter: config.formatter,
                parser: config.parser,
                value: config.value,
                viewModel: this.viewModel
              });
              this.view_ = new slider_text_1.SliderTextInputView(document2, {
                model: this.viewModel,
                sliderInputView: this.sliderIc_.view,
                textInputView: this.textIc_.view
              });
            }
            Object.defineProperty(SliderTextInputController2.prototype, "value", {
              get: function() {
                return this.value_;
              },
              enumerable: false,
              configurable: true
            });
            Object.defineProperty(SliderTextInputController2.prototype, "view", {
              get: function() {
                return this.view_;
              },
              enumerable: false,
              configurable: true
            });
            return SliderTextInputController2;
          }();
          exports2.SliderTextInputController = SliderTextInputController;
        },
        "./src/main/js/controller/input/slider.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.SliderInputController = void 0;
          var range_1 = __webpack_require__("./src/main/js/constraint/range.ts");
          var util_1 = __webpack_require__("./src/main/js/constraint/util.ts");
          var number_util_1 = __webpack_require__("./src/main/js/misc/number-util.ts");
          var pointer_handler_1 = __webpack_require__("./src/main/js/misc/pointer-handler.ts");
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          var slider_1 = __webpack_require__("./src/main/js/view/input/slider.ts");
          var UiUtil = __webpack_require__("./src/main/js/controller/ui-util.ts");
          function findRange(value) {
            var c4 = value.constraint ? util_1.ConstraintUtil.findConstraint(value.constraint, range_1.RangeConstraint) : null;
            if (!c4) {
              return [void 0, void 0];
            }
            return [c4.minValue, c4.maxValue];
          }
          function estimateSuitableRange(value) {
            var _a6 = findRange(value), min4 = _a6[0], max4 = _a6[1];
            return [
              type_util_1.TypeUtil.getOrDefault(min4, 0),
              type_util_1.TypeUtil.getOrDefault(max4, 100)
            ];
          }
          var SliderInputController = function() {
            function SliderInputController2(document2, config) {
              this.onKeyDown_ = this.onKeyDown_.bind(this);
              this.onPointerDown_ = this.onPointerDown_.bind(this);
              this.onPointerMove_ = this.onPointerMove_.bind(this);
              this.onPointerUp_ = this.onPointerUp_.bind(this);
              this.value = config.value;
              this.step_ = UiUtil.getStepForTextInput(this.value.constraint);
              var _a6 = estimateSuitableRange(this.value), min4 = _a6[0], max4 = _a6[1];
              this.minValue_ = min4;
              this.maxValue_ = max4;
              this.viewModel = config.viewModel;
              this.view = new slider_1.SliderInputView(document2, {
                maxValue: this.maxValue_,
                minValue: this.minValue_,
                model: this.viewModel,
                value: this.value
              });
              this.ptHandler_ = new pointer_handler_1.PointerHandler(document2, this.view.outerElement);
              this.ptHandler_.emitter.on("down", this.onPointerDown_);
              this.ptHandler_.emitter.on("move", this.onPointerMove_);
              this.ptHandler_.emitter.on("up", this.onPointerUp_);
              this.view.outerElement.addEventListener("keydown", this.onKeyDown_);
            }
            SliderInputController2.prototype.handlePointerEvent_ = function(d3) {
              this.value.rawValue = number_util_1.NumberUtil.map(d3.px, 0, 1, this.minValue_, this.maxValue_);
            };
            SliderInputController2.prototype.onPointerDown_ = function(ev) {
              this.handlePointerEvent_(ev.data);
            };
            SliderInputController2.prototype.onPointerMove_ = function(ev) {
              this.handlePointerEvent_(ev.data);
            };
            SliderInputController2.prototype.onPointerUp_ = function(ev) {
              this.handlePointerEvent_(ev.data);
            };
            SliderInputController2.prototype.onKeyDown_ = function(ev) {
              this.value.rawValue += UiUtil.getStepForKey(this.step_, UiUtil.getHorizontalStepKeys(ev));
            };
            return SliderInputController2;
          }();
          exports2.SliderInputController = SliderInputController;
        },
        "./src/main/js/controller/input/sv-palette.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.SvPaletteInputController = void 0;
          var number_util_1 = __webpack_require__("./src/main/js/misc/number-util.ts");
          var pointer_handler_1 = __webpack_require__("./src/main/js/misc/pointer-handler.ts");
          var color_1 = __webpack_require__("./src/main/js/model/color.ts");
          var sv_palette_1 = __webpack_require__("./src/main/js/view/input/sv-palette.ts");
          var UiUtil = __webpack_require__("./src/main/js/controller/ui-util.ts");
          var SvPaletteInputController = function() {
            function SvPaletteInputController2(document2, config) {
              this.onKeyDown_ = this.onKeyDown_.bind(this);
              this.onPointerDown_ = this.onPointerDown_.bind(this);
              this.onPointerMove_ = this.onPointerMove_.bind(this);
              this.onPointerUp_ = this.onPointerUp_.bind(this);
              this.value = config.value;
              this.viewModel = config.viewModel;
              this.view = new sv_palette_1.SvPaletteInputView(document2, {
                model: this.viewModel,
                value: this.value
              });
              this.ptHandler_ = new pointer_handler_1.PointerHandler(document2, this.view.element);
              this.ptHandler_.emitter.on("down", this.onPointerDown_);
              this.ptHandler_.emitter.on("move", this.onPointerMove_);
              this.ptHandler_.emitter.on("up", this.onPointerUp_);
              this.view.element.addEventListener("keydown", this.onKeyDown_);
            }
            SvPaletteInputController2.prototype.handlePointerEvent_ = function(d3) {
              var saturation = number_util_1.NumberUtil.map(d3.px, 0, 1, 0, 100);
              var value = number_util_1.NumberUtil.map(d3.py, 0, 1, 100, 0);
              var _a6 = this.value.rawValue.getComponents("hsv"), h3 = _a6[0], a3 = _a6[3];
              this.value.rawValue = new color_1.Color([h3, saturation, value, a3], "hsv");
              this.view.update();
            };
            SvPaletteInputController2.prototype.onPointerDown_ = function(ev) {
              this.handlePointerEvent_(ev.data);
            };
            SvPaletteInputController2.prototype.onPointerMove_ = function(ev) {
              this.handlePointerEvent_(ev.data);
            };
            SvPaletteInputController2.prototype.onPointerUp_ = function(ev) {
              this.handlePointerEvent_(ev.data);
            };
            SvPaletteInputController2.prototype.onKeyDown_ = function(ev) {
              if (UiUtil.isArrowKey(ev.keyCode)) {
                ev.preventDefault();
              }
              var _a6 = this.value.rawValue.getComponents("hsv"), h3 = _a6[0], s4 = _a6[1], v2 = _a6[2], a3 = _a6[3];
              var baseStep = UiUtil.getBaseStepForColor(false);
              this.value.rawValue = new color_1.Color([
                h3,
                s4 + UiUtil.getStepForKey(baseStep, UiUtil.getHorizontalStepKeys(ev)),
                v2 + UiUtil.getStepForKey(baseStep, UiUtil.getVerticalStepKeys(ev)),
                a3
              ], "hsv");
            };
            return SvPaletteInputController2;
          }();
          exports2.SvPaletteInputController = SvPaletteInputController;
        },
        "./src/main/js/controller/input/text.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.TextInputController = void 0;
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          var text_1 = __webpack_require__("./src/main/js/view/input/text.ts");
          var TextInputController = function() {
            function TextInputController2(document2, config) {
              this.onInputChange_ = this.onInputChange_.bind(this);
              this.parser_ = config.parser;
              this.value = config.value;
              this.viewModel = config.viewModel;
              this.view = new text_1.TextInputView(document2, {
                formatter: config.formatter,
                model: this.viewModel,
                value: this.value
              });
              this.view.inputElement.addEventListener("change", this.onInputChange_);
            }
            TextInputController2.prototype.onInputChange_ = function(e5) {
              var inputElem = type_util_1.TypeUtil.forceCast(e5.currentTarget);
              var value = inputElem.value;
              var parsedValue = this.parser_(value);
              if (!type_util_1.TypeUtil.isEmpty(parsedValue)) {
                this.value.rawValue = parsedValue;
              }
              this.view.update();
            };
            return TextInputController2;
          }();
          exports2.TextInputController = TextInputController;
        },
        "./src/main/js/controller/monitor-binding.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.MonitorBindingController = void 0;
          var labeled_1 = __webpack_require__("./src/main/js/view/labeled.ts");
          var MonitorBindingController = function() {
            function MonitorBindingController2(document2, config) {
              var _this = this;
              this.binding = config.binding;
              this.controller = config.controller;
              this.view = new labeled_1.LabeledView(document2, {
                label: config.label,
                model: this.viewModel,
                view: this.controller.view
              });
              this.viewModel.emitter.on("dispose", function() {
                _this.binding.dispose();
              });
            }
            Object.defineProperty(MonitorBindingController2.prototype, "viewModel", {
              get: function() {
                return this.controller.viewModel;
              },
              enumerable: false,
              configurable: true
            });
            return MonitorBindingController2;
          }();
          exports2.MonitorBindingController = MonitorBindingController;
        },
        "./src/main/js/controller/monitor/graph.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.GraphMonitorController = void 0;
          var number_util_1 = __webpack_require__("./src/main/js/misc/number-util.ts");
          var graph_cursor_1 = __webpack_require__("./src/main/js/model/graph-cursor.ts");
          var graph_1 = __webpack_require__("./src/main/js/view/monitor/graph.ts");
          var GraphMonitorController = function() {
            function GraphMonitorController2(document2, config) {
              this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);
              this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);
              this.value = config.value;
              this.cursor_ = new graph_cursor_1.GraphCursor();
              this.viewModel = config.viewModel;
              this.view = new graph_1.GraphMonitorView(document2, {
                cursor: this.cursor_,
                formatter: config.formatter,
                maxValue: config.maxValue,
                minValue: config.minValue,
                model: this.viewModel,
                value: this.value
              });
              this.view.graphElement.addEventListener("mouseleave", this.onGraphMouseLeave_);
              this.view.graphElement.addEventListener("mousemove", this.onGraphMouseMove_);
            }
            GraphMonitorController2.prototype.onGraphMouseLeave_ = function() {
              this.cursor_.index = -1;
            };
            GraphMonitorController2.prototype.onGraphMouseMove_ = function(e5) {
              var bounds = this.view.graphElement.getBoundingClientRect();
              var x2 = e5.offsetX;
              this.cursor_.index = Math.floor(number_util_1.NumberUtil.map(x2, 0, bounds.width, 0, this.value.totalCount));
            };
            return GraphMonitorController2;
          }();
          exports2.GraphMonitorController = GraphMonitorController;
        },
        "./src/main/js/controller/monitor/multi-log.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.MultiLogMonitorController = void 0;
          var multi_log_1 = __webpack_require__("./src/main/js/view/monitor/multi-log.ts");
          var MultiLogMonitorController = function() {
            function MultiLogMonitorController2(document2, config) {
              this.value = config.value;
              this.viewModel = config.viewModel;
              this.view = new multi_log_1.MultiLogMonitorView(document2, {
                formatter: config.formatter,
                model: this.viewModel,
                value: this.value
              });
            }
            return MultiLogMonitorController2;
          }();
          exports2.MultiLogMonitorController = MultiLogMonitorController;
        },
        "./src/main/js/controller/monitor/single-log.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.SingleLogMonitorController = void 0;
          var single_log_1 = __webpack_require__("./src/main/js/view/monitor/single-log.ts");
          var SingleLogMonitorController = function() {
            function SingleLogMonitorController2(document2, config) {
              this.value = config.value;
              this.viewModel = config.viewModel;
              this.view = new single_log_1.SingleLogMonitorView(document2, {
                formatter: config.formatter,
                model: this.viewModel,
                value: this.value
              });
            }
            return SingleLogMonitorController2;
          }();
          exports2.SingleLogMonitorController = SingleLogMonitorController;
        },
        "./src/main/js/controller/root.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.RootController = void 0;
          var DomUtil = __webpack_require__("./src/main/js/misc/dom-util.ts");
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          var folder_1 = __webpack_require__("./src/main/js/model/folder.ts");
          var ui_container_1 = __webpack_require__("./src/main/js/model/ui-container.ts");
          var root_1 = __webpack_require__("./src/main/js/view/root.ts");
          var ContainerUtil = __webpack_require__("./src/main/js/controller/container-util.ts");
          function createFolder(config) {
            if (!config.title) {
              return null;
            }
            return new folder_1.Folder(config.title, type_util_1.TypeUtil.getOrDefault(config.expanded, true));
          }
          var RootController = function() {
            function RootController2(document2, config) {
              this.onContainerTransitionEnd_ = this.onContainerTransitionEnd_.bind(this);
              this.onFolderBeforeChange_ = this.onFolderBeforeChange_.bind(this);
              this.onTitleClick_ = this.onTitleClick_.bind(this);
              this.onUiContainerAdd_ = this.onUiContainerAdd_.bind(this);
              this.onUiContainerItemLayout_ = this.onUiContainerItemLayout_.bind(this);
              this.onUiContainerRemove_ = this.onUiContainerRemove_.bind(this);
              this.folder = createFolder(config);
              if (this.folder) {
                this.folder.emitter.on("beforechange", this.onFolderBeforeChange_);
              }
              this.ucList_ = new ui_container_1.UiContainer();
              this.ucList_.emitter.on("add", this.onUiContainerAdd_);
              this.ucList_.emitter.on("itemlayout", this.onUiContainerItemLayout_);
              this.ucList_.emitter.on("remove", this.onUiContainerRemove_);
              this.doc_ = document2;
              this.viewModel = config.viewModel;
              this.view = new root_1.RootView(this.doc_, {
                folder: this.folder,
                model: this.viewModel
              });
              if (this.view.titleElement) {
                this.view.titleElement.addEventListener("click", this.onTitleClick_);
              }
              this.view.containerElement.addEventListener("transitionend", this.onContainerTransitionEnd_);
            }
            Object.defineProperty(RootController2.prototype, "document", {
              get: function() {
                return this.doc_;
              },
              enumerable: false,
              configurable: true
            });
            Object.defineProperty(RootController2.prototype, "uiContainer", {
              get: function() {
                return this.ucList_;
              },
              enumerable: false,
              configurable: true
            });
            RootController2.prototype.onFolderBeforeChange_ = function(ev) {
              if (ev.propertyName !== "expanded") {
                return;
              }
              var folder = this.folder;
              if (!folder) {
                return;
              }
              if (type_util_1.TypeUtil.isEmpty(folder.expandedHeight)) {
                folder.expandedHeight = ContainerUtil.computeExpandedFolderHeight(folder, this.view.containerElement);
              }
              folder.shouldFixHeight = true;
              DomUtil.forceReflow(this.view.containerElement);
            };
            RootController2.prototype.applyUiContainerChange_ = function() {
              ContainerUtil.updateAllItemsPositions(this.uiContainer);
            };
            RootController2.prototype.onUiContainerAdd_ = function(ev) {
              DomUtil.insertElementAt(this.view.containerElement, ev.uiController.view.element, ev.index);
              this.applyUiContainerChange_();
            };
            RootController2.prototype.onUiContainerRemove_ = function(_2) {
              this.applyUiContainerChange_();
            };
            RootController2.prototype.onUiContainerItemLayout_ = function(_2) {
              this.applyUiContainerChange_();
            };
            RootController2.prototype.onTitleClick_ = function() {
              if (this.folder) {
                this.folder.expanded = !this.folder.expanded;
              }
            };
            RootController2.prototype.onContainerTransitionEnd_ = function(ev) {
              if (ev.propertyName !== "height") {
                return;
              }
              if (this.folder) {
                this.folder.shouldFixHeight = false;
                this.folder.expandedHeight = null;
              }
            };
            return RootController2;
          }();
          exports2.RootController = RootController;
        },
        "./src/main/js/controller/separator.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.SeparatorController = void 0;
          var separator_1 = __webpack_require__("./src/main/js/view/separator.ts");
          var SeparatorController = function() {
            function SeparatorController2(document2, config) {
              this.viewModel = config.viewModel;
              this.view = new separator_1.SeparatorView(document2, {
                model: this.viewModel
              });
            }
            return SeparatorController2;
          }();
          exports2.SeparatorController = SeparatorController;
        },
        "./src/main/js/controller/ui-util.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.getBaseStepForColor = exports2.getSuitableMaxValueForPoint2dPad = exports2.getSuitableDecimalDigits = exports2.isArrowKey = exports2.isVerticalArrowKey = exports2.getHorizontalStepKeys = exports2.getVerticalStepKeys = exports2.getStepForKey = exports2.getStepForTextInput = exports2.findControllers = exports2.normalizeInputParamsOptions = void 0;
          var point_2d_1 = __webpack_require__("./src/main/js/constraint/point-2d.ts");
          var range_1 = __webpack_require__("./src/main/js/constraint/range.ts");
          var step_1 = __webpack_require__("./src/main/js/constraint/step.ts");
          var util_1 = __webpack_require__("./src/main/js/constraint/util.ts");
          var number_util_1 = __webpack_require__("./src/main/js/misc/number-util.ts");
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          var folder_1 = __webpack_require__("./src/main/js/controller/folder.ts");
          function normalizeInputParamsOptions(options, convert) {
            if (Array.isArray(options)) {
              return options.map(function(item) {
                return {
                  text: item.text,
                  value: convert(item.value)
                };
              });
            }
            var textToValueMap = options;
            var texts = Object.keys(textToValueMap);
            return texts.reduce(function(result, text) {
              return result.concat({
                text,
                value: convert(textToValueMap[text])
              });
            }, []);
          }
          exports2.normalizeInputParamsOptions = normalizeInputParamsOptions;
          function findControllers(uiControllers, controllerClass) {
            return uiControllers.reduce(function(results, uc) {
              if (uc instanceof folder_1.FolderController) {
                results.push.apply(results, findControllers(uc.uiContainer.items, controllerClass));
              }
              if (uc instanceof controllerClass) {
                results.push(uc);
              }
              return results;
            }, []);
          }
          exports2.findControllers = findControllers;
          function findStep(constraint) {
            var c4 = constraint ? util_1.ConstraintUtil.findConstraint(constraint, step_1.StepConstraint) : null;
            if (!c4) {
              return null;
            }
            return c4.step;
          }
          function getStepForTextInput(constraint) {
            var step = findStep(constraint);
            return type_util_1.TypeUtil.getOrDefault(step, 1);
          }
          exports2.getStepForTextInput = getStepForTextInput;
          function getStepForKey(baseStep, keys) {
            var step = baseStep * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);
            if (keys.upKey) {
              return +step;
            } else if (keys.downKey) {
              return -step;
            }
            return 0;
          }
          exports2.getStepForKey = getStepForKey;
          function getVerticalStepKeys(ev) {
            return {
              altKey: ev.altKey,
              downKey: ev.keyCode === 40,
              shiftKey: ev.shiftKey,
              upKey: ev.keyCode === 38
            };
          }
          exports2.getVerticalStepKeys = getVerticalStepKeys;
          function getHorizontalStepKeys(ev) {
            return {
              altKey: ev.altKey,
              downKey: ev.keyCode === 37,
              shiftKey: ev.shiftKey,
              upKey: ev.keyCode === 39
            };
          }
          exports2.getHorizontalStepKeys = getHorizontalStepKeys;
          function isVerticalArrowKey(keyCode) {
            return keyCode === 38 || keyCode === 40;
          }
          exports2.isVerticalArrowKey = isVerticalArrowKey;
          function isArrowKey(keyCode) {
            return isVerticalArrowKey(keyCode) || keyCode === 37 || keyCode === 39;
          }
          exports2.isArrowKey = isArrowKey;
          function getSuitableDecimalDigits(constraint, rawValue) {
            var sc = constraint && util_1.ConstraintUtil.findConstraint(constraint, step_1.StepConstraint);
            if (sc) {
              return number_util_1.NumberUtil.getDecimalDigits(sc.step);
            }
            return Math.max(number_util_1.NumberUtil.getDecimalDigits(rawValue), 2);
          }
          exports2.getSuitableDecimalDigits = getSuitableDecimalDigits;
          function getSuitableMaxDimensionValue(constraint, rawValue) {
            var rc = constraint && util_1.ConstraintUtil.findConstraint(constraint, range_1.RangeConstraint);
            if (rc) {
              return Math.max(Math.abs(rc.minValue || 0), Math.abs(rc.maxValue || 0));
            }
            var step = getStepForTextInput(constraint);
            return Math.max(Math.abs(step) * 10, Math.abs(rawValue) * 10);
          }
          function getSuitableMaxValueForPoint2dPad(constraint, rawValue) {
            var xc = constraint instanceof point_2d_1.Point2dConstraint ? constraint.xConstraint : void 0;
            var yc = constraint instanceof point_2d_1.Point2dConstraint ? constraint.yConstraint : void 0;
            var xr = getSuitableMaxDimensionValue(xc, rawValue.x);
            var yr = getSuitableMaxDimensionValue(yc, rawValue.y);
            return Math.max(xr, yr);
          }
          exports2.getSuitableMaxValueForPoint2dPad = getSuitableMaxValueForPoint2dPad;
          function getBaseStepForColor(forAlpha) {
            return forAlpha ? 0.1 : 1;
          }
          exports2.getBaseStepForColor = getBaseStepForColor;
        },
        "./src/main/js/converter/boolean.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.toString = exports2.fromMixed = void 0;
          function fromMixed(value) {
            if (value === "false") {
              return false;
            }
            return !!value;
          }
          exports2.fromMixed = fromMixed;
          function toString(value) {
            return String(value);
          }
          exports2.toString = toString;
        },
        "./src/main/js/converter/color.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.toRgbaNumber = exports2.toRgbNumber = exports2.getStringifier = exports2.toFunctionalHslaString = exports2.toFunctionalHslString = exports2.toFunctionalRgbaString = exports2.toFunctionalRgbString = exports2.toHexRgbaString = exports2.toHexRgbString = exports2.fromNumberToRgba = exports2.fromNumberToRgb = exports2.fromObject = exports2.fromString = void 0;
          var number_1 = __webpack_require__("./src/main/js/formatter/number.ts");
          var percentage_1 = __webpack_require__("./src/main/js/formatter/percentage.ts");
          var ColorModel = __webpack_require__("./src/main/js/misc/color-model.ts");
          var number_util_1 = __webpack_require__("./src/main/js/misc/number-util.ts");
          var color_1 = __webpack_require__("./src/main/js/model/color.ts");
          var NumberColorParser = __webpack_require__("./src/main/js/parser/number-color.ts");
          var StringColorParser = __webpack_require__("./src/main/js/parser/string-color.ts");
          function createEmptyColor() {
            return new color_1.Color([0, 0, 0], "rgb");
          }
          function fromString(value) {
            if (typeof value === "string") {
              var cv = StringColorParser.CompositeParser(value);
              if (cv) {
                return cv;
              }
            }
            return createEmptyColor();
          }
          exports2.fromString = fromString;
          function fromObject(value) {
            if (color_1.Color.isColorObject(value)) {
              return color_1.Color.fromObject(value);
            }
            return createEmptyColor();
          }
          exports2.fromObject = fromObject;
          function fromNumberToRgb(value) {
            if (typeof value === "number") {
              var cv = NumberColorParser.RgbParser(value);
              if (cv) {
                return cv;
              }
            }
            return createEmptyColor();
          }
          exports2.fromNumberToRgb = fromNumberToRgb;
          function fromNumberToRgba(value) {
            if (typeof value === "number") {
              var cv = NumberColorParser.RgbaParser(value);
              if (cv) {
                return cv;
              }
            }
            return createEmptyColor();
          }
          exports2.fromNumberToRgba = fromNumberToRgba;
          function zerofill(comp) {
            var hex = number_util_1.NumberUtil.constrain(Math.floor(comp), 0, 255).toString(16);
            return hex.length === 1 ? "0" + hex : hex;
          }
          function toHexRgbString(value) {
            var hexes = ColorModel.withoutAlpha(value.getComponents("rgb")).map(zerofill).join("");
            return "#" + hexes;
          }
          exports2.toHexRgbString = toHexRgbString;
          function toHexRgbaString(value) {
            var rgbaComps = value.getComponents("rgb");
            var hexes = [rgbaComps[0], rgbaComps[1], rgbaComps[2], rgbaComps[3] * 255].map(zerofill).join("");
            return "#" + hexes;
          }
          exports2.toHexRgbaString = toHexRgbaString;
          function toFunctionalRgbString(value) {
            var formatter = new number_1.NumberFormatter(0);
            var comps = ColorModel.withoutAlpha(value.getComponents("rgb")).map(function(comp) {
              return formatter.format(comp);
            });
            return "rgb(" + comps.join(", ") + ")";
          }
          exports2.toFunctionalRgbString = toFunctionalRgbString;
          function toFunctionalRgbaString(value) {
            var aFormatter = new number_1.NumberFormatter(2);
            var rgbFormatter = new number_1.NumberFormatter(0);
            var comps = value.getComponents("rgb").map(function(comp, index) {
              var formatter = index === 3 ? aFormatter : rgbFormatter;
              return formatter.format(comp);
            });
            return "rgba(" + comps.join(", ") + ")";
          }
          exports2.toFunctionalRgbaString = toFunctionalRgbaString;
          function toFunctionalHslString(value) {
            var formatters = [
              new number_1.NumberFormatter(0),
              new percentage_1.PercentageFormatter(),
              new percentage_1.PercentageFormatter()
            ];
            var comps = ColorModel.withoutAlpha(value.getComponents("hsl")).map(function(comp, index) {
              return formatters[index].format(comp);
            });
            return "hsl(" + comps.join(", ") + ")";
          }
          exports2.toFunctionalHslString = toFunctionalHslString;
          function toFunctionalHslaString(value) {
            var formatters = [
              new number_1.NumberFormatter(0),
              new percentage_1.PercentageFormatter(),
              new percentage_1.PercentageFormatter(),
              new number_1.NumberFormatter(2)
            ];
            var comps = value.getComponents("hsl").map(function(comp, index) {
              return formatters[index].format(comp);
            });
            return "hsla(" + comps.join(", ") + ")";
          }
          exports2.toFunctionalHslaString = toFunctionalHslaString;
          var NOTATION_TO_STRINGIFIER_MAP = {
            "func.hsl": toFunctionalHslString,
            "func.hsla": toFunctionalHslaString,
            "func.rgb": toFunctionalRgbString,
            "func.rgba": toFunctionalRgbaString,
            "hex.rgb": toHexRgbString,
            "hex.rgba": toHexRgbaString
          };
          function getStringifier(notation) {
            return NOTATION_TO_STRINGIFIER_MAP[notation];
          }
          exports2.getStringifier = getStringifier;
          function toRgbNumber(value) {
            return ColorModel.withoutAlpha(value.getComponents("rgb")).reduce(function(result, comp) {
              return result << 8 | Math.floor(comp) & 255;
            }, 0);
          }
          exports2.toRgbNumber = toRgbNumber;
          function toRgbaNumber(value) {
            return value.getComponents("rgb").reduce(function(result, comp, index) {
              var hex = Math.floor(index === 3 ? comp * 255 : comp) & 255;
              return result << 8 | hex;
            }, 0);
          }
          exports2.toRgbaNumber = toRgbaNumber;
        },
        "./src/main/js/converter/number.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.toString = exports2.fromMixed = void 0;
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          var string_number_1 = __webpack_require__("./src/main/js/parser/string-number.ts");
          function fromMixed(value) {
            if (typeof value === "number") {
              return value;
            }
            if (typeof value === "string") {
              var pv = string_number_1.StringNumberParser(value);
              if (!type_util_1.TypeUtil.isEmpty(pv)) {
                return pv;
              }
            }
            return 0;
          }
          exports2.fromMixed = fromMixed;
          function toString(value) {
            return String(value);
          }
          exports2.toString = toString;
        },
        "./src/main/js/converter/point-2d.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.fromMixed = void 0;
          var point_2d_1 = __webpack_require__("./src/main/js/model/point-2d.ts");
          var any_point_2d_1 = __webpack_require__("./src/main/js/parser/any-point-2d.ts");
          function fromMixed(value) {
            return any_point_2d_1.AnyPoint2dParser(value) || new point_2d_1.Point2d();
          }
          exports2.fromMixed = fromMixed;
        },
        "./src/main/js/converter/string.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.toString = exports2.fromMixed = void 0;
          function fromMixed(value) {
            return String(value);
          }
          exports2.fromMixed = fromMixed;
          function toString(value) {
            return value;
          }
          exports2.toString = toString;
        },
        "./src/main/js/formatter/boolean.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.BooleanFormatter = void 0;
          var BooleanConverter = __webpack_require__("./src/main/js/converter/boolean.ts");
          var BooleanFormatter = function() {
            function BooleanFormatter2() {
            }
            BooleanFormatter2.prototype.format = function(value) {
              return BooleanConverter.toString(value);
            };
            return BooleanFormatter2;
          }();
          exports2.BooleanFormatter = BooleanFormatter;
        },
        "./src/main/js/formatter/color.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.ColorFormatter = void 0;
          var ColorFormatter = function() {
            function ColorFormatter2(stringifier) {
              this.stringifier_ = stringifier;
            }
            ColorFormatter2.prototype.format = function(value) {
              return this.stringifier_(value);
            };
            return ColorFormatter2;
          }();
          exports2.ColorFormatter = ColorFormatter;
        },
        "./src/main/js/formatter/number.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.NumberFormatter = void 0;
          var NumberFormatter = function() {
            function NumberFormatter2(digits) {
              this.digits_ = digits;
            }
            Object.defineProperty(NumberFormatter2.prototype, "digits", {
              get: function() {
                return this.digits_;
              },
              enumerable: false,
              configurable: true
            });
            NumberFormatter2.prototype.format = function(value) {
              return value.toFixed(Math.max(Math.min(this.digits_, 20), 0));
            };
            return NumberFormatter2;
          }();
          exports2.NumberFormatter = NumberFormatter;
        },
        "./src/main/js/formatter/percentage.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.PercentageFormatter = void 0;
          var number_1 = __webpack_require__("./src/main/js/formatter/number.ts");
          var innerFormatter = new number_1.NumberFormatter(0);
          var PercentageFormatter = function() {
            function PercentageFormatter2() {
            }
            PercentageFormatter2.prototype.format = function(value) {
              return innerFormatter.format(value) + "%";
            };
            return PercentageFormatter2;
          }();
          exports2.PercentageFormatter = PercentageFormatter;
        },
        "./src/main/js/formatter/string.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.StringFormatter = void 0;
          var StringFormatter = function() {
            function StringFormatter2() {
            }
            StringFormatter2.prototype.format = function(value) {
              return value;
            };
            return StringFormatter2;
          }();
          exports2.StringFormatter = StringFormatter;
        },
        "./src/main/js/index.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          var __extends = this && this.__extends || function() {
            var extendStatics = function(d3, b3) {
              extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b4) {
                d4.__proto__ = b4;
              } || function(d4, b4) {
                for (var p3 in b4)
                  if (b4.hasOwnProperty(p3))
                    d4[p3] = b4[p3];
              };
              return extendStatics(d3, b3);
            };
            return function(d3, b3) {
              extendStatics(d3, b3);
              function __() {
                this.constructor = d3;
              }
              d3.prototype = b3 === null ? Object.create(b3) : (__.prototype = b3.prototype, new __());
            };
          }();
          Object.defineProperty(exports2, "__esModule", { value: true });
          var Style = __webpack_require__("./src/main/sass/bundle.scss");
          var tweakpane_without_style_1 = __webpack_require__("./src/main/js/tweakpane-without-style.ts");
          function embedDefaultStyleIfNeeded(document2) {
            var MARKER = "tweakpane";
            if (document2.querySelector("style[data-for=" + MARKER + "]")) {
              return;
            }
            var styleElem = document2.createElement("style");
            styleElem.dataset.for = MARKER;
            styleElem.textContent = Style.toString();
            if (document2.head) {
              document2.head.appendChild(styleElem);
            }
          }
          var Tweakpane5 = function(_super) {
            __extends(Tweakpane6, _super);
            function Tweakpane6(opt_config) {
              var _this = _super.call(this, opt_config) || this;
              embedDefaultStyleIfNeeded(_this.document);
              return _this;
            }
            return Tweakpane6;
          }(tweakpane_without_style_1.TweakpaneWithoutStyle);
          exports2.default = Tweakpane5;
        },
        "./src/main/js/misc/class-name.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.ClassName = void 0;
          var PREFIX = "tp";
          var TYPE_TO_POSTFIX_MAP = {
            "": "v",
            input: "iv",
            monitor: "mv"
          };
          function ClassName(viewName, opt_viewType) {
            var viewType = opt_viewType || "";
            var postfix = TYPE_TO_POSTFIX_MAP[viewType];
            return function(opt_elementName, opt_modifier) {
              return [
                PREFIX,
                "-",
                viewName,
                postfix,
                opt_elementName ? "_" + opt_elementName : "",
                opt_modifier ? "-" + opt_modifier : ""
              ].join("");
            };
          }
          exports2.ClassName = ClassName;
        },
        "./src/main/js/misc/color-model.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.convertMode = exports2.withAlpha = exports2.withoutAlpha = exports2.opaque = exports2.hsvToRgb = void 0;
          var number_util_1 = __webpack_require__("./src/main/js/misc/number-util.ts");
          function rgbToHsl(r5, g2, b3) {
            var rp = number_util_1.NumberUtil.constrain(r5 / 255, 0, 1);
            var gp = number_util_1.NumberUtil.constrain(g2 / 255, 0, 1);
            var bp = number_util_1.NumberUtil.constrain(b3 / 255, 0, 1);
            var cmax = Math.max(rp, gp, bp);
            var cmin = Math.min(rp, gp, bp);
            var c4 = cmax - cmin;
            var h3 = 0;
            var s4 = 0;
            var l3 = (cmin + cmax) / 2;
            if (c4 !== 0) {
              s4 = l3 > 0.5 ? c4 / (2 - cmin - cmax) : c4 / (cmax + cmin);
              if (rp === cmax) {
                h3 = (gp - bp) / c4;
              } else if (gp === cmax) {
                h3 = 2 + (bp - rp) / c4;
              } else {
                h3 = 4 + (rp - gp) / c4;
              }
              h3 = h3 / 6 + (h3 < 0 ? 1 : 0);
            }
            return [h3 * 360, s4 * 100, l3 * 100];
          }
          function hslToRgb(h3, s4, l3) {
            var _a6, _b2, _c, _d, _e, _f;
            var hp = (h3 % 360 + 360) % 360;
            var sp = number_util_1.NumberUtil.constrain(s4 / 100, 0, 1);
            var lp = number_util_1.NumberUtil.constrain(l3 / 100, 0, 1);
            var c4 = (1 - Math.abs(2 * lp - 1)) * sp;
            var x2 = c4 * (1 - Math.abs(hp / 60 % 2 - 1));
            var m2 = lp - c4 / 2;
            var rp, gp, bp;
            if (hp >= 0 && hp < 60) {
              _a6 = [c4, x2, 0], rp = _a6[0], gp = _a6[1], bp = _a6[2];
            } else if (hp >= 60 && hp < 120) {
              _b2 = [x2, c4, 0], rp = _b2[0], gp = _b2[1], bp = _b2[2];
            } else if (hp >= 120 && hp < 180) {
              _c = [0, c4, x2], rp = _c[0], gp = _c[1], bp = _c[2];
            } else if (hp >= 180 && hp < 240) {
              _d = [0, x2, c4], rp = _d[0], gp = _d[1], bp = _d[2];
            } else if (hp >= 240 && hp < 300) {
              _e = [x2, 0, c4], rp = _e[0], gp = _e[1], bp = _e[2];
            } else {
              _f = [c4, 0, x2], rp = _f[0], gp = _f[1], bp = _f[2];
            }
            return [(rp + m2) * 255, (gp + m2) * 255, (bp + m2) * 255];
          }
          function rgbToHsv(r5, g2, b3) {
            var rp = number_util_1.NumberUtil.constrain(r5 / 255, 0, 1);
            var gp = number_util_1.NumberUtil.constrain(g2 / 255, 0, 1);
            var bp = number_util_1.NumberUtil.constrain(b3 / 255, 0, 1);
            var cmax = Math.max(rp, gp, bp);
            var cmin = Math.min(rp, gp, bp);
            var d3 = cmax - cmin;
            var h3;
            if (d3 === 0) {
              h3 = 0;
            } else if (cmax === rp) {
              h3 = 60 * (((gp - bp) / d3 % 6 + 6) % 6);
            } else if (cmax === gp) {
              h3 = 60 * ((bp - rp) / d3 + 2);
            } else {
              h3 = 60 * ((rp - gp) / d3 + 4);
            }
            var s4 = cmax === 0 ? 0 : d3 / cmax;
            var v2 = cmax;
            return [h3, s4 * 100, v2 * 100];
          }
          function hsvToRgb(h3, s4, v2) {
            var _a6, _b2, _c, _d, _e, _f;
            var hp = number_util_1.NumberUtil.loop(h3, 360);
            var sp = number_util_1.NumberUtil.constrain(s4 / 100, 0, 1);
            var vp = number_util_1.NumberUtil.constrain(v2 / 100, 0, 1);
            var c4 = vp * sp;
            var x2 = c4 * (1 - Math.abs(hp / 60 % 2 - 1));
            var m2 = vp - c4;
            var rp, gp, bp;
            if (hp >= 0 && hp < 60) {
              _a6 = [c4, x2, 0], rp = _a6[0], gp = _a6[1], bp = _a6[2];
            } else if (hp >= 60 && hp < 120) {
              _b2 = [x2, c4, 0], rp = _b2[0], gp = _b2[1], bp = _b2[2];
            } else if (hp >= 120 && hp < 180) {
              _c = [0, c4, x2], rp = _c[0], gp = _c[1], bp = _c[2];
            } else if (hp >= 180 && hp < 240) {
              _d = [0, x2, c4], rp = _d[0], gp = _d[1], bp = _d[2];
            } else if (hp >= 240 && hp < 300) {
              _e = [x2, 0, c4], rp = _e[0], gp = _e[1], bp = _e[2];
            } else {
              _f = [c4, 0, x2], rp = _f[0], gp = _f[1], bp = _f[2];
            }
            return [(rp + m2) * 255, (gp + m2) * 255, (bp + m2) * 255];
          }
          exports2.hsvToRgb = hsvToRgb;
          function opaque(comps) {
            return [comps[0], comps[1], comps[2], 1];
          }
          exports2.opaque = opaque;
          function withoutAlpha(comps) {
            return [comps[0], comps[1], comps[2]];
          }
          exports2.withoutAlpha = withoutAlpha;
          function withAlpha(comps, alpha) {
            return [comps[0], comps[1], comps[2], alpha];
          }
          exports2.withAlpha = withAlpha;
          var MODE_CONVERTER_MAP = {
            hsl: {
              hsl: function(h3, s4, l3) {
                return [h3, s4, l3];
              },
              hsv: function(h3, s4, l3) {
                var _a6 = hslToRgb(h3, s4, l3), r5 = _a6[0], g2 = _a6[1], b3 = _a6[2];
                return rgbToHsv(r5, g2, b3);
              },
              rgb: hslToRgb
            },
            hsv: {
              hsl: function(h3, s4, v2) {
                var _a6 = hsvToRgb(h3, s4, v2), r5 = _a6[0], g2 = _a6[1], b3 = _a6[2];
                return rgbToHsl(r5, g2, b3);
              },
              hsv: function(h3, s4, v2) {
                return [h3, s4, v2];
              },
              rgb: hsvToRgb
            },
            rgb: {
              hsl: rgbToHsl,
              hsv: rgbToHsv,
              rgb: function(r5, g2, b3) {
                return [r5, g2, b3];
              }
            }
          };
          function convertMode(components, fromMode, toMode) {
            var _a6;
            return (_a6 = MODE_CONVERTER_MAP[fromMode])[toMode].apply(_a6, components);
          }
          exports2.convertMode = convertMode;
        },
        "./src/main/js/misc/constants.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.Constants = void 0;
          exports2.Constants = {
            monitorDefaultInterval: 200
          };
        },
        "./src/main/js/misc/disposing-util.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.disposeElement = void 0;
          function disposeElement(elem) {
            if (elem && elem.parentElement) {
              elem.parentElement.removeChild(elem);
            }
            return null;
          }
          exports2.disposeElement = disposeElement;
        },
        "./src/main/js/misc/dom-util.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          (function(process2) {
            Object.defineProperty(exports2, "__esModule", { value: true });
            exports2.findNextTarget = exports2.indexOfChildElement = exports2.removeElement = exports2.insertElementAt = exports2.createSvgIconElement = exports2.getCanvasContext = exports2.getWindowDocument = exports2.supportsTouch = exports2.disableTransitionTemporarily = exports2.forceReflow = exports2.SVG_NS = void 0;
            var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
            exports2.SVG_NS = "http://www.w3.org/2000/svg";
            function forceReflow(element) {
              element.offsetHeight;
            }
            exports2.forceReflow = forceReflow;
            function disableTransitionTemporarily(element, callback) {
              var t4 = element.style.transition;
              element.style.transition = "none";
              callback();
              element.style.transition = t4;
            }
            exports2.disableTransitionTemporarily = disableTransitionTemporarily;
            function supportsTouch(document2) {
              return document2.ontouchstart !== void 0;
            }
            exports2.supportsTouch = supportsTouch;
            function getWindowDocument() {
              var globalObj = type_util_1.TypeUtil.forceCast(new Function("return this")());
              return globalObj.document;
            }
            exports2.getWindowDocument = getWindowDocument;
            function isBrowser() {
              return !!process2.browser;
            }
            function getCanvasContext(canvasElement) {
              return isBrowser() ? canvasElement.getContext("2d") : null;
            }
            exports2.getCanvasContext = getCanvasContext;
            var ICON_ID_TO_INNER_HTML_MAP = {
              p2dpad: '<path d="M8 2V14" stroke="currentColor" stroke-width="1.5"/><path d="M2 8H14" stroke="currentColor" stroke-width="1.5"/><circle cx="8" cy="8" r="2" fill="currentColor"/>'
            };
            function createSvgIconElement(document2, iconId) {
              var elem = document2.createElementNS(exports2.SVG_NS, "svg");
              elem.innerHTML = ICON_ID_TO_INNER_HTML_MAP[iconId];
              return elem;
            }
            exports2.createSvgIconElement = createSvgIconElement;
            function insertElementAt(parentElement, element, index) {
              parentElement.insertBefore(element, parentElement.children[index]);
            }
            exports2.insertElementAt = insertElementAt;
            function removeElement(element) {
              if (element.parentElement) {
                element.parentElement.removeChild(element);
              }
            }
            exports2.removeElement = removeElement;
            function indexOfChildElement(element) {
              var parentElem = element.parentElement;
              if (!parentElem) {
                return -1;
              }
              var children = Array.prototype.slice.call(parentElem.children);
              return children.indexOf(element);
            }
            exports2.indexOfChildElement = indexOfChildElement;
            function findNextTarget(ev) {
              if (ev.relatedTarget) {
                return type_util_1.TypeUtil.forceCast(ev.relatedTarget);
              }
              if ("explicitOriginalTarget" in ev) {
                return ev.explicitOriginalTarget;
              }
              return null;
            }
            exports2.findNextTarget = findNextTarget;
          }).call(this, __webpack_require__("./node_modules/process/browser.js"));
        },
        "./src/main/js/misc/emitter.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.Emitter = void 0;
          var Emitter = function() {
            function Emitter2() {
              this.observers_ = {};
            }
            Emitter2.prototype.on = function(eventName, handler) {
              var observers = this.observers_[eventName];
              if (!observers) {
                observers = this.observers_[eventName] = [];
              }
              observers.push({
                handler
              });
              return this;
            };
            Emitter2.prototype.off = function(eventName, handler) {
              var observers = this.observers_[eventName];
              if (observers) {
                this.observers_[eventName] = observers.filter(function(observer) {
                  return observer.handler !== handler;
                });
              }
              return this;
            };
            Emitter2.prototype.emit = function(eventName, event) {
              var observers = this.observers_[eventName];
              if (!observers) {
                return;
              }
              observers.forEach(function(observer) {
                observer.handler(event);
              });
            };
            return Emitter2;
          }();
          exports2.Emitter = Emitter;
        },
        "./src/main/js/misc/number-util.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.NumberUtil = void 0;
          exports2.NumberUtil = {
            map: function(value, start1, end1, start2, end2) {
              var p3 = (value - start1) / (end1 - start1);
              return start2 + p3 * (end2 - start2);
            },
            getDecimalDigits: function(value) {
              var text = String(value.toFixed(10));
              var frac = text.split(".")[1];
              return frac.replace(/0+$/, "").length;
            },
            constrain: function(value, min4, max4) {
              return Math.min(Math.max(value, min4), max4);
            },
            loop: function(value, max4) {
              return (value % max4 + max4) % max4;
            }
          };
        },
        "./src/main/js/misc/pane-error.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.PaneError = void 0;
          function createMessage(config) {
            if (config.type === "alreadydisposed") {
              return "View has been already disposed";
            }
            if (config.type === "emptyvalue") {
              return "Value is empty for " + config.context.key;
            }
            if (config.type === "invalidparams") {
              return "Invalid parameters for " + config.context.name;
            }
            if (config.type === "nomatchingcontroller") {
              return "No matching controller for " + config.context.key;
            }
            if (config.type === "shouldneverhappen") {
              return "This error should never happen";
            }
            return "Unexpected error";
          }
          var PaneError = function() {
            function PaneError2(config) {
              this.message = createMessage(config);
              this.name = this.constructor.name;
              this.stack = new Error(this.message).stack;
              this.type = config.type;
            }
            PaneError2.alreadyDisposed = function() {
              return new PaneError2({ type: "alreadydisposed" });
            };
            PaneError2.shouldNeverHappen = function() {
              return new PaneError2({ type: "shouldneverhappen" });
            };
            return PaneError2;
          }();
          exports2.PaneError = PaneError;
          PaneError.prototype = Object.create(Error.prototype);
          PaneError.prototype.constructor = PaneError;
        },
        "./src/main/js/misc/pointer-handler.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.PointerHandler = void 0;
          var DomUtil = __webpack_require__("./src/main/js/misc/dom-util.ts");
          var emitter_1 = __webpack_require__("./src/main/js/misc/emitter.ts");
          var PointerHandler = function() {
            function PointerHandler2(document2, element) {
              this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);
              this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);
              this.onMouseDown_ = this.onMouseDown_.bind(this);
              this.onTouchMove_ = this.onTouchMove_.bind(this);
              this.onTouchStart_ = this.onTouchStart_.bind(this);
              this.document = document2;
              this.element = element;
              this.emitter = new emitter_1.Emitter();
              this.pressed_ = false;
              if (DomUtil.supportsTouch(this.document)) {
                element.addEventListener("touchstart", this.onTouchStart_);
                element.addEventListener("touchmove", this.onTouchMove_);
              } else {
                element.addEventListener("mousedown", this.onMouseDown_);
                this.document.addEventListener("mousemove", this.onDocumentMouseMove_);
                this.document.addEventListener("mouseup", this.onDocumentMouseUp_);
              }
            }
            PointerHandler2.prototype.computePosition_ = function(offsetX, offsetY) {
              var rect = this.element.getBoundingClientRect();
              return {
                px: offsetX / rect.width,
                py: offsetY / rect.height
              };
            };
            PointerHandler2.prototype.onMouseDown_ = function(e5) {
              var _a6;
              e5.preventDefault();
              (_a6 = e5.currentTarget) === null || _a6 === void 0 ? void 0 : _a6.focus();
              this.pressed_ = true;
              this.emitter.emit("down", {
                data: this.computePosition_(e5.offsetX, e5.offsetY),
                sender: this
              });
            };
            PointerHandler2.prototype.onDocumentMouseMove_ = function(e5) {
              if (!this.pressed_) {
                return;
              }
              var win = this.document.defaultView;
              var rect = this.element.getBoundingClientRect();
              this.emitter.emit("move", {
                data: this.computePosition_(e5.pageX - ((win && win.scrollX || 0) + rect.left), e5.pageY - ((win && win.scrollY || 0) + rect.top)),
                sender: this
              });
            };
            PointerHandler2.prototype.onDocumentMouseUp_ = function(e5) {
              if (!this.pressed_) {
                return;
              }
              this.pressed_ = false;
              var win = this.document.defaultView;
              var rect = this.element.getBoundingClientRect();
              this.emitter.emit("up", {
                data: this.computePosition_(e5.pageX - ((win && win.scrollX || 0) + rect.left), e5.pageY - ((win && win.scrollY || 0) + rect.top)),
                sender: this
              });
            };
            PointerHandler2.prototype.onTouchStart_ = function(e5) {
              e5.preventDefault();
              var touch = e5.targetTouches[0];
              var rect = this.element.getBoundingClientRect();
              this.emitter.emit("down", {
                data: this.computePosition_(touch.clientX - rect.left, touch.clientY - rect.top),
                sender: this
              });
            };
            PointerHandler2.prototype.onTouchMove_ = function(e5) {
              var touch = e5.targetTouches[0];
              var rect = this.element.getBoundingClientRect();
              this.emitter.emit("move", {
                data: this.computePosition_(touch.clientX - rect.left, touch.clientY - rect.top),
                sender: this
              });
            };
            return PointerHandler2;
          }();
          exports2.PointerHandler = PointerHandler;
        },
        "./src/main/js/misc/ticker/interval.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.IntervalTicker = void 0;
          var disposable_1 = __webpack_require__("./src/main/js/model/disposable.ts");
          var emitter_1 = __webpack_require__("./src/main/js/misc/emitter.ts");
          var IntervalTicker = function() {
            function IntervalTicker2(document2, interval) {
              var _this = this;
              this.onTick_ = this.onTick_.bind(this);
              this.doc_ = document2;
              this.emitter = new emitter_1.Emitter();
              if (interval <= 0) {
                this.id_ = null;
              } else {
                var win = this.doc_.defaultView;
                if (win) {
                  this.id_ = win.setInterval(this.onTick_, interval);
                }
              }
              this.disposable = new disposable_1.Disposable();
              this.disposable.emitter.on("dispose", function() {
                if (_this.id_ !== null) {
                  var win2 = _this.doc_.defaultView;
                  if (win2) {
                    win2.clearInterval(_this.id_);
                  }
                }
                _this.id_ = null;
              });
            }
            IntervalTicker2.prototype.onTick_ = function() {
              this.emitter.emit("tick", {
                sender: this
              });
            };
            return IntervalTicker2;
          }();
          exports2.IntervalTicker = IntervalTicker;
        },
        "./src/main/js/misc/ticker/manual.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.ManualTicker = void 0;
          var disposable_1 = __webpack_require__("./src/main/js/model/disposable.ts");
          var emitter_1 = __webpack_require__("./src/main/js/misc/emitter.ts");
          var ManualTicker = function() {
            function ManualTicker2() {
              this.disposable = new disposable_1.Disposable();
              this.emitter = new emitter_1.Emitter();
            }
            ManualTicker2.prototype.tick = function() {
              this.emitter.emit("tick", {
                sender: this
              });
            };
            return ManualTicker2;
          }();
          exports2.ManualTicker = ManualTicker;
        },
        "./src/main/js/misc/type-util.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.TypeUtil = void 0;
          exports2.TypeUtil = {
            forceCast: function(v2) {
              return v2;
            },
            isEmpty: function(value) {
              return value === null || value === void 0;
            },
            getOrDefault: function(value, defaultValue) {
              return !exports2.TypeUtil.isEmpty(value) ? value : defaultValue;
            },
            deepEqualsArray: function(a1, a22) {
              if (a1.length !== a22.length) {
                return false;
              }
              for (var i4 = 0; i4 < a1.length; i4++) {
                if (a1[i4] !== a22[i4]) {
                  return false;
                }
              }
              return true;
            }
          };
        },
        "./src/main/js/model/button.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.Button = void 0;
          var emitter_1 = __webpack_require__("./src/main/js/misc/emitter.ts");
          var Button = function() {
            function Button2(title) {
              this.emitter = new emitter_1.Emitter();
              this.title = title;
            }
            Button2.prototype.click = function() {
              this.emitter.emit("click", {
                sender: this
              });
            };
            return Button2;
          }();
          exports2.Button = Button;
        },
        "./src/main/js/model/color.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.Color = void 0;
          var ColorModel = __webpack_require__("./src/main/js/misc/color-model.ts");
          var number_util_1 = __webpack_require__("./src/main/js/misc/number-util.ts");
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          var CONSTRAINT_MAP = {
            hsl: function(comps) {
              return [
                number_util_1.NumberUtil.loop(comps[0], 360),
                number_util_1.NumberUtil.constrain(comps[1], 0, 100),
                number_util_1.NumberUtil.constrain(comps[2], 0, 100),
                number_util_1.NumberUtil.constrain(type_util_1.TypeUtil.getOrDefault(comps[3], 1), 0, 1)
              ];
            },
            hsv: function(comps) {
              return [
                number_util_1.NumberUtil.loop(comps[0], 360),
                number_util_1.NumberUtil.constrain(comps[1], 0, 100),
                number_util_1.NumberUtil.constrain(comps[2], 0, 100),
                number_util_1.NumberUtil.constrain(type_util_1.TypeUtil.getOrDefault(comps[3], 1), 0, 1)
              ];
            },
            rgb: function(comps) {
              return [
                number_util_1.NumberUtil.constrain(comps[0], 0, 255),
                number_util_1.NumberUtil.constrain(comps[1], 0, 255),
                number_util_1.NumberUtil.constrain(comps[2], 0, 255),
                number_util_1.NumberUtil.constrain(type_util_1.TypeUtil.getOrDefault(comps[3], 1), 0, 1)
              ];
            }
          };
          function isRgbColorComponent(obj, key2) {
            if (typeof obj !== "object" || type_util_1.TypeUtil.isEmpty(obj)) {
              return false;
            }
            return key2 in obj && typeof obj[key2] === "number";
          }
          var Color = function() {
            function Color2(comps, mode) {
              this.mode_ = mode;
              this.comps_ = CONSTRAINT_MAP[mode](comps);
            }
            Color2.fromObject = function(obj) {
              var comps = "a" in obj ? [obj.r, obj.g, obj.b, obj.a] : [obj.r, obj.g, obj.b];
              return new Color2(comps, "rgb");
            };
            Color2.toRgbaObject = function(color) {
              return color.toRgbaObject();
            };
            Color2.isRgbColorObject = function(obj) {
              return isRgbColorComponent(obj, "r") && isRgbColorComponent(obj, "g") && isRgbColorComponent(obj, "b");
            };
            Color2.isRgbaColorObject = function(obj) {
              return this.isRgbColorObject(obj) && isRgbColorComponent(obj, "a");
            };
            Color2.isColorObject = function(obj) {
              return this.isRgbColorObject(obj);
            };
            Object.defineProperty(Color2.prototype, "mode", {
              get: function() {
                return this.mode_;
              },
              enumerable: false,
              configurable: true
            });
            Color2.prototype.getComponents = function(opt_mode) {
              return ColorModel.withAlpha(ColorModel.convertMode(ColorModel.withoutAlpha(this.comps_), this.mode_, opt_mode || this.mode_), this.comps_[3]);
            };
            Color2.prototype.toRgbaObject = function() {
              var rgbComps = this.getComponents("rgb");
              return {
                r: rgbComps[0],
                g: rgbComps[1],
                b: rgbComps[2],
                a: rgbComps[3]
              };
            };
            return Color2;
          }();
          exports2.Color = Color;
        },
        "./src/main/js/model/disposable.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.Disposable = void 0;
          var emitter_1 = __webpack_require__("./src/main/js/misc/emitter.ts");
          var Disposable = function() {
            function Disposable2() {
              this.emitter = new emitter_1.Emitter();
              this.disposed_ = false;
            }
            Object.defineProperty(Disposable2.prototype, "disposed", {
              get: function() {
                return this.disposed_;
              },
              enumerable: false,
              configurable: true
            });
            Disposable2.prototype.dispose = function() {
              if (this.disposed_) {
                return false;
              }
              this.disposed_ = true;
              this.emitter.emit("dispose", {
                sender: this
              });
              return true;
            };
            return Disposable2;
          }();
          exports2.Disposable = Disposable;
        },
        "./src/main/js/model/foldable.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.Foldable = void 0;
          var emitter_1 = __webpack_require__("./src/main/js/misc/emitter.ts");
          var Foldable = function() {
            function Foldable2() {
              this.emitter = new emitter_1.Emitter();
              this.expanded_ = false;
            }
            Object.defineProperty(Foldable2.prototype, "expanded", {
              get: function() {
                return this.expanded_;
              },
              set: function(expanded) {
                var changed = this.expanded_ !== expanded;
                if (changed) {
                  this.expanded_ = expanded;
                  this.emitter.emit("change", {
                    sender: this
                  });
                }
              },
              enumerable: false,
              configurable: true
            });
            return Foldable2;
          }();
          exports2.Foldable = Foldable;
        },
        "./src/main/js/model/folder.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.Folder = void 0;
          var emitter_1 = __webpack_require__("./src/main/js/misc/emitter.ts");
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          var Folder = function() {
            function Folder2(title, expanded) {
              this.emitter = new emitter_1.Emitter();
              this.expanded_ = expanded;
              this.expandedHeight_ = null;
              this.temporaryExpanded_ = null;
              this.shouldFixHeight_ = false;
              this.title = title;
            }
            Object.defineProperty(Folder2.prototype, "expanded", {
              get: function() {
                return this.expanded_;
              },
              set: function(expanded) {
                var changed = this.expanded_ !== expanded;
                if (!changed) {
                  return;
                }
                this.emitter.emit("beforechange", {
                  propertyName: "expanded",
                  sender: this
                });
                this.expanded_ = expanded;
                this.emitter.emit("change", {
                  propertyName: "expanded",
                  sender: this
                });
              },
              enumerable: false,
              configurable: true
            });
            Object.defineProperty(Folder2.prototype, "temporaryExpanded", {
              get: function() {
                return this.temporaryExpanded_;
              },
              set: function(expanded) {
                var changed = this.temporaryExpanded_ !== expanded;
                if (!changed) {
                  return;
                }
                this.emitter.emit("beforechange", {
                  propertyName: "temporaryExpanded",
                  sender: this
                });
                this.temporaryExpanded_ = expanded;
                this.emitter.emit("change", {
                  propertyName: "temporaryExpanded",
                  sender: this
                });
              },
              enumerable: false,
              configurable: true
            });
            Object.defineProperty(Folder2.prototype, "expandedHeight", {
              get: function() {
                return this.expandedHeight_;
              },
              set: function(expandedHeight) {
                var changed = this.expandedHeight_ !== expandedHeight;
                if (!changed) {
                  return;
                }
                this.emitter.emit("beforechange", {
                  propertyName: "expandedHeight",
                  sender: this
                });
                this.expandedHeight_ = expandedHeight;
                this.emitter.emit("change", {
                  propertyName: "expandedHeight",
                  sender: this
                });
              },
              enumerable: false,
              configurable: true
            });
            Object.defineProperty(Folder2.prototype, "shouldFixHeight", {
              get: function() {
                return this.shouldFixHeight_;
              },
              set: function(shouldFixHeight) {
                var changed = this.shouldFixHeight_ !== shouldFixHeight;
                if (!changed) {
                  return;
                }
                this.emitter.emit("beforechange", {
                  propertyName: "shouldFixHeight",
                  sender: this
                });
                this.shouldFixHeight_ = shouldFixHeight;
                this.emitter.emit("change", {
                  propertyName: "shouldFixHeight",
                  sender: this
                });
              },
              enumerable: false,
              configurable: true
            });
            Object.defineProperty(Folder2.prototype, "styleExpanded", {
              get: function() {
                return type_util_1.TypeUtil.getOrDefault(this.temporaryExpanded, this.expanded);
              },
              enumerable: false,
              configurable: true
            });
            Object.defineProperty(Folder2.prototype, "styleHeight", {
              get: function() {
                if (!this.styleExpanded) {
                  return "0";
                }
                if (this.shouldFixHeight && !type_util_1.TypeUtil.isEmpty(this.expandedHeight)) {
                  return this.expandedHeight + "px";
                }
                return "auto";
              },
              enumerable: false,
              configurable: true
            });
            return Folder2;
          }();
          exports2.Folder = Folder;
        },
        "./src/main/js/model/graph-cursor.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.GraphCursor = void 0;
          var emitter_1 = __webpack_require__("./src/main/js/misc/emitter.ts");
          var GraphCursor = function() {
            function GraphCursor2() {
              this.emitter = new emitter_1.Emitter();
              this.index_ = -1;
            }
            Object.defineProperty(GraphCursor2.prototype, "index", {
              get: function() {
                return this.index_;
              },
              set: function(index) {
                var changed = this.index_ !== index;
                if (changed) {
                  this.index_ = index;
                  this.emitter.emit("change", {
                    index,
                    sender: this
                  });
                }
              },
              enumerable: false,
              configurable: true
            });
            return GraphCursor2;
          }();
          exports2.GraphCursor = GraphCursor;
        },
        "./src/main/js/model/input-value.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.InputValue = void 0;
          var emitter_1 = __webpack_require__("./src/main/js/misc/emitter.ts");
          var InputValue = function() {
            function InputValue2(initialValue, constraint) {
              this.constraint_ = constraint;
              this.emitter = new emitter_1.Emitter();
              this.rawValue_ = initialValue;
            }
            InputValue2.equalsValue = function(v1, v2) {
              return v1 === v2;
            };
            Object.defineProperty(InputValue2.prototype, "constraint", {
              get: function() {
                return this.constraint_;
              },
              enumerable: false,
              configurable: true
            });
            Object.defineProperty(InputValue2.prototype, "rawValue", {
              get: function() {
                return this.rawValue_;
              },
              set: function(rawValue) {
                var constrainedValue = this.constraint_ ? this.constraint_.constrain(rawValue) : rawValue;
                var changed = !InputValue2.equalsValue(this.rawValue_, constrainedValue);
                if (changed) {
                  this.rawValue_ = constrainedValue;
                  this.emitter.emit("change", {
                    rawValue: constrainedValue,
                    sender: this
                  });
                }
              },
              enumerable: false,
              configurable: true
            });
            return InputValue2;
          }();
          exports2.InputValue = InputValue;
        },
        "./src/main/js/model/list.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.List = void 0;
          var emitter_1 = __webpack_require__("./src/main/js/misc/emitter.ts");
          var List = function() {
            function List2() {
              this.emitter = new emitter_1.Emitter();
              this.items_ = [];
            }
            Object.defineProperty(List2.prototype, "items", {
              get: function() {
                return this.items_;
              },
              enumerable: false,
              configurable: true
            });
            List2.prototype.add = function(item, opt_index) {
              var index = opt_index !== void 0 ? opt_index : this.items_.length;
              this.items_.splice(index, 0, item);
              this.emitter.emit("add", {
                index,
                item,
                sender: this
              });
            };
            List2.prototype.remove = function(item) {
              var index = this.items_.indexOf(item);
              if (index < 0) {
                return;
              }
              this.items_.splice(index, 1);
              this.emitter.emit("remove", {
                sender: this
              });
            };
            return List2;
          }();
          exports2.List = List;
        },
        "./src/main/js/model/model-sync.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.connect = void 0;
          function connect(_a6) {
            var primary = _a6.primary, secondary = _a6.secondary;
            primary.emitter(primary.value).on("change", function() {
              primary.apply(primary.value, secondary.value);
            });
            secondary.emitter(secondary.value).on("change", function() {
              secondary.apply(secondary.value, primary.value);
            });
            primary.apply(primary.value, secondary.value);
          }
          exports2.connect = connect;
        },
        "./src/main/js/model/monitor-value.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.MonitorValue = void 0;
          var emitter_1 = __webpack_require__("./src/main/js/misc/emitter.ts");
          var MonitorValue = function() {
            function MonitorValue2(totalCount) {
              this.emitter = new emitter_1.Emitter();
              this.rawValues_ = [];
              this.totalCount_ = totalCount;
            }
            Object.defineProperty(MonitorValue2.prototype, "rawValues", {
              get: function() {
                return this.rawValues_;
              },
              enumerable: false,
              configurable: true
            });
            Object.defineProperty(MonitorValue2.prototype, "totalCount", {
              get: function() {
                return this.totalCount_;
              },
              enumerable: false,
              configurable: true
            });
            MonitorValue2.prototype.append = function(rawValue) {
              this.rawValues_.push(rawValue);
              if (this.rawValues_.length > this.totalCount_) {
                this.rawValues_.splice(0, this.rawValues_.length - this.totalCount_);
              }
              this.emitter.emit("update", {
                rawValue,
                sender: this
              });
            };
            return MonitorValue2;
          }();
          exports2.MonitorValue = MonitorValue;
        },
        "./src/main/js/model/picked-color.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.PickedColor = void 0;
          var emitter_1 = __webpack_require__("./src/main/js/misc/emitter.ts");
          var PickedColor = function() {
            function PickedColor2(value) {
              this.onValueChange_ = this.onValueChange_.bind(this);
              this.mode_ = "rgb";
              this.value = value;
              this.value.emitter.on("change", this.onValueChange_);
              this.emitter = new emitter_1.Emitter();
            }
            Object.defineProperty(PickedColor2.prototype, "mode", {
              get: function() {
                return this.mode_;
              },
              set: function(mode) {
                if (this.mode_ === mode) {
                  return;
                }
                this.mode_ = mode;
                this.emitter.emit("change", {
                  propertyName: "mode",
                  sender: this
                });
              },
              enumerable: false,
              configurable: true
            });
            PickedColor2.prototype.onValueChange_ = function() {
              this.emitter.emit("change", {
                propertyName: "value",
                sender: this
              });
            };
            return PickedColor2;
          }();
          exports2.PickedColor = PickedColor;
        },
        "./src/main/js/model/point-2d.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.Point2d = void 0;
          var Point2d = function() {
            function Point2d2(x2, y3) {
              if (x2 === void 0) {
                x2 = 0;
              }
              if (y3 === void 0) {
                y3 = 0;
              }
              this.x = x2;
              this.y = y3;
            }
            Point2d2.prototype.getComponents = function() {
              return [this.x, this.y];
            };
            Point2d2.prototype.toObject = function() {
              return {
                x: this.x,
                y: this.y
              };
            };
            return Point2d2;
          }();
          exports2.Point2d = Point2d;
        },
        "./src/main/js/model/target.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.Target = void 0;
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          var Target = function() {
            function Target2(object, key2, opt_id) {
              this.obj_ = object;
              this.key_ = key2;
              this.presetKey_ = type_util_1.TypeUtil.getOrDefault(opt_id, key2);
            }
            Object.defineProperty(Target2.prototype, "key", {
              get: function() {
                return this.key_;
              },
              enumerable: false,
              configurable: true
            });
            Object.defineProperty(Target2.prototype, "presetKey", {
              get: function() {
                return this.presetKey_;
              },
              enumerable: false,
              configurable: true
            });
            Target2.prototype.read = function() {
              return this.obj_[this.key_];
            };
            Target2.prototype.write = function(value) {
              this.obj_[this.key_] = value;
            };
            return Target2;
          }();
          exports2.Target = Target;
        },
        "./src/main/js/model/ui-container.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.UiContainer = void 0;
          var folder_1 = __webpack_require__("./src/main/js/controller/folder.ts");
          var input_binding_1 = __webpack_require__("./src/main/js/controller/input-binding.ts");
          var monitor_binding_1 = __webpack_require__("./src/main/js/controller/monitor-binding.ts");
          var emitter_1 = __webpack_require__("./src/main/js/misc/emitter.ts");
          var list_1 = __webpack_require__("./src/main/js/model/list.ts");
          var UiContainer = function() {
            function UiContainer2() {
              this.onItemFolderFold_ = this.onItemFolderFold_.bind(this);
              this.onListItemLayout_ = this.onListItemLayout_.bind(this);
              this.onSubitemLayout_ = this.onSubitemLayout_.bind(this);
              this.onSubitemFolderFold_ = this.onSubitemFolderFold_.bind(this);
              this.onSubitemInputChange_ = this.onSubitemInputChange_.bind(this);
              this.onSubitemMonitorUpdate_ = this.onSubitemMonitorUpdate_.bind(this);
              this.onItemInputChange_ = this.onItemInputChange_.bind(this);
              this.onListAdd_ = this.onListAdd_.bind(this);
              this.onListItemDispose_ = this.onListItemDispose_.bind(this);
              this.onListRemove_ = this.onListRemove_.bind(this);
              this.onItemMonitorUpdate_ = this.onItemMonitorUpdate_.bind(this);
              this.ucList_ = new list_1.List();
              this.emitter = new emitter_1.Emitter();
              this.ucList_.emitter.on("add", this.onListAdd_);
              this.ucList_.emitter.on("remove", this.onListRemove_);
            }
            Object.defineProperty(UiContainer2.prototype, "items", {
              get: function() {
                return this.ucList_.items;
              },
              enumerable: false,
              configurable: true
            });
            UiContainer2.prototype.add = function(uc, opt_index) {
              this.ucList_.add(uc, opt_index);
            };
            UiContainer2.prototype.onListAdd_ = function(ev) {
              var uc = ev.item;
              this.emitter.emit("add", {
                index: ev.index,
                sender: this,
                uiController: uc
              });
              uc.viewModel.emitter.on("dispose", this.onListItemDispose_);
              uc.viewModel.emitter.on("change", this.onListItemLayout_);
              if (uc instanceof input_binding_1.InputBindingController) {
                var emitter = uc.binding.emitter;
                emitter.on("change", this.onItemInputChange_);
              } else if (uc instanceof monitor_binding_1.MonitorBindingController) {
                var emitter = uc.binding.emitter;
                emitter.on("update", this.onItemMonitorUpdate_);
              } else if (uc instanceof folder_1.FolderController) {
                uc.folder.emitter.on("change", this.onItemFolderFold_);
                var emitter = uc.uiContainer.emitter;
                emitter.on("itemfold", this.onSubitemFolderFold_);
                emitter.on("itemlayout", this.onSubitemLayout_);
                emitter.on("inputchange", this.onSubitemInputChange_);
                emitter.on("monitorupdate", this.onSubitemMonitorUpdate_);
              }
            };
            UiContainer2.prototype.onListRemove_ = function(_2) {
              this.emitter.emit("remove", {
                sender: this
              });
            };
            UiContainer2.prototype.onListItemLayout_ = function(ev) {
              if (ev.propertyName === "hidden" || ev.propertyName === "positions") {
                this.emitter.emit("itemlayout", {
                  sender: this
                });
              }
            };
            UiContainer2.prototype.onListItemDispose_ = function(_2) {
              var _this = this;
              var disposedUcs = this.ucList_.items.filter(function(uc) {
                return uc.viewModel.disposed;
              });
              disposedUcs.forEach(function(uc) {
                _this.ucList_.remove(uc);
              });
            };
            UiContainer2.prototype.onItemInputChange_ = function(ev) {
              this.emitter.emit("inputchange", {
                inputBinding: ev.sender,
                sender: this,
                value: ev.rawValue
              });
            };
            UiContainer2.prototype.onItemMonitorUpdate_ = function(ev) {
              this.emitter.emit("monitorupdate", {
                monitorBinding: ev.sender,
                sender: this,
                value: ev.rawValue
              });
            };
            UiContainer2.prototype.onItemFolderFold_ = function(ev) {
              if (ev.propertyName !== "expanded") {
                return;
              }
              this.emitter.emit("itemfold", {
                expanded: ev.sender.expanded,
                sender: this
              });
            };
            UiContainer2.prototype.onSubitemLayout_ = function(_2) {
              this.emitter.emit("itemlayout", {
                sender: this
              });
            };
            UiContainer2.prototype.onSubitemInputChange_ = function(ev) {
              this.emitter.emit("inputchange", {
                inputBinding: ev.inputBinding,
                sender: this,
                value: ev.value
              });
            };
            UiContainer2.prototype.onSubitemMonitorUpdate_ = function(ev) {
              this.emitter.emit("monitorupdate", {
                monitorBinding: ev.monitorBinding,
                sender: this,
                value: ev.value
              });
            };
            UiContainer2.prototype.onSubitemFolderFold_ = function(ev) {
              this.emitter.emit("itemfold", {
                expanded: ev.expanded,
                sender: this
              });
            };
            return UiContainer2;
          }();
          exports2.UiContainer = UiContainer;
        },
        "./src/main/js/model/view-model.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.ViewModel = void 0;
          var emitter_1 = __webpack_require__("./src/main/js/misc/emitter.ts");
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          var disposable_1 = __webpack_require__("./src/main/js/model/disposable.ts");
          var ViewModel = function() {
            function ViewModel2() {
              this.onDispose_ = this.onDispose_.bind(this);
              this.emitter = new emitter_1.Emitter();
              this.positions_ = [];
              this.hidden_ = false;
              this.disposable_ = new disposable_1.Disposable();
              this.disposable_.emitter.on("dispose", this.onDispose_);
            }
            Object.defineProperty(ViewModel2.prototype, "hidden", {
              get: function() {
                return this.hidden_;
              },
              set: function(hidden) {
                if (this.hidden_ === hidden) {
                  return;
                }
                this.hidden_ = hidden;
                this.emitter.emit("change", {
                  propertyName: "hidden",
                  sender: this
                });
              },
              enumerable: false,
              configurable: true
            });
            Object.defineProperty(ViewModel2.prototype, "positions", {
              get: function() {
                return this.positions_;
              },
              set: function(positions) {
                if (type_util_1.TypeUtil.deepEqualsArray(positions, this.positions_)) {
                  return;
                }
                this.positions_ = positions;
                this.emitter.emit("change", {
                  propertyName: "positions",
                  sender: this
                });
              },
              enumerable: false,
              configurable: true
            });
            Object.defineProperty(ViewModel2.prototype, "disposed", {
              get: function() {
                return this.disposable_.disposed;
              },
              enumerable: false,
              configurable: true
            });
            ViewModel2.prototype.dispose = function() {
              this.disposable_.dispose();
            };
            ViewModel2.prototype.onDispose_ = function() {
              this.emitter.emit("dispose", {
                sender: this
              });
            };
            return ViewModel2;
          }();
          exports2.ViewModel = ViewModel;
        },
        "./src/main/js/model/view-positions.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.getAll = void 0;
          function getAll() {
            return ["first", "last"];
          }
          exports2.getAll = getAll;
        },
        "./src/main/js/parser/any-point-2d.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.AnyPoint2dParser = void 0;
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          var point_2d_1 = __webpack_require__("./src/main/js/model/point-2d.ts");
          exports2.AnyPoint2dParser = function(obj) {
            if (type_util_1.TypeUtil.isEmpty(obj)) {
              return null;
            }
            var x2 = obj.x;
            var y3 = obj.y;
            if (typeof x2 !== "number" || typeof y3 !== "number") {
              return null;
            }
            return new point_2d_1.Point2d(x2, y3);
          };
        },
        "./src/main/js/parser/number-color.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.RgbaParser = exports2.RgbParser = void 0;
          var number_util_1 = __webpack_require__("./src/main/js/misc/number-util.ts");
          var color_1 = __webpack_require__("./src/main/js/model/color.ts");
          exports2.RgbParser = function(num) {
            return new color_1.Color([num >> 16 & 255, num >> 8 & 255, num & 255], "rgb");
          };
          exports2.RgbaParser = function(num) {
            return new color_1.Color([
              num >> 24 & 255,
              num >> 16 & 255,
              num >> 8 & 255,
              number_util_1.NumberUtil.map(num & 255, 0, 255, 0, 1)
            ], "rgb");
          };
        },
        "./src/main/js/parser/string-color.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.hasAlphaComponent = exports2.CompositeParser = exports2.getNotation = void 0;
          var number_util_1 = __webpack_require__("./src/main/js/misc/number-util.ts");
          var color_1 = __webpack_require__("./src/main/js/model/color.ts");
          function parseCssNumberOrPercentage(text, maxValue) {
            var m2 = text.match(/^(.+)%$/);
            if (!m2) {
              return Math.min(parseFloat(text), maxValue);
            }
            return Math.min(parseFloat(m2[1]) * 0.01 * maxValue, maxValue);
          }
          var ANGLE_TO_DEG_MAP = {
            deg: function(angle3) {
              return angle3;
            },
            grad: function(angle3) {
              return angle3 * 360 / 400;
            },
            rad: function(angle3) {
              return angle3 * 360 / (2 * Math.PI);
            },
            turn: function(angle3) {
              return angle3 * 360;
            }
          };
          function parseCssNumberOrAngle(text) {
            var m2 = text.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);
            if (!m2) {
              return parseFloat(text);
            }
            var angle3 = parseFloat(m2[1]);
            var unit = m2[2];
            return ANGLE_TO_DEG_MAP[unit](angle3);
          }
          var NOTATION_TO_PARSER_MAP = {
            "func.rgb": function(text) {
              var m2 = text.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);
              if (!m2) {
                return null;
              }
              var comps = [
                parseCssNumberOrPercentage(m2[1], 255),
                parseCssNumberOrPercentage(m2[2], 255),
                parseCssNumberOrPercentage(m2[3], 255)
              ];
              if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {
                return null;
              }
              return new color_1.Color(comps, "rgb");
            },
            "func.rgba": function(text) {
              var m2 = text.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);
              if (!m2) {
                return null;
              }
              var comps = [
                parseCssNumberOrPercentage(m2[1], 255),
                parseCssNumberOrPercentage(m2[2], 255),
                parseCssNumberOrPercentage(m2[3], 255),
                parseCssNumberOrPercentage(m2[4], 1)
              ];
              if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2]) || isNaN(comps[3])) {
                return null;
              }
              return new color_1.Color(comps, "rgb");
            },
            "func.hsl": function(text) {
              var m2 = text.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);
              if (!m2) {
                return null;
              }
              var comps = [
                parseCssNumberOrAngle(m2[1]),
                parseCssNumberOrPercentage(m2[2], 100),
                parseCssNumberOrPercentage(m2[3], 100)
              ];
              if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {
                return null;
              }
              return new color_1.Color(comps, "hsl");
            },
            "func.hsla": function(text) {
              var m2 = text.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);
              if (!m2) {
                return null;
              }
              var comps = [
                parseCssNumberOrAngle(m2[1]),
                parseCssNumberOrPercentage(m2[2], 100),
                parseCssNumberOrPercentage(m2[3], 100),
                parseCssNumberOrPercentage(m2[4], 1)
              ];
              if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2]) || isNaN(comps[3])) {
                return null;
              }
              return new color_1.Color(comps, "hsl");
            },
            "hex.rgb": function(text) {
              var mRrggbb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);
              if (mRrggbb) {
                return new color_1.Color([
                  parseInt(mRrggbb[1] + mRrggbb[1], 16),
                  parseInt(mRrggbb[2] + mRrggbb[2], 16),
                  parseInt(mRrggbb[3] + mRrggbb[3], 16)
                ], "rgb");
              }
              var mRgb = text.match(/^#([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);
              if (mRgb) {
                return new color_1.Color([parseInt(mRgb[1], 16), parseInt(mRgb[2], 16), parseInt(mRgb[3], 16)], "rgb");
              }
              return null;
            },
            "hex.rgba": function(text) {
              var mRrggbb = text.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);
              if (mRrggbb) {
                return new color_1.Color([
                  parseInt(mRrggbb[1] + mRrggbb[1], 16),
                  parseInt(mRrggbb[2] + mRrggbb[2], 16),
                  parseInt(mRrggbb[3] + mRrggbb[3], 16),
                  number_util_1.NumberUtil.map(parseInt(mRrggbb[4] + mRrggbb[4], 16), 0, 255, 0, 1)
                ], "rgb");
              }
              var mRgb = text.match(/^#?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);
              if (mRgb) {
                return new color_1.Color([
                  parseInt(mRgb[1], 16),
                  parseInt(mRgb[2], 16),
                  parseInt(mRgb[3], 16),
                  number_util_1.NumberUtil.map(parseInt(mRgb[4], 16), 0, 255, 0, 1)
                ], "rgb");
              }
              return null;
            }
          };
          function getNotation(text) {
            var notations = Object.keys(NOTATION_TO_PARSER_MAP);
            return notations.reduce(function(result, notation) {
              if (result) {
                return result;
              }
              var subparser = NOTATION_TO_PARSER_MAP[notation];
              return subparser(text) ? notation : null;
            }, null);
          }
          exports2.getNotation = getNotation;
          exports2.CompositeParser = function(text) {
            var notation = getNotation(text);
            return notation ? NOTATION_TO_PARSER_MAP[notation](text) : null;
          };
          function hasAlphaComponent(notation) {
            return notation === "func.hsla" || notation === "func.rgba" || notation === "hex.rgba";
          }
          exports2.hasAlphaComponent = hasAlphaComponent;
        },
        "./src/main/js/parser/string-number.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.StringNumberParser = void 0;
          exports2.StringNumberParser = function(text) {
            var num = parseFloat(text);
            if (isNaN(num)) {
              return null;
            }
            return num;
          };
        },
        "./src/main/js/tweakpane-without-style.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          var __extends = this && this.__extends || function() {
            var extendStatics = function(d3, b3) {
              extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b4) {
                d4.__proto__ = b4;
              } || function(d4, b4) {
                for (var p3 in b4)
                  if (b4.hasOwnProperty(p3))
                    d4[p3] = b4[p3];
              };
              return extendStatics(d3, b3);
            };
            return function(d3, b3) {
              extendStatics(d3, b3);
              function __() {
                this.constructor = d3;
              }
              d3.prototype = b3 === null ? Object.create(b3) : (__.prototype = b3.prototype, new __());
            };
          }();
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.TweakpaneWithoutStyle = void 0;
          var root_1 = __webpack_require__("./src/main/js/api/root.ts");
          var root_2 = __webpack_require__("./src/main/js/controller/root.ts");
          var class_name_1 = __webpack_require__("./src/main/js/misc/class-name.ts");
          var DomUtil = __webpack_require__("./src/main/js/misc/dom-util.ts");
          var pane_error_1 = __webpack_require__("./src/main/js/misc/pane-error.ts");
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          var view_model_1 = __webpack_require__("./src/main/js/model/view-model.ts");
          function createDefaultWrapperElement(document2) {
            var elem = document2.createElement("div");
            elem.classList.add(class_name_1.ClassName("dfw")());
            if (document2.body) {
              document2.body.appendChild(elem);
            }
            return elem;
          }
          var TweakpaneWithoutStyle = function(_super) {
            __extends(TweakpaneWithoutStyle2, _super);
            function TweakpaneWithoutStyle2(opt_config) {
              var _this = this;
              var config = opt_config || {};
              var document2 = type_util_1.TypeUtil.getOrDefault(config.document, DomUtil.getWindowDocument());
              var rootController = new root_2.RootController(document2, {
                expanded: config.expanded,
                viewModel: new view_model_1.ViewModel(),
                title: config.title
              });
              _this = _super.call(this, rootController) || this;
              _this.containerElem_ = config.container || createDefaultWrapperElement(document2);
              _this.containerElem_.appendChild(_this.element);
              _this.doc_ = document2;
              _this.usesDefaultWrapper_ = !config.container;
              return _this;
            }
            TweakpaneWithoutStyle2.prototype.dispose = function() {
              var containerElem = this.containerElem_;
              if (!containerElem) {
                throw pane_error_1.PaneError.alreadyDisposed();
              }
              if (this.usesDefaultWrapper_) {
                var parentElem = containerElem.parentElement;
                if (parentElem) {
                  parentElem.removeChild(containerElem);
                }
              }
              this.containerElem_ = null;
              this.doc_ = null;
              _super.prototype.dispose.call(this);
            };
            Object.defineProperty(TweakpaneWithoutStyle2.prototype, "document", {
              get: function() {
                if (!this.doc_) {
                  throw pane_error_1.PaneError.alreadyDisposed();
                }
                return this.doc_;
              },
              enumerable: false,
              configurable: true
            });
            return TweakpaneWithoutStyle2;
          }(root_1.RootApi);
          exports2.TweakpaneWithoutStyle = TweakpaneWithoutStyle;
        },
        "./src/main/js/view/button.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          var __extends = this && this.__extends || function() {
            var extendStatics = function(d3, b3) {
              extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b4) {
                d4.__proto__ = b4;
              } || function(d4, b4) {
                for (var p3 in b4)
                  if (b4.hasOwnProperty(p3))
                    d4[p3] = b4[p3];
              };
              return extendStatics(d3, b3);
            };
            return function(d3, b3) {
              extendStatics(d3, b3);
              function __() {
                this.constructor = d3;
              }
              d3.prototype = b3 === null ? Object.create(b3) : (__.prototype = b3.prototype, new __());
            };
          }();
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.ButtonView = void 0;
          var class_name_1 = __webpack_require__("./src/main/js/misc/class-name.ts");
          var DisposingUtil = __webpack_require__("./src/main/js/misc/disposing-util.ts");
          var pane_error_1 = __webpack_require__("./src/main/js/misc/pane-error.ts");
          var view_1 = __webpack_require__("./src/main/js/view/view.ts");
          var className = class_name_1.ClassName("btn");
          var ButtonView = function(_super) {
            __extends(ButtonView2, _super);
            function ButtonView2(document2, config) {
              var _this = _super.call(this, document2, config) || this;
              _this.button = config.button;
              _this.element.classList.add(className());
              var buttonElem = document2.createElement("button");
              buttonElem.classList.add(className("b"));
              buttonElem.textContent = _this.button.title;
              _this.element.appendChild(buttonElem);
              _this.buttonElem_ = buttonElem;
              config.model.emitter.on("dispose", function() {
                _this.buttonElem_ = DisposingUtil.disposeElement(_this.buttonElem_);
              });
              return _this;
            }
            Object.defineProperty(ButtonView2.prototype, "buttonElement", {
              get: function() {
                if (!this.buttonElem_) {
                  throw pane_error_1.PaneError.alreadyDisposed();
                }
                return this.buttonElem_;
              },
              enumerable: false,
              configurable: true
            });
            return ButtonView2;
          }(view_1.View);
          exports2.ButtonView = ButtonView;
        },
        "./src/main/js/view/folder.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          var __extends = this && this.__extends || function() {
            var extendStatics = function(d3, b3) {
              extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b4) {
                d4.__proto__ = b4;
              } || function(d4, b4) {
                for (var p3 in b4)
                  if (b4.hasOwnProperty(p3))
                    d4[p3] = b4[p3];
              };
              return extendStatics(d3, b3);
            };
            return function(d3, b3) {
              extendStatics(d3, b3);
              function __() {
                this.constructor = d3;
              }
              d3.prototype = b3 === null ? Object.create(b3) : (__.prototype = b3.prototype, new __());
            };
          }();
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.FolderView = void 0;
          var class_name_1 = __webpack_require__("./src/main/js/misc/class-name.ts");
          var DisposingUtil = __webpack_require__("./src/main/js/misc/disposing-util.ts");
          var pane_error_1 = __webpack_require__("./src/main/js/misc/pane-error.ts");
          var view_1 = __webpack_require__("./src/main/js/view/view.ts");
          var className = class_name_1.ClassName("fld");
          var FolderView = function(_super) {
            __extends(FolderView2, _super);
            function FolderView2(document2, config) {
              var _this = _super.call(this, document2, config) || this;
              _this.onFolderChange_ = _this.onFolderChange_.bind(_this);
              _this.folder_ = config.folder;
              _this.folder_.emitter.on("change", _this.onFolderChange_);
              _this.element.classList.add(className());
              var titleElem = document2.createElement("button");
              titleElem.classList.add(className("t"));
              titleElem.textContent = _this.folder_.title;
              _this.element.appendChild(titleElem);
              _this.titleElem_ = titleElem;
              var markElem = document2.createElement("div");
              markElem.classList.add(className("m"));
              _this.titleElem_.appendChild(markElem);
              var containerElem = document2.createElement("div");
              containerElem.classList.add(className("c"));
              _this.element.appendChild(containerElem);
              _this.containerElem_ = containerElem;
              _this.applyModel_();
              config.model.emitter.on("dispose", function() {
                _this.containerElem_ = DisposingUtil.disposeElement(_this.containerElem_);
                _this.titleElem_ = DisposingUtil.disposeElement(_this.titleElem_);
              });
              return _this;
            }
            Object.defineProperty(FolderView2.prototype, "titleElement", {
              get: function() {
                if (!this.titleElem_) {
                  throw pane_error_1.PaneError.alreadyDisposed();
                }
                return this.titleElem_;
              },
              enumerable: false,
              configurable: true
            });
            Object.defineProperty(FolderView2.prototype, "containerElement", {
              get: function() {
                if (!this.containerElem_) {
                  throw pane_error_1.PaneError.alreadyDisposed();
                }
                return this.containerElem_;
              },
              enumerable: false,
              configurable: true
            });
            FolderView2.prototype.applyModel_ = function() {
              var containerElem = this.containerElem_;
              if (!containerElem) {
                throw pane_error_1.PaneError.alreadyDisposed();
              }
              var expanded = this.folder_.styleExpanded;
              var expandedClass = className(void 0, "expanded");
              if (expanded) {
                this.element.classList.add(expandedClass);
              } else {
                this.element.classList.remove(expandedClass);
              }
              containerElem.style.height = this.folder_.styleHeight;
            };
            FolderView2.prototype.onFolderChange_ = function() {
              this.applyModel_();
            };
            return FolderView2;
          }(view_1.View);
          exports2.FolderView = FolderView;
        },
        "./src/main/js/view/input/a-palette.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          var __extends = this && this.__extends || function() {
            var extendStatics = function(d3, b3) {
              extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b4) {
                d4.__proto__ = b4;
              } || function(d4, b4) {
                for (var p3 in b4)
                  if (b4.hasOwnProperty(p3))
                    d4[p3] = b4[p3];
              };
              return extendStatics(d3, b3);
            };
            return function(d3, b3) {
              extendStatics(d3, b3);
              function __() {
                this.constructor = d3;
              }
              d3.prototype = b3 === null ? Object.create(b3) : (__.prototype = b3.prototype, new __());
            };
          }();
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.APaletteInputView = void 0;
          var ColorConverter = __webpack_require__("./src/main/js/converter/color.ts");
          var class_name_1 = __webpack_require__("./src/main/js/misc/class-name.ts");
          var DisposingUtil = __webpack_require__("./src/main/js/misc/disposing-util.ts");
          var number_util_1 = __webpack_require__("./src/main/js/misc/number-util.ts");
          var pane_error_1 = __webpack_require__("./src/main/js/misc/pane-error.ts");
          var color_1 = __webpack_require__("./src/main/js/model/color.ts");
          var view_1 = __webpack_require__("./src/main/js/view/view.ts");
          var className = class_name_1.ClassName("apl", "input");
          var APaletteInputView = function(_super) {
            __extends(APaletteInputView2, _super);
            function APaletteInputView2(document2, config) {
              var _this = _super.call(this, document2, config) || this;
              _this.onValueChange_ = _this.onValueChange_.bind(_this);
              _this.value = config.value;
              _this.value.emitter.on("change", _this.onValueChange_);
              _this.element.classList.add(className());
              _this.element.tabIndex = 0;
              var barElem = document2.createElement("div");
              barElem.classList.add(className("b"));
              _this.element.appendChild(barElem);
              var colorElem = document2.createElement("div");
              colorElem.classList.add(className("c"));
              barElem.appendChild(colorElem);
              _this.colorElem_ = colorElem;
              var markerElem = document2.createElement("div");
              markerElem.classList.add(className("m"));
              _this.element.appendChild(markerElem);
              _this.markerElem_ = markerElem;
              var previewElem = document2.createElement("div");
              previewElem.classList.add(className("p"));
              _this.markerElem_.appendChild(previewElem);
              _this.previewElem_ = previewElem;
              _this.update();
              config.model.emitter.on("dispose", function() {
                _this.colorElem_ = DisposingUtil.disposeElement(_this.colorElem_);
                _this.markerElem_ = DisposingUtil.disposeElement(_this.markerElem_);
              });
              return _this;
            }
            APaletteInputView2.prototype.update = function() {
              if (!this.markerElem_ || !this.previewElem_ || !this.colorElem_) {
                throw pane_error_1.PaneError.alreadyDisposed();
              }
              var c4 = this.value.rawValue;
              var rgbaComps = c4.getComponents("rgb");
              var leftColor = new color_1.Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 0], "rgb");
              var rightColor = new color_1.Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 255], "rgb");
              var gradientComps = [
                "to right",
                ColorConverter.toFunctionalRgbaString(leftColor),
                ColorConverter.toFunctionalRgbaString(rightColor)
              ];
              this.colorElem_.style.background = "linear-gradient(" + gradientComps.join(",") + ")";
              this.previewElem_.style.backgroundColor = ColorConverter.toFunctionalRgbaString(c4);
              var left = number_util_1.NumberUtil.map(rgbaComps[3], 0, 1, 0, 100);
              this.markerElem_.style.left = left + "%";
            };
            APaletteInputView2.prototype.onValueChange_ = function() {
              this.update();
            };
            return APaletteInputView2;
          }(view_1.View);
          exports2.APaletteInputView = APaletteInputView;
        },
        "./src/main/js/view/input/checkbox.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          var __extends = this && this.__extends || function() {
            var extendStatics = function(d3, b3) {
              extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b4) {
                d4.__proto__ = b4;
              } || function(d4, b4) {
                for (var p3 in b4)
                  if (b4.hasOwnProperty(p3))
                    d4[p3] = b4[p3];
              };
              return extendStatics(d3, b3);
            };
            return function(d3, b3) {
              extendStatics(d3, b3);
              function __() {
                this.constructor = d3;
              }
              d3.prototype = b3 === null ? Object.create(b3) : (__.prototype = b3.prototype, new __());
            };
          }();
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.CheckboxInputView = void 0;
          var class_name_1 = __webpack_require__("./src/main/js/misc/class-name.ts");
          var DisposingUtil = __webpack_require__("./src/main/js/misc/disposing-util.ts");
          var pane_error_1 = __webpack_require__("./src/main/js/misc/pane-error.ts");
          var view_1 = __webpack_require__("./src/main/js/view/view.ts");
          var className = class_name_1.ClassName("ckb", "input");
          var CheckboxInputView = function(_super) {
            __extends(CheckboxInputView2, _super);
            function CheckboxInputView2(document2, config) {
              var _this = _super.call(this, document2, config) || this;
              _this.onValueChange_ = _this.onValueChange_.bind(_this);
              _this.element.classList.add(className());
              var labelElem = document2.createElement("label");
              labelElem.classList.add(className("l"));
              _this.element.appendChild(labelElem);
              var inputElem = document2.createElement("input");
              inputElem.classList.add(className("i"));
              inputElem.type = "checkbox";
              labelElem.appendChild(inputElem);
              _this.inputElem_ = inputElem;
              var markElem = document2.createElement("div");
              markElem.classList.add(className("m"));
              labelElem.appendChild(markElem);
              config.value.emitter.on("change", _this.onValueChange_);
              _this.value = config.value;
              _this.update();
              config.model.emitter.on("dispose", function() {
                _this.inputElem_ = DisposingUtil.disposeElement(_this.inputElem_);
              });
              return _this;
            }
            Object.defineProperty(CheckboxInputView2.prototype, "inputElement", {
              get: function() {
                if (!this.inputElem_) {
                  throw pane_error_1.PaneError.alreadyDisposed();
                }
                return this.inputElem_;
              },
              enumerable: false,
              configurable: true
            });
            CheckboxInputView2.prototype.update = function() {
              if (!this.inputElem_) {
                throw pane_error_1.PaneError.alreadyDisposed();
              }
              this.inputElem_.checked = this.value.rawValue;
            };
            CheckboxInputView2.prototype.onValueChange_ = function() {
              this.update();
            };
            return CheckboxInputView2;
          }(view_1.View);
          exports2.CheckboxInputView = CheckboxInputView;
        },
        "./src/main/js/view/input/color-component-texts.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          var __extends = this && this.__extends || function() {
            var extendStatics = function(d3, b3) {
              extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b4) {
                d4.__proto__ = b4;
              } || function(d4, b4) {
                for (var p3 in b4)
                  if (b4.hasOwnProperty(p3))
                    d4[p3] = b4[p3];
              };
              return extendStatics(d3, b3);
            };
            return function(d3, b3) {
              extendStatics(d3, b3);
              function __() {
                this.constructor = d3;
              }
              d3.prototype = b3 === null ? Object.create(b3) : (__.prototype = b3.prototype, new __());
            };
          }();
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.ColorComponentTextsInputView = void 0;
          var number_1 = __webpack_require__("./src/main/js/formatter/number.ts");
          var class_name_1 = __webpack_require__("./src/main/js/misc/class-name.ts");
          var DisposingUtil = __webpack_require__("./src/main/js/misc/disposing-util.ts");
          var pane_error_1 = __webpack_require__("./src/main/js/misc/pane-error.ts");
          var view_1 = __webpack_require__("./src/main/js/view/view.ts");
          var className = class_name_1.ClassName("cctxts", "input");
          var FORMATTER = new number_1.NumberFormatter(0);
          function createModeSelectElement(document2) {
            var selectElem = document2.createElement("select");
            var items = [
              { text: "RGB", value: "rgb" },
              { text: "HSL", value: "hsl" },
              { text: "HSV", value: "hsv" }
            ];
            selectElem.appendChild(items.reduce(function(frag, item) {
              var optElem = document2.createElement("option");
              optElem.textContent = item.text;
              optElem.value = item.value;
              frag.appendChild(optElem);
              return frag;
            }, document2.createDocumentFragment()));
            return selectElem;
          }
          var ColorComponentTextsInputView = function(_super) {
            __extends(ColorComponentTextsInputView2, _super);
            function ColorComponentTextsInputView2(document2, config) {
              var _this = _super.call(this, document2, config) || this;
              _this.onValueChange_ = _this.onValueChange_.bind(_this);
              _this.element.classList.add(className());
              var modeElem = document2.createElement("div");
              modeElem.classList.add(className("m"));
              _this.modeSelectElement = createModeSelectElement(document2);
              _this.modeSelectElement.classList.add(className("ms"));
              modeElem.appendChild(_this.modeSelectElement);
              var modeMarkerElem = document2.createElement("div");
              modeMarkerElem.classList.add(className("mm"));
              modeElem.appendChild(modeMarkerElem);
              _this.element.appendChild(modeElem);
              var wrapperElem = document2.createElement("div");
              wrapperElem.classList.add(className("w"));
              _this.element.appendChild(wrapperElem);
              var inputElems = [0, 1, 2].map(function() {
                var inputElem = document2.createElement("input");
                inputElem.classList.add(className("i"));
                inputElem.type = "text";
                return inputElem;
              });
              inputElems.forEach(function(elem) {
                wrapperElem.appendChild(elem);
              });
              _this.inputElems_ = [inputElems[0], inputElems[1], inputElems[2]];
              _this.pickedColor = config.pickedColor;
              _this.pickedColor.emitter.on("change", _this.onValueChange_);
              _this.update();
              config.model.emitter.on("dispose", function() {
                if (_this.inputElems_) {
                  _this.inputElems_.forEach(function(elem) {
                    DisposingUtil.disposeElement(elem);
                  });
                  _this.inputElems_ = null;
                }
              });
              return _this;
            }
            Object.defineProperty(ColorComponentTextsInputView2.prototype, "inputElements", {
              get: function() {
                if (!this.inputElems_) {
                  throw pane_error_1.PaneError.alreadyDisposed();
                }
                return this.inputElems_;
              },
              enumerable: false,
              configurable: true
            });
            Object.defineProperty(ColorComponentTextsInputView2.prototype, "value", {
              get: function() {
                return this.pickedColor.value;
              },
              enumerable: false,
              configurable: true
            });
            ColorComponentTextsInputView2.prototype.update = function() {
              var inputElems = this.inputElems_;
              if (!inputElems) {
                throw pane_error_1.PaneError.alreadyDisposed();
              }
              var comps = this.pickedColor.value.rawValue.getComponents(this.pickedColor.mode);
              comps.forEach(function(comp, index) {
                var inputElem = inputElems[index];
                if (!inputElem) {
                  return;
                }
                inputElem.value = FORMATTER.format(comp);
              });
            };
            ColorComponentTextsInputView2.prototype.onValueChange_ = function() {
              this.update();
            };
            return ColorComponentTextsInputView2;
          }(view_1.View);
          exports2.ColorComponentTextsInputView = ColorComponentTextsInputView;
        },
        "./src/main/js/view/input/color-picker.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          var __extends = this && this.__extends || function() {
            var extendStatics = function(d3, b3) {
              extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b4) {
                d4.__proto__ = b4;
              } || function(d4, b4) {
                for (var p3 in b4)
                  if (b4.hasOwnProperty(p3))
                    d4[p3] = b4[p3];
              };
              return extendStatics(d3, b3);
            };
            return function(d3, b3) {
              extendStatics(d3, b3);
              function __() {
                this.constructor = d3;
              }
              d3.prototype = b3 === null ? Object.create(b3) : (__.prototype = b3.prototype, new __());
            };
          }();
          var __spreadArrays = this && this.__spreadArrays || function() {
            for (var s4 = 0, i4 = 0, il = arguments.length; i4 < il; i4++)
              s4 += arguments[i4].length;
            for (var r5 = Array(s4), k2 = 0, i4 = 0; i4 < il; i4++)
              for (var a3 = arguments[i4], j2 = 0, jl = a3.length; j2 < jl; j2++, k2++)
                r5[k2] = a3[j2];
            return r5;
          };
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.ColorPickerInputView = void 0;
          var class_name_1 = __webpack_require__("./src/main/js/misc/class-name.ts");
          var type_util_1 = __webpack_require__("./src/main/js/misc/type-util.ts");
          var view_1 = __webpack_require__("./src/main/js/view/view.ts");
          var className = class_name_1.ClassName("clp", "input");
          var ColorPickerInputView = function(_super) {
            __extends(ColorPickerInputView2, _super);
            function ColorPickerInputView2(document2, config) {
              var _this = _super.call(this, document2, config) || this;
              _this.onFoldableChange_ = _this.onFoldableChange_.bind(_this);
              _this.onValueChange_ = _this.onValueChange_.bind(_this);
              _this.pickedColor = config.pickedColor;
              _this.pickedColor.value.emitter.on("change", _this.onValueChange_);
              _this.foldable = config.foldable;
              _this.foldable.emitter.on("change", _this.onFoldableChange_);
              _this.element.classList.add(className());
              var hsvElem = document2.createElement("div");
              hsvElem.classList.add(className("hsv"));
              var svElem = document2.createElement("div");
              svElem.classList.add(className("sv"));
              _this.svPaletteView_ = config.svPaletteInputView;
              svElem.appendChild(_this.svPaletteView_.element);
              hsvElem.appendChild(svElem);
              var hElem = document2.createElement("div");
              hElem.classList.add(className("h"));
              _this.hPaletteView_ = config.hPaletteInputView;
              hElem.appendChild(_this.hPaletteView_.element);
              hsvElem.appendChild(hElem);
              _this.element.appendChild(hsvElem);
              var rgbElem = document2.createElement("div");
              rgbElem.classList.add(className("rgb"));
              _this.compTextsView_ = config.componentTextsView;
              rgbElem.appendChild(_this.compTextsView_.element);
              _this.element.appendChild(rgbElem);
              if (config.alphaInputViews) {
                _this.alphaViews_ = {
                  palette: config.alphaInputViews.palette,
                  text: config.alphaInputViews.text
                };
                var aElem = document2.createElement("div");
                aElem.classList.add(className("a"));
                var apElem = document2.createElement("div");
                apElem.classList.add(className("ap"));
                apElem.appendChild(_this.alphaViews_.palette.element);
                aElem.appendChild(apElem);
                var atElem = document2.createElement("div");
                atElem.classList.add(className("at"));
                atElem.appendChild(_this.alphaViews_.text.element);
                aElem.appendChild(atElem);
                _this.element.appendChild(aElem);
              }
              _this.update();
              return _this;
            }
            Object.defineProperty(ColorPickerInputView2.prototype, "allFocusableElements", {
              get: function() {
                var elems = __spreadArrays([
                  this.svPaletteView_.element,
                  this.hPaletteView_.element
                ], this.compTextsView_.inputElements);
                if (this.alphaViews_) {
                  elems.push(this.alphaViews_.palette.element, this.alphaViews_.text.inputElement);
                }
                return type_util_1.TypeUtil.forceCast(elems);
              },
              enumerable: false,
              configurable: true
            });
            Object.defineProperty(ColorPickerInputView2.prototype, "value", {
              get: function() {
                return this.pickedColor.value;
              },
              enumerable: false,
              configurable: true
            });
            ColorPickerInputView2.prototype.update = function() {
              if (this.foldable.expanded) {
                this.element.classList.add(className(void 0, "expanded"));
              } else {
                this.element.classList.remove(className(void 0, "expanded"));
              }
            };
            ColorPickerInputView2.prototype.onValueChange_ = function() {
              this.update();
            };
            ColorPickerInputView2.prototype.onFoldableChange_ = function() {
              this.update();
            };
            return ColorPickerInputView2;
          }(view_1.View);
          exports2.ColorPickerInputView = ColorPickerInputView;
        },
        "./src/main/js/view/input/color-swatch-text.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          var __extends = this && this.__extends || function() {
            var extendStatics = function(d3, b3) {
              extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b4) {
                d4.__proto__ = b4;
              } || function(d4, b4) {
                for (var p3 in b4)
                  if (b4.hasOwnProperty(p3))
                    d4[p3] = b4[p3];
              };
              return extendStatics(d3, b3);
            };
            return function(d3, b3) {
              extendStatics(d3, b3);
              function __() {
                this.constructor = d3;
              }
              d3.prototype = b3 === null ? Object.create(b3) : (__.prototype = b3.prototype, new __());
            };
          }();
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.ColorSwatchTextInputView = void 0;
          var class_name_1 = __webpack_require__("./src/main/js/misc/class-name.ts");
          var view_1 = __webpack_require__("./src/main/js/view/view.ts");
          var className = class_name_1.ClassName("cswtxt", "input");
          var ColorSwatchTextInputView = function(_super) {
            __extends(ColorSwatchTextInputView2, _super);
            function ColorSwatchTextInputView2(document2, config) {
              var _this = _super.call(this, document2, config) || this;
              _this.element.classList.add(className());
              var swatchElem = document2.createElement("div");
              swatchElem.classList.add(className("s"));
              _this.swatchInputView_ = config.swatchInputView;
              swatchElem.appendChild(_this.swatchInputView_.element);
              _this.element.appendChild(swatchElem);
              var textElem = document2.createElement("div");
              textElem.classList.add(className("t"));
              _this.textInputView = config.textInputView;
              textElem.appendChild(_this.textInputView.element);
              _this.element.appendChild(textElem);
              return _this;
            }
            Object.defineProperty(ColorSwatchTextInputView2.prototype, "value", {
              get: function() {
                return this.textInputView.value;
              },
              enumerable: false,
              configurable: true
            });
            ColorSwatchTextInputView2.prototype.update = function() {
              this.swatchInputView_.update();
              this.textInputView.update();
            };
            return ColorSwatchTextInputView2;
          }(view_1.View);
          exports2.ColorSwatchTextInputView = ColorSwatchTextInputView;
        },
        "./src/main/js/view/input/color-swatch.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          var __extends = this && this.__extends || function() {
            var extendStatics = function(d3, b3) {
              extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b4) {
                d4.__proto__ = b4;
              } || function(d4, b4) {
                for (var p3 in b4)
                  if (b4.hasOwnProperty(p3))
                    d4[p3] = b4[p3];
              };
              return extendStatics(d3, b3);
            };
            return function(d3, b3) {
              extendStatics(d3, b3);
              function __() {
                this.constructor = d3;
              }
              d3.prototype = b3 === null ? Object.create(b3) : (__.prototype = b3.prototype, new __());
            };
          }();
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.ColorSwatchInputView = void 0;
          var ColorConverter = __webpack_require__("./src/main/js/converter/color.ts");
          var class_name_1 = __webpack_require__("./src/main/js/misc/class-name.ts");
          var DisposingUtil = __webpack_require__("./src/main/js/misc/disposing-util.ts");
          var pane_error_1 = __webpack_require__("./src/main/js/misc/pane-error.ts");
          var view_1 = __webpack_require__("./src/main/js/view/view.ts");
          var className = class_name_1.ClassName("csw", "input");
          var ColorSwatchInputView = function(_super) {
            __extends(ColorSwatchInputView2, _super);
            function ColorSwatchInputView2(document2, config) {
              var _this = _super.call(this, document2, config) || this;
              if (_this.element === null) {
                throw pane_error_1.PaneError.alreadyDisposed();
              }
              _this.onValueChange_ = _this.onValueChange_.bind(_this);
              config.value.emitter.on("change", _this.onValueChange_);
              _this.value = config.value;
              _this.element.classList.add(className());
              var swatchElem = document2.createElement("div");
              swatchElem.classList.add(className("sw"));
              _this.element.appendChild(swatchElem);
              _this.swatchElem_ = swatchElem;
              var buttonElem = document2.createElement("button");
              buttonElem.classList.add(className("b"));
              _this.element.appendChild(buttonElem);
              _this.buttonElem_ = buttonElem;
              var pickerElem = document2.createElement("div");
              pickerElem.classList.add(className("p"));
              _this.pickerView_ = config.pickerInputView;
              pickerElem.appendChild(_this.pickerView_.element);
              _this.element.appendChild(pickerElem);
              _this.update();
              config.model.emitter.on("dispose", function() {
                _this.buttonElem_ = DisposingUtil.disposeElement(_this.buttonElem_);
                _this.swatchElem_ = DisposingUtil.disposeElement(_this.swatchElem_);
              });
              return _this;
            }
            Object.defineProperty(ColorSwatchInputView2.prototype, "buttonElement", {
              get: function() {
                if (this.buttonElem_ === null) {
                  throw pane_error_1.PaneError.alreadyDisposed();
                }
                return this.buttonElem_;
              },
              enumerable: false,
              configurable: true
            });
            ColorSwatchInputView2.prototype.update = function() {
              if (!this.swatchElem_) {
                throw pane_error_1.PaneError.alreadyDisposed();
              }
              var value = this.value.rawValue;
              this.swatchElem_.style.backgroundColor = ColorConverter.toHexRgbaString(value);
            };
            ColorSwatchInputView2.prototype.onValueChange_ = function() {
              this.update();
            };
            return ColorSwatchInputView2;
          }(view_1.View);
          exports2.ColorSwatchInputView = ColorSwatchInputView;
        },
        "./src/main/js/view/input/h-palette.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          var __extends = this && this.__extends || function() {
            var extendStatics = function(d3, b3) {
              extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b4) {
                d4.__proto__ = b4;
              } || function(d4, b4) {
                for (var p3 in b4)
                  if (b4.hasOwnProperty(p3))
                    d4[p3] = b4[p3];
              };
              return extendStatics(d3, b3);
            };
            return function(d3, b3) {
              extendStatics(d3, b3);
              function __() {
                this.constructor = d3;
              }
              d3.prototype = b3 === null ? Object.create(b3) : (__.prototype = b3.prototype, new __());
            };
          }();
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.HPaletteInputView = void 0;
          var ColorConverter = __webpack_require__("./src/main/js/converter/color.ts");
          var class_name_1 = __webpack_require__("./src/main/js/misc/class-name.ts");
          var DisposingUtil = __webpack_require__("./src/main/js/misc/disposing-util.ts");
          var number_util_1 = __webpack_require__("./src/main/js/misc/number-util.ts");
          var pane_error_1 = __webpack_require__("./src/main/js/misc/pane-error.ts");
          var color_1 = __webpack_require__("./src/main/js/model/color.ts");
          var view_1 = __webpack_require__("./src/main/js/view/view.ts");
          var className = class_name_1.ClassName("hpl", "input");
          var HPaletteInputView = function(_super) {
            __extends(HPaletteInputView2, _super);
            function HPaletteInputView2(document2, config) {
              var _this = _super.call(this, document2, config) || this;
              _this.onValueChange_ = _this.onValueChange_.bind(_this);
              _this.value = config.value;
              _this.value.emitter.on("change", _this.onValueChange_);
              _this.element.classList.add(className());
              _this.element.tabIndex = 0;
              var colorElem = document2.createElement("div");
              colorElem.classList.add(className("c"));
              _this.element.appendChild(colorElem);
              _this.colorElem_ = colorElem;
              var markerElem = document2.createElement("div");
              markerElem.classList.add(className("m"));
              _this.element.appendChild(markerElem);
              _this.markerElem_ = markerElem;
              _this.update();
              config.model.emitter.on("dispose", function() {
                _this.colorElem_ = DisposingUtil.disposeElement(_this.colorElem_);
                _this.markerElem_ = DisposingUtil.disposeElement(_this.markerElem_);
              });
              return _this;
            }
            HPaletteInputView2.prototype.update = function() {
              if (!this.markerElem_) {
                throw pane_error_1.PaneError.alreadyDisposed();
              }
              var c4 = this.value.rawValue;
              var h3 = c4.getComponents("hsv")[0];
              this.markerElem_.style.backgroundColor = ColorConverter.toFunctionalRgbString(new color_1.Color([h3, 100, 100], "hsv"));
              var left = number_util_1.NumberUtil.map(h3, 0, 360, 0, 100);
              this.markerElem_.style.left = left + "%";
            };
            HPaletteInputView2.prototype.onValueChange_ = function() {
              this.update();
            };
            return HPaletteInputView2;
          }(view_1.View);
          exports2.HPaletteInputView = HPaletteInputView;
        },
        "./src/main/js/view/input/list.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          var __extends = this && this.__extends || function() {
            var extendStatics = function(d3, b3) {
              extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b4) {
                d4.__proto__ = b4;
              } || function(d4, b4) {
                for (var p3 in b4)
                  if (b4.hasOwnProperty(p3))
                    d4[p3] = b4[p3];
              };
              return extendStatics(d3, b3);
            };
            return function(d3, b3) {
              extendStatics(d3, b3);
              function __() {
                this.constructor = d3;
              }
              d3.prototype = b3 === null ? Object.create(b3) : (__.prototype = b3.prototype, new __());
            };
          }();
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.ListInputView = void 0;
          var class_name_1 = __webpack_require__("./src/main/js/misc/class-name.ts");
          var DisposingUtil = __webpack_require__("./src/main/js/misc/disposing-util.ts");
          var pane_error_1 = __webpack_require__("./src/main/js/misc/pane-error.ts");
          var view_1 = __webpack_require__("./src/main/js/view/view.ts");
          var className = class_name_1.ClassName("lst", "input");
          var ListInputView = function(_super) {
            __extends(ListInputView2, _super);
            function ListInputView2(document2, config) {
              var _this = _super.call(this, document2, config) || this;
              _this.onValueChange_ = _this.onValueChange_.bind(_this);
              _this.element.classList.add(className());
              _this.stringifyValue_ = config.stringifyValue;
              var selectElem = document2.createElement("select");
              selectElem.classList.add(className("s"));
              config.options.forEach(function(item, index) {
                var optionElem = document2.createElement("option");
                optionElem.dataset.index = String(index);
                optionElem.textContent = item.text;
                optionElem.value = _this.stringifyValue_(item.value);
                selectElem.appendChild(optionElem);
              });
              _this.element.appendChild(selectElem);
              _this.selectElem_ = selectElem;
              var markElem = document2.createElement("div");
              markElem.classList.add(className("m"));
              _this.element.appendChild(markElem);
              config.value.emitter.on("change", _this.onValueChange_);
              _this.value = config.value;
              _this.update();
              config.model.emitter.on("dispose", function() {
                _this.selectElem_ = DisposingUtil.disposeElement(_this.selectElem_);
              });
              return _this;
            }
            Object.defineProperty(ListInputView2.prototype, "selectElement", {
              get: function() {
                if (!this.selectElem_) {
                  throw pane_error_1.PaneError.alreadyDisposed();
                }
                return this.selectElem_;
              },
              enumerable: false,
              configurable: true
            });
            ListInputView2.prototype.update = function() {
              if (!this.selectElem_) {
                throw pane_error_1.PaneError.alreadyDisposed();
              }
              this.selectElem_.value = this.stringifyValue_(this.value.rawValue);
            };
            ListInputView2.prototype.onValueChange_ = function() {
              this.update();
            };
            return ListInputView2;
          }(view_1.View);
          exports2.ListInputView = ListInputView;
        },
        "./src/main/js/view/input/point-2d-pad-text.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          var __extends = this && this.__extends || function() {
            var extendStatics = function(d3, b3) {
              extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b4) {
                d4.__proto__ = b4;
              } || function(d4, b4) {
                for (var p3 in b4)
                  if (b4.hasOwnProperty(p3))
                    d4[p3] = b4[p3];
              };
              return extendStatics(d3, b3);
            };
            return function(d3, b3) {
              extendStatics(d3, b3);
              function __() {
                this.constructor = d3;
              }
              d3.prototype = b3 === null ? Object.create(b3) : (__.prototype = b3.prototype, new __());
            };
          }();
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.Point2dPadTextInputView = void 0;
          var class_name_1 = __webpack_require__("./src/main/js/misc/class-name.ts");
          var DomUtil = __webpack_require__("./src/main/js/misc/dom-util.ts");
          var view_1 = __webpack_require__("./src/main/js/view/view.ts");
          var className = class_name_1.ClassName("p2dpadtxt", "input");
          var Point2dPadTextInputView = function(_super) {
            __extends(Point2dPadTextInputView2, _super);
            function Point2dPadTextInputView2(document2, config) {
              var _this = _super.call(this, document2, config) || this;
              _this.element.classList.add(className());
              var padWrapperElem = document2.createElement("div");
              padWrapperElem.classList.add(className("w"));
              _this.element.appendChild(padWrapperElem);
              var buttonElem = document2.createElement("button");
              buttonElem.classList.add(className("b"));
              buttonElem.appendChild(DomUtil.createSvgIconElement(document2, "p2dpad"));
              padWrapperElem.appendChild(buttonElem);
              _this.padButtonElem_ = buttonElem;
              var padElem = document2.createElement("div");
              padElem.classList.add(className("p"));
              padWrapperElem.appendChild(padElem);
              _this.padInputView_ = config.padInputView;
              padElem.appendChild(_this.padInputView_.element);
              var textElem = document2.createElement("div");
              textElem.classList.add(className("t"));
              _this.textInputView_ = config.textInputView;
              textElem.appendChild(_this.textInputView_.element);
              _this.element.appendChild(textElem);
              return _this;
            }
            Object.defineProperty(Point2dPadTextInputView2.prototype, "value", {
              get: function() {
                return this.textInputView_.value;
              },
              enumerable: false,
              configurable: true
            });
            Object.defineProperty(Point2dPadTextInputView2.prototype, "padButtonElement", {
              get: function() {
                return this.padButtonElem_;
              },
              enumerable: false,
              configurable: true
            });
            Point2dPadTextInputView2.prototype.update = function() {
              this.padInputView_.update();
              this.textInputView_.update();
            };
            return Point2dPadTextInputView2;
          }(view_1.View);
          exports2.Point2dPadTextInputView = Point2dPadTextInputView;
        },
        "./src/main/js/view/input/point-2d-pad.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          var __extends = this && this.__extends || function() {
            var extendStatics = function(d3, b3) {
              extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b4) {
                d4.__proto__ = b4;
              } || function(d4, b4) {
                for (var p3 in b4)
                  if (b4.hasOwnProperty(p3))
                    d4[p3] = b4[p3];
              };
              return extendStatics(d3, b3);
            };
            return function(d3, b3) {
              extendStatics(d3, b3);
              function __() {
                this.constructor = d3;
              }
              d3.prototype = b3 === null ? Object.create(b3) : (__.prototype = b3.prototype, new __());
            };
          }();
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.Point2dPadInputView = void 0;
          var class_name_1 = __webpack_require__("./src/main/js/misc/class-name.ts");
          var DisposingUtil = __webpack_require__("./src/main/js/misc/disposing-util.ts");
          var DomUtil = __webpack_require__("./src/main/js/misc/dom-util.ts");
          var number_util_1 = __webpack_require__("./src/main/js/misc/number-util.ts");
          var pane_error_1 = __webpack_require__("./src/main/js/misc/pane-error.ts");
          var view_1 = __webpack_require__("./src/main/js/view/view.ts");
          var SVG_NS = DomUtil.SVG_NS;
          var className = class_name_1.ClassName("p2dpad", "input");
          var Point2dPadInputView = function(_super) {
            __extends(Point2dPadInputView2, _super);
            function Point2dPadInputView2(document2, config) {
              var _this = _super.call(this, document2, config) || this;
              _this.onFoldableChange_ = _this.onFoldableChange_.bind(_this);
              _this.onValueChange_ = _this.onValueChange_.bind(_this);
              _this.foldable = config.foldable;
              _this.foldable.emitter.on("change", _this.onFoldableChange_);
              _this.invertsY_ = config.invertsY;
              _this.maxValue_ = config.maxValue;
              _this.element.classList.add(className());
              var padElem = document2.createElement("div");
              padElem.tabIndex = 0;
              padElem.classList.add(className("p"));
              _this.element.appendChild(padElem);
              _this.padElem_ = padElem;
              var svgElem = document2.createElementNS(SVG_NS, "svg");
              svgElem.classList.add(className("g"));
              _this.padElem_.appendChild(svgElem);
              _this.svgElem_ = svgElem;
              var xAxisElem = document2.createElementNS(SVG_NS, "line");
              xAxisElem.classList.add(className("ax"));
              xAxisElem.setAttributeNS(null, "x1", "0");
              xAxisElem.setAttributeNS(null, "y1", "50%");
              xAxisElem.setAttributeNS(null, "x2", "100%");
              xAxisElem.setAttributeNS(null, "y2", "50%");
              _this.svgElem_.appendChild(xAxisElem);
              var yAxisElem = document2.createElementNS(SVG_NS, "line");
              yAxisElem.classList.add(className("ax"));
              yAxisElem.setAttributeNS(null, "x1", "50%");
              yAxisElem.setAttributeNS(null, "y1", "0");
              yAxisElem.setAttributeNS(null, "x2", "50%");
              yAxisElem.setAttributeNS(null, "y2", "100%");
              _this.svgElem_.appendChild(yAxisElem);
              var lineElem = document2.createElementNS(SVG_NS, "line");
              lineElem.classList.add(className("l"));
              lineElem.setAttributeNS(null, "x1", "50%");
              lineElem.setAttributeNS(null, "y1", "50%");
              _this.svgElem_.appendChild(lineElem);
              _this.lineElem_ = lineElem;
              var markerElem = document2.createElementNS(SVG_NS, "circle");
              markerElem.classList.add(className("m"));
              markerElem.setAttributeNS(null, "r", "2px");
              _this.svgElem_.appendChild(markerElem);
              _this.markerElem_ = markerElem;
              config.value.emitter.on("change", _this.onValueChange_);
              _this.value = config.value;
              _this.update();
              config.model.emitter.on("dispose", function() {
                _this.padElem_ = DisposingUtil.disposeElement(_this.padElem_);
              });
              return _this;
            }
            Object.defineProperty(Point2dPadInputView2.prototype, "padElement", {
              get: function() {
                if (!this.padElem_) {
                  throw pane_error_1.PaneError.alreadyDisposed();
                }
                return this.padElem_;
              },
              enumerable: false,
              configurable: true
            });
            Object.defineProperty(Point2dPadInputView2.prototype, "allFocusableElements", {
              get: function() {
                if (!this.padElem_) {
                  throw pane_error_1.PaneError.alreadyDisposed();
                }
                return [this.padElem_];
              },
              enumerable: false,
              configurable: true
            });
            Point2dPadInputView2.prototype.update = function() {
              if (this.foldable.expanded) {
                this.element.classList.add(className(void 0, "expanded"));
              } else {
                this.element.classList.remove(className(void 0, "expanded"));
              }
              var lineElem = this.lineElem_;
              var markerElem = this.markerElem_;
              if (!lineElem || !markerElem) {
                throw pane_error_1.PaneError.alreadyDisposed();
              }
              var _a6 = this.value.rawValue.getComponents(), x2 = _a6[0], y3 = _a6[1];
              var max4 = this.maxValue_;
              var px = number_util_1.NumberUtil.map(x2, -max4, +max4, 0, 100);
              var py = number_util_1.NumberUtil.map(y3, -max4, +max4, 0, 100);
              var ipy = this.invertsY_ ? 100 - py : py;
              lineElem.setAttributeNS(null, "x2", px + "%");
              lineElem.setAttributeNS(null, "y2", ipy + "%");
              markerElem.setAttributeNS(null, "cx", px + "%");
              markerElem.setAttributeNS(null, "cy", ipy + "%");
            };
            Point2dPadInputView2.prototype.onValueChange_ = function() {
              this.update();
            };
            Point2dPadInputView2.prototype.onFoldableChange_ = function() {
              this.update();
            };
            return Point2dPadInputView2;
          }(view_1.View);
          exports2.Point2dPadInputView = Point2dPadInputView;
        },
        "./src/main/js/view/input/point-2d-text.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          var __extends = this && this.__extends || function() {
            var extendStatics = function(d3, b3) {
              extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b4) {
                d4.__proto__ = b4;
              } || function(d4, b4) {
                for (var p3 in b4)
                  if (b4.hasOwnProperty(p3))
                    d4[p3] = b4[p3];
              };
              return extendStatics(d3, b3);
            };
            return function(d3, b3) {
              extendStatics(d3, b3);
              function __() {
                this.constructor = d3;
              }
              d3.prototype = b3 === null ? Object.create(b3) : (__.prototype = b3.prototype, new __());
            };
          }();
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.Point2dTextInputView = void 0;
          var class_name_1 = __webpack_require__("./src/main/js/misc/class-name.ts");
          var DisposingUtil = __webpack_require__("./src/main/js/misc/disposing-util.ts");
          var pane_error_1 = __webpack_require__("./src/main/js/misc/pane-error.ts");
          var view_1 = __webpack_require__("./src/main/js/view/view.ts");
          var COMPONENT_LABELS = ["X", "Y"];
          var className = class_name_1.ClassName("p2dtxt", "input");
          var Point2dTextInputView = function(_super) {
            __extends(Point2dTextInputView2, _super);
            function Point2dTextInputView2(document2, config) {
              var _this = _super.call(this, document2, config) || this;
              _this.onValueChange_ = _this.onValueChange_.bind(_this);
              _this.formatters_ = [config.xFormatter, config.yFormatter];
              _this.element.classList.add(className());
              var inputElems = COMPONENT_LABELS.map(function() {
                var inputElem = document2.createElement("input");
                inputElem.classList.add(className("i"));
                inputElem.type = "text";
                return inputElem;
              });
              COMPONENT_LABELS.forEach(function(_2, index) {
                var elem = document2.createElement("div");
                elem.classList.add(className("w"));
                elem.appendChild(inputElems[index]);
                _this.element.appendChild(elem);
              });
              _this.inputElems_ = [inputElems[0], inputElems[1]];
              config.value.emitter.on("change", _this.onValueChange_);
              _this.value = config.value;
              _this.update();
              config.model.emitter.on("dispose", function() {
                if (_this.inputElems_) {
                  _this.inputElems_.forEach(function(elem) {
                    DisposingUtil.disposeElement(elem);
                  });
                  _this.inputElems_ = null;
                }
              });
              return _this;
            }
            Object.defineProperty(Point2dTextInputView2.prototype, "inputElements", {
              get: function() {
                if (!this.inputElems_) {
                  throw pane_error_1.PaneError.alreadyDisposed();
                }
                return this.inputElems_;
              },
              enumerable: false,
              configurable: true
            });
            Point2dTextInputView2.prototype.update = function() {
              var _this = this;
              var inputElems = this.inputElems_;
              if (!inputElems) {
                throw pane_error_1.PaneError.alreadyDisposed();
              }
              var xyComps = this.value.rawValue.getComponents();
              xyComps.forEach(function(comp, index) {
                var inputElem = inputElems[index];
                inputElem.value = _this.formatters_[index].format(comp);
              });
            };
            Point2dTextInputView2.prototype.onValueChange_ = function() {
              this.update();
            };
            return Point2dTextInputView2;
          }(view_1.View);
          exports2.Point2dTextInputView = Point2dTextInputView;
        },
        "./src/main/js/view/input/slider-text.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          var __extends = this && this.__extends || function() {
            var extendStatics = function(d3, b3) {
              extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b4) {
                d4.__proto__ = b4;
              } || function(d4, b4) {
                for (var p3 in b4)
                  if (b4.hasOwnProperty(p3))
                    d4[p3] = b4[p3];
              };
              return extendStatics(d3, b3);
            };
            return function(d3, b3) {
              extendStatics(d3, b3);
              function __() {
                this.constructor = d3;
              }
              d3.prototype = b3 === null ? Object.create(b3) : (__.prototype = b3.prototype, new __());
            };
          }();
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.SliderTextInputView = void 0;
          var class_name_1 = __webpack_require__("./src/main/js/misc/class-name.ts");
          var view_1 = __webpack_require__("./src/main/js/view/view.ts");
          var className = class_name_1.ClassName("sldtxt", "input");
          var SliderTextInputView = function(_super) {
            __extends(SliderTextInputView2, _super);
            function SliderTextInputView2(document2, config) {
              var _this = _super.call(this, document2, config) || this;
              _this.element.classList.add(className());
              var sliderElem = document2.createElement("div");
              sliderElem.classList.add(className("s"));
              _this.sliderInputView_ = config.sliderInputView;
              sliderElem.appendChild(_this.sliderInputView_.element);
              _this.element.appendChild(sliderElem);
              var textElem = document2.createElement("div");
              textElem.classList.add(className("t"));
              _this.textInputView_ = config.textInputView;
              textElem.appendChild(_this.textInputView_.element);
              _this.element.appendChild(textElem);
              return _this;
            }
            Object.defineProperty(SliderTextInputView2.prototype, "value", {
              get: function() {
                return this.sliderInputView_.value;
              },
              enumerable: false,
              configurable: true
            });
            SliderTextInputView2.prototype.update = function() {
              this.sliderInputView_.update();
              this.textInputView_.update();
            };
            return SliderTextInputView2;
          }(view_1.View);
          exports2.SliderTextInputView = SliderTextInputView;
        },
        "./src/main/js/view/input/slider.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          var __extends = this && this.__extends || function() {
            var extendStatics = function(d3, b3) {
              extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b4) {
                d4.__proto__ = b4;
              } || function(d4, b4) {
                for (var p3 in b4)
                  if (b4.hasOwnProperty(p3))
                    d4[p3] = b4[p3];
              };
              return extendStatics(d3, b3);
            };
            return function(d3, b3) {
              extendStatics(d3, b3);
              function __() {
                this.constructor = d3;
              }
              d3.prototype = b3 === null ? Object.create(b3) : (__.prototype = b3.prototype, new __());
            };
          }();
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.SliderInputView = void 0;
          var class_name_1 = __webpack_require__("./src/main/js/misc/class-name.ts");
          var DisposingUtil = __webpack_require__("./src/main/js/misc/disposing-util.ts");
          var number_util_1 = __webpack_require__("./src/main/js/misc/number-util.ts");
          var pane_error_1 = __webpack_require__("./src/main/js/misc/pane-error.ts");
          var view_1 = __webpack_require__("./src/main/js/view/view.ts");
          var className = class_name_1.ClassName("sld", "input");
          var SliderInputView = function(_super) {
            __extends(SliderInputView2, _super);
            function SliderInputView2(document2, config) {
              var _this = _super.call(this, document2, config) || this;
              _this.onValueChange_ = _this.onValueChange_.bind(_this);
              _this.minValue_ = config.minValue;
              _this.maxValue_ = config.maxValue;
              _this.element.classList.add(className());
              var outerElem = document2.createElement("div");
              outerElem.classList.add(className("o"));
              outerElem.tabIndex = 0;
              _this.element.appendChild(outerElem);
              _this.outerElem_ = outerElem;
              var innerElem = document2.createElement("div");
              innerElem.classList.add(className("i"));
              _this.outerElem_.appendChild(innerElem);
              _this.innerElem_ = innerElem;
              config.value.emitter.on("change", _this.onValueChange_);
              _this.value = config.value;
              _this.update();
              config.model.emitter.on("dispose", function() {
                _this.innerElem_ = DisposingUtil.disposeElement(_this.innerElem_);
                _this.outerElem_ = DisposingUtil.disposeElement(_this.outerElem_);
              });
              return _this;
            }
            Object.defineProperty(SliderInputView2.prototype, "outerElement", {
              get: function() {
                if (!this.outerElem_) {
                  throw pane_error_1.PaneError.alreadyDisposed();
                }
                return this.outerElem_;
              },
              enumerable: false,
              configurable: true
            });
            Object.defineProperty(SliderInputView2.prototype, "innerElement", {
              get: function() {
                if (!this.innerElem_) {
                  throw pane_error_1.PaneError.alreadyDisposed();
                }
                return this.innerElem_;
              },
              enumerable: false,
              configurable: true
            });
            SliderInputView2.prototype.update = function() {
              if (!this.innerElem_) {
                throw pane_error_1.PaneError.alreadyDisposed();
              }
              var p3 = number_util_1.NumberUtil.constrain(number_util_1.NumberUtil.map(this.value.rawValue, this.minValue_, this.maxValue_, 0, 100), 0, 100);
              this.innerElem_.style.width = p3 + "%";
            };
            SliderInputView2.prototype.onValueChange_ = function() {
              this.update();
            };
            return SliderInputView2;
          }(view_1.View);
          exports2.SliderInputView = SliderInputView;
        },
        "./src/main/js/view/input/sv-palette.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          var __extends = this && this.__extends || function() {
            var extendStatics = function(d3, b3) {
              extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b4) {
                d4.__proto__ = b4;
              } || function(d4, b4) {
                for (var p3 in b4)
                  if (b4.hasOwnProperty(p3))
                    d4[p3] = b4[p3];
              };
              return extendStatics(d3, b3);
            };
            return function(d3, b3) {
              extendStatics(d3, b3);
              function __() {
                this.constructor = d3;
              }
              d3.prototype = b3 === null ? Object.create(b3) : (__.prototype = b3.prototype, new __());
            };
          }();
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.SvPaletteInputView = void 0;
          var class_name_1 = __webpack_require__("./src/main/js/misc/class-name.ts");
          var color_model_1 = __webpack_require__("./src/main/js/misc/color-model.ts");
          var DisposingUtil = __webpack_require__("./src/main/js/misc/disposing-util.ts");
          var DomUtil = __webpack_require__("./src/main/js/misc/dom-util.ts");
          var number_util_1 = __webpack_require__("./src/main/js/misc/number-util.ts");
          var pane_error_1 = __webpack_require__("./src/main/js/misc/pane-error.ts");
          var view_1 = __webpack_require__("./src/main/js/view/view.ts");
          var className = class_name_1.ClassName("svp", "input");
          var CANVAS_RESOL = 64;
          var SvPaletteInputView = function(_super) {
            __extends(SvPaletteInputView2, _super);
            function SvPaletteInputView2(document2, config) {
              var _this = _super.call(this, document2, config) || this;
              _this.onValueChange_ = _this.onValueChange_.bind(_this);
              _this.value = config.value;
              _this.value.emitter.on("change", _this.onValueChange_);
              _this.element.classList.add(className());
              _this.element.tabIndex = 0;
              var canvasElem = document2.createElement("canvas");
              canvasElem.height = CANVAS_RESOL;
              canvasElem.width = CANVAS_RESOL;
              canvasElem.classList.add(className("c"));
              _this.element.appendChild(canvasElem);
              _this.canvasElem_ = canvasElem;
              var markerElem = document2.createElement("div");
              markerElem.classList.add(className("m"));
              _this.element.appendChild(markerElem);
              _this.markerElem_ = markerElem;
              _this.update();
              config.model.emitter.on("dispose", function() {
                _this.canvasElem_ = DisposingUtil.disposeElement(_this.canvasElem_);
                _this.markerElem_ = DisposingUtil.disposeElement(_this.markerElem_);
              });
              return _this;
            }
            Object.defineProperty(SvPaletteInputView2.prototype, "canvasElement", {
              get: function() {
                if (!this.canvasElem_) {
                  throw pane_error_1.PaneError.alreadyDisposed();
                }
                return this.canvasElem_;
              },
              enumerable: false,
              configurable: true
            });
            SvPaletteInputView2.prototype.update = function() {
              if (!this.markerElem_) {
                throw pane_error_1.PaneError.alreadyDisposed();
              }
              var ctx = DomUtil.getCanvasContext(this.canvasElement);
              if (!ctx) {
                return;
              }
              var c4 = this.value.rawValue;
              var hsvComps = c4.getComponents("hsv");
              var width = this.canvasElement.width;
              var height = this.canvasElement.height;
              var imgData = ctx.getImageData(0, 0, width, height);
              var data = imgData.data;
              for (var iy = 0; iy < height; iy++) {
                for (var ix = 0; ix < width; ix++) {
                  var s4 = number_util_1.NumberUtil.map(ix, 0, width, 0, 100);
                  var v2 = number_util_1.NumberUtil.map(iy, 0, height, 100, 0);
                  var rgbComps = color_model_1.hsvToRgb(hsvComps[0], s4, v2);
                  var i4 = (iy * width + ix) * 4;
                  data[i4] = rgbComps[0];
                  data[i4 + 1] = rgbComps[1];
                  data[i4 + 2] = rgbComps[2];
                  data[i4 + 3] = 255;
                }
              }
              ctx.putImageData(imgData, 0, 0);
              var left = number_util_1.NumberUtil.map(hsvComps[1], 0, 100, 0, 100);
              this.markerElem_.style.left = left + "%";
              var top = number_util_1.NumberUtil.map(hsvComps[2], 0, 100, 100, 0);
              this.markerElem_.style.top = top + "%";
            };
            SvPaletteInputView2.prototype.onValueChange_ = function() {
              this.update();
            };
            return SvPaletteInputView2;
          }(view_1.View);
          exports2.SvPaletteInputView = SvPaletteInputView;
        },
        "./src/main/js/view/input/text.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          var __extends = this && this.__extends || function() {
            var extendStatics = function(d3, b3) {
              extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b4) {
                d4.__proto__ = b4;
              } || function(d4, b4) {
                for (var p3 in b4)
                  if (b4.hasOwnProperty(p3))
                    d4[p3] = b4[p3];
              };
              return extendStatics(d3, b3);
            };
            return function(d3, b3) {
              extendStatics(d3, b3);
              function __() {
                this.constructor = d3;
              }
              d3.prototype = b3 === null ? Object.create(b3) : (__.prototype = b3.prototype, new __());
            };
          }();
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.TextInputView = void 0;
          var class_name_1 = __webpack_require__("./src/main/js/misc/class-name.ts");
          var DisposingUtil = __webpack_require__("./src/main/js/misc/disposing-util.ts");
          var pane_error_1 = __webpack_require__("./src/main/js/misc/pane-error.ts");
          var view_1 = __webpack_require__("./src/main/js/view/view.ts");
          var className = class_name_1.ClassName("txt", "input");
          var TextInputView = function(_super) {
            __extends(TextInputView2, _super);
            function TextInputView2(document2, config) {
              var _this = _super.call(this, document2, config) || this;
              _this.onValueChange_ = _this.onValueChange_.bind(_this);
              _this.formatter_ = config.formatter;
              _this.element.classList.add(className());
              var inputElem = document2.createElement("input");
              inputElem.classList.add(className("i"));
              inputElem.type = "text";
              _this.element.appendChild(inputElem);
              _this.inputElem_ = inputElem;
              config.value.emitter.on("change", _this.onValueChange_);
              _this.value = config.value;
              _this.update();
              config.model.emitter.on("dispose", function() {
                _this.inputElem_ = DisposingUtil.disposeElement(_this.inputElem_);
              });
              return _this;
            }
            Object.defineProperty(TextInputView2.prototype, "inputElement", {
              get: function() {
                if (!this.inputElem_) {
                  throw pane_error_1.PaneError.alreadyDisposed();
                }
                return this.inputElem_;
              },
              enumerable: false,
              configurable: true
            });
            TextInputView2.prototype.update = function() {
              if (!this.inputElem_) {
                throw pane_error_1.PaneError.alreadyDisposed();
              }
              this.inputElem_.value = this.formatter_.format(this.value.rawValue);
            };
            TextInputView2.prototype.onValueChange_ = function() {
              this.update();
            };
            return TextInputView2;
          }(view_1.View);
          exports2.TextInputView = TextInputView;
        },
        "./src/main/js/view/labeled.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          var __extends = this && this.__extends || function() {
            var extendStatics = function(d3, b3) {
              extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b4) {
                d4.__proto__ = b4;
              } || function(d4, b4) {
                for (var p3 in b4)
                  if (b4.hasOwnProperty(p3))
                    d4[p3] = b4[p3];
              };
              return extendStatics(d3, b3);
            };
            return function(d3, b3) {
              extendStatics(d3, b3);
              function __() {
                this.constructor = d3;
              }
              d3.prototype = b3 === null ? Object.create(b3) : (__.prototype = b3.prototype, new __());
            };
          }();
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.LabeledView = void 0;
          var class_name_1 = __webpack_require__("./src/main/js/misc/class-name.ts");
          var view_1 = __webpack_require__("./src/main/js/view/view.ts");
          var className = class_name_1.ClassName("lbl");
          function createLabelNode(document2, label) {
            var frag = document2.createDocumentFragment();
            var lineNodes = label.split("\n").map(function(line) {
              return document2.createTextNode(line);
            });
            lineNodes.forEach(function(lineNode, index) {
              if (index > 0) {
                frag.appendChild(document2.createElement("br"));
              }
              frag.appendChild(lineNode);
            });
            return frag;
          }
          var LabeledView = function(_super) {
            __extends(LabeledView2, _super);
            function LabeledView2(document2, config) {
              var _this = _super.call(this, document2, config) || this;
              _this.label = config.label;
              _this.element.classList.add(className());
              var labelElem = document2.createElement("div");
              labelElem.classList.add(className("l"));
              labelElem.appendChild(createLabelNode(document2, _this.label));
              _this.element.appendChild(labelElem);
              var viewElem = document2.createElement("div");
              viewElem.classList.add(className("v"));
              viewElem.appendChild(config.view.element);
              _this.element.appendChild(viewElem);
              return _this;
            }
            return LabeledView2;
          }(view_1.View);
          exports2.LabeledView = LabeledView;
        },
        "./src/main/js/view/monitor/graph.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          var __extends = this && this.__extends || function() {
            var extendStatics = function(d3, b3) {
              extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b4) {
                d4.__proto__ = b4;
              } || function(d4, b4) {
                for (var p3 in b4)
                  if (b4.hasOwnProperty(p3))
                    d4[p3] = b4[p3];
              };
              return extendStatics(d3, b3);
            };
            return function(d3, b3) {
              extendStatics(d3, b3);
              function __() {
                this.constructor = d3;
              }
              d3.prototype = b3 === null ? Object.create(b3) : (__.prototype = b3.prototype, new __());
            };
          }();
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.GraphMonitorView = void 0;
          var class_name_1 = __webpack_require__("./src/main/js/misc/class-name.ts");
          var DisposingUtil = __webpack_require__("./src/main/js/misc/disposing-util.ts");
          var DomUtil = __webpack_require__("./src/main/js/misc/dom-util.ts");
          var number_util_1 = __webpack_require__("./src/main/js/misc/number-util.ts");
          var pane_error_1 = __webpack_require__("./src/main/js/misc/pane-error.ts");
          var view_1 = __webpack_require__("./src/main/js/view/view.ts");
          var SVG_NS = DomUtil.SVG_NS;
          var className = class_name_1.ClassName("grp", "monitor");
          var GraphMonitorView = function(_super) {
            __extends(GraphMonitorView2, _super);
            function GraphMonitorView2(document2, config) {
              var _this = _super.call(this, document2, config) || this;
              _this.onCursorChange_ = _this.onCursorChange_.bind(_this);
              _this.onValueUpdate_ = _this.onValueUpdate_.bind(_this);
              _this.element.classList.add(className());
              _this.formatter_ = config.formatter;
              _this.minValue_ = config.minValue;
              _this.maxValue_ = config.maxValue;
              _this.cursor_ = config.cursor;
              _this.cursor_.emitter.on("change", _this.onCursorChange_);
              var svgElem = document2.createElementNS(SVG_NS, "svg");
              svgElem.classList.add(className("g"));
              _this.element.appendChild(svgElem);
              _this.svgElem_ = svgElem;
              var lineElem = document2.createElementNS(SVG_NS, "polyline");
              _this.svgElem_.appendChild(lineElem);
              _this.lineElem_ = lineElem;
              var tooltipElem = document2.createElement("div");
              tooltipElem.classList.add(className("t"));
              _this.element.appendChild(tooltipElem);
              _this.tooltipElem_ = tooltipElem;
              config.value.emitter.on("update", _this.onValueUpdate_);
              _this.value = config.value;
              _this.update();
              config.model.emitter.on("dispose", function() {
                _this.lineElem_ = DisposingUtil.disposeElement(_this.lineElem_);
                _this.svgElem_ = DisposingUtil.disposeElement(_this.svgElem_);
                _this.tooltipElem_ = DisposingUtil.disposeElement(_this.tooltipElem_);
              });
              return _this;
            }
            Object.defineProperty(GraphMonitorView2.prototype, "graphElement", {
              get: function() {
                if (!this.svgElem_) {
                  throw pane_error_1.PaneError.alreadyDisposed();
                }
                return this.svgElem_;
              },
              enumerable: false,
              configurable: true
            });
            GraphMonitorView2.prototype.update = function() {
              var tooltipElem = this.tooltipElem_;
              if (!this.lineElem_ || !this.svgElem_ || !tooltipElem) {
                throw pane_error_1.PaneError.alreadyDisposed();
              }
              var bounds = this.svgElem_.getBoundingClientRect();
              var maxIndex = this.value.totalCount - 1;
              var min4 = this.minValue_;
              var max4 = this.maxValue_;
              this.lineElem_.setAttributeNS(null, "points", this.value.rawValues.map(function(v2, index) {
                var x2 = number_util_1.NumberUtil.map(index, 0, maxIndex, 0, bounds.width);
                var y3 = number_util_1.NumberUtil.map(v2, min4, max4, bounds.height, 0);
                return [x2, y3].join(",");
              }).join(" "));
              var value = this.value.rawValues[this.cursor_.index];
              if (value === void 0) {
                tooltipElem.classList.remove(className("t", "valid"));
                return;
              }
              tooltipElem.classList.add(className("t", "valid"));
              var tx = number_util_1.NumberUtil.map(this.cursor_.index, 0, maxIndex, 0, bounds.width);
              var ty = number_util_1.NumberUtil.map(value, min4, max4, bounds.height, 0);
              tooltipElem.style.left = tx + "px";
              tooltipElem.style.top = ty + "px";
              tooltipElem.textContent = "" + this.formatter_.format(value);
            };
            GraphMonitorView2.prototype.onValueUpdate_ = function() {
              this.update();
            };
            GraphMonitorView2.prototype.onCursorChange_ = function() {
              this.update();
            };
            return GraphMonitorView2;
          }(view_1.View);
          exports2.GraphMonitorView = GraphMonitorView;
        },
        "./src/main/js/view/monitor/multi-log.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          var __extends = this && this.__extends || function() {
            var extendStatics = function(d3, b3) {
              extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b4) {
                d4.__proto__ = b4;
              } || function(d4, b4) {
                for (var p3 in b4)
                  if (b4.hasOwnProperty(p3))
                    d4[p3] = b4[p3];
              };
              return extendStatics(d3, b3);
            };
            return function(d3, b3) {
              extendStatics(d3, b3);
              function __() {
                this.constructor = d3;
              }
              d3.prototype = b3 === null ? Object.create(b3) : (__.prototype = b3.prototype, new __());
            };
          }();
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.MultiLogMonitorView = void 0;
          var class_name_1 = __webpack_require__("./src/main/js/misc/class-name.ts");
          var DisposingUtil = __webpack_require__("./src/main/js/misc/disposing-util.ts");
          var pane_error_1 = __webpack_require__("./src/main/js/misc/pane-error.ts");
          var view_1 = __webpack_require__("./src/main/js/view/view.ts");
          var className = class_name_1.ClassName("mll", "monitor");
          var MultiLogMonitorView = function(_super) {
            __extends(MultiLogMonitorView2, _super);
            function MultiLogMonitorView2(document2, config) {
              var _this = _super.call(this, document2, config) || this;
              _this.onValueUpdate_ = _this.onValueUpdate_.bind(_this);
              _this.formatter_ = config.formatter;
              _this.element.classList.add(className());
              var textareaElem = document2.createElement("textarea");
              textareaElem.classList.add(className("i"));
              textareaElem.readOnly = true;
              _this.element.appendChild(textareaElem);
              _this.textareaElem_ = textareaElem;
              config.value.emitter.on("update", _this.onValueUpdate_);
              _this.value = config.value;
              _this.update();
              config.model.emitter.on("dispose", function() {
                _this.textareaElem_ = DisposingUtil.disposeElement(_this.textareaElem_);
              });
              return _this;
            }
            MultiLogMonitorView2.prototype.update = function() {
              var _this = this;
              var elem = this.textareaElem_;
              if (!elem) {
                throw pane_error_1.PaneError.alreadyDisposed();
              }
              var shouldScroll = elem.scrollTop === elem.scrollHeight - elem.clientHeight;
              elem.textContent = this.value.rawValues.map(function(value) {
                return _this.formatter_.format(value);
              }).join("\n");
              if (shouldScroll) {
                elem.scrollTop = elem.scrollHeight;
              }
            };
            MultiLogMonitorView2.prototype.onValueUpdate_ = function() {
              this.update();
            };
            return MultiLogMonitorView2;
          }(view_1.View);
          exports2.MultiLogMonitorView = MultiLogMonitorView;
        },
        "./src/main/js/view/monitor/single-log.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          var __extends = this && this.__extends || function() {
            var extendStatics = function(d3, b3) {
              extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b4) {
                d4.__proto__ = b4;
              } || function(d4, b4) {
                for (var p3 in b4)
                  if (b4.hasOwnProperty(p3))
                    d4[p3] = b4[p3];
              };
              return extendStatics(d3, b3);
            };
            return function(d3, b3) {
              extendStatics(d3, b3);
              function __() {
                this.constructor = d3;
              }
              d3.prototype = b3 === null ? Object.create(b3) : (__.prototype = b3.prototype, new __());
            };
          }();
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.SingleLogMonitorView = void 0;
          var class_name_1 = __webpack_require__("./src/main/js/misc/class-name.ts");
          var DisposingUtil = __webpack_require__("./src/main/js/misc/disposing-util.ts");
          var pane_error_1 = __webpack_require__("./src/main/js/misc/pane-error.ts");
          var view_1 = __webpack_require__("./src/main/js/view/view.ts");
          var className = class_name_1.ClassName("sgl", "monitor");
          var SingleLogMonitorView = function(_super) {
            __extends(SingleLogMonitorView2, _super);
            function SingleLogMonitorView2(document2, config) {
              var _this = _super.call(this, document2, config) || this;
              _this.onValueUpdate_ = _this.onValueUpdate_.bind(_this);
              _this.formatter_ = config.formatter;
              _this.element.classList.add(className());
              var inputElem = document2.createElement("input");
              inputElem.classList.add(className("i"));
              inputElem.readOnly = true;
              inputElem.type = "text";
              _this.element.appendChild(inputElem);
              _this.inputElem_ = inputElem;
              config.value.emitter.on("update", _this.onValueUpdate_);
              _this.value = config.value;
              _this.update();
              config.model.emitter.on("dispose", function() {
                _this.inputElem_ = DisposingUtil.disposeElement(_this.inputElem_);
              });
              return _this;
            }
            SingleLogMonitorView2.prototype.update = function() {
              if (!this.inputElem_) {
                throw pane_error_1.PaneError.alreadyDisposed();
              }
              var values = this.value.rawValues;
              this.inputElem_.value = values.length > 0 ? this.formatter_.format(values[values.length - 1]) : "";
            };
            SingleLogMonitorView2.prototype.onValueUpdate_ = function() {
              this.update();
            };
            return SingleLogMonitorView2;
          }(view_1.View);
          exports2.SingleLogMonitorView = SingleLogMonitorView;
        },
        "./src/main/js/view/root.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          var __extends = this && this.__extends || function() {
            var extendStatics = function(d3, b3) {
              extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b4) {
                d4.__proto__ = b4;
              } || function(d4, b4) {
                for (var p3 in b4)
                  if (b4.hasOwnProperty(p3))
                    d4[p3] = b4[p3];
              };
              return extendStatics(d3, b3);
            };
            return function(d3, b3) {
              extendStatics(d3, b3);
              function __() {
                this.constructor = d3;
              }
              d3.prototype = b3 === null ? Object.create(b3) : (__.prototype = b3.prototype, new __());
            };
          }();
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.RootView = void 0;
          var class_name_1 = __webpack_require__("./src/main/js/misc/class-name.ts");
          var DisposingUtil = __webpack_require__("./src/main/js/misc/disposing-util.ts");
          var pane_error_1 = __webpack_require__("./src/main/js/misc/pane-error.ts");
          var view_1 = __webpack_require__("./src/main/js/view/view.ts");
          var className = class_name_1.ClassName("rot");
          var RootView = function(_super) {
            __extends(RootView2, _super);
            function RootView2(document2, config) {
              var _this = _super.call(this, document2, config) || this;
              _this.onFolderChange_ = _this.onFolderChange_.bind(_this);
              _this.folder_ = config.folder;
              if (_this.folder_) {
                _this.folder_.emitter.on("change", _this.onFolderChange_);
              }
              _this.element.classList.add(className());
              var folder = _this.folder_;
              if (folder) {
                var titleElem = document2.createElement("button");
                titleElem.classList.add(className("t"));
                titleElem.textContent = folder.title;
                _this.element.appendChild(titleElem);
                var markElem = document2.createElement("div");
                markElem.classList.add(className("m"));
                titleElem.appendChild(markElem);
                _this.titleElem_ = titleElem;
              }
              var containerElem = document2.createElement("div");
              containerElem.classList.add(className("c"));
              _this.element.appendChild(containerElem);
              _this.containerElem_ = containerElem;
              _this.applyModel_();
              config.model.emitter.on("dispose", function() {
                _this.containerElem_ = DisposingUtil.disposeElement(_this.containerElem_);
                _this.folder_ = null;
                _this.titleElem_ = DisposingUtil.disposeElement(_this.titleElem_);
              });
              return _this;
            }
            Object.defineProperty(RootView2.prototype, "titleElement", {
              get: function() {
                return this.titleElem_;
              },
              enumerable: false,
              configurable: true
            });
            Object.defineProperty(RootView2.prototype, "containerElement", {
              get: function() {
                if (!this.containerElem_) {
                  throw pane_error_1.PaneError.alreadyDisposed();
                }
                return this.containerElem_;
              },
              enumerable: false,
              configurable: true
            });
            RootView2.prototype.applyModel_ = function() {
              var containerElem = this.containerElem_;
              if (!containerElem) {
                throw pane_error_1.PaneError.alreadyDisposed();
              }
              var expanded = this.folder_ ? this.folder_.styleExpanded : true;
              var expandedClass = className(void 0, "expanded");
              if (expanded) {
                this.element.classList.add(expandedClass);
              } else {
                this.element.classList.remove(expandedClass);
              }
              containerElem.style.height = this.folder_ ? this.folder_.styleHeight : "auto";
            };
            RootView2.prototype.onFolderChange_ = function() {
              this.applyModel_();
            };
            return RootView2;
          }(view_1.View);
          exports2.RootView = RootView;
        },
        "./src/main/js/view/separator.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          var __extends = this && this.__extends || function() {
            var extendStatics = function(d3, b3) {
              extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d4, b4) {
                d4.__proto__ = b4;
              } || function(d4, b4) {
                for (var p3 in b4)
                  if (b4.hasOwnProperty(p3))
                    d4[p3] = b4[p3];
              };
              return extendStatics(d3, b3);
            };
            return function(d3, b3) {
              extendStatics(d3, b3);
              function __() {
                this.constructor = d3;
              }
              d3.prototype = b3 === null ? Object.create(b3) : (__.prototype = b3.prototype, new __());
            };
          }();
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.SeparatorView = void 0;
          var class_name_1 = __webpack_require__("./src/main/js/misc/class-name.ts");
          var view_1 = __webpack_require__("./src/main/js/view/view.ts");
          var className = class_name_1.ClassName("spt");
          var SeparatorView = function(_super) {
            __extends(SeparatorView2, _super);
            function SeparatorView2(document2, config) {
              var _this = _super.call(this, document2, config) || this;
              _this.element.classList.add(className());
              var hrElem = document2.createElement("hr");
              hrElem.classList.add(className("r"));
              _this.element.appendChild(hrElem);
              return _this;
            }
            return SeparatorView2;
          }(view_1.View);
          exports2.SeparatorView = SeparatorView;
        },
        "./src/main/js/view/view.ts": function(module2, exports2, __webpack_require__) {
          "use strict";
          Object.defineProperty(exports2, "__esModule", { value: true });
          exports2.View = void 0;
          var class_name_1 = __webpack_require__("./src/main/js/misc/class-name.ts");
          var DisposingUtil = __webpack_require__("./src/main/js/misc/disposing-util.ts");
          var pane_error_1 = __webpack_require__("./src/main/js/misc/pane-error.ts");
          var ViewPositions = __webpack_require__("./src/main/js/model/view-positions.ts");
          var className = class_name_1.ClassName("");
          var View = function() {
            function View2(document2, config) {
              this.onChange_ = this.onChange_.bind(this);
              this.onDispose_ = this.onDispose_.bind(this);
              this.model_ = config.model;
              this.model_.emitter.on("change", this.onChange_);
              this.model_.emitter.on("dispose", this.onDispose_);
              this.doc_ = document2;
              this.elem_ = this.doc_.createElement("div");
              this.elem_.classList.add(className());
            }
            Object.defineProperty(View2.prototype, "document", {
              get: function() {
                if (!this.doc_) {
                  throw pane_error_1.PaneError.alreadyDisposed();
                }
                return this.doc_;
              },
              enumerable: false,
              configurable: true
            });
            Object.defineProperty(View2.prototype, "element", {
              get: function() {
                if (!this.elem_) {
                  throw pane_error_1.PaneError.alreadyDisposed();
                }
                return this.elem_;
              },
              enumerable: false,
              configurable: true
            });
            View2.prototype.onDispose_ = function() {
              this.doc_ = null;
              this.elem_ = DisposingUtil.disposeElement(this.elem_);
            };
            View2.prototype.onChange_ = function(ev) {
              var elem = this.elem_;
              if (!elem) {
                throw pane_error_1.PaneError.alreadyDisposed();
              }
              if (ev.propertyName === "hidden") {
                var hiddenClass = className(void 0, "hidden");
                if (this.model_.hidden) {
                  elem.classList.add(hiddenClass);
                } else {
                  elem.classList.remove(hiddenClass);
                }
              } else if (ev.propertyName === "positions") {
                ViewPositions.getAll().forEach(function(pos) {
                  elem.classList.remove(className(void 0, pos));
                });
                this.model_.positions.forEach(function(pos) {
                  elem.classList.add(className(void 0, pos));
                });
              }
            };
            return View2;
          }();
          exports2.View = View;
        },
        "./src/main/sass/bundle.scss": function(module2, exports2, __webpack_require__) {
          exports2 = module2.exports = __webpack_require__("./node_modules/css-loader/lib/css-base.js")(false);
          exports2.push([module2.i, ".tp-fldv_t,.tp-rotv_t{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0;background-color:var(--folder-background-color);color:var(--folder-foreground-color);cursor:pointer;display:block;height:24px;line-height:24px;overflow:hidden;padding-left:30px;position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-fldv_t:hover,.tp-rotv_t:hover{background-color:var(--folder-background-color-hover)}.tp-fldv_t:focus,.tp-rotv_t:focus{background-color:var(--folder-background-color-focus)}.tp-fldv_t:active,.tp-rotv_t:active{background-color:var(--folder-background-color-active)}.tp-fldv_m,.tp-rotv_m{background:linear-gradient(to left, var(--folder-foreground-color), var(--folder-foreground-color) 2px, transparent 2px, transparent 4px, var(--folder-foreground-color) 4px);border-radius:2px;bottom:0;content:'';display:block;height:6px;left:12px;margin:auto;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-fldv.tp-fldv-expanded>.tp-fldv_t>.tp-fldv_m,.tp-rotv.tp-rotv-expanded .tp-rotv_m{transform:none}.tp-fldv_c,.tp-rotv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-fldv_c>.tp-fldv.tp-v-first,.tp-rotv_c>.tp-fldv.tp-v-first{margin-top:-4px}.tp-fldv_c>.tp-fldv.tp-v-last,.tp-rotv_c>.tp-fldv.tp-v-last{margin-bottom:-4px}.tp-fldv_c>*:not(.tp-v-first),.tp-rotv_c>*:not(.tp-v-first){margin-top:4px}.tp-fldv_c>.tp-fldv:not(.tp-v-hidden)+.tp-fldv,.tp-rotv_c>.tp-fldv:not(.tp-v-hidden)+.tp-fldv{margin-top:0}.tp-fldv_c>.tp-sptv:not(.tp-v-hidden)+.tp-sptv,.tp-rotv_c>.tp-sptv:not(.tp-v-hidden)+.tp-sptv{margin-top:0}.tp-fldv.tp-fldv-expanded>.tp-fldv_c,.tp-rotv.tp-rotv-expanded .tp-rotv_c{opacity:1;padding-bottom:4px;padding-top:4px;transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-btnv{padding:0 4px}.tp-btnv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0;background-color:var(--button-background-color);border-radius:2px;color:var(--button-foreground-color);cursor:pointer;display:block;font-weight:bold;height:20px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%}.tp-btnv_b:hover{background-color:var(--button-background-color-hover)}.tp-btnv_b:focus{background-color:var(--button-background-color-focus)}.tp-btnv_b:active{background-color:var(--button-background-color-active)}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-expanded .tp-fldv_t{transition:border-radius 0s}.tp-fldv_c{border-left:var(--folder-background-color) solid 4px}.tp-fldv_t:hover+.tp-fldv_c{border-left-color:var(--folder-background-color-hover)}.tp-fldv_t:focus+.tp-fldv_c{border-left-color:var(--folder-background-color-focus)}.tp-fldv_t:active+.tp-fldv_c{border-left-color:var(--folder-background-color-active)}.tp-fldv_c>.tp-fldv{margin-left:4px}.tp-fldv_c>.tp-fldv>.tp-fldv_t{border-top-left-radius:2px;border-bottom-left-radius:2px}.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_t{border-bottom-left-radius:0}.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:2px}.tp-ckbiv_l{display:block;position:relative}.tp-ckbiv_i{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0;background:red;left:0;opacity:0;position:absolute;top:0}.tp-ckbiv_m{background-color:var(--input-background-color);border-radius:2px;cursor:pointer;display:block;height:20px;position:relative;width:20px}.tp-ckbiv_m::before{background-color:var(--input-foreground-color);border-radius:2px;bottom:4px;content:'';display:block;left:4px;opacity:0;position:absolute;right:4px;top:4px}.tp-ckbiv_i:hover+.tp-ckbiv_m{background-color:var(--input-background-color-hover)}.tp-ckbiv_i:focus+.tp-ckbiv_m{background-color:var(--input-background-color-focus)}.tp-ckbiv_i:active+.tp-ckbiv_m{background-color:var(--input-background-color-active)}.tp-ckbiv_i:checked+.tp-ckbiv_m::before{opacity:1}.tp-cctxtsiv{display:flex;width:100%}.tp-cctxtsiv_m{margin-right:4px;position:relative}.tp-cctxtsiv_ms{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0;border-radius:2px;color:var(--label-foreground-color);cursor:pointer;height:20px;line-height:20px;padding:0 18px 0 4px}.tp-cctxtsiv_ms:hover{background-color:var(--input-background-color-hover)}.tp-cctxtsiv_ms:focus{background-color:var(--input-background-color-focus)}.tp-cctxtsiv_ms:active{background-color:var(--input-background-color-active)}.tp-cctxtsiv_mm{border-color:var(--label-foreground-color) transparent transparent;border-style:solid;border-width:3px;box-sizing:border-box;height:6px;pointer-events:none;width:6px;bottom:0;margin:auto;position:absolute;right:6px;top:3px}.tp-cctxtsiv_w{display:flex;flex:1}.tp-cctxtsiv_i{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0;background-color:var(--input-background-color);border-radius:2px;box-sizing:border-box;color:var(--input-foreground-color);font-family:inherit;height:20px;line-height:20px;min-width:0;width:100%;border-radius:0;flex:1;padding:0 4px}.tp-cctxtsiv_i:hover{background-color:var(--input-background-color-hover)}.tp-cctxtsiv_i:focus{background-color:var(--input-background-color-focus)}.tp-cctxtsiv_i:active{background-color:var(--input-background-color-active)}.tp-cctxtsiv_i:first-child{border-bottom-left-radius:2px;border-top-left-radius:2px}.tp-cctxtsiv_i:last-child{border-bottom-right-radius:2px;border-top-right-radius:2px}.tp-cctxtsiv_i+.tp-cctxtsiv_i{margin-left:2px}.tp-clpiv{background-color:var(--base-background-color);border-radius:6px;box-shadow:0 2px 4px var(--base-shadow-color);display:none;padding:4px;position:relative;visibility:hidden;z-index:1000}.tp-clpiv.tp-clpiv-expanded{display:block;visibility:visible}.tp-clpiv_h,.tp-clpiv_ap{margin-left:6px;margin-right:6px}.tp-clpiv_h{margin-top:4px}.tp-clpiv_rgb{display:flex;margin-top:4px;width:100%}.tp-clpiv_a{display:flex;margin-top:4px;padding-top:8px;position:relative}.tp-clpiv_a:before{background-color:var(--separator-color);content:'';height:4px;left:-4px;position:absolute;right:-4px;top:0}.tp-clpiv_ap{flex:3}.tp-clpiv_at{flex:1;margin-left:4px}.tp-svpiv{border-radius:2px;outline:none;overflow:hidden;position:relative}.tp-svpiv_c{cursor:crosshair;display:block;height:80px;width:100%}.tp-svpiv_m{border-radius:100%;border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0,0,0,0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpiv:focus .tp-svpiv_m{border-color:#fff}.tp-hpliv{cursor:pointer;height:20px;outline:none;position:relative}.tp-hpliv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hpliv_m{border-radius:2px;border:rgba(255,255,255,0.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,0.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hpliv:focus .tp-hpliv_m{border-color:#fff}.tp-apliv{cursor:pointer;height:20px;outline:none;position:relative}.tp-apliv_b{background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;background-color:#fff;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-apliv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-apliv_m{background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;background-color:#fff;border-radius:2px;box-shadow:0 0 2px rgba(0,0,0,0.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-apliv_p{border-radius:2px;border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-apliv:focus .tp-apliv_p{border-color:#fff}.tp-lstiv{display:block;padding:0;position:relative}.tp-lstiv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0;background-color:var(--button-background-color);border-radius:2px;color:var(--button-foreground-color);cursor:pointer;display:block;height:20px;line-height:20px;padding:0 4px;width:100%}.tp-lstiv_s:hover{background-color:var(--button-background-color-hover)}.tp-lstiv_s:focus{background-color:var(--button-background-color-focus)}.tp-lstiv_s:active{background-color:var(--button-background-color-active)}.tp-lstiv_m{border-color:var(--button-foreground-color) transparent transparent;border-style:solid;border-width:3px;box-sizing:border-box;height:6px;pointer-events:none;width:6px;bottom:0;margin:auto;position:absolute;right:6px;top:3px}.tp-p2dpadiv{background-color:var(--base-background-color);border-radius:6px;box-shadow:0 2px 4px var(--base-shadow-color);display:none;padding:4px 4px 4px 28px;position:relative;visibility:hidden;z-index:1000}.tp-p2dpadiv.tp-p2dpadiv-expanded{display:block;visibility:visible}.tp-p2dpadiv_p{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0;background-color:var(--input-background-color);border-radius:2px;box-sizing:border-box;color:var(--input-foreground-color);font-family:inherit;height:20px;line-height:20px;min-width:0;width:100%;cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpadiv_p:hover{background-color:var(--input-background-color-hover)}.tp-p2dpadiv_p:focus{background-color:var(--input-background-color-focus)}.tp-p2dpadiv_p:active{background-color:var(--input-background-color-active)}.tp-p2dpadiv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpadiv_ax{stroke:var(--input-guide-color)}.tp-p2dpadiv_l{stroke:var(--input-foreground-color);stroke-linecap:round;stroke-dasharray:1px 3px}.tp-p2dpadiv_m{fill:var(--input-foreground-color)}.tp-p2dpadtxtiv{display:flex;position:relative}.tp-p2dpadtxtiv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0;background-color:var(--button-background-color);border-radius:2px;color:var(--button-foreground-color);cursor:pointer;display:block;font-weight:bold;height:20px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;height:20px;position:relative;width:20px}.tp-p2dpadtxtiv_b:hover{background-color:var(--button-background-color-hover)}.tp-p2dpadtxtiv_b:focus{background-color:var(--button-background-color-focus)}.tp-p2dpadtxtiv_b:active{background-color:var(--button-background-color-active)}.tp-p2dpadtxtiv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dpadtxtiv_p{left:-4px;position:absolute;right:-4px;top:20px}.tp-p2dpadtxtiv_t{margin-left:4px}.tp-p2dtxtiv{display:flex}.tp-p2dtxtiv_w{align-items:center;display:flex}.tp-p2dtxtiv_w+.tp-p2dtxtiv_w{margin-left:2px}.tp-p2dtxtiv_i{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0;background-color:var(--input-background-color);border-radius:2px;box-sizing:border-box;color:var(--input-foreground-color);font-family:inherit;height:20px;line-height:20px;min-width:0;width:100%;padding:0 4px;width:100%}.tp-p2dtxtiv_i:hover{background-color:var(--input-background-color-hover)}.tp-p2dtxtiv_i:focus{background-color:var(--input-background-color-focus)}.tp-p2dtxtiv_i:active{background-color:var(--input-background-color-active)}.tp-p2dtxtiv_w:nth-child(1) .tp-p2dtxtiv_i{border-top-right-radius:0;border-bottom-right-radius:0}.tp-p2dtxtiv_w:nth-child(2) .tp-p2dtxtiv_i{border-top-left-radius:0;border-bottom-left-radius:0}.tp-sldiv{display:block;padding:0}.tp-sldiv_o{box-sizing:border-box;cursor:pointer;height:20px;margin:0 6px;outline:none;position:relative}.tp-sldiv_o::before{background-color:var(--input-background-color);border-radius:1px;bottom:0;content:'';display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldiv_i{height:100%;left:0;position:absolute;top:0}.tp-sldiv_i::before{background-color:var(--button-background-color);border-radius:2px;bottom:0;content:'';display:block;height:12px;margin:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldiv_o:hover .tp-sldiv_i::before{background-color:var(--button-background-color-hover)}.tp-sldiv_o:focus .tp-sldiv_i::before{background-color:var(--button-background-color-focus)}.tp-sldiv_o:active .tp-sldiv_i::before{background-color:var(--button-background-color-active)}.tp-txtiv{display:block;padding:0}.tp-txtiv_i{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0;background-color:var(--input-background-color);border-radius:2px;box-sizing:border-box;color:var(--input-foreground-color);font-family:inherit;height:20px;line-height:20px;min-width:0;width:100%;padding:0 4px}.tp-txtiv_i:hover{background-color:var(--input-background-color-hover)}.tp-txtiv_i:focus{background-color:var(--input-background-color-focus)}.tp-txtiv_i:active{background-color:var(--input-background-color-active)}.tp-cswiv{background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;background-color:#fff;border-radius:2px}.tp-cswiv_sw{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0;background-color:var(--input-background-color);border-radius:2px;box-sizing:border-box;color:var(--input-foreground-color);font-family:inherit;height:20px;line-height:20px;min-width:0;width:100%}.tp-cswiv_sw:hover{background-color:var(--input-background-color-hover)}.tp-cswiv_sw:focus{background-color:var(--input-background-color-focus)}.tp-cswiv_sw:active{background-color:var(--input-background-color-active)}.tp-cswiv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:20px;left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:20px}.tp-cswiv_b:focus::after{border:rgba(255,255,255,0.75) solid 2px;border-radius:2px;bottom:0;content:'';display:block;left:0;position:absolute;right:0;top:0}.tp-cswiv_p{left:-4px;position:absolute;right:-4px;top:20px}.tp-cswtxtiv{display:flex;position:relative}.tp-cswtxtiv_s{flex-grow:0;flex-shrink:0;width:20px}.tp-cswtxtiv_t{flex:1;margin-left:4px}.tp-sldtxtiv{display:flex}.tp-sldtxtiv_s{flex:2}.tp-sldtxtiv_t{flex:1;margin-left:4px}.tp-lblv{align-items:center;display:flex;padding-left:4px;padding-right:4px}.tp-lblv_l{color:var(--label-foreground-color);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-grpmv{display:block;padding:0;position:relative}.tp-grpmv_g{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0;background-color:var(--monitor-background-color);border-radius:2px;box-sizing:border-box;color:var(--monitor-foreground-color);height:20px;width:100%;display:block;height:60px}.tp-grpmv_g polyline{fill:none;stroke:var(--monitor-foreground-color);stroke-linejoin:round}.tp-grpmv_t{color:var(--monitor-foreground-color);font-size:0.9em;left:0;pointer-events:none;position:absolute;text-indent:4px;top:0;visibility:hidden}.tp-grpmv_t.tp-grpmv_t-valid{visibility:visible}.tp-grpmv_t::before{background-color:var(--monitor-foreground-color);border-radius:100%;content:'';display:block;height:4px;left:-2px;position:absolute;top:-2px;width:4px}.tp-sglmv_i{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0;background-color:var(--monitor-background-color);border-radius:2px;box-sizing:border-box;color:var(--monitor-foreground-color);height:20px;width:100%;padding:0 4px}.tp-mllmv_i{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0;background-color:var(--monitor-background-color);border-radius:2px;box-sizing:border-box;color:var(--monitor-foreground-color);height:20px;width:100%;display:block;height:60px;line-height:20px;padding:0 4px;resize:none;white-space:pre}.tp-cswmv_sw{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0;background-color:var(--monitor-background-color);border-radius:2px;box-sizing:border-box;color:var(--monitor-foreground-color);height:20px;width:100%}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono,Source Code Pro,Menlo,Courier,monospace);--base-background-color: var(--tp-base-background-color, #2f3137);--base-shadow-color: var(--tp-base-shadow-color, rgba(0,0,0,0.2));--button-background-color: var(--tp-button-background-color, #adafb8);--button-background-color-active: var(--tp-button-background-color-active, #d6d7db);--button-background-color-focus: var(--tp-button-background-color-focus, #c8cad0);--button-background-color-hover: var(--tp-button-background-color-hover, #bbbcc4);--button-foreground-color: var(--tp-button-foreground-color, #2f3137);--folder-background-color: var(--tp-folder-background-color, rgba(200,202,208,0.1));--folder-background-color-active: var(--tp-folder-background-color-active, rgba(200,202,208,0.25));--folder-background-color-focus: var(--tp-folder-background-color-focus, rgba(200,202,208,0.2));--folder-background-color-hover: var(--tp-folder-background-color-hover, rgba(200,202,208,0.15));--folder-foreground-color: var(--tp-folder-foreground-color, #c8cad0);--input-background-color: var(--tp-input-background-color, rgba(200,202,208,0.15));--input-background-color-active: var(--tp-input-background-color-active, rgba(200,202,208,0.35));--input-background-color-focus: var(--tp-input-background-color-focus, rgba(200,202,208,0.25));--input-background-color-hover: var(--tp-input-background-color-hover, rgba(200,202,208,0.15));--input-foreground-color: var(--tp-input-foreground-color, #c8cad0);--input-guide-color: var(--tp-input-guide-color, rgba(47,49,55,0.5));--label-foreground-color: var(--tp-label-foreground-color, rgba(200,202,208,0.8));--monitor-background-color: var(--tp-monitor-background-color, rgba(24,24,27,0.5));--monitor-foreground-color: var(--tp-monitor-foreground-color, rgba(200,202,208,0.7));--separator-color: var(--tp-separator-color, rgba(24,24,27,0.3));background-color:var(--base-background-color);border-radius:6px;box-shadow:0 2px 4px var(--base-shadow-color);font-family:var(--font-family);font-size:11px;font-weight:500;text-align:left}.tp-rotv_t{border-bottom-left-radius:6px;border-bottom-right-radius:6px;border-top-left-radius:6px;border-top-right-radius:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_t{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv_m{transition:none}.tp-rotv_c>.tp-fldv:last-child>.tp-fldv_c{border-bottom-left-radius:6px;border-bottom-right-radius:6px}.tp-rotv_c>.tp-fldv:last-child:not(.tp-fldv-expanded)>.tp-fldv_t{border-bottom-left-radius:6px;border-bottom-right-radius:6px}.tp-rotv_c>.tp-fldv:first-child>.tp-fldv_t{border-top-left-radius:6px;border-top-right-radius:6px}.tp-sptv_r{background-color:var(--separator-color);border-width:0;display:block;height:4px;margin:0;width:100%}.tp-v.tp-v-hidden{display:none}\n", ""]);
        }
      })["default"];
    });
  }
});

// node_modules/chroma-js/chroma.js
var require_chroma = __commonJS({
  "node_modules/chroma-js/chroma.js"(exports, module) {
    (function(global, factory) {
      typeof exports === "object" && typeof module !== "undefined" ? module.exports = factory() : typeof define === "function" && define.amd ? define(factory) : (global = typeof globalThis !== "undefined" ? globalThis : global || self, global.chroma = factory());
    })(exports, function() {
      "use strict";
      var limit$2 = function(x2, min5, max5) {
        if (min5 === void 0)
          min5 = 0;
        if (max5 === void 0)
          max5 = 1;
        return x2 < min5 ? min5 : x2 > max5 ? max5 : x2;
      };
      var limit$1 = limit$2;
      var clip_rgb$3 = function(rgb2) {
        rgb2._clipped = false;
        rgb2._unclipped = rgb2.slice(0);
        for (var i5 = 0; i5 <= 3; i5++) {
          if (i5 < 3) {
            if (rgb2[i5] < 0 || rgb2[i5] > 255) {
              rgb2._clipped = true;
            }
            rgb2[i5] = limit$1(rgb2[i5], 0, 255);
          } else if (i5 === 3) {
            rgb2[i5] = limit$1(rgb2[i5], 0, 1);
          }
        }
        return rgb2;
      };
      var classToType = {};
      for (var i$1 = 0, list$1 = ["Boolean", "Number", "String", "Function", "Array", "Date", "RegExp", "Undefined", "Null"]; i$1 < list$1.length; i$1 += 1) {
        var name = list$1[i$1];
        classToType["[object " + name + "]"] = name.toLowerCase();
      }
      var type$p = function(obj) {
        return classToType[Object.prototype.toString.call(obj)] || "object";
      };
      var type$o = type$p;
      var unpack$B = function(args, keyOrder) {
        if (keyOrder === void 0)
          keyOrder = null;
        if (args.length >= 3) {
          return Array.prototype.slice.call(args);
        }
        if (type$o(args[0]) == "object" && keyOrder) {
          return keyOrder.split("").filter(function(k2) {
            return args[0][k2] !== void 0;
          }).map(function(k2) {
            return args[0][k2];
          });
        }
        return args[0];
      };
      var type$n = type$p;
      var last$4 = function(args) {
        if (args.length < 2) {
          return null;
        }
        var l3 = args.length - 1;
        if (type$n(args[l3]) == "string") {
          return args[l3].toLowerCase();
        }
        return null;
      };
      var PI$2 = Math.PI;
      var utils = {
        clip_rgb: clip_rgb$3,
        limit: limit$2,
        type: type$p,
        unpack: unpack$B,
        last: last$4,
        PI: PI$2,
        TWOPI: PI$2 * 2,
        PITHIRD: PI$2 / 3,
        DEG2RAD: PI$2 / 180,
        RAD2DEG: 180 / PI$2
      };
      var input$h = {
        format: {},
        autodetect: []
      };
      var last$3 = utils.last;
      var clip_rgb$2 = utils.clip_rgb;
      var type$m = utils.type;
      var _input = input$h;
      var Color$D = function Color2() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        var me = this;
        if (type$m(args[0]) === "object" && args[0].constructor && args[0].constructor === this.constructor) {
          return args[0];
        }
        var mode = last$3(args);
        var autodetect = false;
        if (!mode) {
          autodetect = true;
          if (!_input.sorted) {
            _input.autodetect = _input.autodetect.sort(function(a3, b3) {
              return b3.p - a3.p;
            });
            _input.sorted = true;
          }
          for (var i5 = 0, list2 = _input.autodetect; i5 < list2.length; i5 += 1) {
            var chk = list2[i5];
            mode = chk.test.apply(chk, args);
            if (mode) {
              break;
            }
          }
        }
        if (_input.format[mode]) {
          var rgb2 = _input.format[mode].apply(null, autodetect ? args : args.slice(0, -1));
          me._rgb = clip_rgb$2(rgb2);
        } else {
          throw new Error("unknown format: " + args);
        }
        if (me._rgb.length === 3) {
          me._rgb.push(1);
        }
      };
      Color$D.prototype.toString = function toString() {
        if (type$m(this.hex) == "function") {
          return this.hex();
        }
        return "[" + this._rgb.join(",") + "]";
      };
      var Color_1 = Color$D;
      var chroma$k = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        return new (Function.prototype.bind.apply(chroma$k.Color, [null].concat(args)))();
      };
      chroma$k.Color = Color_1;
      chroma$k.version = "2.4.2";
      var chroma_1 = chroma$k;
      var unpack$A = utils.unpack;
      var max$2 = Math.max;
      var rgb2cmyk$1 = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        var ref = unpack$A(args, "rgb");
        var r5 = ref[0];
        var g2 = ref[1];
        var b3 = ref[2];
        r5 = r5 / 255;
        g2 = g2 / 255;
        b3 = b3 / 255;
        var k2 = 1 - max$2(r5, max$2(g2, b3));
        var f3 = k2 < 1 ? 1 / (1 - k2) : 0;
        var c4 = (1 - r5 - k2) * f3;
        var m2 = (1 - g2 - k2) * f3;
        var y3 = (1 - b3 - k2) * f3;
        return [c4, m2, y3, k2];
      };
      var rgb2cmyk_1 = rgb2cmyk$1;
      var unpack$z = utils.unpack;
      var cmyk2rgb = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        args = unpack$z(args, "cmyk");
        var c4 = args[0];
        var m2 = args[1];
        var y3 = args[2];
        var k2 = args[3];
        var alpha = args.length > 4 ? args[4] : 1;
        if (k2 === 1) {
          return [0, 0, 0, alpha];
        }
        return [
          c4 >= 1 ? 0 : 255 * (1 - c4) * (1 - k2),
          m2 >= 1 ? 0 : 255 * (1 - m2) * (1 - k2),
          y3 >= 1 ? 0 : 255 * (1 - y3) * (1 - k2),
          alpha
        ];
      };
      var cmyk2rgb_1 = cmyk2rgb;
      var chroma$j = chroma_1;
      var Color$C = Color_1;
      var input$g = input$h;
      var unpack$y = utils.unpack;
      var type$l = utils.type;
      var rgb2cmyk = rgb2cmyk_1;
      Color$C.prototype.cmyk = function() {
        return rgb2cmyk(this._rgb);
      };
      chroma$j.cmyk = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        return new (Function.prototype.bind.apply(Color$C, [null].concat(args, ["cmyk"])))();
      };
      input$g.format.cmyk = cmyk2rgb_1;
      input$g.autodetect.push({
        p: 2,
        test: function() {
          var args = [], len5 = arguments.length;
          while (len5--)
            args[len5] = arguments[len5];
          args = unpack$y(args, "cmyk");
          if (type$l(args) === "array" && args.length === 4) {
            return "cmyk";
          }
        }
      });
      var unpack$x = utils.unpack;
      var last$2 = utils.last;
      var rnd = function(a3) {
        return Math.round(a3 * 100) / 100;
      };
      var hsl2css$1 = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        var hsla = unpack$x(args, "hsla");
        var mode = last$2(args) || "lsa";
        hsla[0] = rnd(hsla[0] || 0);
        hsla[1] = rnd(hsla[1] * 100) + "%";
        hsla[2] = rnd(hsla[2] * 100) + "%";
        if (mode === "hsla" || hsla.length > 3 && hsla[3] < 1) {
          hsla[3] = hsla.length > 3 ? hsla[3] : 1;
          mode = "hsla";
        } else {
          hsla.length = 3;
        }
        return mode + "(" + hsla.join(",") + ")";
      };
      var hsl2css_1 = hsl2css$1;
      var unpack$w = utils.unpack;
      var rgb2hsl$3 = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        args = unpack$w(args, "rgba");
        var r5 = args[0];
        var g2 = args[1];
        var b3 = args[2];
        r5 /= 255;
        g2 /= 255;
        b3 /= 255;
        var min5 = Math.min(r5, g2, b3);
        var max5 = Math.max(r5, g2, b3);
        var l3 = (max5 + min5) / 2;
        var s4, h3;
        if (max5 === min5) {
          s4 = 0;
          h3 = Number.NaN;
        } else {
          s4 = l3 < 0.5 ? (max5 - min5) / (max5 + min5) : (max5 - min5) / (2 - max5 - min5);
        }
        if (r5 == max5) {
          h3 = (g2 - b3) / (max5 - min5);
        } else if (g2 == max5) {
          h3 = 2 + (b3 - r5) / (max5 - min5);
        } else if (b3 == max5) {
          h3 = 4 + (r5 - g2) / (max5 - min5);
        }
        h3 *= 60;
        if (h3 < 0) {
          h3 += 360;
        }
        if (args.length > 3 && args[3] !== void 0) {
          return [h3, s4, l3, args[3]];
        }
        return [h3, s4, l3];
      };
      var rgb2hsl_1 = rgb2hsl$3;
      var unpack$v = utils.unpack;
      var last$1 = utils.last;
      var hsl2css = hsl2css_1;
      var rgb2hsl$2 = rgb2hsl_1;
      var round$6 = Math.round;
      var rgb2css$1 = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        var rgba = unpack$v(args, "rgba");
        var mode = last$1(args) || "rgb";
        if (mode.substr(0, 3) == "hsl") {
          return hsl2css(rgb2hsl$2(rgba), mode);
        }
        rgba[0] = round$6(rgba[0]);
        rgba[1] = round$6(rgba[1]);
        rgba[2] = round$6(rgba[2]);
        if (mode === "rgba" || rgba.length > 3 && rgba[3] < 1) {
          rgba[3] = rgba.length > 3 ? rgba[3] : 1;
          mode = "rgba";
        }
        return mode + "(" + rgba.slice(0, mode === "rgb" ? 3 : 4).join(",") + ")";
      };
      var rgb2css_1 = rgb2css$1;
      var unpack$u = utils.unpack;
      var round$5 = Math.round;
      var hsl2rgb$1 = function() {
        var assign;
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        args = unpack$u(args, "hsl");
        var h3 = args[0];
        var s4 = args[1];
        var l3 = args[2];
        var r5, g2, b3;
        if (s4 === 0) {
          r5 = g2 = b3 = l3 * 255;
        } else {
          var t32 = [0, 0, 0];
          var c4 = [0, 0, 0];
          var t22 = l3 < 0.5 ? l3 * (1 + s4) : l3 + s4 - l3 * s4;
          var t1 = 2 * l3 - t22;
          var h_ = h3 / 360;
          t32[0] = h_ + 1 / 3;
          t32[1] = h_;
          t32[2] = h_ - 1 / 3;
          for (var i5 = 0; i5 < 3; i5++) {
            if (t32[i5] < 0) {
              t32[i5] += 1;
            }
            if (t32[i5] > 1) {
              t32[i5] -= 1;
            }
            if (6 * t32[i5] < 1) {
              c4[i5] = t1 + (t22 - t1) * 6 * t32[i5];
            } else if (2 * t32[i5] < 1) {
              c4[i5] = t22;
            } else if (3 * t32[i5] < 2) {
              c4[i5] = t1 + (t22 - t1) * (2 / 3 - t32[i5]) * 6;
            } else {
              c4[i5] = t1;
            }
          }
          assign = [round$5(c4[0] * 255), round$5(c4[1] * 255), round$5(c4[2] * 255)], r5 = assign[0], g2 = assign[1], b3 = assign[2];
        }
        if (args.length > 3) {
          return [r5, g2, b3, args[3]];
        }
        return [r5, g2, b3, 1];
      };
      var hsl2rgb_1 = hsl2rgb$1;
      var hsl2rgb = hsl2rgb_1;
      var input$f = input$h;
      var RE_RGB = /^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/;
      var RE_RGBA = /^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/;
      var RE_RGB_PCT = /^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/;
      var RE_RGBA_PCT = /^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/;
      var RE_HSL = /^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/;
      var RE_HSLA = /^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/;
      var round$4 = Math.round;
      var css2rgb$1 = function(css) {
        css = css.toLowerCase().trim();
        var m2;
        if (input$f.format.named) {
          try {
            return input$f.format.named(css);
          } catch (e5) {
          }
        }
        if (m2 = css.match(RE_RGB)) {
          var rgb2 = m2.slice(1, 4);
          for (var i5 = 0; i5 < 3; i5++) {
            rgb2[i5] = +rgb2[i5];
          }
          rgb2[3] = 1;
          return rgb2;
        }
        if (m2 = css.match(RE_RGBA)) {
          var rgb$1 = m2.slice(1, 5);
          for (var i$12 = 0; i$12 < 4; i$12++) {
            rgb$1[i$12] = +rgb$1[i$12];
          }
          return rgb$1;
        }
        if (m2 = css.match(RE_RGB_PCT)) {
          var rgb$2 = m2.slice(1, 4);
          for (var i$2 = 0; i$2 < 3; i$2++) {
            rgb$2[i$2] = round$4(rgb$2[i$2] * 2.55);
          }
          rgb$2[3] = 1;
          return rgb$2;
        }
        if (m2 = css.match(RE_RGBA_PCT)) {
          var rgb$3 = m2.slice(1, 5);
          for (var i$3 = 0; i$3 < 3; i$3++) {
            rgb$3[i$3] = round$4(rgb$3[i$3] * 2.55);
          }
          rgb$3[3] = +rgb$3[3];
          return rgb$3;
        }
        if (m2 = css.match(RE_HSL)) {
          var hsl2 = m2.slice(1, 4);
          hsl2[1] *= 0.01;
          hsl2[2] *= 0.01;
          var rgb$4 = hsl2rgb(hsl2);
          rgb$4[3] = 1;
          return rgb$4;
        }
        if (m2 = css.match(RE_HSLA)) {
          var hsl$1 = m2.slice(1, 4);
          hsl$1[1] *= 0.01;
          hsl$1[2] *= 0.01;
          var rgb$5 = hsl2rgb(hsl$1);
          rgb$5[3] = +m2[4];
          return rgb$5;
        }
      };
      css2rgb$1.test = function(s4) {
        return RE_RGB.test(s4) || RE_RGBA.test(s4) || RE_RGB_PCT.test(s4) || RE_RGBA_PCT.test(s4) || RE_HSL.test(s4) || RE_HSLA.test(s4);
      };
      var css2rgb_1 = css2rgb$1;
      var chroma$i = chroma_1;
      var Color$B = Color_1;
      var input$e = input$h;
      var type$k = utils.type;
      var rgb2css = rgb2css_1;
      var css2rgb = css2rgb_1;
      Color$B.prototype.css = function(mode) {
        return rgb2css(this._rgb, mode);
      };
      chroma$i.css = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        return new (Function.prototype.bind.apply(Color$B, [null].concat(args, ["css"])))();
      };
      input$e.format.css = css2rgb;
      input$e.autodetect.push({
        p: 5,
        test: function(h3) {
          var rest = [], len5 = arguments.length - 1;
          while (len5-- > 0)
            rest[len5] = arguments[len5 + 1];
          if (!rest.length && type$k(h3) === "string" && css2rgb.test(h3)) {
            return "css";
          }
        }
      });
      var Color$A = Color_1;
      var chroma$h = chroma_1;
      var input$d = input$h;
      var unpack$t = utils.unpack;
      input$d.format.gl = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        var rgb2 = unpack$t(args, "rgba");
        rgb2[0] *= 255;
        rgb2[1] *= 255;
        rgb2[2] *= 255;
        return rgb2;
      };
      chroma$h.gl = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        return new (Function.prototype.bind.apply(Color$A, [null].concat(args, ["gl"])))();
      };
      Color$A.prototype.gl = function() {
        var rgb2 = this._rgb;
        return [rgb2[0] / 255, rgb2[1] / 255, rgb2[2] / 255, rgb2[3]];
      };
      var unpack$s = utils.unpack;
      var rgb2hcg$1 = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        var ref = unpack$s(args, "rgb");
        var r5 = ref[0];
        var g2 = ref[1];
        var b3 = ref[2];
        var min5 = Math.min(r5, g2, b3);
        var max5 = Math.max(r5, g2, b3);
        var delta = max5 - min5;
        var c4 = delta * 100 / 255;
        var _g = min5 / (255 - delta) * 100;
        var h3;
        if (delta === 0) {
          h3 = Number.NaN;
        } else {
          if (r5 === max5) {
            h3 = (g2 - b3) / delta;
          }
          if (g2 === max5) {
            h3 = 2 + (b3 - r5) / delta;
          }
          if (b3 === max5) {
            h3 = 4 + (r5 - g2) / delta;
          }
          h3 *= 60;
          if (h3 < 0) {
            h3 += 360;
          }
        }
        return [h3, c4, _g];
      };
      var rgb2hcg_1 = rgb2hcg$1;
      var unpack$r = utils.unpack;
      var floor$3 = Math.floor;
      var hcg2rgb = function() {
        var assign, assign$1, assign$2, assign$3, assign$4, assign$5;
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        args = unpack$r(args, "hcg");
        var h3 = args[0];
        var c4 = args[1];
        var _g = args[2];
        var r5, g2, b3;
        _g = _g * 255;
        var _c = c4 * 255;
        if (c4 === 0) {
          r5 = g2 = b3 = _g;
        } else {
          if (h3 === 360) {
            h3 = 0;
          }
          if (h3 > 360) {
            h3 -= 360;
          }
          if (h3 < 0) {
            h3 += 360;
          }
          h3 /= 60;
          var i5 = floor$3(h3);
          var f3 = h3 - i5;
          var p3 = _g * (1 - c4);
          var q = p3 + _c * (1 - f3);
          var t4 = p3 + _c * f3;
          var v2 = p3 + _c;
          switch (i5) {
            case 0:
              assign = [v2, t4, p3], r5 = assign[0], g2 = assign[1], b3 = assign[2];
              break;
            case 1:
              assign$1 = [q, v2, p3], r5 = assign$1[0], g2 = assign$1[1], b3 = assign$1[2];
              break;
            case 2:
              assign$2 = [p3, v2, t4], r5 = assign$2[0], g2 = assign$2[1], b3 = assign$2[2];
              break;
            case 3:
              assign$3 = [p3, q, v2], r5 = assign$3[0], g2 = assign$3[1], b3 = assign$3[2];
              break;
            case 4:
              assign$4 = [t4, p3, v2], r5 = assign$4[0], g2 = assign$4[1], b3 = assign$4[2];
              break;
            case 5:
              assign$5 = [v2, p3, q], r5 = assign$5[0], g2 = assign$5[1], b3 = assign$5[2];
              break;
          }
        }
        return [r5, g2, b3, args.length > 3 ? args[3] : 1];
      };
      var hcg2rgb_1 = hcg2rgb;
      var unpack$q = utils.unpack;
      var type$j = utils.type;
      var chroma$g = chroma_1;
      var Color$z = Color_1;
      var input$c = input$h;
      var rgb2hcg = rgb2hcg_1;
      Color$z.prototype.hcg = function() {
        return rgb2hcg(this._rgb);
      };
      chroma$g.hcg = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        return new (Function.prototype.bind.apply(Color$z, [null].concat(args, ["hcg"])))();
      };
      input$c.format.hcg = hcg2rgb_1;
      input$c.autodetect.push({
        p: 1,
        test: function() {
          var args = [], len5 = arguments.length;
          while (len5--)
            args[len5] = arguments[len5];
          args = unpack$q(args, "hcg");
          if (type$j(args) === "array" && args.length === 3) {
            return "hcg";
          }
        }
      });
      var unpack$p = utils.unpack;
      var last = utils.last;
      var round$3 = Math.round;
      var rgb2hex$2 = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        var ref = unpack$p(args, "rgba");
        var r5 = ref[0];
        var g2 = ref[1];
        var b3 = ref[2];
        var a3 = ref[3];
        var mode = last(args) || "auto";
        if (a3 === void 0) {
          a3 = 1;
        }
        if (mode === "auto") {
          mode = a3 < 1 ? "rgba" : "rgb";
        }
        r5 = round$3(r5);
        g2 = round$3(g2);
        b3 = round$3(b3);
        var u3 = r5 << 16 | g2 << 8 | b3;
        var str6 = "000000" + u3.toString(16);
        str6 = str6.substr(str6.length - 6);
        var hxa = "0" + round$3(a3 * 255).toString(16);
        hxa = hxa.substr(hxa.length - 2);
        switch (mode.toLowerCase()) {
          case "rgba":
            return "#" + str6 + hxa;
          case "argb":
            return "#" + hxa + str6;
          default:
            return "#" + str6;
        }
      };
      var rgb2hex_1 = rgb2hex$2;
      var RE_HEX = /^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/;
      var RE_HEXA = /^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/;
      var hex2rgb$1 = function(hex) {
        if (hex.match(RE_HEX)) {
          if (hex.length === 4 || hex.length === 7) {
            hex = hex.substr(1);
          }
          if (hex.length === 3) {
            hex = hex.split("");
            hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];
          }
          var u3 = parseInt(hex, 16);
          var r5 = u3 >> 16;
          var g2 = u3 >> 8 & 255;
          var b3 = u3 & 255;
          return [r5, g2, b3, 1];
        }
        if (hex.match(RE_HEXA)) {
          if (hex.length === 5 || hex.length === 9) {
            hex = hex.substr(1);
          }
          if (hex.length === 4) {
            hex = hex.split("");
            hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2] + hex[3] + hex[3];
          }
          var u$1 = parseInt(hex, 16);
          var r$1 = u$1 >> 24 & 255;
          var g$1 = u$1 >> 16 & 255;
          var b$1 = u$1 >> 8 & 255;
          var a3 = Math.round((u$1 & 255) / 255 * 100) / 100;
          return [r$1, g$1, b$1, a3];
        }
        throw new Error("unknown hex color: " + hex);
      };
      var hex2rgb_1 = hex2rgb$1;
      var chroma$f = chroma_1;
      var Color$y = Color_1;
      var type$i = utils.type;
      var input$b = input$h;
      var rgb2hex$1 = rgb2hex_1;
      Color$y.prototype.hex = function(mode) {
        return rgb2hex$1(this._rgb, mode);
      };
      chroma$f.hex = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        return new (Function.prototype.bind.apply(Color$y, [null].concat(args, ["hex"])))();
      };
      input$b.format.hex = hex2rgb_1;
      input$b.autodetect.push({
        p: 4,
        test: function(h3) {
          var rest = [], len5 = arguments.length - 1;
          while (len5-- > 0)
            rest[len5] = arguments[len5 + 1];
          if (!rest.length && type$i(h3) === "string" && [3, 4, 5, 6, 7, 8, 9].indexOf(h3.length) >= 0) {
            return "hex";
          }
        }
      });
      var unpack$o = utils.unpack;
      var TWOPI$2 = utils.TWOPI;
      var min$2 = Math.min;
      var sqrt$4 = Math.sqrt;
      var acos = Math.acos;
      var rgb2hsi$1 = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        var ref = unpack$o(args, "rgb");
        var r5 = ref[0];
        var g2 = ref[1];
        var b3 = ref[2];
        r5 /= 255;
        g2 /= 255;
        b3 /= 255;
        var h3;
        var min_ = min$2(r5, g2, b3);
        var i5 = (r5 + g2 + b3) / 3;
        var s4 = i5 > 0 ? 1 - min_ / i5 : 0;
        if (s4 === 0) {
          h3 = NaN;
        } else {
          h3 = (r5 - g2 + (r5 - b3)) / 2;
          h3 /= sqrt$4((r5 - g2) * (r5 - g2) + (r5 - b3) * (g2 - b3));
          h3 = acos(h3);
          if (b3 > g2) {
            h3 = TWOPI$2 - h3;
          }
          h3 /= TWOPI$2;
        }
        return [h3 * 360, s4, i5];
      };
      var rgb2hsi_1 = rgb2hsi$1;
      var unpack$n = utils.unpack;
      var limit = utils.limit;
      var TWOPI$1 = utils.TWOPI;
      var PITHIRD = utils.PITHIRD;
      var cos$4 = Math.cos;
      var hsi2rgb = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        args = unpack$n(args, "hsi");
        var h3 = args[0];
        var s4 = args[1];
        var i5 = args[2];
        var r5, g2, b3;
        if (isNaN(h3)) {
          h3 = 0;
        }
        if (isNaN(s4)) {
          s4 = 0;
        }
        if (h3 > 360) {
          h3 -= 360;
        }
        if (h3 < 0) {
          h3 += 360;
        }
        h3 /= 360;
        if (h3 < 1 / 3) {
          b3 = (1 - s4) / 3;
          r5 = (1 + s4 * cos$4(TWOPI$1 * h3) / cos$4(PITHIRD - TWOPI$1 * h3)) / 3;
          g2 = 1 - (b3 + r5);
        } else if (h3 < 2 / 3) {
          h3 -= 1 / 3;
          r5 = (1 - s4) / 3;
          g2 = (1 + s4 * cos$4(TWOPI$1 * h3) / cos$4(PITHIRD - TWOPI$1 * h3)) / 3;
          b3 = 1 - (r5 + g2);
        } else {
          h3 -= 2 / 3;
          g2 = (1 - s4) / 3;
          b3 = (1 + s4 * cos$4(TWOPI$1 * h3) / cos$4(PITHIRD - TWOPI$1 * h3)) / 3;
          r5 = 1 - (g2 + b3);
        }
        r5 = limit(i5 * r5 * 3);
        g2 = limit(i5 * g2 * 3);
        b3 = limit(i5 * b3 * 3);
        return [r5 * 255, g2 * 255, b3 * 255, args.length > 3 ? args[3] : 1];
      };
      var hsi2rgb_1 = hsi2rgb;
      var unpack$m = utils.unpack;
      var type$h = utils.type;
      var chroma$e = chroma_1;
      var Color$x = Color_1;
      var input$a = input$h;
      var rgb2hsi = rgb2hsi_1;
      Color$x.prototype.hsi = function() {
        return rgb2hsi(this._rgb);
      };
      chroma$e.hsi = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        return new (Function.prototype.bind.apply(Color$x, [null].concat(args, ["hsi"])))();
      };
      input$a.format.hsi = hsi2rgb_1;
      input$a.autodetect.push({
        p: 2,
        test: function() {
          var args = [], len5 = arguments.length;
          while (len5--)
            args[len5] = arguments[len5];
          args = unpack$m(args, "hsi");
          if (type$h(args) === "array" && args.length === 3) {
            return "hsi";
          }
        }
      });
      var unpack$l = utils.unpack;
      var type$g = utils.type;
      var chroma$d = chroma_1;
      var Color$w = Color_1;
      var input$9 = input$h;
      var rgb2hsl$1 = rgb2hsl_1;
      Color$w.prototype.hsl = function() {
        return rgb2hsl$1(this._rgb);
      };
      chroma$d.hsl = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        return new (Function.prototype.bind.apply(Color$w, [null].concat(args, ["hsl"])))();
      };
      input$9.format.hsl = hsl2rgb_1;
      input$9.autodetect.push({
        p: 2,
        test: function() {
          var args = [], len5 = arguments.length;
          while (len5--)
            args[len5] = arguments[len5];
          args = unpack$l(args, "hsl");
          if (type$g(args) === "array" && args.length === 3) {
            return "hsl";
          }
        }
      });
      var unpack$k = utils.unpack;
      var min$1 = Math.min;
      var max$1 = Math.max;
      var rgb2hsl = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        args = unpack$k(args, "rgb");
        var r5 = args[0];
        var g2 = args[1];
        var b3 = args[2];
        var min_ = min$1(r5, g2, b3);
        var max_ = max$1(r5, g2, b3);
        var delta = max_ - min_;
        var h3, s4, v2;
        v2 = max_ / 255;
        if (max_ === 0) {
          h3 = Number.NaN;
          s4 = 0;
        } else {
          s4 = delta / max_;
          if (r5 === max_) {
            h3 = (g2 - b3) / delta;
          }
          if (g2 === max_) {
            h3 = 2 + (b3 - r5) / delta;
          }
          if (b3 === max_) {
            h3 = 4 + (r5 - g2) / delta;
          }
          h3 *= 60;
          if (h3 < 0) {
            h3 += 360;
          }
        }
        return [h3, s4, v2];
      };
      var rgb2hsv$1 = rgb2hsl;
      var unpack$j = utils.unpack;
      var floor$2 = Math.floor;
      var hsv2rgb = function() {
        var assign, assign$1, assign$2, assign$3, assign$4, assign$5;
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        args = unpack$j(args, "hsv");
        var h3 = args[0];
        var s4 = args[1];
        var v2 = args[2];
        var r5, g2, b3;
        v2 *= 255;
        if (s4 === 0) {
          r5 = g2 = b3 = v2;
        } else {
          if (h3 === 360) {
            h3 = 0;
          }
          if (h3 > 360) {
            h3 -= 360;
          }
          if (h3 < 0) {
            h3 += 360;
          }
          h3 /= 60;
          var i5 = floor$2(h3);
          var f3 = h3 - i5;
          var p3 = v2 * (1 - s4);
          var q = v2 * (1 - s4 * f3);
          var t4 = v2 * (1 - s4 * (1 - f3));
          switch (i5) {
            case 0:
              assign = [v2, t4, p3], r5 = assign[0], g2 = assign[1], b3 = assign[2];
              break;
            case 1:
              assign$1 = [q, v2, p3], r5 = assign$1[0], g2 = assign$1[1], b3 = assign$1[2];
              break;
            case 2:
              assign$2 = [p3, v2, t4], r5 = assign$2[0], g2 = assign$2[1], b3 = assign$2[2];
              break;
            case 3:
              assign$3 = [p3, q, v2], r5 = assign$3[0], g2 = assign$3[1], b3 = assign$3[2];
              break;
            case 4:
              assign$4 = [t4, p3, v2], r5 = assign$4[0], g2 = assign$4[1], b3 = assign$4[2];
              break;
            case 5:
              assign$5 = [v2, p3, q], r5 = assign$5[0], g2 = assign$5[1], b3 = assign$5[2];
              break;
          }
        }
        return [r5, g2, b3, args.length > 3 ? args[3] : 1];
      };
      var hsv2rgb_1 = hsv2rgb;
      var unpack$i = utils.unpack;
      var type$f = utils.type;
      var chroma$c = chroma_1;
      var Color$v = Color_1;
      var input$8 = input$h;
      var rgb2hsv = rgb2hsv$1;
      Color$v.prototype.hsv = function() {
        return rgb2hsv(this._rgb);
      };
      chroma$c.hsv = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        return new (Function.prototype.bind.apply(Color$v, [null].concat(args, ["hsv"])))();
      };
      input$8.format.hsv = hsv2rgb_1;
      input$8.autodetect.push({
        p: 2,
        test: function() {
          var args = [], len5 = arguments.length;
          while (len5--)
            args[len5] = arguments[len5];
          args = unpack$i(args, "hsv");
          if (type$f(args) === "array" && args.length === 3) {
            return "hsv";
          }
        }
      });
      var labConstants = {
        Kn: 18,
        Xn: 0.95047,
        Yn: 1,
        Zn: 1.08883,
        t0: 0.137931034,
        t1: 0.206896552,
        t2: 0.12841855,
        t3: 8856452e-9
      };
      var LAB_CONSTANTS$3 = labConstants;
      var unpack$h = utils.unpack;
      var pow$a = Math.pow;
      var rgb2lab$2 = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        var ref = unpack$h(args, "rgb");
        var r5 = ref[0];
        var g2 = ref[1];
        var b3 = ref[2];
        var ref$1 = rgb2xyz(r5, g2, b3);
        var x2 = ref$1[0];
        var y3 = ref$1[1];
        var z = ref$1[2];
        var l3 = 116 * y3 - 16;
        return [l3 < 0 ? 0 : l3, 500 * (x2 - y3), 200 * (y3 - z)];
      };
      var rgb_xyz = function(r5) {
        if ((r5 /= 255) <= 0.04045) {
          return r5 / 12.92;
        }
        return pow$a((r5 + 0.055) / 1.055, 2.4);
      };
      var xyz_lab = function(t4) {
        if (t4 > LAB_CONSTANTS$3.t3) {
          return pow$a(t4, 1 / 3);
        }
        return t4 / LAB_CONSTANTS$3.t2 + LAB_CONSTANTS$3.t0;
      };
      var rgb2xyz = function(r5, g2, b3) {
        r5 = rgb_xyz(r5);
        g2 = rgb_xyz(g2);
        b3 = rgb_xyz(b3);
        var x2 = xyz_lab((0.4124564 * r5 + 0.3575761 * g2 + 0.1804375 * b3) / LAB_CONSTANTS$3.Xn);
        var y3 = xyz_lab((0.2126729 * r5 + 0.7151522 * g2 + 0.072175 * b3) / LAB_CONSTANTS$3.Yn);
        var z = xyz_lab((0.0193339 * r5 + 0.119192 * g2 + 0.9503041 * b3) / LAB_CONSTANTS$3.Zn);
        return [x2, y3, z];
      };
      var rgb2lab_1 = rgb2lab$2;
      var LAB_CONSTANTS$2 = labConstants;
      var unpack$g = utils.unpack;
      var pow$9 = Math.pow;
      var lab2rgb$1 = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        args = unpack$g(args, "lab");
        var l3 = args[0];
        var a3 = args[1];
        var b3 = args[2];
        var x2, y3, z, r5, g2, b_;
        y3 = (l3 + 16) / 116;
        x2 = isNaN(a3) ? y3 : y3 + a3 / 500;
        z = isNaN(b3) ? y3 : y3 - b3 / 200;
        y3 = LAB_CONSTANTS$2.Yn * lab_xyz(y3);
        x2 = LAB_CONSTANTS$2.Xn * lab_xyz(x2);
        z = LAB_CONSTANTS$2.Zn * lab_xyz(z);
        r5 = xyz_rgb(3.2404542 * x2 - 1.5371385 * y3 - 0.4985314 * z);
        g2 = xyz_rgb(-0.969266 * x2 + 1.8760108 * y3 + 0.041556 * z);
        b_ = xyz_rgb(0.0556434 * x2 - 0.2040259 * y3 + 1.0572252 * z);
        return [r5, g2, b_, args.length > 3 ? args[3] : 1];
      };
      var xyz_rgb = function(r5) {
        return 255 * (r5 <= 304e-5 ? 12.92 * r5 : 1.055 * pow$9(r5, 1 / 2.4) - 0.055);
      };
      var lab_xyz = function(t4) {
        return t4 > LAB_CONSTANTS$2.t1 ? t4 * t4 * t4 : LAB_CONSTANTS$2.t2 * (t4 - LAB_CONSTANTS$2.t0);
      };
      var lab2rgb_1 = lab2rgb$1;
      var unpack$f = utils.unpack;
      var type$e = utils.type;
      var chroma$b = chroma_1;
      var Color$u = Color_1;
      var input$7 = input$h;
      var rgb2lab$1 = rgb2lab_1;
      Color$u.prototype.lab = function() {
        return rgb2lab$1(this._rgb);
      };
      chroma$b.lab = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        return new (Function.prototype.bind.apply(Color$u, [null].concat(args, ["lab"])))();
      };
      input$7.format.lab = lab2rgb_1;
      input$7.autodetect.push({
        p: 2,
        test: function() {
          var args = [], len5 = arguments.length;
          while (len5--)
            args[len5] = arguments[len5];
          args = unpack$f(args, "lab");
          if (type$e(args) === "array" && args.length === 3) {
            return "lab";
          }
        }
      });
      var unpack$e = utils.unpack;
      var RAD2DEG = utils.RAD2DEG;
      var sqrt$3 = Math.sqrt;
      var atan2$2 = Math.atan2;
      var round$2 = Math.round;
      var lab2lch$2 = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        var ref = unpack$e(args, "lab");
        var l3 = ref[0];
        var a3 = ref[1];
        var b3 = ref[2];
        var c4 = sqrt$3(a3 * a3 + b3 * b3);
        var h3 = (atan2$2(b3, a3) * RAD2DEG + 360) % 360;
        if (round$2(c4 * 1e4) === 0) {
          h3 = Number.NaN;
        }
        return [l3, c4, h3];
      };
      var lab2lch_1 = lab2lch$2;
      var unpack$d = utils.unpack;
      var rgb2lab = rgb2lab_1;
      var lab2lch$1 = lab2lch_1;
      var rgb2lch$1 = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        var ref = unpack$d(args, "rgb");
        var r5 = ref[0];
        var g2 = ref[1];
        var b3 = ref[2];
        var ref$1 = rgb2lab(r5, g2, b3);
        var l3 = ref$1[0];
        var a3 = ref$1[1];
        var b_ = ref$1[2];
        return lab2lch$1(l3, a3, b_);
      };
      var rgb2lch_1 = rgb2lch$1;
      var unpack$c = utils.unpack;
      var DEG2RAD = utils.DEG2RAD;
      var sin$3 = Math.sin;
      var cos$3 = Math.cos;
      var lch2lab$2 = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        var ref = unpack$c(args, "lch");
        var l3 = ref[0];
        var c4 = ref[1];
        var h3 = ref[2];
        if (isNaN(h3)) {
          h3 = 0;
        }
        h3 = h3 * DEG2RAD;
        return [l3, cos$3(h3) * c4, sin$3(h3) * c4];
      };
      var lch2lab_1 = lch2lab$2;
      var unpack$b = utils.unpack;
      var lch2lab$1 = lch2lab_1;
      var lab2rgb = lab2rgb_1;
      var lch2rgb$1 = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        args = unpack$b(args, "lch");
        var l3 = args[0];
        var c4 = args[1];
        var h3 = args[2];
        var ref = lch2lab$1(l3, c4, h3);
        var L2 = ref[0];
        var a3 = ref[1];
        var b_ = ref[2];
        var ref$1 = lab2rgb(L2, a3, b_);
        var r5 = ref$1[0];
        var g2 = ref$1[1];
        var b3 = ref$1[2];
        return [r5, g2, b3, args.length > 3 ? args[3] : 1];
      };
      var lch2rgb_1 = lch2rgb$1;
      var unpack$a = utils.unpack;
      var lch2rgb = lch2rgb_1;
      var hcl2rgb = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        var hcl = unpack$a(args, "hcl").reverse();
        return lch2rgb.apply(void 0, hcl);
      };
      var hcl2rgb_1 = hcl2rgb;
      var unpack$9 = utils.unpack;
      var type$d = utils.type;
      var chroma$a = chroma_1;
      var Color$t = Color_1;
      var input$6 = input$h;
      var rgb2lch = rgb2lch_1;
      Color$t.prototype.lch = function() {
        return rgb2lch(this._rgb);
      };
      Color$t.prototype.hcl = function() {
        return rgb2lch(this._rgb).reverse();
      };
      chroma$a.lch = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        return new (Function.prototype.bind.apply(Color$t, [null].concat(args, ["lch"])))();
      };
      chroma$a.hcl = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        return new (Function.prototype.bind.apply(Color$t, [null].concat(args, ["hcl"])))();
      };
      input$6.format.lch = lch2rgb_1;
      input$6.format.hcl = hcl2rgb_1;
      ["lch", "hcl"].forEach(function(m2) {
        return input$6.autodetect.push({
          p: 2,
          test: function() {
            var args = [], len5 = arguments.length;
            while (len5--)
              args[len5] = arguments[len5];
            args = unpack$9(args, m2);
            if (type$d(args) === "array" && args.length === 3) {
              return m2;
            }
          }
        });
      });
      var w3cx11$1 = {
        aliceblue: "#f0f8ff",
        antiquewhite: "#faebd7",
        aqua: "#00ffff",
        aquamarine: "#7fffd4",
        azure: "#f0ffff",
        beige: "#f5f5dc",
        bisque: "#ffe4c4",
        black: "#000000",
        blanchedalmond: "#ffebcd",
        blue: "#0000ff",
        blueviolet: "#8a2be2",
        brown: "#a52a2a",
        burlywood: "#deb887",
        cadetblue: "#5f9ea0",
        chartreuse: "#7fff00",
        chocolate: "#d2691e",
        coral: "#ff7f50",
        cornflower: "#6495ed",
        cornflowerblue: "#6495ed",
        cornsilk: "#fff8dc",
        crimson: "#dc143c",
        cyan: "#00ffff",
        darkblue: "#00008b",
        darkcyan: "#008b8b",
        darkgoldenrod: "#b8860b",
        darkgray: "#a9a9a9",
        darkgreen: "#006400",
        darkgrey: "#a9a9a9",
        darkkhaki: "#bdb76b",
        darkmagenta: "#8b008b",
        darkolivegreen: "#556b2f",
        darkorange: "#ff8c00",
        darkorchid: "#9932cc",
        darkred: "#8b0000",
        darksalmon: "#e9967a",
        darkseagreen: "#8fbc8f",
        darkslateblue: "#483d8b",
        darkslategray: "#2f4f4f",
        darkslategrey: "#2f4f4f",
        darkturquoise: "#00ced1",
        darkviolet: "#9400d3",
        deeppink: "#ff1493",
        deepskyblue: "#00bfff",
        dimgray: "#696969",
        dimgrey: "#696969",
        dodgerblue: "#1e90ff",
        firebrick: "#b22222",
        floralwhite: "#fffaf0",
        forestgreen: "#228b22",
        fuchsia: "#ff00ff",
        gainsboro: "#dcdcdc",
        ghostwhite: "#f8f8ff",
        gold: "#ffd700",
        goldenrod: "#daa520",
        gray: "#808080",
        green: "#008000",
        greenyellow: "#adff2f",
        grey: "#808080",
        honeydew: "#f0fff0",
        hotpink: "#ff69b4",
        indianred: "#cd5c5c",
        indigo: "#4b0082",
        ivory: "#fffff0",
        khaki: "#f0e68c",
        laserlemon: "#ffff54",
        lavender: "#e6e6fa",
        lavenderblush: "#fff0f5",
        lawngreen: "#7cfc00",
        lemonchiffon: "#fffacd",
        lightblue: "#add8e6",
        lightcoral: "#f08080",
        lightcyan: "#e0ffff",
        lightgoldenrod: "#fafad2",
        lightgoldenrodyellow: "#fafad2",
        lightgray: "#d3d3d3",
        lightgreen: "#90ee90",
        lightgrey: "#d3d3d3",
        lightpink: "#ffb6c1",
        lightsalmon: "#ffa07a",
        lightseagreen: "#20b2aa",
        lightskyblue: "#87cefa",
        lightslategray: "#778899",
        lightslategrey: "#778899",
        lightsteelblue: "#b0c4de",
        lightyellow: "#ffffe0",
        lime: "#00ff00",
        limegreen: "#32cd32",
        linen: "#faf0e6",
        magenta: "#ff00ff",
        maroon: "#800000",
        maroon2: "#7f0000",
        maroon3: "#b03060",
        mediumaquamarine: "#66cdaa",
        mediumblue: "#0000cd",
        mediumorchid: "#ba55d3",
        mediumpurple: "#9370db",
        mediumseagreen: "#3cb371",
        mediumslateblue: "#7b68ee",
        mediumspringgreen: "#00fa9a",
        mediumturquoise: "#48d1cc",
        mediumvioletred: "#c71585",
        midnightblue: "#191970",
        mintcream: "#f5fffa",
        mistyrose: "#ffe4e1",
        moccasin: "#ffe4b5",
        navajowhite: "#ffdead",
        navy: "#000080",
        oldlace: "#fdf5e6",
        olive: "#808000",
        olivedrab: "#6b8e23",
        orange: "#ffa500",
        orangered: "#ff4500",
        orchid: "#da70d6",
        palegoldenrod: "#eee8aa",
        palegreen: "#98fb98",
        paleturquoise: "#afeeee",
        palevioletred: "#db7093",
        papayawhip: "#ffefd5",
        peachpuff: "#ffdab9",
        peru: "#cd853f",
        pink: "#ffc0cb",
        plum: "#dda0dd",
        powderblue: "#b0e0e6",
        purple: "#800080",
        purple2: "#7f007f",
        purple3: "#a020f0",
        rebeccapurple: "#663399",
        red: "#ff0000",
        rosybrown: "#bc8f8f",
        royalblue: "#4169e1",
        saddlebrown: "#8b4513",
        salmon: "#fa8072",
        sandybrown: "#f4a460",
        seagreen: "#2e8b57",
        seashell: "#fff5ee",
        sienna: "#a0522d",
        silver: "#c0c0c0",
        skyblue: "#87ceeb",
        slateblue: "#6a5acd",
        slategray: "#708090",
        slategrey: "#708090",
        snow: "#fffafa",
        springgreen: "#00ff7f",
        steelblue: "#4682b4",
        tan: "#d2b48c",
        teal: "#008080",
        thistle: "#d8bfd8",
        tomato: "#ff6347",
        turquoise: "#40e0d0",
        violet: "#ee82ee",
        wheat: "#f5deb3",
        white: "#ffffff",
        whitesmoke: "#f5f5f5",
        yellow: "#ffff00",
        yellowgreen: "#9acd32"
      };
      var w3cx11_1 = w3cx11$1;
      var Color$s = Color_1;
      var input$5 = input$h;
      var type$c = utils.type;
      var w3cx11 = w3cx11_1;
      var hex2rgb = hex2rgb_1;
      var rgb2hex = rgb2hex_1;
      Color$s.prototype.name = function() {
        var hex = rgb2hex(this._rgb, "rgb");
        for (var i5 = 0, list2 = Object.keys(w3cx11); i5 < list2.length; i5 += 1) {
          var n5 = list2[i5];
          if (w3cx11[n5] === hex) {
            return n5.toLowerCase();
          }
        }
        return hex;
      };
      input$5.format.named = function(name2) {
        name2 = name2.toLowerCase();
        if (w3cx11[name2]) {
          return hex2rgb(w3cx11[name2]);
        }
        throw new Error("unknown color name: " + name2);
      };
      input$5.autodetect.push({
        p: 5,
        test: function(h3) {
          var rest = [], len5 = arguments.length - 1;
          while (len5-- > 0)
            rest[len5] = arguments[len5 + 1];
          if (!rest.length && type$c(h3) === "string" && w3cx11[h3.toLowerCase()]) {
            return "named";
          }
        }
      });
      var unpack$8 = utils.unpack;
      var rgb2num$1 = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        var ref = unpack$8(args, "rgb");
        var r5 = ref[0];
        var g2 = ref[1];
        var b3 = ref[2];
        return (r5 << 16) + (g2 << 8) + b3;
      };
      var rgb2num_1 = rgb2num$1;
      var type$b = utils.type;
      var num2rgb = function(num2) {
        if (type$b(num2) == "number" && num2 >= 0 && num2 <= 16777215) {
          var r5 = num2 >> 16;
          var g2 = num2 >> 8 & 255;
          var b3 = num2 & 255;
          return [r5, g2, b3, 1];
        }
        throw new Error("unknown num color: " + num2);
      };
      var num2rgb_1 = num2rgb;
      var chroma$9 = chroma_1;
      var Color$r = Color_1;
      var input$4 = input$h;
      var type$a = utils.type;
      var rgb2num = rgb2num_1;
      Color$r.prototype.num = function() {
        return rgb2num(this._rgb);
      };
      chroma$9.num = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        return new (Function.prototype.bind.apply(Color$r, [null].concat(args, ["num"])))();
      };
      input$4.format.num = num2rgb_1;
      input$4.autodetect.push({
        p: 5,
        test: function() {
          var args = [], len5 = arguments.length;
          while (len5--)
            args[len5] = arguments[len5];
          if (args.length === 1 && type$a(args[0]) === "number" && args[0] >= 0 && args[0] <= 16777215) {
            return "num";
          }
        }
      });
      var chroma$8 = chroma_1;
      var Color$q = Color_1;
      var input$3 = input$h;
      var unpack$7 = utils.unpack;
      var type$9 = utils.type;
      var round$1 = Math.round;
      Color$q.prototype.rgb = function(rnd2) {
        if (rnd2 === void 0)
          rnd2 = true;
        if (rnd2 === false) {
          return this._rgb.slice(0, 3);
        }
        return this._rgb.slice(0, 3).map(round$1);
      };
      Color$q.prototype.rgba = function(rnd2) {
        if (rnd2 === void 0)
          rnd2 = true;
        return this._rgb.slice(0, 4).map(function(v2, i5) {
          return i5 < 3 ? rnd2 === false ? v2 : round$1(v2) : v2;
        });
      };
      chroma$8.rgb = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        return new (Function.prototype.bind.apply(Color$q, [null].concat(args, ["rgb"])))();
      };
      input$3.format.rgb = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        var rgba = unpack$7(args, "rgba");
        if (rgba[3] === void 0) {
          rgba[3] = 1;
        }
        return rgba;
      };
      input$3.autodetect.push({
        p: 3,
        test: function() {
          var args = [], len5 = arguments.length;
          while (len5--)
            args[len5] = arguments[len5];
          args = unpack$7(args, "rgba");
          if (type$9(args) === "array" && (args.length === 3 || args.length === 4 && type$9(args[3]) == "number" && args[3] >= 0 && args[3] <= 1)) {
            return "rgb";
          }
        }
      });
      var log$1 = Math.log;
      var temperature2rgb$1 = function(kelvin) {
        var temp = kelvin / 100;
        var r5, g2, b3;
        if (temp < 66) {
          r5 = 255;
          g2 = temp < 6 ? 0 : -155.25485562709179 - 0.44596950469579133 * (g2 = temp - 2) + 104.49216199393888 * log$1(g2);
          b3 = temp < 20 ? 0 : -254.76935184120902 + 0.8274096064007395 * (b3 = temp - 10) + 115.67994401066147 * log$1(b3);
        } else {
          r5 = 351.97690566805693 + 0.114206453784165 * (r5 = temp - 55) - 40.25366309332127 * log$1(r5);
          g2 = 325.4494125711974 + 0.07943456536662342 * (g2 = temp - 50) - 28.0852963507957 * log$1(g2);
          b3 = 255;
        }
        return [r5, g2, b3, 1];
      };
      var temperature2rgb_1 = temperature2rgb$1;
      var temperature2rgb = temperature2rgb_1;
      var unpack$6 = utils.unpack;
      var round4 = Math.round;
      var rgb2temperature$1 = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        var rgb2 = unpack$6(args, "rgb");
        var r5 = rgb2[0], b3 = rgb2[2];
        var minTemp = 1e3;
        var maxTemp = 4e4;
        var eps = 0.4;
        var temp;
        while (maxTemp - minTemp > eps) {
          temp = (maxTemp + minTemp) * 0.5;
          var rgb$1 = temperature2rgb(temp);
          if (rgb$1[2] / rgb$1[0] >= b3 / r5) {
            maxTemp = temp;
          } else {
            minTemp = temp;
          }
        }
        return round4(temp);
      };
      var rgb2temperature_1 = rgb2temperature$1;
      var chroma$7 = chroma_1;
      var Color$p = Color_1;
      var input$2 = input$h;
      var rgb2temperature = rgb2temperature_1;
      Color$p.prototype.temp = Color$p.prototype.kelvin = Color$p.prototype.temperature = function() {
        return rgb2temperature(this._rgb);
      };
      chroma$7.temp = chroma$7.kelvin = chroma$7.temperature = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        return new (Function.prototype.bind.apply(Color$p, [null].concat(args, ["temp"])))();
      };
      input$2.format.temp = input$2.format.kelvin = input$2.format.temperature = temperature2rgb_1;
      var unpack$5 = utils.unpack;
      var cbrt = Math.cbrt;
      var pow$8 = Math.pow;
      var sign$1 = Math.sign;
      var rgb2oklab$2 = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        var ref = unpack$5(args, "rgb");
        var r5 = ref[0];
        var g2 = ref[1];
        var b3 = ref[2];
        var ref$1 = [rgb2lrgb(r5 / 255), rgb2lrgb(g2 / 255), rgb2lrgb(b3 / 255)];
        var lr = ref$1[0];
        var lg = ref$1[1];
        var lb = ref$1[2];
        var l3 = cbrt(0.4122214708 * lr + 0.5363325363 * lg + 0.0514459929 * lb);
        var m2 = cbrt(0.2119034982 * lr + 0.6806995451 * lg + 0.1073969566 * lb);
        var s4 = cbrt(0.0883024619 * lr + 0.2817188376 * lg + 0.6299787005 * lb);
        return [
          0.2104542553 * l3 + 0.793617785 * m2 - 0.0040720468 * s4,
          1.9779984951 * l3 - 2.428592205 * m2 + 0.4505937099 * s4,
          0.0259040371 * l3 + 0.7827717662 * m2 - 0.808675766 * s4
        ];
      };
      var rgb2oklab_1 = rgb2oklab$2;
      function rgb2lrgb(c4) {
        var abs2 = Math.abs(c4);
        if (abs2 < 0.04045) {
          return c4 / 12.92;
        }
        return (sign$1(c4) || 1) * pow$8((abs2 + 0.055) / 1.055, 2.4);
      }
      var unpack$4 = utils.unpack;
      var pow$7 = Math.pow;
      var sign = Math.sign;
      var oklab2rgb$1 = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        args = unpack$4(args, "lab");
        var L2 = args[0];
        var a3 = args[1];
        var b3 = args[2];
        var l3 = pow$7(L2 + 0.3963377774 * a3 + 0.2158037573 * b3, 3);
        var m2 = pow$7(L2 - 0.1055613458 * a3 - 0.0638541728 * b3, 3);
        var s4 = pow$7(L2 - 0.0894841775 * a3 - 1.291485548 * b3, 3);
        return [
          255 * lrgb2rgb(4.0767416621 * l3 - 3.3077115913 * m2 + 0.2309699292 * s4),
          255 * lrgb2rgb(-1.2684380046 * l3 + 2.6097574011 * m2 - 0.3413193965 * s4),
          255 * lrgb2rgb(-0.0041960863 * l3 - 0.7034186147 * m2 + 1.707614701 * s4),
          args.length > 3 ? args[3] : 1
        ];
      };
      var oklab2rgb_1 = oklab2rgb$1;
      function lrgb2rgb(c4) {
        var abs2 = Math.abs(c4);
        if (abs2 > 31308e-7) {
          return (sign(c4) || 1) * (1.055 * pow$7(abs2, 1 / 2.4) - 0.055);
        }
        return c4 * 12.92;
      }
      var unpack$3 = utils.unpack;
      var type$8 = utils.type;
      var chroma$6 = chroma_1;
      var Color$o = Color_1;
      var input$1 = input$h;
      var rgb2oklab$1 = rgb2oklab_1;
      Color$o.prototype.oklab = function() {
        return rgb2oklab$1(this._rgb);
      };
      chroma$6.oklab = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        return new (Function.prototype.bind.apply(Color$o, [null].concat(args, ["oklab"])))();
      };
      input$1.format.oklab = oklab2rgb_1;
      input$1.autodetect.push({
        p: 3,
        test: function() {
          var args = [], len5 = arguments.length;
          while (len5--)
            args[len5] = arguments[len5];
          args = unpack$3(args, "oklab");
          if (type$8(args) === "array" && args.length === 3) {
            return "oklab";
          }
        }
      });
      var unpack$2 = utils.unpack;
      var rgb2oklab = rgb2oklab_1;
      var lab2lch = lab2lch_1;
      var rgb2oklch$1 = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        var ref = unpack$2(args, "rgb");
        var r5 = ref[0];
        var g2 = ref[1];
        var b3 = ref[2];
        var ref$1 = rgb2oklab(r5, g2, b3);
        var l3 = ref$1[0];
        var a3 = ref$1[1];
        var b_ = ref$1[2];
        return lab2lch(l3, a3, b_);
      };
      var rgb2oklch_1 = rgb2oklch$1;
      var unpack$1 = utils.unpack;
      var lch2lab = lch2lab_1;
      var oklab2rgb = oklab2rgb_1;
      var oklch2rgb = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        args = unpack$1(args, "lch");
        var l3 = args[0];
        var c4 = args[1];
        var h3 = args[2];
        var ref = lch2lab(l3, c4, h3);
        var L2 = ref[0];
        var a3 = ref[1];
        var b_ = ref[2];
        var ref$1 = oklab2rgb(L2, a3, b_);
        var r5 = ref$1[0];
        var g2 = ref$1[1];
        var b3 = ref$1[2];
        return [r5, g2, b3, args.length > 3 ? args[3] : 1];
      };
      var oklch2rgb_1 = oklch2rgb;
      var unpack = utils.unpack;
      var type$7 = utils.type;
      var chroma$5 = chroma_1;
      var Color$n = Color_1;
      var input = input$h;
      var rgb2oklch = rgb2oklch_1;
      Color$n.prototype.oklch = function() {
        return rgb2oklch(this._rgb);
      };
      chroma$5.oklch = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        return new (Function.prototype.bind.apply(Color$n, [null].concat(args, ["oklch"])))();
      };
      input.format.oklch = oklch2rgb_1;
      input.autodetect.push({
        p: 3,
        test: function() {
          var args = [], len5 = arguments.length;
          while (len5--)
            args[len5] = arguments[len5];
          args = unpack(args, "oklch");
          if (type$7(args) === "array" && args.length === 3) {
            return "oklch";
          }
        }
      });
      var Color$m = Color_1;
      var type$6 = utils.type;
      Color$m.prototype.alpha = function(a3, mutate) {
        if (mutate === void 0)
          mutate = false;
        if (a3 !== void 0 && type$6(a3) === "number") {
          if (mutate) {
            this._rgb[3] = a3;
            return this;
          }
          return new Color$m([this._rgb[0], this._rgb[1], this._rgb[2], a3], "rgb");
        }
        return this._rgb[3];
      };
      var Color$l = Color_1;
      Color$l.prototype.clipped = function() {
        return this._rgb._clipped || false;
      };
      var Color$k = Color_1;
      var LAB_CONSTANTS$1 = labConstants;
      Color$k.prototype.darken = function(amount) {
        if (amount === void 0)
          amount = 1;
        var me = this;
        var lab2 = me.lab();
        lab2[0] -= LAB_CONSTANTS$1.Kn * amount;
        return new Color$k(lab2, "lab").alpha(me.alpha(), true);
      };
      Color$k.prototype.brighten = function(amount) {
        if (amount === void 0)
          amount = 1;
        return this.darken(-amount);
      };
      Color$k.prototype.darker = Color$k.prototype.darken;
      Color$k.prototype.brighter = Color$k.prototype.brighten;
      var Color$j = Color_1;
      Color$j.prototype.get = function(mc) {
        var ref = mc.split(".");
        var mode = ref[0];
        var channel = ref[1];
        var src = this[mode]();
        if (channel) {
          var i5 = mode.indexOf(channel) - (mode.substr(0, 2) === "ok" ? 2 : 0);
          if (i5 > -1) {
            return src[i5];
          }
          throw new Error("unknown channel " + channel + " in mode " + mode);
        } else {
          return src;
        }
      };
      var Color$i = Color_1;
      var type$5 = utils.type;
      var pow$6 = Math.pow;
      var EPS = 1e-7;
      var MAX_ITER = 20;
      Color$i.prototype.luminance = function(lum) {
        if (lum !== void 0 && type$5(lum) === "number") {
          if (lum === 0) {
            return new Color$i([0, 0, 0, this._rgb[3]], "rgb");
          }
          if (lum === 1) {
            return new Color$i([255, 255, 255, this._rgb[3]], "rgb");
          }
          var cur_lum = this.luminance();
          var mode = "rgb";
          var max_iter = MAX_ITER;
          var test = function(low, high) {
            var mid = low.interpolate(high, 0.5, mode);
            var lm = mid.luminance();
            if (Math.abs(lum - lm) < EPS || !max_iter--) {
              return mid;
            }
            return lm > lum ? test(low, mid) : test(mid, high);
          };
          var rgb2 = (cur_lum > lum ? test(new Color$i([0, 0, 0]), this) : test(this, new Color$i([255, 255, 255]))).rgb();
          return new Color$i(rgb2.concat([this._rgb[3]]));
        }
        return rgb2luminance.apply(void 0, this._rgb.slice(0, 3));
      };
      var rgb2luminance = function(r5, g2, b3) {
        r5 = luminance_x(r5);
        g2 = luminance_x(g2);
        b3 = luminance_x(b3);
        return 0.2126 * r5 + 0.7152 * g2 + 0.0722 * b3;
      };
      var luminance_x = function(x2) {
        x2 /= 255;
        return x2 <= 0.03928 ? x2 / 12.92 : pow$6((x2 + 0.055) / 1.055, 2.4);
      };
      var interpolator$1 = {};
      var Color$h = Color_1;
      var type$4 = utils.type;
      var interpolator = interpolator$1;
      var mix$1 = function(col1, col2, f3) {
        if (f3 === void 0)
          f3 = 0.5;
        var rest = [], len5 = arguments.length - 3;
        while (len5-- > 0)
          rest[len5] = arguments[len5 + 3];
        var mode = rest[0] || "lrgb";
        if (!interpolator[mode] && !rest.length) {
          mode = Object.keys(interpolator)[0];
        }
        if (!interpolator[mode]) {
          throw new Error("interpolation mode " + mode + " is not defined");
        }
        if (type$4(col1) !== "object") {
          col1 = new Color$h(col1);
        }
        if (type$4(col2) !== "object") {
          col2 = new Color$h(col2);
        }
        return interpolator[mode](col1, col2, f3).alpha(col1.alpha() + f3 * (col2.alpha() - col1.alpha()));
      };
      var Color$g = Color_1;
      var mix = mix$1;
      Color$g.prototype.mix = Color$g.prototype.interpolate = function(col2, f3) {
        if (f3 === void 0)
          f3 = 0.5;
        var rest = [], len5 = arguments.length - 2;
        while (len5-- > 0)
          rest[len5] = arguments[len5 + 2];
        return mix.apply(void 0, [this, col2, f3].concat(rest));
      };
      var Color$f = Color_1;
      Color$f.prototype.premultiply = function(mutate) {
        if (mutate === void 0)
          mutate = false;
        var rgb2 = this._rgb;
        var a3 = rgb2[3];
        if (mutate) {
          this._rgb = [rgb2[0] * a3, rgb2[1] * a3, rgb2[2] * a3, a3];
          return this;
        } else {
          return new Color$f([rgb2[0] * a3, rgb2[1] * a3, rgb2[2] * a3, a3], "rgb");
        }
      };
      var Color$e = Color_1;
      var LAB_CONSTANTS = labConstants;
      Color$e.prototype.saturate = function(amount) {
        if (amount === void 0)
          amount = 1;
        var me = this;
        var lch2 = me.lch();
        lch2[1] += LAB_CONSTANTS.Kn * amount;
        if (lch2[1] < 0) {
          lch2[1] = 0;
        }
        return new Color$e(lch2, "lch").alpha(me.alpha(), true);
      };
      Color$e.prototype.desaturate = function(amount) {
        if (amount === void 0)
          amount = 1;
        return this.saturate(-amount);
      };
      var Color$d = Color_1;
      var type$3 = utils.type;
      Color$d.prototype.set = function(mc, value, mutate) {
        if (mutate === void 0)
          mutate = false;
        var ref = mc.split(".");
        var mode = ref[0];
        var channel = ref[1];
        var src = this[mode]();
        if (channel) {
          var i5 = mode.indexOf(channel) - (mode.substr(0, 2) === "ok" ? 2 : 0);
          if (i5 > -1) {
            if (type$3(value) == "string") {
              switch (value.charAt(0)) {
                case "+":
                  src[i5] += +value;
                  break;
                case "-":
                  src[i5] += +value;
                  break;
                case "*":
                  src[i5] *= +value.substr(1);
                  break;
                case "/":
                  src[i5] /= +value.substr(1);
                  break;
                default:
                  src[i5] = +value;
              }
            } else if (type$3(value) === "number") {
              src[i5] = value;
            } else {
              throw new Error("unsupported value for Color.set");
            }
            var out2 = new Color$d(src, mode);
            if (mutate) {
              this._rgb = out2._rgb;
              return this;
            }
            return out2;
          }
          throw new Error("unknown channel " + channel + " in mode " + mode);
        } else {
          return src;
        }
      };
      var Color$c = Color_1;
      var rgb = function(col1, col2, f3) {
        var xyz0 = col1._rgb;
        var xyz1 = col2._rgb;
        return new Color$c(
          xyz0[0] + f3 * (xyz1[0] - xyz0[0]),
          xyz0[1] + f3 * (xyz1[1] - xyz0[1]),
          xyz0[2] + f3 * (xyz1[2] - xyz0[2]),
          "rgb"
        );
      };
      interpolator$1.rgb = rgb;
      var Color$b = Color_1;
      var sqrt$2 = Math.sqrt;
      var pow$5 = Math.pow;
      var lrgb = function(col1, col2, f3) {
        var ref = col1._rgb;
        var x1 = ref[0];
        var y1 = ref[1];
        var z1 = ref[2];
        var ref$1 = col2._rgb;
        var x2 = ref$1[0];
        var y22 = ref$1[1];
        var z2 = ref$1[2];
        return new Color$b(
          sqrt$2(pow$5(x1, 2) * (1 - f3) + pow$5(x2, 2) * f3),
          sqrt$2(pow$5(y1, 2) * (1 - f3) + pow$5(y22, 2) * f3),
          sqrt$2(pow$5(z1, 2) * (1 - f3) + pow$5(z2, 2) * f3),
          "rgb"
        );
      };
      interpolator$1.lrgb = lrgb;
      var Color$a = Color_1;
      var lab = function(col1, col2, f3) {
        var xyz0 = col1.lab();
        var xyz1 = col2.lab();
        return new Color$a(
          xyz0[0] + f3 * (xyz1[0] - xyz0[0]),
          xyz0[1] + f3 * (xyz1[1] - xyz0[1]),
          xyz0[2] + f3 * (xyz1[2] - xyz0[2]),
          "lab"
        );
      };
      interpolator$1.lab = lab;
      var Color$9 = Color_1;
      var _hsx = function(col1, col2, f3, m2) {
        var assign, assign$1;
        var xyz0, xyz1;
        if (m2 === "hsl") {
          xyz0 = col1.hsl();
          xyz1 = col2.hsl();
        } else if (m2 === "hsv") {
          xyz0 = col1.hsv();
          xyz1 = col2.hsv();
        } else if (m2 === "hcg") {
          xyz0 = col1.hcg();
          xyz1 = col2.hcg();
        } else if (m2 === "hsi") {
          xyz0 = col1.hsi();
          xyz1 = col2.hsi();
        } else if (m2 === "lch" || m2 === "hcl") {
          m2 = "hcl";
          xyz0 = col1.hcl();
          xyz1 = col2.hcl();
        } else if (m2 === "oklch") {
          xyz0 = col1.oklch().reverse();
          xyz1 = col2.oklch().reverse();
        }
        var hue0, hue1, sat0, sat1, lbv0, lbv1;
        if (m2.substr(0, 1) === "h" || m2 === "oklch") {
          assign = xyz0, hue0 = assign[0], sat0 = assign[1], lbv0 = assign[2];
          assign$1 = xyz1, hue1 = assign$1[0], sat1 = assign$1[1], lbv1 = assign$1[2];
        }
        var sat, hue, lbv, dh;
        if (!isNaN(hue0) && !isNaN(hue1)) {
          if (hue1 > hue0 && hue1 - hue0 > 180) {
            dh = hue1 - (hue0 + 360);
          } else if (hue1 < hue0 && hue0 - hue1 > 180) {
            dh = hue1 + 360 - hue0;
          } else {
            dh = hue1 - hue0;
          }
          hue = hue0 + f3 * dh;
        } else if (!isNaN(hue0)) {
          hue = hue0;
          if ((lbv1 == 1 || lbv1 == 0) && m2 != "hsv") {
            sat = sat0;
          }
        } else if (!isNaN(hue1)) {
          hue = hue1;
          if ((lbv0 == 1 || lbv0 == 0) && m2 != "hsv") {
            sat = sat1;
          }
        } else {
          hue = Number.NaN;
        }
        if (sat === void 0) {
          sat = sat0 + f3 * (sat1 - sat0);
        }
        lbv = lbv0 + f3 * (lbv1 - lbv0);
        return m2 === "oklch" ? new Color$9([lbv, sat, hue], m2) : new Color$9([hue, sat, lbv], m2);
      };
      var interpolate_hsx$5 = _hsx;
      var lch = function(col1, col2, f3) {
        return interpolate_hsx$5(col1, col2, f3, "lch");
      };
      interpolator$1.lch = lch;
      interpolator$1.hcl = lch;
      var Color$8 = Color_1;
      var num = function(col1, col2, f3) {
        var c1 = col1.num();
        var c22 = col2.num();
        return new Color$8(c1 + f3 * (c22 - c1), "num");
      };
      interpolator$1.num = num;
      var interpolate_hsx$4 = _hsx;
      var hcg = function(col1, col2, f3) {
        return interpolate_hsx$4(col1, col2, f3, "hcg");
      };
      interpolator$1.hcg = hcg;
      var interpolate_hsx$3 = _hsx;
      var hsi = function(col1, col2, f3) {
        return interpolate_hsx$3(col1, col2, f3, "hsi");
      };
      interpolator$1.hsi = hsi;
      var interpolate_hsx$2 = _hsx;
      var hsl = function(col1, col2, f3) {
        return interpolate_hsx$2(col1, col2, f3, "hsl");
      };
      interpolator$1.hsl = hsl;
      var interpolate_hsx$1 = _hsx;
      var hsv = function(col1, col2, f3) {
        return interpolate_hsx$1(col1, col2, f3, "hsv");
      };
      interpolator$1.hsv = hsv;
      var Color$7 = Color_1;
      var oklab = function(col1, col2, f3) {
        var xyz0 = col1.oklab();
        var xyz1 = col2.oklab();
        return new Color$7(
          xyz0[0] + f3 * (xyz1[0] - xyz0[0]),
          xyz0[1] + f3 * (xyz1[1] - xyz0[1]),
          xyz0[2] + f3 * (xyz1[2] - xyz0[2]),
          "oklab"
        );
      };
      interpolator$1.oklab = oklab;
      var interpolate_hsx = _hsx;
      var oklch = function(col1, col2, f3) {
        return interpolate_hsx(col1, col2, f3, "oklch");
      };
      interpolator$1.oklch = oklch;
      var Color$6 = Color_1;
      var clip_rgb$1 = utils.clip_rgb;
      var pow$4 = Math.pow;
      var sqrt$1 = Math.sqrt;
      var PI$1 = Math.PI;
      var cos$2 = Math.cos;
      var sin$2 = Math.sin;
      var atan2$1 = Math.atan2;
      var average = function(colors2, mode, weights) {
        if (mode === void 0)
          mode = "lrgb";
        if (weights === void 0)
          weights = null;
        var l3 = colors2.length;
        if (!weights) {
          weights = Array.from(new Array(l3)).map(function() {
            return 1;
          });
        }
        var k2 = l3 / weights.reduce(function(a3, b3) {
          return a3 + b3;
        });
        weights.forEach(function(w2, i6) {
          weights[i6] *= k2;
        });
        colors2 = colors2.map(function(c4) {
          return new Color$6(c4);
        });
        if (mode === "lrgb") {
          return _average_lrgb(colors2, weights);
        }
        var first = colors2.shift();
        var xyz = first.get(mode);
        var cnt = [];
        var dx = 0;
        var dy = 0;
        for (var i5 = 0; i5 < xyz.length; i5++) {
          xyz[i5] = (xyz[i5] || 0) * weights[0];
          cnt.push(isNaN(xyz[i5]) ? 0 : weights[0]);
          if (mode.charAt(i5) === "h" && !isNaN(xyz[i5])) {
            var A2 = xyz[i5] / 180 * PI$1;
            dx += cos$2(A2) * weights[0];
            dy += sin$2(A2) * weights[0];
          }
        }
        var alpha = first.alpha() * weights[0];
        colors2.forEach(function(c4, ci) {
          var xyz2 = c4.get(mode);
          alpha += c4.alpha() * weights[ci + 1];
          for (var i6 = 0; i6 < xyz.length; i6++) {
            if (!isNaN(xyz2[i6])) {
              cnt[i6] += weights[ci + 1];
              if (mode.charAt(i6) === "h") {
                var A3 = xyz2[i6] / 180 * PI$1;
                dx += cos$2(A3) * weights[ci + 1];
                dy += sin$2(A3) * weights[ci + 1];
              } else {
                xyz[i6] += xyz2[i6] * weights[ci + 1];
              }
            }
          }
        });
        for (var i$12 = 0; i$12 < xyz.length; i$12++) {
          if (mode.charAt(i$12) === "h") {
            var A$1 = atan2$1(dy / cnt[i$12], dx / cnt[i$12]) / PI$1 * 180;
            while (A$1 < 0) {
              A$1 += 360;
            }
            while (A$1 >= 360) {
              A$1 -= 360;
            }
            xyz[i$12] = A$1;
          } else {
            xyz[i$12] = xyz[i$12] / cnt[i$12];
          }
        }
        alpha /= l3;
        return new Color$6(xyz, mode).alpha(alpha > 0.99999 ? 1 : alpha, true);
      };
      var _average_lrgb = function(colors2, weights) {
        var l3 = colors2.length;
        var xyz = [0, 0, 0, 0];
        for (var i5 = 0; i5 < colors2.length; i5++) {
          var col = colors2[i5];
          var f3 = weights[i5] / l3;
          var rgb2 = col._rgb;
          xyz[0] += pow$4(rgb2[0], 2) * f3;
          xyz[1] += pow$4(rgb2[1], 2) * f3;
          xyz[2] += pow$4(rgb2[2], 2) * f3;
          xyz[3] += rgb2[3] * f3;
        }
        xyz[0] = sqrt$1(xyz[0]);
        xyz[1] = sqrt$1(xyz[1]);
        xyz[2] = sqrt$1(xyz[2]);
        if (xyz[3] > 0.9999999) {
          xyz[3] = 1;
        }
        return new Color$6(clip_rgb$1(xyz));
      };
      var chroma$4 = chroma_1;
      var type$2 = utils.type;
      var pow$3 = Math.pow;
      var scale$2 = function(colors2) {
        var _mode = "rgb";
        var _nacol = chroma$4("#ccc");
        var _spread = 0;
        var _domain = [0, 1];
        var _pos = [];
        var _padding = [0, 0];
        var _classes = false;
        var _colors = [];
        var _out = false;
        var _min = 0;
        var _max = 1;
        var _correctLightness = false;
        var _colorCache = {};
        var _useCache = true;
        var _gamma = 1;
        var setColors = function(colors3) {
          colors3 = colors3 || ["#fff", "#000"];
          if (colors3 && type$2(colors3) === "string" && chroma$4.brewer && chroma$4.brewer[colors3.toLowerCase()]) {
            colors3 = chroma$4.brewer[colors3.toLowerCase()];
          }
          if (type$2(colors3) === "array") {
            if (colors3.length === 1) {
              colors3 = [colors3[0], colors3[0]];
            }
            colors3 = colors3.slice(0);
            for (var c4 = 0; c4 < colors3.length; c4++) {
              colors3[c4] = chroma$4(colors3[c4]);
            }
            _pos.length = 0;
            for (var c$1 = 0; c$1 < colors3.length; c$1++) {
              _pos.push(c$1 / (colors3.length - 1));
            }
          }
          resetCache();
          return _colors = colors3;
        };
        var getClass = function(value) {
          if (_classes != null) {
            var n5 = _classes.length - 1;
            var i5 = 0;
            while (i5 < n5 && value >= _classes[i5]) {
              i5++;
            }
            return i5 - 1;
          }
          return 0;
        };
        var tMapLightness = function(t4) {
          return t4;
        };
        var tMapDomain = function(t4) {
          return t4;
        };
        var getColor = function(val, bypassMap) {
          var col, t4;
          if (bypassMap == null) {
            bypassMap = false;
          }
          if (isNaN(val) || val === null) {
            return _nacol;
          }
          if (!bypassMap) {
            if (_classes && _classes.length > 2) {
              var c4 = getClass(val);
              t4 = c4 / (_classes.length - 2);
            } else if (_max !== _min) {
              t4 = (val - _min) / (_max - _min);
            } else {
              t4 = 1;
            }
          } else {
            t4 = val;
          }
          t4 = tMapDomain(t4);
          if (!bypassMap) {
            t4 = tMapLightness(t4);
          }
          if (_gamma !== 1) {
            t4 = pow$3(t4, _gamma);
          }
          t4 = _padding[0] + t4 * (1 - _padding[0] - _padding[1]);
          t4 = Math.min(1, Math.max(0, t4));
          var k2 = Math.floor(t4 * 1e4);
          if (_useCache && _colorCache[k2]) {
            col = _colorCache[k2];
          } else {
            if (type$2(_colors) === "array") {
              for (var i5 = 0; i5 < _pos.length; i5++) {
                var p3 = _pos[i5];
                if (t4 <= p3) {
                  col = _colors[i5];
                  break;
                }
                if (t4 >= p3 && i5 === _pos.length - 1) {
                  col = _colors[i5];
                  break;
                }
                if (t4 > p3 && t4 < _pos[i5 + 1]) {
                  t4 = (t4 - p3) / (_pos[i5 + 1] - p3);
                  col = chroma$4.interpolate(_colors[i5], _colors[i5 + 1], t4, _mode);
                  break;
                }
              }
            } else if (type$2(_colors) === "function") {
              col = _colors(t4);
            }
            if (_useCache) {
              _colorCache[k2] = col;
            }
          }
          return col;
        };
        var resetCache = function() {
          return _colorCache = {};
        };
        setColors(colors2);
        var f3 = function(v2) {
          var c4 = chroma$4(getColor(v2));
          if (_out && c4[_out]) {
            return c4[_out]();
          } else {
            return c4;
          }
        };
        f3.classes = function(classes) {
          if (classes != null) {
            if (type$2(classes) === "array") {
              _classes = classes;
              _domain = [classes[0], classes[classes.length - 1]];
            } else {
              var d3 = chroma$4.analyze(_domain);
              if (classes === 0) {
                _classes = [d3.min, d3.max];
              } else {
                _classes = chroma$4.limits(d3, "e", classes);
              }
            }
            return f3;
          }
          return _classes;
        };
        f3.domain = function(domain) {
          if (!arguments.length) {
            return _domain;
          }
          _min = domain[0];
          _max = domain[domain.length - 1];
          _pos = [];
          var k2 = _colors.length;
          if (domain.length === k2 && _min !== _max) {
            for (var i5 = 0, list2 = Array.from(domain); i5 < list2.length; i5 += 1) {
              var d3 = list2[i5];
              _pos.push((d3 - _min) / (_max - _min));
            }
          } else {
            for (var c4 = 0; c4 < k2; c4++) {
              _pos.push(c4 / (k2 - 1));
            }
            if (domain.length > 2) {
              var tOut = domain.map(function(d4, i6) {
                return i6 / (domain.length - 1);
              });
              var tBreaks = domain.map(function(d4) {
                return (d4 - _min) / (_max - _min);
              });
              if (!tBreaks.every(function(val, i6) {
                return tOut[i6] === val;
              })) {
                tMapDomain = function(t4) {
                  if (t4 <= 0 || t4 >= 1) {
                    return t4;
                  }
                  var i6 = 0;
                  while (t4 >= tBreaks[i6 + 1]) {
                    i6++;
                  }
                  var f4 = (t4 - tBreaks[i6]) / (tBreaks[i6 + 1] - tBreaks[i6]);
                  var out2 = tOut[i6] + f4 * (tOut[i6 + 1] - tOut[i6]);
                  return out2;
                };
              }
            }
          }
          _domain = [_min, _max];
          return f3;
        };
        f3.mode = function(_m) {
          if (!arguments.length) {
            return _mode;
          }
          _mode = _m;
          resetCache();
          return f3;
        };
        f3.range = function(colors3, _pos2) {
          setColors(colors3);
          return f3;
        };
        f3.out = function(_o) {
          _out = _o;
          return f3;
        };
        f3.spread = function(val) {
          if (!arguments.length) {
            return _spread;
          }
          _spread = val;
          return f3;
        };
        f3.correctLightness = function(v2) {
          if (v2 == null) {
            v2 = true;
          }
          _correctLightness = v2;
          resetCache();
          if (_correctLightness) {
            tMapLightness = function(t4) {
              var L0 = getColor(0, true).lab()[0];
              var L1 = getColor(1, true).lab()[0];
              var pol = L0 > L1;
              var L_actual = getColor(t4, true).lab()[0];
              var L_ideal = L0 + (L1 - L0) * t4;
              var L_diff = L_actual - L_ideal;
              var t0 = 0;
              var t1 = 1;
              var max_iter = 20;
              while (Math.abs(L_diff) > 0.01 && max_iter-- > 0) {
                (function() {
                  if (pol) {
                    L_diff *= -1;
                  }
                  if (L_diff < 0) {
                    t0 = t4;
                    t4 += (t1 - t4) * 0.5;
                  } else {
                    t1 = t4;
                    t4 += (t0 - t4) * 0.5;
                  }
                  L_actual = getColor(t4, true).lab()[0];
                  return L_diff = L_actual - L_ideal;
                })();
              }
              return t4;
            };
          } else {
            tMapLightness = function(t4) {
              return t4;
            };
          }
          return f3;
        };
        f3.padding = function(p3) {
          if (p3 != null) {
            if (type$2(p3) === "number") {
              p3 = [p3, p3];
            }
            _padding = p3;
            return f3;
          } else {
            return _padding;
          }
        };
        f3.colors = function(numColors, out2) {
          if (arguments.length < 2) {
            out2 = "hex";
          }
          var result = [];
          if (arguments.length === 0) {
            result = _colors.slice(0);
          } else if (numColors === 1) {
            result = [f3(0.5)];
          } else if (numColors > 1) {
            var dm = _domain[0];
            var dd = _domain[1] - dm;
            result = __range__(0, numColors, false).map(function(i6) {
              return f3(dm + i6 / (numColors - 1) * dd);
            });
          } else {
            colors2 = [];
            var samples = [];
            if (_classes && _classes.length > 2) {
              for (var i5 = 1, end = _classes.length, asc = 1 <= end; asc ? i5 < end : i5 > end; asc ? i5++ : i5--) {
                samples.push((_classes[i5 - 1] + _classes[i5]) * 0.5);
              }
            } else {
              samples = _domain;
            }
            result = samples.map(function(v2) {
              return f3(v2);
            });
          }
          if (chroma$4[out2]) {
            result = result.map(function(c4) {
              return c4[out2]();
            });
          }
          return result;
        };
        f3.cache = function(c4) {
          if (c4 != null) {
            _useCache = c4;
            return f3;
          } else {
            return _useCache;
          }
        };
        f3.gamma = function(g2) {
          if (g2 != null) {
            _gamma = g2;
            return f3;
          } else {
            return _gamma;
          }
        };
        f3.nodata = function(d3) {
          if (d3 != null) {
            _nacol = chroma$4(d3);
            return f3;
          } else {
            return _nacol;
          }
        };
        return f3;
      };
      function __range__(left, right, inclusive) {
        var range = [];
        var ascending = left < right;
        var end = !inclusive ? right : ascending ? right + 1 : right - 1;
        for (var i5 = left; ascending ? i5 < end : i5 > end; ascending ? i5++ : i5--) {
          range.push(i5);
        }
        return range;
      }
      var Color$5 = Color_1;
      var scale$1 = scale$2;
      var binom_row = function(n5) {
        var row = [1, 1];
        for (var i5 = 1; i5 < n5; i5++) {
          var newrow = [1];
          for (var j2 = 1; j2 <= row.length; j2++) {
            newrow[j2] = (row[j2] || 0) + row[j2 - 1];
          }
          row = newrow;
        }
        return row;
      };
      var bezier2 = function(colors2) {
        var assign, assign$1, assign$2;
        var I2, lab0, lab1, lab2;
        colors2 = colors2.map(function(c4) {
          return new Color$5(c4);
        });
        if (colors2.length === 2) {
          assign = colors2.map(function(c4) {
            return c4.lab();
          }), lab0 = assign[0], lab1 = assign[1];
          I2 = function(t4) {
            var lab4 = [0, 1, 2].map(function(i5) {
              return lab0[i5] + t4 * (lab1[i5] - lab0[i5]);
            });
            return new Color$5(lab4, "lab");
          };
        } else if (colors2.length === 3) {
          assign$1 = colors2.map(function(c4) {
            return c4.lab();
          }), lab0 = assign$1[0], lab1 = assign$1[1], lab2 = assign$1[2];
          I2 = function(t4) {
            var lab4 = [0, 1, 2].map(function(i5) {
              return (1 - t4) * (1 - t4) * lab0[i5] + 2 * (1 - t4) * t4 * lab1[i5] + t4 * t4 * lab2[i5];
            });
            return new Color$5(lab4, "lab");
          };
        } else if (colors2.length === 4) {
          var lab3;
          assign$2 = colors2.map(function(c4) {
            return c4.lab();
          }), lab0 = assign$2[0], lab1 = assign$2[1], lab2 = assign$2[2], lab3 = assign$2[3];
          I2 = function(t4) {
            var lab4 = [0, 1, 2].map(function(i5) {
              return (1 - t4) * (1 - t4) * (1 - t4) * lab0[i5] + 3 * (1 - t4) * (1 - t4) * t4 * lab1[i5] + 3 * (1 - t4) * t4 * t4 * lab2[i5] + t4 * t4 * t4 * lab3[i5];
            });
            return new Color$5(lab4, "lab");
          };
        } else if (colors2.length >= 5) {
          var labs, row, n5;
          labs = colors2.map(function(c4) {
            return c4.lab();
          });
          n5 = colors2.length - 1;
          row = binom_row(n5);
          I2 = function(t4) {
            var u3 = 1 - t4;
            var lab4 = [0, 1, 2].map(function(i5) {
              return labs.reduce(function(sum, el, j2) {
                return sum + row[j2] * Math.pow(u3, n5 - j2) * Math.pow(t4, j2) * el[i5];
              }, 0);
            });
            return new Color$5(lab4, "lab");
          };
        } else {
          throw new RangeError("No point in running bezier with only one color.");
        }
        return I2;
      };
      var bezier_1 = function(colors2) {
        var f3 = bezier2(colors2);
        f3.scale = function() {
          return scale$1(f3);
        };
        return f3;
      };
      var chroma$3 = chroma_1;
      var blend = function(bottom, top, mode) {
        if (!blend[mode]) {
          throw new Error("unknown blend mode " + mode);
        }
        return blend[mode](bottom, top);
      };
      var blend_f = function(f3) {
        return function(bottom, top) {
          var c0 = chroma$3(top).rgb();
          var c1 = chroma$3(bottom).rgb();
          return chroma$3.rgb(f3(c0, c1));
        };
      };
      var each = function(f3) {
        return function(c0, c1) {
          var out2 = [];
          out2[0] = f3(c0[0], c1[0]);
          out2[1] = f3(c0[1], c1[1]);
          out2[2] = f3(c0[2], c1[2]);
          return out2;
        };
      };
      var normal = function(a3) {
        return a3;
      };
      var multiply6 = function(a3, b3) {
        return a3 * b3 / 255;
      };
      var darken = function(a3, b3) {
        return a3 > b3 ? b3 : a3;
      };
      var lighten = function(a3, b3) {
        return a3 > b3 ? a3 : b3;
      };
      var screen = function(a3, b3) {
        return 255 * (1 - (1 - a3 / 255) * (1 - b3 / 255));
      };
      var overlay2 = function(a3, b3) {
        return b3 < 128 ? 2 * a3 * b3 / 255 : 255 * (1 - 2 * (1 - a3 / 255) * (1 - b3 / 255));
      };
      var burn = function(a3, b3) {
        return 255 * (1 - (1 - b3 / 255) / (a3 / 255));
      };
      var dodge = function(a3, b3) {
        if (a3 === 255) {
          return 255;
        }
        a3 = 255 * (b3 / 255) / (1 - a3 / 255);
        return a3 > 255 ? 255 : a3;
      };
      blend.normal = blend_f(each(normal));
      blend.multiply = blend_f(each(multiply6));
      blend.screen = blend_f(each(screen));
      blend.overlay = blend_f(each(overlay2));
      blend.darken = blend_f(each(darken));
      blend.lighten = blend_f(each(lighten));
      blend.dodge = blend_f(each(dodge));
      blend.burn = blend_f(each(burn));
      var blend_1 = blend;
      var type$1 = utils.type;
      var clip_rgb = utils.clip_rgb;
      var TWOPI = utils.TWOPI;
      var pow$2 = Math.pow;
      var sin$1 = Math.sin;
      var cos$1 = Math.cos;
      var chroma$2 = chroma_1;
      var cubehelix = function(start, rotations, hue, gamma, lightness) {
        if (start === void 0)
          start = 300;
        if (rotations === void 0)
          rotations = -1.5;
        if (hue === void 0)
          hue = 1;
        if (gamma === void 0)
          gamma = 1;
        if (lightness === void 0)
          lightness = [0, 1];
        var dh = 0, dl;
        if (type$1(lightness) === "array") {
          dl = lightness[1] - lightness[0];
        } else {
          dl = 0;
          lightness = [lightness, lightness];
        }
        var f3 = function(fract) {
          var a3 = TWOPI * ((start + 120) / 360 + rotations * fract);
          var l3 = pow$2(lightness[0] + dl * fract, gamma);
          var h3 = dh !== 0 ? hue[0] + fract * dh : hue;
          var amp = h3 * l3 * (1 - l3) / 2;
          var cos_a = cos$1(a3);
          var sin_a = sin$1(a3);
          var r5 = l3 + amp * (-0.14861 * cos_a + 1.78277 * sin_a);
          var g2 = l3 + amp * (-0.29227 * cos_a - 0.90649 * sin_a);
          var b3 = l3 + amp * (1.97294 * cos_a);
          return chroma$2(clip_rgb([r5 * 255, g2 * 255, b3 * 255, 1]));
        };
        f3.start = function(s4) {
          if (s4 == null) {
            return start;
          }
          start = s4;
          return f3;
        };
        f3.rotations = function(r5) {
          if (r5 == null) {
            return rotations;
          }
          rotations = r5;
          return f3;
        };
        f3.gamma = function(g2) {
          if (g2 == null) {
            return gamma;
          }
          gamma = g2;
          return f3;
        };
        f3.hue = function(h3) {
          if (h3 == null) {
            return hue;
          }
          hue = h3;
          if (type$1(hue) === "array") {
            dh = hue[1] - hue[0];
            if (dh === 0) {
              hue = hue[1];
            }
          } else {
            dh = 0;
          }
          return f3;
        };
        f3.lightness = function(h3) {
          if (h3 == null) {
            return lightness;
          }
          if (type$1(h3) === "array") {
            lightness = h3;
            dl = h3[1] - h3[0];
          } else {
            lightness = [h3, h3];
            dl = 0;
          }
          return f3;
        };
        f3.scale = function() {
          return chroma$2.scale(f3);
        };
        f3.hue(hue);
        return f3;
      };
      var Color$4 = Color_1;
      var digits = "0123456789abcdef";
      var floor$1 = Math.floor;
      var random5 = Math.random;
      var random_1 = function() {
        var code = "#";
        for (var i5 = 0; i5 < 6; i5++) {
          code += digits.charAt(floor$1(random5() * 16));
        }
        return new Color$4(code, "hex");
      };
      var type = type$p;
      var log2 = Math.log;
      var pow$1 = Math.pow;
      var floor4 = Math.floor;
      var abs$1 = Math.abs;
      var analyze = function(data, key3) {
        if (key3 === void 0)
          key3 = null;
        var r5 = {
          min: Number.MAX_VALUE,
          max: Number.MAX_VALUE * -1,
          sum: 0,
          values: [],
          count: 0
        };
        if (type(data) === "object") {
          data = Object.values(data);
        }
        data.forEach(function(val) {
          if (key3 && type(val) === "object") {
            val = val[key3];
          }
          if (val !== void 0 && val !== null && !isNaN(val)) {
            r5.values.push(val);
            r5.sum += val;
            if (val < r5.min) {
              r5.min = val;
            }
            if (val > r5.max) {
              r5.max = val;
            }
            r5.count += 1;
          }
        });
        r5.domain = [r5.min, r5.max];
        r5.limits = function(mode, num2) {
          return limits(r5, mode, num2);
        };
        return r5;
      };
      var limits = function(data, mode, num2) {
        if (mode === void 0)
          mode = "equal";
        if (num2 === void 0)
          num2 = 7;
        if (type(data) == "array") {
          data = analyze(data);
        }
        var min5 = data.min;
        var max5 = data.max;
        var values = data.values.sort(function(a3, b3) {
          return a3 - b3;
        });
        if (num2 === 1) {
          return [min5, max5];
        }
        var limits2 = [];
        if (mode.substr(0, 1) === "c") {
          limits2.push(min5);
          limits2.push(max5);
        }
        if (mode.substr(0, 1) === "e") {
          limits2.push(min5);
          for (var i5 = 1; i5 < num2; i5++) {
            limits2.push(min5 + i5 / num2 * (max5 - min5));
          }
          limits2.push(max5);
        } else if (mode.substr(0, 1) === "l") {
          if (min5 <= 0) {
            throw new Error("Logarithmic scales are only possible for values > 0");
          }
          var min_log = Math.LOG10E * log2(min5);
          var max_log = Math.LOG10E * log2(max5);
          limits2.push(min5);
          for (var i$12 = 1; i$12 < num2; i$12++) {
            limits2.push(pow$1(10, min_log + i$12 / num2 * (max_log - min_log)));
          }
          limits2.push(max5);
        } else if (mode.substr(0, 1) === "q") {
          limits2.push(min5);
          for (var i$2 = 1; i$2 < num2; i$2++) {
            var p3 = (values.length - 1) * i$2 / num2;
            var pb = floor4(p3);
            if (pb === p3) {
              limits2.push(values[pb]);
            } else {
              var pr = p3 - pb;
              limits2.push(values[pb] * (1 - pr) + values[pb + 1] * pr);
            }
          }
          limits2.push(max5);
        } else if (mode.substr(0, 1) === "k") {
          var cluster;
          var n5 = values.length;
          var assignments = new Array(n5);
          var clusterSizes = new Array(num2);
          var repeat = true;
          var nb_iters = 0;
          var centroids = null;
          centroids = [];
          centroids.push(min5);
          for (var i$3 = 1; i$3 < num2; i$3++) {
            centroids.push(min5 + i$3 / num2 * (max5 - min5));
          }
          centroids.push(max5);
          while (repeat) {
            for (var j2 = 0; j2 < num2; j2++) {
              clusterSizes[j2] = 0;
            }
            for (var i$4 = 0; i$4 < n5; i$4++) {
              var value = values[i$4];
              var mindist = Number.MAX_VALUE;
              var best = void 0;
              for (var j$1 = 0; j$1 < num2; j$1++) {
                var dist4 = abs$1(centroids[j$1] - value);
                if (dist4 < mindist) {
                  mindist = dist4;
                  best = j$1;
                }
                clusterSizes[best]++;
                assignments[i$4] = best;
              }
            }
            var newCentroids = new Array(num2);
            for (var j$2 = 0; j$2 < num2; j$2++) {
              newCentroids[j$2] = null;
            }
            for (var i$5 = 0; i$5 < n5; i$5++) {
              cluster = assignments[i$5];
              if (newCentroids[cluster] === null) {
                newCentroids[cluster] = values[i$5];
              } else {
                newCentroids[cluster] += values[i$5];
              }
            }
            for (var j$3 = 0; j$3 < num2; j$3++) {
              newCentroids[j$3] *= 1 / clusterSizes[j$3];
            }
            repeat = false;
            for (var j$4 = 0; j$4 < num2; j$4++) {
              if (newCentroids[j$4] !== centroids[j$4]) {
                repeat = true;
                break;
              }
            }
            centroids = newCentroids;
            nb_iters++;
            if (nb_iters > 200) {
              repeat = false;
            }
          }
          var kClusters = {};
          for (var j$5 = 0; j$5 < num2; j$5++) {
            kClusters[j$5] = [];
          }
          for (var i$6 = 0; i$6 < n5; i$6++) {
            cluster = assignments[i$6];
            kClusters[cluster].push(values[i$6]);
          }
          var tmpKMeansBreaks = [];
          for (var j$6 = 0; j$6 < num2; j$6++) {
            tmpKMeansBreaks.push(kClusters[j$6][0]);
            tmpKMeansBreaks.push(kClusters[j$6][kClusters[j$6].length - 1]);
          }
          tmpKMeansBreaks = tmpKMeansBreaks.sort(function(a3, b3) {
            return a3 - b3;
          });
          limits2.push(tmpKMeansBreaks[0]);
          for (var i$7 = 1; i$7 < tmpKMeansBreaks.length; i$7 += 2) {
            var v2 = tmpKMeansBreaks[i$7];
            if (!isNaN(v2) && limits2.indexOf(v2) === -1) {
              limits2.push(v2);
            }
          }
        }
        return limits2;
      };
      var analyze_1 = { analyze, limits };
      var Color$3 = Color_1;
      var contrast = function(a3, b3) {
        a3 = new Color$3(a3);
        b3 = new Color$3(b3);
        var l1 = a3.luminance();
        var l22 = b3.luminance();
        return l1 > l22 ? (l1 + 0.05) / (l22 + 0.05) : (l22 + 0.05) / (l1 + 0.05);
      };
      var Color$2 = Color_1;
      var sqrt2 = Math.sqrt;
      var pow3 = Math.pow;
      var min4 = Math.min;
      var max4 = Math.max;
      var atan2 = Math.atan2;
      var abs = Math.abs;
      var cos2 = Math.cos;
      var sin2 = Math.sin;
      var exp2 = Math.exp;
      var PI2 = Math.PI;
      var deltaE = function(a3, b3, Kl, Kc, Kh) {
        if (Kl === void 0)
          Kl = 1;
        if (Kc === void 0)
          Kc = 1;
        if (Kh === void 0)
          Kh = 1;
        var rad2deg = function(rad) {
          return 360 * rad / (2 * PI2);
        };
        var deg2rad = function(deg) {
          return 2 * PI2 * deg / 360;
        };
        a3 = new Color$2(a3);
        b3 = new Color$2(b3);
        var ref = Array.from(a3.lab());
        var L1 = ref[0];
        var a1 = ref[1];
        var b1 = ref[2];
        var ref$1 = Array.from(b3.lab());
        var L2 = ref$1[0];
        var a22 = ref$1[1];
        var b22 = ref$1[2];
        var avgL = (L1 + L2) / 2;
        var C1 = sqrt2(pow3(a1, 2) + pow3(b1, 2));
        var C2 = sqrt2(pow3(a22, 2) + pow3(b22, 2));
        var avgC = (C1 + C2) / 2;
        var G = 0.5 * (1 - sqrt2(pow3(avgC, 7) / (pow3(avgC, 7) + pow3(25, 7))));
        var a1p = a1 * (1 + G);
        var a2p = a22 * (1 + G);
        var C1p = sqrt2(pow3(a1p, 2) + pow3(b1, 2));
        var C2p = sqrt2(pow3(a2p, 2) + pow3(b22, 2));
        var avgCp = (C1p + C2p) / 2;
        var arctan1 = rad2deg(atan2(b1, a1p));
        var arctan2 = rad2deg(atan2(b22, a2p));
        var h1p = arctan1 >= 0 ? arctan1 : arctan1 + 360;
        var h2p = arctan2 >= 0 ? arctan2 : arctan2 + 360;
        var avgHp = abs(h1p - h2p) > 180 ? (h1p + h2p + 360) / 2 : (h1p + h2p) / 2;
        var T2 = 1 - 0.17 * cos2(deg2rad(avgHp - 30)) + 0.24 * cos2(deg2rad(2 * avgHp)) + 0.32 * cos2(deg2rad(3 * avgHp + 6)) - 0.2 * cos2(deg2rad(4 * avgHp - 63));
        var deltaHp = h2p - h1p;
        deltaHp = abs(deltaHp) <= 180 ? deltaHp : h2p <= h1p ? deltaHp + 360 : deltaHp - 360;
        deltaHp = 2 * sqrt2(C1p * C2p) * sin2(deg2rad(deltaHp) / 2);
        var deltaL = L2 - L1;
        var deltaCp = C2p - C1p;
        var sl = 1 + 0.015 * pow3(avgL - 50, 2) / sqrt2(20 + pow3(avgL - 50, 2));
        var sc = 1 + 0.045 * avgCp;
        var sh = 1 + 0.015 * avgCp * T2;
        var deltaTheta = 30 * exp2(-pow3((avgHp - 275) / 25, 2));
        var Rc = 2 * sqrt2(pow3(avgCp, 7) / (pow3(avgCp, 7) + pow3(25, 7)));
        var Rt = -Rc * sin2(2 * deg2rad(deltaTheta));
        var result = sqrt2(pow3(deltaL / (Kl * sl), 2) + pow3(deltaCp / (Kc * sc), 2) + pow3(deltaHp / (Kh * sh), 2) + Rt * (deltaCp / (Kc * sc)) * (deltaHp / (Kh * sh)));
        return max4(0, min4(100, result));
      };
      var Color$1 = Color_1;
      var distance4 = function(a3, b3, mode) {
        if (mode === void 0)
          mode = "lab";
        a3 = new Color$1(a3);
        b3 = new Color$1(b3);
        var l1 = a3.get(mode);
        var l22 = b3.get(mode);
        var sum_sq = 0;
        for (var i5 in l1) {
          var d3 = (l1[i5] || 0) - (l22[i5] || 0);
          sum_sq += d3 * d3;
        }
        return Math.sqrt(sum_sq);
      };
      var Color = Color_1;
      var valid = function() {
        var args = [], len5 = arguments.length;
        while (len5--)
          args[len5] = arguments[len5];
        try {
          new (Function.prototype.bind.apply(Color, [null].concat(args)))();
          return true;
        } catch (e5) {
          return false;
        }
      };
      var chroma$1 = chroma_1;
      var scale6 = scale$2;
      var scales = {
        cool: function cool() {
          return scale6([chroma$1.hsl(180, 1, 0.9), chroma$1.hsl(250, 0.7, 0.4)]);
        },
        hot: function hot() {
          return scale6(["#000", "#f00", "#ff0", "#fff"]).mode("rgb");
        }
      };
      var colorbrewer = {
        OrRd: ["#fff7ec", "#fee8c8", "#fdd49e", "#fdbb84", "#fc8d59", "#ef6548", "#d7301f", "#b30000", "#7f0000"],
        PuBu: ["#fff7fb", "#ece7f2", "#d0d1e6", "#a6bddb", "#74a9cf", "#3690c0", "#0570b0", "#045a8d", "#023858"],
        BuPu: ["#f7fcfd", "#e0ecf4", "#bfd3e6", "#9ebcda", "#8c96c6", "#8c6bb1", "#88419d", "#810f7c", "#4d004b"],
        Oranges: ["#fff5eb", "#fee6ce", "#fdd0a2", "#fdae6b", "#fd8d3c", "#f16913", "#d94801", "#a63603", "#7f2704"],
        BuGn: ["#f7fcfd", "#e5f5f9", "#ccece6", "#99d8c9", "#66c2a4", "#41ae76", "#238b45", "#006d2c", "#00441b"],
        YlOrBr: ["#ffffe5", "#fff7bc", "#fee391", "#fec44f", "#fe9929", "#ec7014", "#cc4c02", "#993404", "#662506"],
        YlGn: ["#ffffe5", "#f7fcb9", "#d9f0a3", "#addd8e", "#78c679", "#41ab5d", "#238443", "#006837", "#004529"],
        Reds: ["#fff5f0", "#fee0d2", "#fcbba1", "#fc9272", "#fb6a4a", "#ef3b2c", "#cb181d", "#a50f15", "#67000d"],
        RdPu: ["#fff7f3", "#fde0dd", "#fcc5c0", "#fa9fb5", "#f768a1", "#dd3497", "#ae017e", "#7a0177", "#49006a"],
        Greens: ["#f7fcf5", "#e5f5e0", "#c7e9c0", "#a1d99b", "#74c476", "#41ab5d", "#238b45", "#006d2c", "#00441b"],
        YlGnBu: ["#ffffd9", "#edf8b1", "#c7e9b4", "#7fcdbb", "#41b6c4", "#1d91c0", "#225ea8", "#253494", "#081d58"],
        Purples: ["#fcfbfd", "#efedf5", "#dadaeb", "#bcbddc", "#9e9ac8", "#807dba", "#6a51a3", "#54278f", "#3f007d"],
        GnBu: ["#f7fcf0", "#e0f3db", "#ccebc5", "#a8ddb5", "#7bccc4", "#4eb3d3", "#2b8cbe", "#0868ac", "#084081"],
        Greys: ["#ffffff", "#f0f0f0", "#d9d9d9", "#bdbdbd", "#969696", "#737373", "#525252", "#252525", "#000000"],
        YlOrRd: ["#ffffcc", "#ffeda0", "#fed976", "#feb24c", "#fd8d3c", "#fc4e2a", "#e31a1c", "#bd0026", "#800026"],
        PuRd: ["#f7f4f9", "#e7e1ef", "#d4b9da", "#c994c7", "#df65b0", "#e7298a", "#ce1256", "#980043", "#67001f"],
        Blues: ["#f7fbff", "#deebf7", "#c6dbef", "#9ecae1", "#6baed6", "#4292c6", "#2171b5", "#08519c", "#08306b"],
        PuBuGn: ["#fff7fb", "#ece2f0", "#d0d1e6", "#a6bddb", "#67a9cf", "#3690c0", "#02818a", "#016c59", "#014636"],
        Viridis: ["#440154", "#482777", "#3f4a8a", "#31678e", "#26838f", "#1f9d8a", "#6cce5a", "#b6de2b", "#fee825"],
        Spectral: ["#9e0142", "#d53e4f", "#f46d43", "#fdae61", "#fee08b", "#ffffbf", "#e6f598", "#abdda4", "#66c2a5", "#3288bd", "#5e4fa2"],
        RdYlGn: ["#a50026", "#d73027", "#f46d43", "#fdae61", "#fee08b", "#ffffbf", "#d9ef8b", "#a6d96a", "#66bd63", "#1a9850", "#006837"],
        RdBu: ["#67001f", "#b2182b", "#d6604d", "#f4a582", "#fddbc7", "#f7f7f7", "#d1e5f0", "#92c5de", "#4393c3", "#2166ac", "#053061"],
        PiYG: ["#8e0152", "#c51b7d", "#de77ae", "#f1b6da", "#fde0ef", "#f7f7f7", "#e6f5d0", "#b8e186", "#7fbc41", "#4d9221", "#276419"],
        PRGn: ["#40004b", "#762a83", "#9970ab", "#c2a5cf", "#e7d4e8", "#f7f7f7", "#d9f0d3", "#a6dba0", "#5aae61", "#1b7837", "#00441b"],
        RdYlBu: ["#a50026", "#d73027", "#f46d43", "#fdae61", "#fee090", "#ffffbf", "#e0f3f8", "#abd9e9", "#74add1", "#4575b4", "#313695"],
        BrBG: ["#543005", "#8c510a", "#bf812d", "#dfc27d", "#f6e8c3", "#f5f5f5", "#c7eae5", "#80cdc1", "#35978f", "#01665e", "#003c30"],
        RdGy: ["#67001f", "#b2182b", "#d6604d", "#f4a582", "#fddbc7", "#ffffff", "#e0e0e0", "#bababa", "#878787", "#4d4d4d", "#1a1a1a"],
        PuOr: ["#7f3b08", "#b35806", "#e08214", "#fdb863", "#fee0b6", "#f7f7f7", "#d8daeb", "#b2abd2", "#8073ac", "#542788", "#2d004b"],
        Set2: ["#66c2a5", "#fc8d62", "#8da0cb", "#e78ac3", "#a6d854", "#ffd92f", "#e5c494", "#b3b3b3"],
        Accent: ["#7fc97f", "#beaed4", "#fdc086", "#ffff99", "#386cb0", "#f0027f", "#bf5b17", "#666666"],
        Set1: ["#e41a1c", "#377eb8", "#4daf4a", "#984ea3", "#ff7f00", "#ffff33", "#a65628", "#f781bf", "#999999"],
        Set3: ["#8dd3c7", "#ffffb3", "#bebada", "#fb8072", "#80b1d3", "#fdb462", "#b3de69", "#fccde5", "#d9d9d9", "#bc80bd", "#ccebc5", "#ffed6f"],
        Dark2: ["#1b9e77", "#d95f02", "#7570b3", "#e7298a", "#66a61e", "#e6ab02", "#a6761d", "#666666"],
        Paired: ["#a6cee3", "#1f78b4", "#b2df8a", "#33a02c", "#fb9a99", "#e31a1c", "#fdbf6f", "#ff7f00", "#cab2d6", "#6a3d9a", "#ffff99", "#b15928"],
        Pastel2: ["#b3e2cd", "#fdcdac", "#cbd5e8", "#f4cae4", "#e6f5c9", "#fff2ae", "#f1e2cc", "#cccccc"],
        Pastel1: ["#fbb4ae", "#b3cde3", "#ccebc5", "#decbe4", "#fed9a6", "#ffffcc", "#e5d8bd", "#fddaec", "#f2f2f2"]
      };
      for (var i4 = 0, list = Object.keys(colorbrewer); i4 < list.length; i4 += 1) {
        var key2 = list[i4];
        colorbrewer[key2.toLowerCase()] = colorbrewer[key2];
      }
      var colorbrewer_1 = colorbrewer;
      var chroma4 = chroma_1;
      chroma4.average = average;
      chroma4.bezier = bezier_1;
      chroma4.blend = blend_1;
      chroma4.cubehelix = cubehelix;
      chroma4.mix = chroma4.interpolate = mix$1;
      chroma4.random = random_1;
      chroma4.scale = scale$2;
      chroma4.analyze = analyze_1.analyze;
      chroma4.contrast = contrast;
      chroma4.deltaE = deltaE;
      chroma4.distance = distance4;
      chroma4.limits = analyze_1.limits;
      chroma4.valid = valid;
      chroma4.scales = scales;
      chroma4.colors = w3cx11_1;
      chroma4.brewer = colorbrewer_1;
      var chroma_js = chroma4;
      return chroma_js;
    });
  }
});

// examples/src/renderMenu.ts
function getExamplePaths(examples2, currentPath, entries = [], path = "") {
  const keys = Object.keys(examples2);
  for (let i4 = 0, n5 = keys.length; i4 < n5; ++i4) {
    if (typeof examples2[keys[i4]] === "function") {
      if (path === currentPath) {
        entries.push(`${path}/${keys[i4]}`);
      }
    } else {
      if (path === currentPath) {
        entries.push(`${path}/${keys[i4]}`);
      } else {
        getExamplePaths(examples2[keys[i4]], currentPath, entries, `${path}/${keys[i4]}`);
      }
    }
  }
  return entries;
}
function renderMenu(element, examples2, pathComponents, basePath) {
  const currentPath = pathComponents.length ? `/${pathComponents.join("/")}` : "";
  const entries = getExamplePaths(examples2, currentPath);
  const container = document.createElement("div");
  container.className = "menu-container";
  const header = document.createElement("div");
  header.className = "menu-header";
  container.appendChild(header);
  if (pathComponents.length) {
    const backPath = `${basePath}/${pathComponents.slice(0, -1).join("/")}`;
    const div4 = document.createElement("div");
    div4.className = "menu-back";
    const a3 = document.createElement("a");
    a3.href = backPath;
    a3.appendChild(div4);
    header.appendChild(a3);
  }
  const title = document.createElement("div");
  title.innerText = "Examples";
  title.className = "menu-title";
  header.appendChild(title);
  const items = document.createElement("div");
  items.className = "menu-items-container";
  container.appendChild(items);
  for (let i4 = 0, n5 = entries.length; i4 < n5; ++i4) {
    const div4 = document.createElement("div");
    div4.className = "menu-item";
    div4.innerText = entries[i4];
    const a3 = document.createElement("a");
    a3.href = `${basePath}${entries[i4]}`;
    a3.appendChild(div4);
    items.appendChild(a3);
  }
  element.appendChild(container);
}

// node_modules/@lit/reactive-element/css-tag.js
var t = globalThis;
var e = t.ShadowRoot && (void 0 === t.ShadyCSS || t.ShadyCSS.nativeShadow) && "adoptedStyleSheets" in Document.prototype && "replace" in CSSStyleSheet.prototype;
var s = Symbol();
var o = /* @__PURE__ */ new WeakMap();
var n = class {
  constructor(t4, e5, o4) {
    if (this._$cssResult$ = true, o4 !== s)
      throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");
    this.cssText = t4, this.t = e5;
  }
  get styleSheet() {
    let t4 = this.o;
    const s4 = this.t;
    if (e && void 0 === t4) {
      const e5 = void 0 !== s4 && 1 === s4.length;
      e5 && (t4 = o.get(s4)), void 0 === t4 && ((this.o = t4 = new CSSStyleSheet()).replaceSync(this.cssText), e5 && o.set(s4, t4));
    }
    return t4;
  }
  toString() {
    return this.cssText;
  }
};
var r = (t4) => new n("string" == typeof t4 ? t4 : t4 + "", void 0, s);
var i = (t4, ...e5) => {
  const o4 = 1 === t4.length ? t4[0] : e5.reduce((e6, s4, o5) => e6 + ((t5) => {
    if (true === t5._$cssResult$)
      return t5.cssText;
    if ("number" == typeof t5)
      return t5;
    throw Error("Value passed to 'css' function must be a 'css' function result: " + t5 + ". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.");
  })(s4) + t4[o5 + 1], t4[0]);
  return new n(o4, t4, s);
};
var S = (s4, o4) => {
  if (e)
    s4.adoptedStyleSheets = o4.map((t4) => t4 instanceof CSSStyleSheet ? t4 : t4.styleSheet);
  else
    for (const e5 of o4) {
      const o5 = document.createElement("style"), n5 = t.litNonce;
      void 0 !== n5 && o5.setAttribute("nonce", n5), o5.textContent = e5.cssText, s4.appendChild(o5);
    }
};
var c = e ? (t4) => t4 : (t4) => t4 instanceof CSSStyleSheet ? ((t5) => {
  let e5 = "";
  for (const s4 of t5.cssRules)
    e5 += s4.cssText;
  return r(e5);
})(t4) : t4;

// node_modules/@lit/reactive-element/reactive-element.js
var { is: i2, defineProperty: e2, getOwnPropertyDescriptor: r2, getOwnPropertyNames: h, getOwnPropertySymbols: o2, getPrototypeOf: n2 } = Object;
var a = globalThis;
var c2 = a.trustedTypes;
var l = c2 ? c2.emptyScript : "";
var p = a.reactiveElementPolyfillSupport;
var d = (t4, s4) => t4;
var u = { toAttribute(t4, s4) {
  switch (s4) {
    case Boolean:
      t4 = t4 ? l : null;
      break;
    case Object:
    case Array:
      t4 = null == t4 ? t4 : JSON.stringify(t4);
  }
  return t4;
}, fromAttribute(t4, s4) {
  let i4 = t4;
  switch (s4) {
    case Boolean:
      i4 = null !== t4;
      break;
    case Number:
      i4 = null === t4 ? null : Number(t4);
      break;
    case Object:
    case Array:
      try {
        i4 = JSON.parse(t4);
      } catch (t5) {
        i4 = null;
      }
  }
  return i4;
} };
var f = (t4, s4) => !i2(t4, s4);
var y = { attribute: true, type: String, converter: u, reflect: false, hasChanged: f };
var _a, _b;
(_a = Symbol.metadata) != null ? _a : Symbol.metadata = Symbol("metadata"), (_b = a.litPropertyMetadata) != null ? _b : a.litPropertyMetadata = /* @__PURE__ */ new WeakMap();
var b = class extends HTMLElement {
  static addInitializer(t4) {
    var _a6;
    this._$Ei(), ((_a6 = this.l) != null ? _a6 : this.l = []).push(t4);
  }
  static get observedAttributes() {
    return this.finalize(), this._$Eh && [...this._$Eh.keys()];
  }
  static createProperty(t4, s4 = y) {
    if (s4.state && (s4.attribute = false), this._$Ei(), this.elementProperties.set(t4, s4), !s4.noAccessor) {
      const i4 = Symbol(), r5 = this.getPropertyDescriptor(t4, i4, s4);
      void 0 !== r5 && e2(this.prototype, t4, r5);
    }
  }
  static getPropertyDescriptor(t4, s4, i4) {
    var _a6;
    const { get: e5, set: h3 } = (_a6 = r2(this.prototype, t4)) != null ? _a6 : { get() {
      return this[s4];
    }, set(t5) {
      this[s4] = t5;
    } };
    return { get() {
      return e5 == null ? void 0 : e5.call(this);
    }, set(s5) {
      const r5 = e5 == null ? void 0 : e5.call(this);
      h3.call(this, s5), this.requestUpdate(t4, r5, i4);
    }, configurable: true, enumerable: true };
  }
  static getPropertyOptions(t4) {
    var _a6;
    return (_a6 = this.elementProperties.get(t4)) != null ? _a6 : y;
  }
  static _$Ei() {
    if (this.hasOwnProperty(d("elementProperties")))
      return;
    const t4 = n2(this);
    t4.finalize(), void 0 !== t4.l && (this.l = [...t4.l]), this.elementProperties = new Map(t4.elementProperties);
  }
  static finalize() {
    if (this.hasOwnProperty(d("finalized")))
      return;
    if (this.finalized = true, this._$Ei(), this.hasOwnProperty(d("properties"))) {
      const t5 = this.properties, s4 = [...h(t5), ...o2(t5)];
      for (const i4 of s4)
        this.createProperty(i4, t5[i4]);
    }
    const t4 = this[Symbol.metadata];
    if (null !== t4) {
      const s4 = litPropertyMetadata.get(t4);
      if (void 0 !== s4)
        for (const [t5, i4] of s4)
          this.elementProperties.set(t5, i4);
    }
    this._$Eh = /* @__PURE__ */ new Map();
    for (const [t5, s4] of this.elementProperties) {
      const i4 = this._$Eu(t5, s4);
      void 0 !== i4 && this._$Eh.set(i4, t5);
    }
    this.elementStyles = this.finalizeStyles(this.styles);
  }
  static finalizeStyles(s4) {
    const i4 = [];
    if (Array.isArray(s4)) {
      const e5 = new Set(s4.flat(1 / 0).reverse());
      for (const s5 of e5)
        i4.unshift(c(s5));
    } else
      void 0 !== s4 && i4.push(c(s4));
    return i4;
  }
  static _$Eu(t4, s4) {
    const i4 = s4.attribute;
    return false === i4 ? void 0 : "string" == typeof i4 ? i4 : "string" == typeof t4 ? t4.toLowerCase() : void 0;
  }
  constructor() {
    super(), this._$Ep = void 0, this.isUpdatePending = false, this.hasUpdated = false, this._$Em = null, this._$Ev();
  }
  _$Ev() {
    var _a6;
    this._$ES = new Promise((t4) => this.enableUpdating = t4), this._$AL = /* @__PURE__ */ new Map(), this._$E_(), this.requestUpdate(), (_a6 = this.constructor.l) == null ? void 0 : _a6.forEach((t4) => t4(this));
  }
  addController(t4) {
    var _a6, _b3;
    ((_a6 = this._$EO) != null ? _a6 : this._$EO = /* @__PURE__ */ new Set()).add(t4), void 0 !== this.renderRoot && this.isConnected && ((_b3 = t4.hostConnected) == null ? void 0 : _b3.call(t4));
  }
  removeController(t4) {
    var _a6;
    (_a6 = this._$EO) == null ? void 0 : _a6.delete(t4);
  }
  _$E_() {
    const t4 = /* @__PURE__ */ new Map(), s4 = this.constructor.elementProperties;
    for (const i4 of s4.keys())
      this.hasOwnProperty(i4) && (t4.set(i4, this[i4]), delete this[i4]);
    t4.size > 0 && (this._$Ep = t4);
  }
  createRenderRoot() {
    var _a6;
    const t4 = (_a6 = this.shadowRoot) != null ? _a6 : this.attachShadow(this.constructor.shadowRootOptions);
    return S(t4, this.constructor.elementStyles), t4;
  }
  connectedCallback() {
    var _a6, _b3;
    (_a6 = this.renderRoot) != null ? _a6 : this.renderRoot = this.createRenderRoot(), this.enableUpdating(true), (_b3 = this._$EO) == null ? void 0 : _b3.forEach((t4) => {
      var _a7;
      return (_a7 = t4.hostConnected) == null ? void 0 : _a7.call(t4);
    });
  }
  enableUpdating(t4) {
  }
  disconnectedCallback() {
    var _a6;
    (_a6 = this._$EO) == null ? void 0 : _a6.forEach((t4) => {
      var _a7;
      return (_a7 = t4.hostDisconnected) == null ? void 0 : _a7.call(t4);
    });
  }
  attributeChangedCallback(t4, s4, i4) {
    this._$AK(t4, i4);
  }
  _$EC(t4, s4) {
    var _a6;
    const i4 = this.constructor.elementProperties.get(t4), e5 = this.constructor._$Eu(t4, i4);
    if (void 0 !== e5 && true === i4.reflect) {
      const r5 = (void 0 !== ((_a6 = i4.converter) == null ? void 0 : _a6.toAttribute) ? i4.converter : u).toAttribute(s4, i4.type);
      this._$Em = t4, null == r5 ? this.removeAttribute(e5) : this.setAttribute(e5, r5), this._$Em = null;
    }
  }
  _$AK(t4, s4) {
    var _a6;
    const i4 = this.constructor, e5 = i4._$Eh.get(t4);
    if (void 0 !== e5 && this._$Em !== e5) {
      const t5 = i4.getPropertyOptions(e5), r5 = "function" == typeof t5.converter ? { fromAttribute: t5.converter } : void 0 !== ((_a6 = t5.converter) == null ? void 0 : _a6.fromAttribute) ? t5.converter : u;
      this._$Em = e5, this[e5] = r5.fromAttribute(s4, t5.type), this._$Em = null;
    }
  }
  requestUpdate(t4, s4, i4) {
    var _a6;
    if (void 0 !== t4) {
      if (i4 != null ? i4 : i4 = this.constructor.getPropertyOptions(t4), !((_a6 = i4.hasChanged) != null ? _a6 : f)(this[t4], s4))
        return;
      this.P(t4, s4, i4);
    }
    false === this.isUpdatePending && (this._$ES = this._$ET());
  }
  P(t4, s4, i4) {
    var _a6;
    this._$AL.has(t4) || this._$AL.set(t4, s4), true === i4.reflect && this._$Em !== t4 && ((_a6 = this._$Ej) != null ? _a6 : this._$Ej = /* @__PURE__ */ new Set()).add(t4);
  }
  async _$ET() {
    this.isUpdatePending = true;
    try {
      await this._$ES;
    } catch (t5) {
      Promise.reject(t5);
    }
    const t4 = this.scheduleUpdate();
    return null != t4 && await t4, !this.isUpdatePending;
  }
  scheduleUpdate() {
    return this.performUpdate();
  }
  performUpdate() {
    var _a6, _b3;
    if (!this.isUpdatePending)
      return;
    if (!this.hasUpdated) {
      if ((_a6 = this.renderRoot) != null ? _a6 : this.renderRoot = this.createRenderRoot(), this._$Ep) {
        for (const [t6, s5] of this._$Ep)
          this[t6] = s5;
        this._$Ep = void 0;
      }
      const t5 = this.constructor.elementProperties;
      if (t5.size > 0)
        for (const [s5, i4] of t5)
          true !== i4.wrapped || this._$AL.has(s5) || void 0 === this[s5] || this.P(s5, this[s5], i4);
    }
    let t4 = false;
    const s4 = this._$AL;
    try {
      t4 = this.shouldUpdate(s4), t4 ? (this.willUpdate(s4), (_b3 = this._$EO) == null ? void 0 : _b3.forEach((t5) => {
        var _a7;
        return (_a7 = t5.hostUpdate) == null ? void 0 : _a7.call(t5);
      }), this.update(s4)) : this._$EU();
    } catch (s5) {
      throw t4 = false, this._$EU(), s5;
    }
    t4 && this._$AE(s4);
  }
  willUpdate(t4) {
  }
  _$AE(t4) {
    var _a6;
    (_a6 = this._$EO) == null ? void 0 : _a6.forEach((t5) => {
      var _a7;
      return (_a7 = t5.hostUpdated) == null ? void 0 : _a7.call(t5);
    }), this.hasUpdated || (this.hasUpdated = true, this.firstUpdated(t4)), this.updated(t4);
  }
  _$EU() {
    this._$AL = /* @__PURE__ */ new Map(), this.isUpdatePending = false;
  }
  get updateComplete() {
    return this.getUpdateComplete();
  }
  getUpdateComplete() {
    return this._$ES;
  }
  shouldUpdate(t4) {
    return true;
  }
  update(t4) {
    this._$Ej && (this._$Ej = this._$Ej.forEach((t5) => this._$EC(t5, this[t5]))), this._$EU();
  }
  updated(t4) {
  }
  firstUpdated(t4) {
  }
};
var _a2;
b.elementStyles = [], b.shadowRootOptions = { mode: "open" }, b[d("elementProperties")] = /* @__PURE__ */ new Map(), b[d("finalized")] = /* @__PURE__ */ new Map(), p == null ? void 0 : p({ ReactiveElement: b }), ((_a2 = a.reactiveElementVersions) != null ? _a2 : a.reactiveElementVersions = []).push("2.0.4");

// node_modules/lit-html/lit-html.js
var t2 = globalThis;
var i3 = t2.trustedTypes;
var s2 = i3 ? i3.createPolicy("lit-html", { createHTML: (t4) => t4 }) : void 0;
var e3 = "$lit$";
var h2 = `lit$${(Math.random() + "").slice(9)}$`;
var o3 = "?" + h2;
var n3 = `<${o3}>`;
var r3 = document;
var l2 = () => r3.createComment("");
var c3 = (t4) => null === t4 || "object" != typeof t4 && "function" != typeof t4;
var a2 = Array.isArray;
var u2 = (t4) => a2(t4) || "function" == typeof (t4 == null ? void 0 : t4[Symbol.iterator]);
var d2 = "[ 	\n\f\r]";
var f2 = /<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g;
var v = /-->/g;
var _ = />/g;
var m = RegExp(`>|${d2}(?:([^\\s"'>=/]+)(${d2}*=${d2}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`, "g");
var p2 = /'/g;
var g = /"/g;
var $ = /^(?:script|style|textarea|title)$/i;
var y2 = (t4) => (i4, ...s4) => ({ _$litType$: t4, strings: i4, values: s4 });
var x = y2(1);
var b2 = y2(2);
var w = Symbol.for("lit-noChange");
var T = Symbol.for("lit-nothing");
var A = /* @__PURE__ */ new WeakMap();
var E = r3.createTreeWalker(r3, 129);
function C(t4, i4) {
  if (!Array.isArray(t4) || !t4.hasOwnProperty("raw"))
    throw Error("invalid template strings array");
  return void 0 !== s2 ? s2.createHTML(i4) : i4;
}
var P = (t4, i4) => {
  const s4 = t4.length - 1, o4 = [];
  let r5, l3 = 2 === i4 ? "<svg>" : "", c4 = f2;
  for (let i5 = 0; i5 < s4; i5++) {
    const s5 = t4[i5];
    let a3, u3, d3 = -1, y3 = 0;
    for (; y3 < s5.length && (c4.lastIndex = y3, u3 = c4.exec(s5), null !== u3); )
      y3 = c4.lastIndex, c4 === f2 ? "!--" === u3[1] ? c4 = v : void 0 !== u3[1] ? c4 = _ : void 0 !== u3[2] ? ($.test(u3[2]) && (r5 = RegExp("</" + u3[2], "g")), c4 = m) : void 0 !== u3[3] && (c4 = m) : c4 === m ? ">" === u3[0] ? (c4 = r5 != null ? r5 : f2, d3 = -1) : void 0 === u3[1] ? d3 = -2 : (d3 = c4.lastIndex - u3[2].length, a3 = u3[1], c4 = void 0 === u3[3] ? m : '"' === u3[3] ? g : p2) : c4 === g || c4 === p2 ? c4 = m : c4 === v || c4 === _ ? c4 = f2 : (c4 = m, r5 = void 0);
    const x2 = c4 === m && t4[i5 + 1].startsWith("/>") ? " " : "";
    l3 += c4 === f2 ? s5 + n3 : d3 >= 0 ? (o4.push(a3), s5.slice(0, d3) + e3 + s5.slice(d3) + h2 + x2) : s5 + h2 + (-2 === d3 ? i5 : x2);
  }
  return [C(t4, l3 + (t4[s4] || "<?>") + (2 === i4 ? "</svg>" : "")), o4];
};
var V = class {
  constructor({ strings: t4, _$litType$: s4 }, n5) {
    let r5;
    this.parts = [];
    let c4 = 0, a3 = 0;
    const u3 = t4.length - 1, d3 = this.parts, [f3, v2] = P(t4, s4);
    if (this.el = V.createElement(f3, n5), E.currentNode = this.el.content, 2 === s4) {
      const t5 = this.el.content.firstChild;
      t5.replaceWith(...t5.childNodes);
    }
    for (; null !== (r5 = E.nextNode()) && d3.length < u3; ) {
      if (1 === r5.nodeType) {
        if (r5.hasAttributes())
          for (const t5 of r5.getAttributeNames())
            if (t5.endsWith(e3)) {
              const i4 = v2[a3++], s5 = r5.getAttribute(t5).split(h2), e5 = /([.?@])?(.*)/.exec(i4);
              d3.push({ type: 1, index: c4, name: e5[2], strings: s5, ctor: "." === e5[1] ? k : "?" === e5[1] ? H : "@" === e5[1] ? I : R }), r5.removeAttribute(t5);
            } else
              t5.startsWith(h2) && (d3.push({ type: 6, index: c4 }), r5.removeAttribute(t5));
        if ($.test(r5.tagName)) {
          const t5 = r5.textContent.split(h2), s5 = t5.length - 1;
          if (s5 > 0) {
            r5.textContent = i3 ? i3.emptyScript : "";
            for (let i4 = 0; i4 < s5; i4++)
              r5.append(t5[i4], l2()), E.nextNode(), d3.push({ type: 2, index: ++c4 });
            r5.append(t5[s5], l2());
          }
        }
      } else if (8 === r5.nodeType)
        if (r5.data === o3)
          d3.push({ type: 2, index: c4 });
        else {
          let t5 = -1;
          for (; -1 !== (t5 = r5.data.indexOf(h2, t5 + 1)); )
            d3.push({ type: 7, index: c4 }), t5 += h2.length - 1;
        }
      c4++;
    }
  }
  static createElement(t4, i4) {
    const s4 = r3.createElement("template");
    return s4.innerHTML = t4, s4;
  }
};
function N(t4, i4, s4 = t4, e5) {
  var _a6, _b2, _c;
  if (i4 === w)
    return i4;
  let h3 = void 0 !== e5 ? (_a6 = s4._$Co) == null ? void 0 : _a6[e5] : s4._$Cl;
  const o4 = c3(i4) ? void 0 : i4._$litDirective$;
  return (h3 == null ? void 0 : h3.constructor) !== o4 && ((_b2 = h3 == null ? void 0 : h3._$AO) == null ? void 0 : _b2.call(h3, false), void 0 === o4 ? h3 = void 0 : (h3 = new o4(t4), h3._$AT(t4, s4, e5)), void 0 !== e5 ? ((_c = s4._$Co) != null ? _c : s4._$Co = [])[e5] = h3 : s4._$Cl = h3), void 0 !== h3 && (i4 = N(t4, h3._$AS(t4, i4.values), h3, e5)), i4;
}
var S2 = class {
  constructor(t4, i4) {
    this._$AV = [], this._$AN = void 0, this._$AD = t4, this._$AM = i4;
  }
  get parentNode() {
    return this._$AM.parentNode;
  }
  get _$AU() {
    return this._$AM._$AU;
  }
  u(t4) {
    var _a6;
    const { el: { content: i4 }, parts: s4 } = this._$AD, e5 = ((_a6 = t4 == null ? void 0 : t4.creationScope) != null ? _a6 : r3).importNode(i4, true);
    E.currentNode = e5;
    let h3 = E.nextNode(), o4 = 0, n5 = 0, l3 = s4[0];
    for (; void 0 !== l3; ) {
      if (o4 === l3.index) {
        let i5;
        2 === l3.type ? i5 = new M(h3, h3.nextSibling, this, t4) : 1 === l3.type ? i5 = new l3.ctor(h3, l3.name, l3.strings, this, t4) : 6 === l3.type && (i5 = new L(h3, this, t4)), this._$AV.push(i5), l3 = s4[++n5];
      }
      o4 !== (l3 == null ? void 0 : l3.index) && (h3 = E.nextNode(), o4++);
    }
    return E.currentNode = r3, e5;
  }
  p(t4) {
    let i4 = 0;
    for (const s4 of this._$AV)
      void 0 !== s4 && (void 0 !== s4.strings ? (s4._$AI(t4, s4, i4), i4 += s4.strings.length - 2) : s4._$AI(t4[i4])), i4++;
  }
};
var M = class {
  get _$AU() {
    var _a6, _b2;
    return (_b2 = (_a6 = this._$AM) == null ? void 0 : _a6._$AU) != null ? _b2 : this._$Cv;
  }
  constructor(t4, i4, s4, e5) {
    var _a6;
    this.type = 2, this._$AH = T, this._$AN = void 0, this._$AA = t4, this._$AB = i4, this._$AM = s4, this.options = e5, this._$Cv = (_a6 = e5 == null ? void 0 : e5.isConnected) != null ? _a6 : true;
  }
  get parentNode() {
    let t4 = this._$AA.parentNode;
    const i4 = this._$AM;
    return void 0 !== i4 && 11 === (t4 == null ? void 0 : t4.nodeType) && (t4 = i4.parentNode), t4;
  }
  get startNode() {
    return this._$AA;
  }
  get endNode() {
    return this._$AB;
  }
  _$AI(t4, i4 = this) {
    t4 = N(this, t4, i4), c3(t4) ? t4 === T || null == t4 || "" === t4 ? (this._$AH !== T && this._$AR(), this._$AH = T) : t4 !== this._$AH && t4 !== w && this._(t4) : void 0 !== t4._$litType$ ? this.$(t4) : void 0 !== t4.nodeType ? this.T(t4) : u2(t4) ? this.k(t4) : this._(t4);
  }
  S(t4) {
    return this._$AA.parentNode.insertBefore(t4, this._$AB);
  }
  T(t4) {
    this._$AH !== t4 && (this._$AR(), this._$AH = this.S(t4));
  }
  _(t4) {
    this._$AH !== T && c3(this._$AH) ? this._$AA.nextSibling.data = t4 : this.T(r3.createTextNode(t4)), this._$AH = t4;
  }
  $(t4) {
    var _a6;
    const { values: i4, _$litType$: s4 } = t4, e5 = "number" == typeof s4 ? this._$AC(t4) : (void 0 === s4.el && (s4.el = V.createElement(C(s4.h, s4.h[0]), this.options)), s4);
    if (((_a6 = this._$AH) == null ? void 0 : _a6._$AD) === e5)
      this._$AH.p(i4);
    else {
      const t5 = new S2(e5, this), s5 = t5.u(this.options);
      t5.p(i4), this.T(s5), this._$AH = t5;
    }
  }
  _$AC(t4) {
    let i4 = A.get(t4.strings);
    return void 0 === i4 && A.set(t4.strings, i4 = new V(t4)), i4;
  }
  k(t4) {
    a2(this._$AH) || (this._$AH = [], this._$AR());
    const i4 = this._$AH;
    let s4, e5 = 0;
    for (const h3 of t4)
      e5 === i4.length ? i4.push(s4 = new M(this.S(l2()), this.S(l2()), this, this.options)) : s4 = i4[e5], s4._$AI(h3), e5++;
    e5 < i4.length && (this._$AR(s4 && s4._$AB.nextSibling, e5), i4.length = e5);
  }
  _$AR(t4 = this._$AA.nextSibling, i4) {
    var _a6;
    for ((_a6 = this._$AP) == null ? void 0 : _a6.call(this, false, true, i4); t4 && t4 !== this._$AB; ) {
      const i5 = t4.nextSibling;
      t4.remove(), t4 = i5;
    }
  }
  setConnected(t4) {
    var _a6;
    void 0 === this._$AM && (this._$Cv = t4, (_a6 = this._$AP) == null ? void 0 : _a6.call(this, t4));
  }
};
var R = class {
  get tagName() {
    return this.element.tagName;
  }
  get _$AU() {
    return this._$AM._$AU;
  }
  constructor(t4, i4, s4, e5, h3) {
    this.type = 1, this._$AH = T, this._$AN = void 0, this.element = t4, this.name = i4, this._$AM = e5, this.options = h3, s4.length > 2 || "" !== s4[0] || "" !== s4[1] ? (this._$AH = Array(s4.length - 1).fill(new String()), this.strings = s4) : this._$AH = T;
  }
  _$AI(t4, i4 = this, s4, e5) {
    const h3 = this.strings;
    let o4 = false;
    if (void 0 === h3)
      t4 = N(this, t4, i4, 0), o4 = !c3(t4) || t4 !== this._$AH && t4 !== w, o4 && (this._$AH = t4);
    else {
      const e6 = t4;
      let n5, r5;
      for (t4 = h3[0], n5 = 0; n5 < h3.length - 1; n5++)
        r5 = N(this, e6[s4 + n5], i4, n5), r5 === w && (r5 = this._$AH[n5]), o4 || (o4 = !c3(r5) || r5 !== this._$AH[n5]), r5 === T ? t4 = T : t4 !== T && (t4 += (r5 != null ? r5 : "") + h3[n5 + 1]), this._$AH[n5] = r5;
    }
    o4 && !e5 && this.j(t4);
  }
  j(t4) {
    t4 === T ? this.element.removeAttribute(this.name) : this.element.setAttribute(this.name, t4 != null ? t4 : "");
  }
};
var k = class extends R {
  constructor() {
    super(...arguments), this.type = 3;
  }
  j(t4) {
    this.element[this.name] = t4 === T ? void 0 : t4;
  }
};
var H = class extends R {
  constructor() {
    super(...arguments), this.type = 4;
  }
  j(t4) {
    this.element.toggleAttribute(this.name, !!t4 && t4 !== T);
  }
};
var I = class extends R {
  constructor(t4, i4, s4, e5, h3) {
    super(t4, i4, s4, e5, h3), this.type = 5;
  }
  _$AI(t4, i4 = this) {
    var _a6;
    if ((t4 = (_a6 = N(this, t4, i4, 0)) != null ? _a6 : T) === w)
      return;
    const s4 = this._$AH, e5 = t4 === T && s4 !== T || t4.capture !== s4.capture || t4.once !== s4.once || t4.passive !== s4.passive, h3 = t4 !== T && (s4 === T || e5);
    e5 && this.element.removeEventListener(this.name, this, s4), h3 && this.element.addEventListener(this.name, this, t4), this._$AH = t4;
  }
  handleEvent(t4) {
    var _a6, _b2;
    "function" == typeof this._$AH ? this._$AH.call((_b2 = (_a6 = this.options) == null ? void 0 : _a6.host) != null ? _b2 : this.element, t4) : this._$AH.handleEvent(t4);
  }
};
var L = class {
  constructor(t4, i4, s4) {
    this.element = t4, this.type = 6, this._$AN = void 0, this._$AM = i4, this.options = s4;
  }
  get _$AU() {
    return this._$AM._$AU;
  }
  _$AI(t4) {
    N(this, t4);
  }
};
var Z = t2.litHtmlPolyfillSupport;
var _a3;
Z == null ? void 0 : Z(V, M), ((_a3 = t2.litHtmlVersions) != null ? _a3 : t2.litHtmlVersions = []).push("3.1.2");
var j = (t4, i4, s4) => {
  var _a6, _b2;
  const e5 = (_a6 = s4 == null ? void 0 : s4.renderBefore) != null ? _a6 : i4;
  let h3 = e5._$litPart$;
  if (void 0 === h3) {
    const t5 = (_b2 = s4 == null ? void 0 : s4.renderBefore) != null ? _b2 : null;
    e5._$litPart$ = h3 = new M(i4.insertBefore(l2(), t5), t5, void 0, s4 != null ? s4 : {});
  }
  return h3._$AI(t4), h3;
};

// node_modules/lit-element/lit-element.js
var s3 = class extends b {
  constructor() {
    super(...arguments), this.renderOptions = { host: this }, this._$Do = void 0;
  }
  createRenderRoot() {
    var _a6, _b2;
    const t4 = super.createRenderRoot();
    return (_b2 = (_a6 = this.renderOptions).renderBefore) != null ? _b2 : _a6.renderBefore = t4.firstChild, t4;
  }
  update(t4) {
    const i4 = this.render();
    this.hasUpdated || (this.renderOptions.isConnected = this.isConnected), super.update(t4), this._$Do = j(i4, this.renderRoot, this.renderOptions);
  }
  connectedCallback() {
    var _a6;
    super.connectedCallback(), (_a6 = this._$Do) == null ? void 0 : _a6.setConnected(true);
  }
  disconnectedCallback() {
    var _a6;
    super.disconnectedCallback(), (_a6 = this._$Do) == null ? void 0 : _a6.setConnected(false);
  }
  render() {
    return w;
  }
};
var _a4;
s3._$litElement$ = true, s3["finalized", "finalized"] = true, (_a4 = globalThis.litElementHydrateSupport) == null ? void 0 : _a4.call(globalThis, { LitElement: s3 });
var r4 = globalThis.litElementPolyfillSupport;
r4 == null ? void 0 : r4({ LitElement: s3 });
var _a5;
((_a5 = globalThis.litElementVersions) != null ? _a5 : globalThis.litElementVersions = []).push("4.0.4");

// examples/src/playground.ts
var import_tweakpane2 = __toESM(require_tweakpane(), 1);

// node_modules/@dekkai/env/build/lib/node.js
var kIsNodeJS = Object.prototype.toString.call(typeof process !== "undefined" ? process : 0) === "[object process]";
function isNodeJS() {
  return kIsNodeJS;
}

// node_modules/@dekkai/env/build/lib/deno.js
var kIsDeno = Boolean(typeof Deno !== "undefined");
function isDeno() {
  return kIsDeno;
}

// node_modules/@dekkai/data-source/build/lib/chunk/DataChunk.js
var DataChunk = class {
  constructor(source, start, end) {
    this._buffer = null;
    this.source = source;
    this.start = start;
    this.end = end;
  }
  get buffer() {
    return this._buffer;
  }
  get byteLength() {
    return Promise.resolve(this.end - this.start);
  }
  get loaded() {
    return Boolean(this._buffer);
  }
  async load() {
    if (!this._buffer) {
      this._buffer = await this.loadData();
      if (this._buffer === null) {
        this.start = 0;
        this.end = 0;
      } else if (this.end - this.start > this._buffer.byteLength) {
        this.end -= this.end - this.start - this._buffer.byteLength;
      }
    }
  }
  unload() {
    this._buffer = null;
  }
  slice(start, end) {
    return new DataChunk(this, start, end);
  }
  loadData(start = 0, end = this.end - this.start) {
    return this.source.loadData(this.start + start, this.start + end);
  }
};

// node_modules/@dekkai/data-source/build/lib/file/local/LocalDataFile.js
var LocalDataFile = class {
  slice(start, end) {
    return new DataChunk(this, start, end);
  }
};

// node_modules/@dekkai/env/build/lib/moduleLoader.js
function checkDynamicImport() {
  try {
    import(
      /* webpackIgnore: true */
      `${null}`
    ).catch(() => false);
    return true;
  } catch {
    return false;
  }
}
var kSupportsDynamicImport = checkDynamicImport();
var requireFunc = new Function("mod", "return require(mod)");
async function loadModule(mod) {
  if (kSupportsDynamicImport) {
    return await import(
      /* webpackIgnore: true */
      mod.toString()
    );
  } else if (isNodeJS()) {
    return requireFunc(mod);
  }
  throw "ERROR: Can't load modules dynamically on this platform";
}

// node_modules/@dekkai/data-source/build/lib/file/local/LocalDataFileNode.js
var gFS = null;
var kFsPromise = (isNodeJS() ? loadModule("fs") : Promise.resolve(null)).then((fs) => gFS = fs);
var LocalDataFileNode = class extends LocalDataFile {
  constructor(handle, stats) {
    super();
    this.handle = handle;
    this.stats = stats;
  }
  static async fromSource(source) {
    await kFsPromise;
    let handle;
    if (source instanceof URL || typeof source === "string") {
      handle = gFS.openSync(source);
    } else if (typeof source === "number") {
      handle = source;
    } else {
      throw `A LocalDataFileNode cannot be created from a ${typeof source} instance`;
    }
    const stats = gFS.fstatSync(handle);
    return new LocalDataFileNode(handle, stats);
  }
  get byteLength() {
    return Promise.resolve(this.stats.size);
  }
  close() {
    const handle = this.handle;
    kFsPromise.then(() => gFS.closeSync(handle));
    this.handle = null;
    this.stats = null;
  }
  async loadData(start = 0, end = this.stats.size) {
    await kFsPromise;
    const normalizedEnd = Math.min(end, this.stats.size);
    const length5 = normalizedEnd - start;
    const result = new Uint8Array(length5);
    let loaded = 0;
    while (loaded < length5) {
      loaded += await this.loadDataIntoBuffer(result, loaded, start + loaded, normalizedEnd);
    }
    return result.buffer;
  }
  loadDataIntoBuffer(buffer2, offset, start, end) {
    return new Promise((resolve, reject) => {
      const length5 = end - start;
      gFS.read(this.handle, buffer2, offset, length5, start, (err2, bytesRead) => {
        if (err2) {
          reject(err2);
        } else {
          resolve(bytesRead);
        }
      });
    });
  }
};

// node_modules/@dekkai/data-source/build/lib/file/local/LocalDataFileDeno.js
var LocalDataFileDeno = class extends LocalDataFile {
  constructor(file, info) {
    super();
    this.file = file;
    this.info = info;
  }
  static async fromSource(source) {
    if (!(source instanceof URL) && typeof source !== "string") {
      throw `A LocalDataFileDeno cannot be created from a ${typeof source} instance`;
    }
    const stats = await Deno.stat(source);
    if (!stats.isFile) {
      throw `The path "${source} does not point to a file"`;
    }
    const file = await Deno.open(source, { read: true, write: false });
    return new LocalDataFileDeno(file, stats);
  }
  get byteLength() {
    return Promise.resolve(this.info.size);
  }
  close() {
    Deno.close(this.file.rid);
    this.file = null;
    this.info = null;
  }
  async loadData(start = 0, end = this.info.size) {
    const normalizedEnd = Math.min(end, this.info.size);
    const length5 = normalizedEnd - start;
    const result = new Uint8Array(length5);
    let loaded = 0;
    while (loaded < length5) {
      loaded += await this.loadDataIntoBuffer(result, loaded, start + loaded, normalizedEnd);
    }
    return result.buffer;
  }
  async loadDataIntoBuffer(buffer2, offset, start, end) {
    const cursorPosition = await this.file.seek(start, Deno.SeekMode.Start);
    if (cursorPosition !== start) {
      throw "ERROR: Cannot seek to the desired position";
    }
    const result = new Uint8Array(end - start);
    const bytesRead = await this.file.read(result);
    buffer2.set(result, offset);
    return bytesRead;
  }
};

// node_modules/@dekkai/data-source/build/lib/file/local/LocalDataFileBrowser.js
var LocalDataFileBrowser = class extends LocalDataFile {
  constructor(blob) {
    super();
    this.blob = blob;
  }
  static async fromSource(source) {
    return new LocalDataFileBrowser(source);
  }
  get byteLength() {
    return Promise.resolve(this.blob.size);
  }
  close() {
    this.blob = null;
  }
  async loadData(start = 0, end = this.blob.size) {
    const slice = this.blob.slice(start, Math.min(end, this.blob.size));
    return await this.loadBlob(slice);
  }
  loadBlob(blob) {
    return new Promise((resolve) => {
      const reader = new FileReader();
      reader.onload = () => {
        resolve(reader.result);
      };
      reader.readAsArrayBuffer(blob);
    });
  }
};

// node_modules/@dekkai/event-emitter/build/lib/EventEmitter.js
var kOmniEvent = Symbol("EventEmitter::omni::event");
var EventEmitterMixin = class {
  static mixin(Parent) {
    const ParentConstructor = Parent;
    class EventEmitter2 extends ParentConstructor {
      constructor() {
        super(...arguments);
        this.listeners = /* @__PURE__ */ new Map();
      }
      static get omniEvent() {
        return kOmniEvent;
      }
      on(type, callback) {
        const queue = this.listeners.get(type);
        if (queue) {
          queue.add(callback);
        } else {
          this.listeners.set(type, /* @__PURE__ */ new Set([callback]));
        }
      }
      off(type, callback) {
        const queue = this.listeners.get(type);
        if (queue) {
          queue.delete(callback);
        }
      }
      emit(type, ...args) {
        if (type === kOmniEvent) {
          return;
        }
        if (this.listeners.has(type)) {
          const stack = new Set(this.listeners.get(type));
          for (const callback of stack) {
            callback.call(this, type, ...args);
          }
        }
        if (this.listeners.has(kOmniEvent)) {
          const omni = new Set(this.listeners.get(kOmniEvent));
          for (const callback of omni) {
            callback.call(this, type, ...args);
          }
        }
      }
    }
    return EventEmitter2;
  }
};
var EventEmitter = class extends EventEmitterMixin.mixin(EventEmitterMixin) {
};

// node_modules/@dekkai/data-source/build/lib/file/remote/RemoteDataFile.js
var RemoteDataFile = class extends EventEmitter {
  slice(start, end) {
    return new DataChunk(this, start, end);
  }
};
RemoteDataFile.LOADING_START = Symbol("DataFileEvents::LoadingStart");
RemoteDataFile.LOADING_PROGRESS = Symbol("DataFileEvents::LoadingProgress");
RemoteDataFile.LOADING_COMPLETE = Symbol("DataFileEvents::LoadingComplete");

// node_modules/@dekkai/data-source/build/lib/file/remote/RemoteDataFileBrowser.js
var kSizeOf4MB = 1024 * 1024 * 4;
var RemoteDataFileBrowser = class extends RemoteDataFile {
  constructor(source) {
    super();
    this._byteLength = null;
    this._bytesLoaded = 0;
    this._onLoadingComplete = null;
    this._isLoadingComplete = false;
    this.buffer = null;
    this.source = source;
    this._onLoadingComplete = {
      promise: null,
      resolve: null,
      reject: null,
      started: false
    };
    this._onLoadingComplete.promise = new Promise((resolve, reject) => {
      this._onLoadingComplete.resolve = resolve;
      this._onLoadingComplete.reject = reject;
    });
  }
  static async fromSource(source) {
    const result = new RemoteDataFileBrowser(source);
    await result.startDownloading();
    return result;
  }
  get byteLength() {
    if (this._byteLength === null) {
      return new Promise((resolve) => {
        const handleEvent = (e5, byteLength) => {
          this.off(RemoteDataFile.LOADING_START, handleEvent);
          this._byteLength = byteLength;
          resolve(byteLength);
        };
        this.on(RemoteDataFile.LOADING_START, handleEvent);
      });
    }
    return Promise.resolve(this._byteLength);
  }
  get bytesLoaded() {
    return this._bytesLoaded;
  }
  get onLoadingComplete() {
    return this._onLoadingComplete.promise;
  }
  get isLoadingComplete() {
    return this._isLoadingComplete;
  }
  async startDownloading() {
    if (!this._onLoadingComplete.started) {
      this._onLoadingComplete.started = true;
      let response;
      try {
        response = await fetch(this.source);
      } catch (e5) {
        this._onLoadingComplete.reject(e5);
        throw e5;
      }
      if (!response.ok) {
        const notOK = new Error("Network response was not ok");
        this._onLoadingComplete.reject(notOK);
        throw notOK;
      }
      setTimeout(() => this.readFileStream(response));
    }
  }
  async loadData(start = 0, end = this._byteLength) {
    if (this._isLoadingComplete && start >= this._byteLength) {
      return new ArrayBuffer(0);
    }
    if (this._bytesLoaded >= end || this._isLoadingComplete) {
      return this.buffer.slice(start, Math.min(end, this._bytesLoaded));
    }
    return new Promise((resolve) => {
      const handleEvent = (e5, loaded) => {
        if (loaded >= end || e5 === RemoteDataFile.LOADING_COMPLETE) {
          this.off(RemoteDataFile.LOADING_PROGRESS, handleEvent);
          this.off(RemoteDataFile.LOADING_COMPLETE, handleEvent);
          resolve(this.buffer.slice(start, Math.min(end, loaded)));
        }
      };
      this.on(RemoteDataFile.LOADING_PROGRESS, handleEvent);
      this.on(RemoteDataFile.LOADING_COMPLETE, handleEvent);
    });
  }
  async readFileStream(response) {
    const contentLength = response.headers.get("content-length");
    if (contentLength !== null) {
      this._byteLength = parseInt(contentLength, 10);
      this.buffer = new ArrayBuffer(this._byteLength);
    } else {
      this._byteLength = -1;
      this.buffer = new ArrayBuffer(kSizeOf4MB);
    }
    this._bytesLoaded = 0;
    this.emit(RemoteDataFile.LOADING_START, this._byteLength);
    if (this._byteLength === 0) {
      this.emit(RemoteDataFile.LOADING_PROGRESS, this._bytesLoaded, this._byteLength);
      this._isLoadingComplete = true;
      this.emit(RemoteDataFile.LOADING_COMPLETE, this._byteLength);
      this._onLoadingComplete.resolve(this._byteLength);
    } else {
      const reader = response.body.getReader();
      let view = new Uint8Array(this.buffer);
      while (true) {
        try {
          const result = await reader.read();
          if (result.done) {
            this._byteLength = this._bytesLoaded;
            this._isLoadingComplete = true;
            this.emit(RemoteDataFile.LOADING_COMPLETE, this._byteLength);
            this._onLoadingComplete.resolve(this._byteLength);
            break;
          }
          if (this.buffer.byteLength < this._bytesLoaded + result.value.byteLength) {
            const oldView = view;
            this.buffer = new ArrayBuffer(this._bytesLoaded + Math.max(result.value.byteLength, kSizeOf4MB));
            view = new Uint8Array(this.buffer);
            view.set(oldView, 0);
          }
          view.set(result.value, this._bytesLoaded);
          this.emit(RemoteDataFile.LOADING_PROGRESS, this._bytesLoaded, this._byteLength);
          this._bytesLoaded += result.value.length;
        } catch (e5) {
          this._onLoadingComplete.reject(e5);
          throw e5;
        }
      }
    }
  }
};

// node_modules/@dekkai/data-source/build/lib/file/remote/RemoteDataFileNode.js
var gHTTP = null;
var gHTTPS = null;
var gURL = null;
var kLibPromise = (isNodeJS() ? Promise.all([loadModule("http"), loadModule("https"), loadModule("url")]) : Promise.resolve([null, null])).then((libs) => {
  gHTTP = libs[0];
  gHTTPS = libs[1];
  gURL = libs[2];
});
var kSizeOf4MB2 = 1024 * 1024 * 4;
var RemoteDataFileNode = class extends RemoteDataFile {
  constructor(source) {
    super();
    this._byteLength = null;
    this._bytesLoaded = null;
    this._onLoadingComplete = null;
    this._isLoadingComplete = false;
    this.buffer = null;
    this.source = source;
    this._onLoadingComplete = {
      promise: null,
      resolve: null,
      reject: null,
      started: false
    };
    this._onLoadingComplete.promise = new Promise((resolve, reject) => {
      this._onLoadingComplete.resolve = resolve;
      this._onLoadingComplete.reject = reject;
    });
  }
  static async fromSource(source) {
    const result = new RemoteDataFileNode(source);
    await result.startDownloading();
    return result;
  }
  get byteLength() {
    if (this._byteLength === null) {
      return new Promise((resolve) => {
        const handleEvent = (e5, byteLength) => {
          this.off(RemoteDataFile.LOADING_START, handleEvent);
          this._byteLength = byteLength;
          resolve(byteLength);
        };
        this.on(RemoteDataFile.LOADING_START, handleEvent);
      });
    }
    return Promise.resolve(this._byteLength);
  }
  get bytesLoaded() {
    return this._bytesLoaded;
  }
  get onLoadingComplete() {
    return this._onLoadingComplete.promise;
  }
  get isLoadingComplete() {
    return this._isLoadingComplete;
  }
  startDownloading() {
    return new Promise((resolve, reject) => {
      kLibPromise.then(() => {
        const url = this.source instanceof gURL.URL ? this.source : gURL.parse(this.source);
        const protocol = url.protocol === "https" ? gHTTPS : gHTTP;
        protocol.get(this.source, (response) => {
          if (response.statusCode < 200 || response.statusCode >= 300) {
            response.resume();
            const notOK = new Error("Network response was not ok");
            this._onLoadingComplete.reject(notOK);
            reject(notOK);
            return;
          }
          resolve();
          setTimeout(() => this.readFileStream(response));
        });
      });
    });
  }
  async loadData(start = 0, end = this._byteLength) {
    if (this._isLoadingComplete && start >= this._byteLength) {
      return new ArrayBuffer(0);
    }
    if (this._bytesLoaded >= end || this._isLoadingComplete) {
      return this.buffer.slice(start, Math.min(end, this._bytesLoaded));
    }
    return new Promise((resolve) => {
      const handleEvent = (e5, loaded) => {
        if (loaded >= end || e5 === RemoteDataFile.LOADING_COMPLETE) {
          this.off(RemoteDataFile.LOADING_PROGRESS, handleEvent);
          this.off(RemoteDataFile.LOADING_COMPLETE, handleEvent);
          resolve(this.buffer.slice(start, Math.min(end, loaded)));
        }
      };
      this.on(RemoteDataFile.LOADING_PROGRESS, handleEvent);
      this.on(RemoteDataFile.LOADING_COMPLETE, handleEvent);
    });
  }
  async readFileStream(response) {
    const contentLength = response.headers["content-length"];
    if (contentLength !== null && contentLength !== void 0) {
      this._byteLength = parseInt(contentLength, 10);
      this.buffer = new ArrayBuffer(this._byteLength);
    } else {
      this._byteLength = -1;
      this.buffer = new ArrayBuffer(kSizeOf4MB2);
    }
    this._bytesLoaded = 0;
    this.emit(RemoteDataFile.LOADING_START, this._byteLength);
    if (this._byteLength === 0) {
      this.emit(RemoteDataFile.LOADING_PROGRESS, this._bytesLoaded, this._byteLength);
      this._isLoadingComplete = true;
      this.emit(RemoteDataFile.LOADING_COMPLETE, this._byteLength);
      this._onLoadingComplete.resolve(this._byteLength);
      response.resume();
    } else {
      let view = new Uint8Array(this.buffer);
      response.on("error", (error) => {
        this._onLoadingComplete.reject(error);
        throw error;
      });
      response.on("data", (chunk) => {
        if (this.buffer.byteLength < this._bytesLoaded + chunk.byteLength) {
          const oldView = view;
          this.buffer = new ArrayBuffer(this._bytesLoaded + Math.max(chunk.byteLength, kSizeOf4MB2));
          view = new Uint8Array(this.buffer);
          view.set(oldView, 0);
        }
        view.set(chunk, this._bytesLoaded);
        this.emit(RemoteDataFile.LOADING_PROGRESS, this._bytesLoaded, this._byteLength);
        this._bytesLoaded += chunk.byteLength;
      });
      response.on("end", () => {
        this._byteLength = this._bytesLoaded;
        this._isLoadingComplete = true;
        this.emit(RemoteDataFile.LOADING_COMPLETE, this._byteLength);
        this._onLoadingComplete.resolve(this._byteLength);
      });
    }
  }
};

// node_modules/@dekkai/data-source/build/lib/file/DataFile.js
var DataFile = class {
  static async fromLocalSource(source) {
    if (isNodeJS()) {
      return LocalDataFileNode.fromSource(source);
    } else if (isDeno()) {
      return LocalDataFileDeno.fromSource(source);
    }
    return LocalDataFileBrowser.fromSource(source);
  }
  static async fromRemoteSource(source) {
    if (isNodeJS()) {
      return RemoteDataFileNode.fromSource(source);
    } else if (isDeno()) {
      return RemoteDataFileBrowser.fromSource(source);
    }
    return RemoteDataFileBrowser.fromSource(source);
  }
};

// node_modules/gl-matrix/esm/common.js
var EPSILON = 1e-6;
var ARRAY_TYPE = typeof Float32Array !== "undefined" ? Float32Array : Array;
var RANDOM = Math.random;
var degree = Math.PI / 180;
if (!Math.hypot)
  Math.hypot = function() {
    var y3 = 0, i4 = arguments.length;
    while (i4--) {
      y3 += arguments[i4] * arguments[i4];
    }
    return Math.sqrt(y3);
  };

// node_modules/gl-matrix/esm/mat3.js
function create() {
  var out2 = new ARRAY_TYPE(9);
  if (ARRAY_TYPE != Float32Array) {
    out2[1] = 0;
    out2[2] = 0;
    out2[3] = 0;
    out2[5] = 0;
    out2[6] = 0;
    out2[7] = 0;
  }
  out2[0] = 1;
  out2[4] = 1;
  out2[8] = 1;
  return out2;
}

// node_modules/gl-matrix/esm/mat4.js
var mat4_exports = {};
__export(mat4_exports, {
  add: () => add,
  adjoint: () => adjoint,
  clone: () => clone,
  copy: () => copy,
  create: () => create2,
  determinant: () => determinant,
  equals: () => equals,
  exactEquals: () => exactEquals,
  frob: () => frob,
  fromQuat: () => fromQuat,
  fromQuat2: () => fromQuat2,
  fromRotation: () => fromRotation,
  fromRotationTranslation: () => fromRotationTranslation,
  fromRotationTranslationScale: () => fromRotationTranslationScale,
  fromRotationTranslationScaleOrigin: () => fromRotationTranslationScaleOrigin,
  fromScaling: () => fromScaling,
  fromTranslation: () => fromTranslation,
  fromValues: () => fromValues,
  fromXRotation: () => fromXRotation,
  fromYRotation: () => fromYRotation,
  fromZRotation: () => fromZRotation,
  frustum: () => frustum,
  getRotation: () => getRotation,
  getScaling: () => getScaling,
  getTranslation: () => getTranslation,
  identity: () => identity,
  invert: () => invert,
  lookAt: () => lookAt,
  mul: () => mul,
  multiply: () => multiply,
  multiplyScalar: () => multiplyScalar,
  multiplyScalarAndAdd: () => multiplyScalarAndAdd,
  ortho: () => ortho,
  orthoNO: () => orthoNO,
  orthoZO: () => orthoZO,
  perspective: () => perspective,
  perspectiveFromFieldOfView: () => perspectiveFromFieldOfView,
  perspectiveNO: () => perspectiveNO,
  perspectiveZO: () => perspectiveZO,
  rotate: () => rotate,
  rotateX: () => rotateX,
  rotateY: () => rotateY,
  rotateZ: () => rotateZ,
  scale: () => scale,
  set: () => set,
  str: () => str,
  sub: () => sub,
  subtract: () => subtract,
  targetTo: () => targetTo,
  translate: () => translate,
  transpose: () => transpose
});
function create2() {
  var out2 = new ARRAY_TYPE(16);
  if (ARRAY_TYPE != Float32Array) {
    out2[1] = 0;
    out2[2] = 0;
    out2[3] = 0;
    out2[4] = 0;
    out2[6] = 0;
    out2[7] = 0;
    out2[8] = 0;
    out2[9] = 0;
    out2[11] = 0;
    out2[12] = 0;
    out2[13] = 0;
    out2[14] = 0;
  }
  out2[0] = 1;
  out2[5] = 1;
  out2[10] = 1;
  out2[15] = 1;
  return out2;
}
function clone(a3) {
  var out2 = new ARRAY_TYPE(16);
  out2[0] = a3[0];
  out2[1] = a3[1];
  out2[2] = a3[2];
  out2[3] = a3[3];
  out2[4] = a3[4];
  out2[5] = a3[5];
  out2[6] = a3[6];
  out2[7] = a3[7];
  out2[8] = a3[8];
  out2[9] = a3[9];
  out2[10] = a3[10];
  out2[11] = a3[11];
  out2[12] = a3[12];
  out2[13] = a3[13];
  out2[14] = a3[14];
  out2[15] = a3[15];
  return out2;
}
function copy(out2, a3) {
  out2[0] = a3[0];
  out2[1] = a3[1];
  out2[2] = a3[2];
  out2[3] = a3[3];
  out2[4] = a3[4];
  out2[5] = a3[5];
  out2[6] = a3[6];
  out2[7] = a3[7];
  out2[8] = a3[8];
  out2[9] = a3[9];
  out2[10] = a3[10];
  out2[11] = a3[11];
  out2[12] = a3[12];
  out2[13] = a3[13];
  out2[14] = a3[14];
  out2[15] = a3[15];
  return out2;
}
function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {
  var out2 = new ARRAY_TYPE(16);
  out2[0] = m00;
  out2[1] = m01;
  out2[2] = m02;
  out2[3] = m03;
  out2[4] = m10;
  out2[5] = m11;
  out2[6] = m12;
  out2[7] = m13;
  out2[8] = m20;
  out2[9] = m21;
  out2[10] = m22;
  out2[11] = m23;
  out2[12] = m30;
  out2[13] = m31;
  out2[14] = m32;
  out2[15] = m33;
  return out2;
}
function set(out2, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {
  out2[0] = m00;
  out2[1] = m01;
  out2[2] = m02;
  out2[3] = m03;
  out2[4] = m10;
  out2[5] = m11;
  out2[6] = m12;
  out2[7] = m13;
  out2[8] = m20;
  out2[9] = m21;
  out2[10] = m22;
  out2[11] = m23;
  out2[12] = m30;
  out2[13] = m31;
  out2[14] = m32;
  out2[15] = m33;
  return out2;
}
function identity(out2) {
  out2[0] = 1;
  out2[1] = 0;
  out2[2] = 0;
  out2[3] = 0;
  out2[4] = 0;
  out2[5] = 1;
  out2[6] = 0;
  out2[7] = 0;
  out2[8] = 0;
  out2[9] = 0;
  out2[10] = 1;
  out2[11] = 0;
  out2[12] = 0;
  out2[13] = 0;
  out2[14] = 0;
  out2[15] = 1;
  return out2;
}
function transpose(out2, a3) {
  if (out2 === a3) {
    var a01 = a3[1], a02 = a3[2], a03 = a3[3];
    var a12 = a3[6], a13 = a3[7];
    var a23 = a3[11];
    out2[1] = a3[4];
    out2[2] = a3[8];
    out2[3] = a3[12];
    out2[4] = a01;
    out2[6] = a3[9];
    out2[7] = a3[13];
    out2[8] = a02;
    out2[9] = a12;
    out2[11] = a3[14];
    out2[12] = a03;
    out2[13] = a13;
    out2[14] = a23;
  } else {
    out2[0] = a3[0];
    out2[1] = a3[4];
    out2[2] = a3[8];
    out2[3] = a3[12];
    out2[4] = a3[1];
    out2[5] = a3[5];
    out2[6] = a3[9];
    out2[7] = a3[13];
    out2[8] = a3[2];
    out2[9] = a3[6];
    out2[10] = a3[10];
    out2[11] = a3[14];
    out2[12] = a3[3];
    out2[13] = a3[7];
    out2[14] = a3[11];
    out2[15] = a3[15];
  }
  return out2;
}
function invert(out2, a3) {
  var a00 = a3[0], a01 = a3[1], a02 = a3[2], a03 = a3[3];
  var a10 = a3[4], a11 = a3[5], a12 = a3[6], a13 = a3[7];
  var a20 = a3[8], a21 = a3[9], a22 = a3[10], a23 = a3[11];
  var a30 = a3[12], a31 = a3[13], a32 = a3[14], a33 = a3[15];
  var b00 = a00 * a11 - a01 * a10;
  var b01 = a00 * a12 - a02 * a10;
  var b02 = a00 * a13 - a03 * a10;
  var b03 = a01 * a12 - a02 * a11;
  var b04 = a01 * a13 - a03 * a11;
  var b05 = a02 * a13 - a03 * a12;
  var b06 = a20 * a31 - a21 * a30;
  var b07 = a20 * a32 - a22 * a30;
  var b08 = a20 * a33 - a23 * a30;
  var b09 = a21 * a32 - a22 * a31;
  var b10 = a21 * a33 - a23 * a31;
  var b11 = a22 * a33 - a23 * a32;
  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
  if (!det) {
    return null;
  }
  det = 1 / det;
  out2[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;
  out2[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;
  out2[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;
  out2[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;
  out2[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;
  out2[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;
  out2[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;
  out2[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;
  out2[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;
  out2[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;
  out2[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;
  out2[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;
  out2[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;
  out2[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;
  out2[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;
  out2[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;
  return out2;
}
function adjoint(out2, a3) {
  var a00 = a3[0], a01 = a3[1], a02 = a3[2], a03 = a3[3];
  var a10 = a3[4], a11 = a3[5], a12 = a3[6], a13 = a3[7];
  var a20 = a3[8], a21 = a3[9], a22 = a3[10], a23 = a3[11];
  var a30 = a3[12], a31 = a3[13], a32 = a3[14], a33 = a3[15];
  out2[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);
  out2[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));
  out2[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);
  out2[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));
  out2[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));
  out2[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);
  out2[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));
  out2[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);
  out2[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);
  out2[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));
  out2[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);
  out2[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));
  out2[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));
  out2[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);
  out2[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));
  out2[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);
  return out2;
}
function determinant(a3) {
  var a00 = a3[0], a01 = a3[1], a02 = a3[2], a03 = a3[3];
  var a10 = a3[4], a11 = a3[5], a12 = a3[6], a13 = a3[7];
  var a20 = a3[8], a21 = a3[9], a22 = a3[10], a23 = a3[11];
  var a30 = a3[12], a31 = a3[13], a32 = a3[14], a33 = a3[15];
  var b00 = a00 * a11 - a01 * a10;
  var b01 = a00 * a12 - a02 * a10;
  var b02 = a00 * a13 - a03 * a10;
  var b03 = a01 * a12 - a02 * a11;
  var b04 = a01 * a13 - a03 * a11;
  var b05 = a02 * a13 - a03 * a12;
  var b06 = a20 * a31 - a21 * a30;
  var b07 = a20 * a32 - a22 * a30;
  var b08 = a20 * a33 - a23 * a30;
  var b09 = a21 * a32 - a22 * a31;
  var b10 = a21 * a33 - a23 * a31;
  var b11 = a22 * a33 - a23 * a32;
  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
}
function multiply(out2, a3, b3) {
  var a00 = a3[0], a01 = a3[1], a02 = a3[2], a03 = a3[3];
  var a10 = a3[4], a11 = a3[5], a12 = a3[6], a13 = a3[7];
  var a20 = a3[8], a21 = a3[9], a22 = a3[10], a23 = a3[11];
  var a30 = a3[12], a31 = a3[13], a32 = a3[14], a33 = a3[15];
  var b0 = b3[0], b1 = b3[1], b22 = b3[2], b32 = b3[3];
  out2[0] = b0 * a00 + b1 * a10 + b22 * a20 + b32 * a30;
  out2[1] = b0 * a01 + b1 * a11 + b22 * a21 + b32 * a31;
  out2[2] = b0 * a02 + b1 * a12 + b22 * a22 + b32 * a32;
  out2[3] = b0 * a03 + b1 * a13 + b22 * a23 + b32 * a33;
  b0 = b3[4];
  b1 = b3[5];
  b22 = b3[6];
  b32 = b3[7];
  out2[4] = b0 * a00 + b1 * a10 + b22 * a20 + b32 * a30;
  out2[5] = b0 * a01 + b1 * a11 + b22 * a21 + b32 * a31;
  out2[6] = b0 * a02 + b1 * a12 + b22 * a22 + b32 * a32;
  out2[7] = b0 * a03 + b1 * a13 + b22 * a23 + b32 * a33;
  b0 = b3[8];
  b1 = b3[9];
  b22 = b3[10];
  b32 = b3[11];
  out2[8] = b0 * a00 + b1 * a10 + b22 * a20 + b32 * a30;
  out2[9] = b0 * a01 + b1 * a11 + b22 * a21 + b32 * a31;
  out2[10] = b0 * a02 + b1 * a12 + b22 * a22 + b32 * a32;
  out2[11] = b0 * a03 + b1 * a13 + b22 * a23 + b32 * a33;
  b0 = b3[12];
  b1 = b3[13];
  b22 = b3[14];
  b32 = b3[15];
  out2[12] = b0 * a00 + b1 * a10 + b22 * a20 + b32 * a30;
  out2[13] = b0 * a01 + b1 * a11 + b22 * a21 + b32 * a31;
  out2[14] = b0 * a02 + b1 * a12 + b22 * a22 + b32 * a32;
  out2[15] = b0 * a03 + b1 * a13 + b22 * a23 + b32 * a33;
  return out2;
}
function translate(out2, a3, v2) {
  var x2 = v2[0], y3 = v2[1], z = v2[2];
  var a00, a01, a02, a03;
  var a10, a11, a12, a13;
  var a20, a21, a22, a23;
  if (a3 === out2) {
    out2[12] = a3[0] * x2 + a3[4] * y3 + a3[8] * z + a3[12];
    out2[13] = a3[1] * x2 + a3[5] * y3 + a3[9] * z + a3[13];
    out2[14] = a3[2] * x2 + a3[6] * y3 + a3[10] * z + a3[14];
    out2[15] = a3[3] * x2 + a3[7] * y3 + a3[11] * z + a3[15];
  } else {
    a00 = a3[0];
    a01 = a3[1];
    a02 = a3[2];
    a03 = a3[3];
    a10 = a3[4];
    a11 = a3[5];
    a12 = a3[6];
    a13 = a3[7];
    a20 = a3[8];
    a21 = a3[9];
    a22 = a3[10];
    a23 = a3[11];
    out2[0] = a00;
    out2[1] = a01;
    out2[2] = a02;
    out2[3] = a03;
    out2[4] = a10;
    out2[5] = a11;
    out2[6] = a12;
    out2[7] = a13;
    out2[8] = a20;
    out2[9] = a21;
    out2[10] = a22;
    out2[11] = a23;
    out2[12] = a00 * x2 + a10 * y3 + a20 * z + a3[12];
    out2[13] = a01 * x2 + a11 * y3 + a21 * z + a3[13];
    out2[14] = a02 * x2 + a12 * y3 + a22 * z + a3[14];
    out2[15] = a03 * x2 + a13 * y3 + a23 * z + a3[15];
  }
  return out2;
}
function scale(out2, a3, v2) {
  var x2 = v2[0], y3 = v2[1], z = v2[2];
  out2[0] = a3[0] * x2;
  out2[1] = a3[1] * x2;
  out2[2] = a3[2] * x2;
  out2[3] = a3[3] * x2;
  out2[4] = a3[4] * y3;
  out2[5] = a3[5] * y3;
  out2[6] = a3[6] * y3;
  out2[7] = a3[7] * y3;
  out2[8] = a3[8] * z;
  out2[9] = a3[9] * z;
  out2[10] = a3[10] * z;
  out2[11] = a3[11] * z;
  out2[12] = a3[12];
  out2[13] = a3[13];
  out2[14] = a3[14];
  out2[15] = a3[15];
  return out2;
}
function rotate(out2, a3, rad, axis) {
  var x2 = axis[0], y3 = axis[1], z = axis[2];
  var len5 = Math.hypot(x2, y3, z);
  var s4, c4, t4;
  var a00, a01, a02, a03;
  var a10, a11, a12, a13;
  var a20, a21, a22, a23;
  var b00, b01, b02;
  var b10, b11, b12;
  var b20, b21, b22;
  if (len5 < EPSILON) {
    return null;
  }
  len5 = 1 / len5;
  x2 *= len5;
  y3 *= len5;
  z *= len5;
  s4 = Math.sin(rad);
  c4 = Math.cos(rad);
  t4 = 1 - c4;
  a00 = a3[0];
  a01 = a3[1];
  a02 = a3[2];
  a03 = a3[3];
  a10 = a3[4];
  a11 = a3[5];
  a12 = a3[6];
  a13 = a3[7];
  a20 = a3[8];
  a21 = a3[9];
  a22 = a3[10];
  a23 = a3[11];
  b00 = x2 * x2 * t4 + c4;
  b01 = y3 * x2 * t4 + z * s4;
  b02 = z * x2 * t4 - y3 * s4;
  b10 = x2 * y3 * t4 - z * s4;
  b11 = y3 * y3 * t4 + c4;
  b12 = z * y3 * t4 + x2 * s4;
  b20 = x2 * z * t4 + y3 * s4;
  b21 = y3 * z * t4 - x2 * s4;
  b22 = z * z * t4 + c4;
  out2[0] = a00 * b00 + a10 * b01 + a20 * b02;
  out2[1] = a01 * b00 + a11 * b01 + a21 * b02;
  out2[2] = a02 * b00 + a12 * b01 + a22 * b02;
  out2[3] = a03 * b00 + a13 * b01 + a23 * b02;
  out2[4] = a00 * b10 + a10 * b11 + a20 * b12;
  out2[5] = a01 * b10 + a11 * b11 + a21 * b12;
  out2[6] = a02 * b10 + a12 * b11 + a22 * b12;
  out2[7] = a03 * b10 + a13 * b11 + a23 * b12;
  out2[8] = a00 * b20 + a10 * b21 + a20 * b22;
  out2[9] = a01 * b20 + a11 * b21 + a21 * b22;
  out2[10] = a02 * b20 + a12 * b21 + a22 * b22;
  out2[11] = a03 * b20 + a13 * b21 + a23 * b22;
  if (a3 !== out2) {
    out2[12] = a3[12];
    out2[13] = a3[13];
    out2[14] = a3[14];
    out2[15] = a3[15];
  }
  return out2;
}
function rotateX(out2, a3, rad) {
  var s4 = Math.sin(rad);
  var c4 = Math.cos(rad);
  var a10 = a3[4];
  var a11 = a3[5];
  var a12 = a3[6];
  var a13 = a3[7];
  var a20 = a3[8];
  var a21 = a3[9];
  var a22 = a3[10];
  var a23 = a3[11];
  if (a3 !== out2) {
    out2[0] = a3[0];
    out2[1] = a3[1];
    out2[2] = a3[2];
    out2[3] = a3[3];
    out2[12] = a3[12];
    out2[13] = a3[13];
    out2[14] = a3[14];
    out2[15] = a3[15];
  }
  out2[4] = a10 * c4 + a20 * s4;
  out2[5] = a11 * c4 + a21 * s4;
  out2[6] = a12 * c4 + a22 * s4;
  out2[7] = a13 * c4 + a23 * s4;
  out2[8] = a20 * c4 - a10 * s4;
  out2[9] = a21 * c4 - a11 * s4;
  out2[10] = a22 * c4 - a12 * s4;
  out2[11] = a23 * c4 - a13 * s4;
  return out2;
}
function rotateY(out2, a3, rad) {
  var s4 = Math.sin(rad);
  var c4 = Math.cos(rad);
  var a00 = a3[0];
  var a01 = a3[1];
  var a02 = a3[2];
  var a03 = a3[3];
  var a20 = a3[8];
  var a21 = a3[9];
  var a22 = a3[10];
  var a23 = a3[11];
  if (a3 !== out2) {
    out2[4] = a3[4];
    out2[5] = a3[5];
    out2[6] = a3[6];
    out2[7] = a3[7];
    out2[12] = a3[12];
    out2[13] = a3[13];
    out2[14] = a3[14];
    out2[15] = a3[15];
  }
  out2[0] = a00 * c4 - a20 * s4;
  out2[1] = a01 * c4 - a21 * s4;
  out2[2] = a02 * c4 - a22 * s4;
  out2[3] = a03 * c4 - a23 * s4;
  out2[8] = a00 * s4 + a20 * c4;
  out2[9] = a01 * s4 + a21 * c4;
  out2[10] = a02 * s4 + a22 * c4;
  out2[11] = a03 * s4 + a23 * c4;
  return out2;
}
function rotateZ(out2, a3, rad) {
  var s4 = Math.sin(rad);
  var c4 = Math.cos(rad);
  var a00 = a3[0];
  var a01 = a3[1];
  var a02 = a3[2];
  var a03 = a3[3];
  var a10 = a3[4];
  var a11 = a3[5];
  var a12 = a3[6];
  var a13 = a3[7];
  if (a3 !== out2) {
    out2[8] = a3[8];
    out2[9] = a3[9];
    out2[10] = a3[10];
    out2[11] = a3[11];
    out2[12] = a3[12];
    out2[13] = a3[13];
    out2[14] = a3[14];
    out2[15] = a3[15];
  }
  out2[0] = a00 * c4 + a10 * s4;
  out2[1] = a01 * c4 + a11 * s4;
  out2[2] = a02 * c4 + a12 * s4;
  out2[3] = a03 * c4 + a13 * s4;
  out2[4] = a10 * c4 - a00 * s4;
  out2[5] = a11 * c4 - a01 * s4;
  out2[6] = a12 * c4 - a02 * s4;
  out2[7] = a13 * c4 - a03 * s4;
  return out2;
}
function fromTranslation(out2, v2) {
  out2[0] = 1;
  out2[1] = 0;
  out2[2] = 0;
  out2[3] = 0;
  out2[4] = 0;
  out2[5] = 1;
  out2[6] = 0;
  out2[7] = 0;
  out2[8] = 0;
  out2[9] = 0;
  out2[10] = 1;
  out2[11] = 0;
  out2[12] = v2[0];
  out2[13] = v2[1];
  out2[14] = v2[2];
  out2[15] = 1;
  return out2;
}
function fromScaling(out2, v2) {
  out2[0] = v2[0];
  out2[1] = 0;
  out2[2] = 0;
  out2[3] = 0;
  out2[4] = 0;
  out2[5] = v2[1];
  out2[6] = 0;
  out2[7] = 0;
  out2[8] = 0;
  out2[9] = 0;
  out2[10] = v2[2];
  out2[11] = 0;
  out2[12] = 0;
  out2[13] = 0;
  out2[14] = 0;
  out2[15] = 1;
  return out2;
}
function fromRotation(out2, rad, axis) {
  var x2 = axis[0], y3 = axis[1], z = axis[2];
  var len5 = Math.hypot(x2, y3, z);
  var s4, c4, t4;
  if (len5 < EPSILON) {
    return null;
  }
  len5 = 1 / len5;
  x2 *= len5;
  y3 *= len5;
  z *= len5;
  s4 = Math.sin(rad);
  c4 = Math.cos(rad);
  t4 = 1 - c4;
  out2[0] = x2 * x2 * t4 + c4;
  out2[1] = y3 * x2 * t4 + z * s4;
  out2[2] = z * x2 * t4 - y3 * s4;
  out2[3] = 0;
  out2[4] = x2 * y3 * t4 - z * s4;
  out2[5] = y3 * y3 * t4 + c4;
  out2[6] = z * y3 * t4 + x2 * s4;
  out2[7] = 0;
  out2[8] = x2 * z * t4 + y3 * s4;
  out2[9] = y3 * z * t4 - x2 * s4;
  out2[10] = z * z * t4 + c4;
  out2[11] = 0;
  out2[12] = 0;
  out2[13] = 0;
  out2[14] = 0;
  out2[15] = 1;
  return out2;
}
function fromXRotation(out2, rad) {
  var s4 = Math.sin(rad);
  var c4 = Math.cos(rad);
  out2[0] = 1;
  out2[1] = 0;
  out2[2] = 0;
  out2[3] = 0;
  out2[4] = 0;
  out2[5] = c4;
  out2[6] = s4;
  out2[7] = 0;
  out2[8] = 0;
  out2[9] = -s4;
  out2[10] = c4;
  out2[11] = 0;
  out2[12] = 0;
  out2[13] = 0;
  out2[14] = 0;
  out2[15] = 1;
  return out2;
}
function fromYRotation(out2, rad) {
  var s4 = Math.sin(rad);
  var c4 = Math.cos(rad);
  out2[0] = c4;
  out2[1] = 0;
  out2[2] = -s4;
  out2[3] = 0;
  out2[4] = 0;
  out2[5] = 1;
  out2[6] = 0;
  out2[7] = 0;
  out2[8] = s4;
  out2[9] = 0;
  out2[10] = c4;
  out2[11] = 0;
  out2[12] = 0;
  out2[13] = 0;
  out2[14] = 0;
  out2[15] = 1;
  return out2;
}
function fromZRotation(out2, rad) {
  var s4 = Math.sin(rad);
  var c4 = Math.cos(rad);
  out2[0] = c4;
  out2[1] = s4;
  out2[2] = 0;
  out2[3] = 0;
  out2[4] = -s4;
  out2[5] = c4;
  out2[6] = 0;
  out2[7] = 0;
  out2[8] = 0;
  out2[9] = 0;
  out2[10] = 1;
  out2[11] = 0;
  out2[12] = 0;
  out2[13] = 0;
  out2[14] = 0;
  out2[15] = 1;
  return out2;
}
function fromRotationTranslation(out2, q, v2) {
  var x2 = q[0], y3 = q[1], z = q[2], w2 = q[3];
  var x22 = x2 + x2;
  var y22 = y3 + y3;
  var z2 = z + z;
  var xx = x2 * x22;
  var xy = x2 * y22;
  var xz = x2 * z2;
  var yy = y3 * y22;
  var yz = y3 * z2;
  var zz = z * z2;
  var wx = w2 * x22;
  var wy = w2 * y22;
  var wz = w2 * z2;
  out2[0] = 1 - (yy + zz);
  out2[1] = xy + wz;
  out2[2] = xz - wy;
  out2[3] = 0;
  out2[4] = xy - wz;
  out2[5] = 1 - (xx + zz);
  out2[6] = yz + wx;
  out2[7] = 0;
  out2[8] = xz + wy;
  out2[9] = yz - wx;
  out2[10] = 1 - (xx + yy);
  out2[11] = 0;
  out2[12] = v2[0];
  out2[13] = v2[1];
  out2[14] = v2[2];
  out2[15] = 1;
  return out2;
}
function fromQuat2(out2, a3) {
  var translation = new ARRAY_TYPE(3);
  var bx = -a3[0], by = -a3[1], bz = -a3[2], bw = a3[3], ax = a3[4], ay = a3[5], az = a3[6], aw = a3[7];
  var magnitude = bx * bx + by * by + bz * bz + bw * bw;
  if (magnitude > 0) {
    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;
    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;
    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;
  } else {
    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;
    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;
    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;
  }
  fromRotationTranslation(out2, a3, translation);
  return out2;
}
function getTranslation(out2, mat) {
  out2[0] = mat[12];
  out2[1] = mat[13];
  out2[2] = mat[14];
  return out2;
}
function getScaling(out2, mat) {
  var m11 = mat[0];
  var m12 = mat[1];
  var m13 = mat[2];
  var m21 = mat[4];
  var m22 = mat[5];
  var m23 = mat[6];
  var m31 = mat[8];
  var m32 = mat[9];
  var m33 = mat[10];
  out2[0] = Math.hypot(m11, m12, m13);
  out2[1] = Math.hypot(m21, m22, m23);
  out2[2] = Math.hypot(m31, m32, m33);
  return out2;
}
function getRotation(out2, mat) {
  var scaling = new ARRAY_TYPE(3);
  getScaling(scaling, mat);
  var is1 = 1 / scaling[0];
  var is2 = 1 / scaling[1];
  var is3 = 1 / scaling[2];
  var sm11 = mat[0] * is1;
  var sm12 = mat[1] * is2;
  var sm13 = mat[2] * is3;
  var sm21 = mat[4] * is1;
  var sm22 = mat[5] * is2;
  var sm23 = mat[6] * is3;
  var sm31 = mat[8] * is1;
  var sm32 = mat[9] * is2;
  var sm33 = mat[10] * is3;
  var trace = sm11 + sm22 + sm33;
  var S3 = 0;
  if (trace > 0) {
    S3 = Math.sqrt(trace + 1) * 2;
    out2[3] = 0.25 * S3;
    out2[0] = (sm23 - sm32) / S3;
    out2[1] = (sm31 - sm13) / S3;
    out2[2] = (sm12 - sm21) / S3;
  } else if (sm11 > sm22 && sm11 > sm33) {
    S3 = Math.sqrt(1 + sm11 - sm22 - sm33) * 2;
    out2[3] = (sm23 - sm32) / S3;
    out2[0] = 0.25 * S3;
    out2[1] = (sm12 + sm21) / S3;
    out2[2] = (sm31 + sm13) / S3;
  } else if (sm22 > sm33) {
    S3 = Math.sqrt(1 + sm22 - sm11 - sm33) * 2;
    out2[3] = (sm31 - sm13) / S3;
    out2[0] = (sm12 + sm21) / S3;
    out2[1] = 0.25 * S3;
    out2[2] = (sm23 + sm32) / S3;
  } else {
    S3 = Math.sqrt(1 + sm33 - sm11 - sm22) * 2;
    out2[3] = (sm12 - sm21) / S3;
    out2[0] = (sm31 + sm13) / S3;
    out2[1] = (sm23 + sm32) / S3;
    out2[2] = 0.25 * S3;
  }
  return out2;
}
function fromRotationTranslationScale(out2, q, v2, s4) {
  var x2 = q[0], y3 = q[1], z = q[2], w2 = q[3];
  var x22 = x2 + x2;
  var y22 = y3 + y3;
  var z2 = z + z;
  var xx = x2 * x22;
  var xy = x2 * y22;
  var xz = x2 * z2;
  var yy = y3 * y22;
  var yz = y3 * z2;
  var zz = z * z2;
  var wx = w2 * x22;
  var wy = w2 * y22;
  var wz = w2 * z2;
  var sx = s4[0];
  var sy = s4[1];
  var sz = s4[2];
  out2[0] = (1 - (yy + zz)) * sx;
  out2[1] = (xy + wz) * sx;
  out2[2] = (xz - wy) * sx;
  out2[3] = 0;
  out2[4] = (xy - wz) * sy;
  out2[5] = (1 - (xx + zz)) * sy;
  out2[6] = (yz + wx) * sy;
  out2[7] = 0;
  out2[8] = (xz + wy) * sz;
  out2[9] = (yz - wx) * sz;
  out2[10] = (1 - (xx + yy)) * sz;
  out2[11] = 0;
  out2[12] = v2[0];
  out2[13] = v2[1];
  out2[14] = v2[2];
  out2[15] = 1;
  return out2;
}
function fromRotationTranslationScaleOrigin(out2, q, v2, s4, o4) {
  var x2 = q[0], y3 = q[1], z = q[2], w2 = q[3];
  var x22 = x2 + x2;
  var y22 = y3 + y3;
  var z2 = z + z;
  var xx = x2 * x22;
  var xy = x2 * y22;
  var xz = x2 * z2;
  var yy = y3 * y22;
  var yz = y3 * z2;
  var zz = z * z2;
  var wx = w2 * x22;
  var wy = w2 * y22;
  var wz = w2 * z2;
  var sx = s4[0];
  var sy = s4[1];
  var sz = s4[2];
  var ox = o4[0];
  var oy = o4[1];
  var oz = o4[2];
  var out0 = (1 - (yy + zz)) * sx;
  var out1 = (xy + wz) * sx;
  var out22 = (xz - wy) * sx;
  var out4 = (xy - wz) * sy;
  var out5 = (1 - (xx + zz)) * sy;
  var out6 = (yz + wx) * sy;
  var out8 = (xz + wy) * sz;
  var out9 = (yz - wx) * sz;
  var out10 = (1 - (xx + yy)) * sz;
  out2[0] = out0;
  out2[1] = out1;
  out2[2] = out22;
  out2[3] = 0;
  out2[4] = out4;
  out2[5] = out5;
  out2[6] = out6;
  out2[7] = 0;
  out2[8] = out8;
  out2[9] = out9;
  out2[10] = out10;
  out2[11] = 0;
  out2[12] = v2[0] + ox - (out0 * ox + out4 * oy + out8 * oz);
  out2[13] = v2[1] + oy - (out1 * ox + out5 * oy + out9 * oz);
  out2[14] = v2[2] + oz - (out22 * ox + out6 * oy + out10 * oz);
  out2[15] = 1;
  return out2;
}
function fromQuat(out2, q) {
  var x2 = q[0], y3 = q[1], z = q[2], w2 = q[3];
  var x22 = x2 + x2;
  var y22 = y3 + y3;
  var z2 = z + z;
  var xx = x2 * x22;
  var yx = y3 * x22;
  var yy = y3 * y22;
  var zx = z * x22;
  var zy = z * y22;
  var zz = z * z2;
  var wx = w2 * x22;
  var wy = w2 * y22;
  var wz = w2 * z2;
  out2[0] = 1 - yy - zz;
  out2[1] = yx + wz;
  out2[2] = zx - wy;
  out2[3] = 0;
  out2[4] = yx - wz;
  out2[5] = 1 - xx - zz;
  out2[6] = zy + wx;
  out2[7] = 0;
  out2[8] = zx + wy;
  out2[9] = zy - wx;
  out2[10] = 1 - xx - yy;
  out2[11] = 0;
  out2[12] = 0;
  out2[13] = 0;
  out2[14] = 0;
  out2[15] = 1;
  return out2;
}
function frustum(out2, left, right, bottom, top, near, far) {
  var rl = 1 / (right - left);
  var tb = 1 / (top - bottom);
  var nf = 1 / (near - far);
  out2[0] = near * 2 * rl;
  out2[1] = 0;
  out2[2] = 0;
  out2[3] = 0;
  out2[4] = 0;
  out2[5] = near * 2 * tb;
  out2[6] = 0;
  out2[7] = 0;
  out2[8] = (right + left) * rl;
  out2[9] = (top + bottom) * tb;
  out2[10] = (far + near) * nf;
  out2[11] = -1;
  out2[12] = 0;
  out2[13] = 0;
  out2[14] = far * near * 2 * nf;
  out2[15] = 0;
  return out2;
}
function perspectiveNO(out2, fovy, aspect, near, far) {
  var f3 = 1 / Math.tan(fovy / 2), nf;
  out2[0] = f3 / aspect;
  out2[1] = 0;
  out2[2] = 0;
  out2[3] = 0;
  out2[4] = 0;
  out2[5] = f3;
  out2[6] = 0;
  out2[7] = 0;
  out2[8] = 0;
  out2[9] = 0;
  out2[11] = -1;
  out2[12] = 0;
  out2[13] = 0;
  out2[15] = 0;
  if (far != null && far !== Infinity) {
    nf = 1 / (near - far);
    out2[10] = (far + near) * nf;
    out2[14] = 2 * far * near * nf;
  } else {
    out2[10] = -1;
    out2[14] = -2 * near;
  }
  return out2;
}
var perspective = perspectiveNO;
function perspectiveZO(out2, fovy, aspect, near, far) {
  var f3 = 1 / Math.tan(fovy / 2), nf;
  out2[0] = f3 / aspect;
  out2[1] = 0;
  out2[2] = 0;
  out2[3] = 0;
  out2[4] = 0;
  out2[5] = f3;
  out2[6] = 0;
  out2[7] = 0;
  out2[8] = 0;
  out2[9] = 0;
  out2[11] = -1;
  out2[12] = 0;
  out2[13] = 0;
  out2[15] = 0;
  if (far != null && far !== Infinity) {
    nf = 1 / (near - far);
    out2[10] = far * nf;
    out2[14] = far * near * nf;
  } else {
    out2[10] = -1;
    out2[14] = -near;
  }
  return out2;
}
function perspectiveFromFieldOfView(out2, fov, near, far) {
  var upTan = Math.tan(fov.upDegrees * Math.PI / 180);
  var downTan = Math.tan(fov.downDegrees * Math.PI / 180);
  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180);
  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180);
  var xScale = 2 / (leftTan + rightTan);
  var yScale = 2 / (upTan + downTan);
  out2[0] = xScale;
  out2[1] = 0;
  out2[2] = 0;
  out2[3] = 0;
  out2[4] = 0;
  out2[5] = yScale;
  out2[6] = 0;
  out2[7] = 0;
  out2[8] = -((leftTan - rightTan) * xScale * 0.5);
  out2[9] = (upTan - downTan) * yScale * 0.5;
  out2[10] = far / (near - far);
  out2[11] = -1;
  out2[12] = 0;
  out2[13] = 0;
  out2[14] = far * near / (near - far);
  out2[15] = 0;
  return out2;
}
function orthoNO(out2, left, right, bottom, top, near, far) {
  var lr = 1 / (left - right);
  var bt = 1 / (bottom - top);
  var nf = 1 / (near - far);
  out2[0] = -2 * lr;
  out2[1] = 0;
  out2[2] = 0;
  out2[3] = 0;
  out2[4] = 0;
  out2[5] = -2 * bt;
  out2[6] = 0;
  out2[7] = 0;
  out2[8] = 0;
  out2[9] = 0;
  out2[10] = 2 * nf;
  out2[11] = 0;
  out2[12] = (left + right) * lr;
  out2[13] = (top + bottom) * bt;
  out2[14] = (far + near) * nf;
  out2[15] = 1;
  return out2;
}
var ortho = orthoNO;
function orthoZO(out2, left, right, bottom, top, near, far) {
  var lr = 1 / (left - right);
  var bt = 1 / (bottom - top);
  var nf = 1 / (near - far);
  out2[0] = -2 * lr;
  out2[1] = 0;
  out2[2] = 0;
  out2[3] = 0;
  out2[4] = 0;
  out2[5] = -2 * bt;
  out2[6] = 0;
  out2[7] = 0;
  out2[8] = 0;
  out2[9] = 0;
  out2[10] = nf;
  out2[11] = 0;
  out2[12] = (left + right) * lr;
  out2[13] = (top + bottom) * bt;
  out2[14] = near * nf;
  out2[15] = 1;
  return out2;
}
function lookAt(out2, eye, center, up) {
  var x0, x1, x2, y0, y1, y22, z0, z1, z2, len5;
  var eyex = eye[0];
  var eyey = eye[1];
  var eyez = eye[2];
  var upx = up[0];
  var upy = up[1];
  var upz = up[2];
  var centerx = center[0];
  var centery = center[1];
  var centerz = center[2];
  if (Math.abs(eyex - centerx) < EPSILON && Math.abs(eyey - centery) < EPSILON && Math.abs(eyez - centerz) < EPSILON) {
    return identity(out2);
  }
  z0 = eyex - centerx;
  z1 = eyey - centery;
  z2 = eyez - centerz;
  len5 = 1 / Math.hypot(z0, z1, z2);
  z0 *= len5;
  z1 *= len5;
  z2 *= len5;
  x0 = upy * z2 - upz * z1;
  x1 = upz * z0 - upx * z2;
  x2 = upx * z1 - upy * z0;
  len5 = Math.hypot(x0, x1, x2);
  if (!len5) {
    x0 = 0;
    x1 = 0;
    x2 = 0;
  } else {
    len5 = 1 / len5;
    x0 *= len5;
    x1 *= len5;
    x2 *= len5;
  }
  y0 = z1 * x2 - z2 * x1;
  y1 = z2 * x0 - z0 * x2;
  y22 = z0 * x1 - z1 * x0;
  len5 = Math.hypot(y0, y1, y22);
  if (!len5) {
    y0 = 0;
    y1 = 0;
    y22 = 0;
  } else {
    len5 = 1 / len5;
    y0 *= len5;
    y1 *= len5;
    y22 *= len5;
  }
  out2[0] = x0;
  out2[1] = y0;
  out2[2] = z0;
  out2[3] = 0;
  out2[4] = x1;
  out2[5] = y1;
  out2[6] = z1;
  out2[7] = 0;
  out2[8] = x2;
  out2[9] = y22;
  out2[10] = z2;
  out2[11] = 0;
  out2[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);
  out2[13] = -(y0 * eyex + y1 * eyey + y22 * eyez);
  out2[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);
  out2[15] = 1;
  return out2;
}
function targetTo(out2, eye, target, up) {
  var eyex = eye[0], eyey = eye[1], eyez = eye[2], upx = up[0], upy = up[1], upz = up[2];
  var z0 = eyex - target[0], z1 = eyey - target[1], z2 = eyez - target[2];
  var len5 = z0 * z0 + z1 * z1 + z2 * z2;
  if (len5 > 0) {
    len5 = 1 / Math.sqrt(len5);
    z0 *= len5;
    z1 *= len5;
    z2 *= len5;
  }
  var x0 = upy * z2 - upz * z1, x1 = upz * z0 - upx * z2, x2 = upx * z1 - upy * z0;
  len5 = x0 * x0 + x1 * x1 + x2 * x2;
  if (len5 > 0) {
    len5 = 1 / Math.sqrt(len5);
    x0 *= len5;
    x1 *= len5;
    x2 *= len5;
  }
  out2[0] = x0;
  out2[1] = x1;
  out2[2] = x2;
  out2[3] = 0;
  out2[4] = z1 * x2 - z2 * x1;
  out2[5] = z2 * x0 - z0 * x2;
  out2[6] = z0 * x1 - z1 * x0;
  out2[7] = 0;
  out2[8] = z0;
  out2[9] = z1;
  out2[10] = z2;
  out2[11] = 0;
  out2[12] = eyex;
  out2[13] = eyey;
  out2[14] = eyez;
  out2[15] = 1;
  return out2;
}
function str(a3) {
  return "mat4(" + a3[0] + ", " + a3[1] + ", " + a3[2] + ", " + a3[3] + ", " + a3[4] + ", " + a3[5] + ", " + a3[6] + ", " + a3[7] + ", " + a3[8] + ", " + a3[9] + ", " + a3[10] + ", " + a3[11] + ", " + a3[12] + ", " + a3[13] + ", " + a3[14] + ", " + a3[15] + ")";
}
function frob(a3) {
  return Math.hypot(a3[0], a3[1], a3[2], a3[3], a3[4], a3[5], a3[6], a3[7], a3[8], a3[9], a3[10], a3[11], a3[12], a3[13], a3[14], a3[15]);
}
function add(out2, a3, b3) {
  out2[0] = a3[0] + b3[0];
  out2[1] = a3[1] + b3[1];
  out2[2] = a3[2] + b3[2];
  out2[3] = a3[3] + b3[3];
  out2[4] = a3[4] + b3[4];
  out2[5] = a3[5] + b3[5];
  out2[6] = a3[6] + b3[6];
  out2[7] = a3[7] + b3[7];
  out2[8] = a3[8] + b3[8];
  out2[9] = a3[9] + b3[9];
  out2[10] = a3[10] + b3[10];
  out2[11] = a3[11] + b3[11];
  out2[12] = a3[12] + b3[12];
  out2[13] = a3[13] + b3[13];
  out2[14] = a3[14] + b3[14];
  out2[15] = a3[15] + b3[15];
  return out2;
}
function subtract(out2, a3, b3) {
  out2[0] = a3[0] - b3[0];
  out2[1] = a3[1] - b3[1];
  out2[2] = a3[2] - b3[2];
  out2[3] = a3[3] - b3[3];
  out2[4] = a3[4] - b3[4];
  out2[5] = a3[5] - b3[5];
  out2[6] = a3[6] - b3[6];
  out2[7] = a3[7] - b3[7];
  out2[8] = a3[8] - b3[8];
  out2[9] = a3[9] - b3[9];
  out2[10] = a3[10] - b3[10];
  out2[11] = a3[11] - b3[11];
  out2[12] = a3[12] - b3[12];
  out2[13] = a3[13] - b3[13];
  out2[14] = a3[14] - b3[14];
  out2[15] = a3[15] - b3[15];
  return out2;
}
function multiplyScalar(out2, a3, b3) {
  out2[0] = a3[0] * b3;
  out2[1] = a3[1] * b3;
  out2[2] = a3[2] * b3;
  out2[3] = a3[3] * b3;
  out2[4] = a3[4] * b3;
  out2[5] = a3[5] * b3;
  out2[6] = a3[6] * b3;
  out2[7] = a3[7] * b3;
  out2[8] = a3[8] * b3;
  out2[9] = a3[9] * b3;
  out2[10] = a3[10] * b3;
  out2[11] = a3[11] * b3;
  out2[12] = a3[12] * b3;
  out2[13] = a3[13] * b3;
  out2[14] = a3[14] * b3;
  out2[15] = a3[15] * b3;
  return out2;
}
function multiplyScalarAndAdd(out2, a3, b3, scale6) {
  out2[0] = a3[0] + b3[0] * scale6;
  out2[1] = a3[1] + b3[1] * scale6;
  out2[2] = a3[2] + b3[2] * scale6;
  out2[3] = a3[3] + b3[3] * scale6;
  out2[4] = a3[4] + b3[4] * scale6;
  out2[5] = a3[5] + b3[5] * scale6;
  out2[6] = a3[6] + b3[6] * scale6;
  out2[7] = a3[7] + b3[7] * scale6;
  out2[8] = a3[8] + b3[8] * scale6;
  out2[9] = a3[9] + b3[9] * scale6;
  out2[10] = a3[10] + b3[10] * scale6;
  out2[11] = a3[11] + b3[11] * scale6;
  out2[12] = a3[12] + b3[12] * scale6;
  out2[13] = a3[13] + b3[13] * scale6;
  out2[14] = a3[14] + b3[14] * scale6;
  out2[15] = a3[15] + b3[15] * scale6;
  return out2;
}
function exactEquals(a3, b3) {
  return a3[0] === b3[0] && a3[1] === b3[1] && a3[2] === b3[2] && a3[3] === b3[3] && a3[4] === b3[4] && a3[5] === b3[5] && a3[6] === b3[6] && a3[7] === b3[7] && a3[8] === b3[8] && a3[9] === b3[9] && a3[10] === b3[10] && a3[11] === b3[11] && a3[12] === b3[12] && a3[13] === b3[13] && a3[14] === b3[14] && a3[15] === b3[15];
}
function equals(a3, b3) {
  var a0 = a3[0], a1 = a3[1], a22 = a3[2], a32 = a3[3];
  var a4 = a3[4], a5 = a3[5], a6 = a3[6], a7 = a3[7];
  var a8 = a3[8], a9 = a3[9], a10 = a3[10], a11 = a3[11];
  var a12 = a3[12], a13 = a3[13], a14 = a3[14], a15 = a3[15];
  var b0 = b3[0], b1 = b3[1], b22 = b3[2], b32 = b3[3];
  var b4 = b3[4], b5 = b3[5], b6 = b3[6], b7 = b3[7];
  var b8 = b3[8], b9 = b3[9], b10 = b3[10], b11 = b3[11];
  var b12 = b3[12], b13 = b3[13], b14 = b3[14], b15 = b3[15];
  return Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) && Math.abs(a22 - b22) <= EPSILON * Math.max(1, Math.abs(a22), Math.abs(b22)) && Math.abs(a32 - b32) <= EPSILON * Math.max(1, Math.abs(a32), Math.abs(b32)) && Math.abs(a4 - b4) <= EPSILON * Math.max(1, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= EPSILON * Math.max(1, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= EPSILON * Math.max(1, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= EPSILON * Math.max(1, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= EPSILON * Math.max(1, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= EPSILON * Math.max(1, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= EPSILON * Math.max(1, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= EPSILON * Math.max(1, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= EPSILON * Math.max(1, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= EPSILON * Math.max(1, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= EPSILON * Math.max(1, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= EPSILON * Math.max(1, Math.abs(a15), Math.abs(b15));
}
var mul = multiply;
var sub = subtract;

// node_modules/gl-matrix/esm/quat.js
var quat_exports = {};
__export(quat_exports, {
  add: () => add4,
  calculateW: () => calculateW,
  clone: () => clone4,
  conjugate: () => conjugate,
  copy: () => copy4,
  create: () => create5,
  dot: () => dot3,
  equals: () => equals4,
  exactEquals: () => exactEquals4,
  exp: () => exp,
  fromEuler: () => fromEuler,
  fromMat3: () => fromMat3,
  fromValues: () => fromValues4,
  getAngle: () => getAngle,
  getAxisAngle: () => getAxisAngle,
  identity: () => identity2,
  invert: () => invert2,
  len: () => len3,
  length: () => length3,
  lerp: () => lerp3,
  ln: () => ln,
  mul: () => mul4,
  multiply: () => multiply4,
  normalize: () => normalize3,
  pow: () => pow,
  random: () => random3,
  rotateX: () => rotateX3,
  rotateY: () => rotateY3,
  rotateZ: () => rotateZ3,
  rotationTo: () => rotationTo,
  scale: () => scale4,
  set: () => set4,
  setAxes: () => setAxes,
  setAxisAngle: () => setAxisAngle,
  slerp: () => slerp,
  sqlerp: () => sqlerp,
  sqrLen: () => sqrLen3,
  squaredLength: () => squaredLength3,
  str: () => str4
});

// node_modules/gl-matrix/esm/vec3.js
var vec3_exports = {};
__export(vec3_exports, {
  add: () => add2,
  angle: () => angle,
  bezier: () => bezier,
  ceil: () => ceil,
  clone: () => clone2,
  copy: () => copy2,
  create: () => create3,
  cross: () => cross,
  dist: () => dist,
  distance: () => distance,
  div: () => div,
  divide: () => divide,
  dot: () => dot,
  equals: () => equals2,
  exactEquals: () => exactEquals2,
  floor: () => floor,
  forEach: () => forEach,
  fromValues: () => fromValues2,
  hermite: () => hermite,
  inverse: () => inverse,
  len: () => len,
  length: () => length,
  lerp: () => lerp,
  max: () => max,
  min: () => min,
  mul: () => mul2,
  multiply: () => multiply2,
  negate: () => negate,
  normalize: () => normalize,
  random: () => random,
  rotateX: () => rotateX2,
  rotateY: () => rotateY2,
  rotateZ: () => rotateZ2,
  round: () => round,
  scale: () => scale2,
  scaleAndAdd: () => scaleAndAdd,
  set: () => set2,
  sqrDist: () => sqrDist,
  sqrLen: () => sqrLen,
  squaredDistance: () => squaredDistance,
  squaredLength: () => squaredLength,
  str: () => str2,
  sub: () => sub2,
  subtract: () => subtract2,
  transformMat3: () => transformMat3,
  transformMat4: () => transformMat4,
  transformQuat: () => transformQuat,
  zero: () => zero
});
function create3() {
  var out2 = new ARRAY_TYPE(3);
  if (ARRAY_TYPE != Float32Array) {
    out2[0] = 0;
    out2[1] = 0;
    out2[2] = 0;
  }
  return out2;
}
function clone2(a3) {
  var out2 = new ARRAY_TYPE(3);
  out2[0] = a3[0];
  out2[1] = a3[1];
  out2[2] = a3[2];
  return out2;
}
function length(a3) {
  var x2 = a3[0];
  var y3 = a3[1];
  var z = a3[2];
  return Math.hypot(x2, y3, z);
}
function fromValues2(x2, y3, z) {
  var out2 = new ARRAY_TYPE(3);
  out2[0] = x2;
  out2[1] = y3;
  out2[2] = z;
  return out2;
}
function copy2(out2, a3) {
  out2[0] = a3[0];
  out2[1] = a3[1];
  out2[2] = a3[2];
  return out2;
}
function set2(out2, x2, y3, z) {
  out2[0] = x2;
  out2[1] = y3;
  out2[2] = z;
  return out2;
}
function add2(out2, a3, b3) {
  out2[0] = a3[0] + b3[0];
  out2[1] = a3[1] + b3[1];
  out2[2] = a3[2] + b3[2];
  return out2;
}
function subtract2(out2, a3, b3) {
  out2[0] = a3[0] - b3[0];
  out2[1] = a3[1] - b3[1];
  out2[2] = a3[2] - b3[2];
  return out2;
}
function multiply2(out2, a3, b3) {
  out2[0] = a3[0] * b3[0];
  out2[1] = a3[1] * b3[1];
  out2[2] = a3[2] * b3[2];
  return out2;
}
function divide(out2, a3, b3) {
  out2[0] = a3[0] / b3[0];
  out2[1] = a3[1] / b3[1];
  out2[2] = a3[2] / b3[2];
  return out2;
}
function ceil(out2, a3) {
  out2[0] = Math.ceil(a3[0]);
  out2[1] = Math.ceil(a3[1]);
  out2[2] = Math.ceil(a3[2]);
  return out2;
}
function floor(out2, a3) {
  out2[0] = Math.floor(a3[0]);
  out2[1] = Math.floor(a3[1]);
  out2[2] = Math.floor(a3[2]);
  return out2;
}
function min(out2, a3, b3) {
  out2[0] = Math.min(a3[0], b3[0]);
  out2[1] = Math.min(a3[1], b3[1]);
  out2[2] = Math.min(a3[2], b3[2]);
  return out2;
}
function max(out2, a3, b3) {
  out2[0] = Math.max(a3[0], b3[0]);
  out2[1] = Math.max(a3[1], b3[1]);
  out2[2] = Math.max(a3[2], b3[2]);
  return out2;
}
function round(out2, a3) {
  out2[0] = Math.round(a3[0]);
  out2[1] = Math.round(a3[1]);
  out2[2] = Math.round(a3[2]);
  return out2;
}
function scale2(out2, a3, b3) {
  out2[0] = a3[0] * b3;
  out2[1] = a3[1] * b3;
  out2[2] = a3[2] * b3;
  return out2;
}
function scaleAndAdd(out2, a3, b3, scale6) {
  out2[0] = a3[0] + b3[0] * scale6;
  out2[1] = a3[1] + b3[1] * scale6;
  out2[2] = a3[2] + b3[2] * scale6;
  return out2;
}
function distance(a3, b3) {
  var x2 = b3[0] - a3[0];
  var y3 = b3[1] - a3[1];
  var z = b3[2] - a3[2];
  return Math.hypot(x2, y3, z);
}
function squaredDistance(a3, b3) {
  var x2 = b3[0] - a3[0];
  var y3 = b3[1] - a3[1];
  var z = b3[2] - a3[2];
  return x2 * x2 + y3 * y3 + z * z;
}
function squaredLength(a3) {
  var x2 = a3[0];
  var y3 = a3[1];
  var z = a3[2];
  return x2 * x2 + y3 * y3 + z * z;
}
function negate(out2, a3) {
  out2[0] = -a3[0];
  out2[1] = -a3[1];
  out2[2] = -a3[2];
  return out2;
}
function inverse(out2, a3) {
  out2[0] = 1 / a3[0];
  out2[1] = 1 / a3[1];
  out2[2] = 1 / a3[2];
  return out2;
}
function normalize(out2, a3) {
  var x2 = a3[0];
  var y3 = a3[1];
  var z = a3[2];
  var len5 = x2 * x2 + y3 * y3 + z * z;
  if (len5 > 0) {
    len5 = 1 / Math.sqrt(len5);
  }
  out2[0] = a3[0] * len5;
  out2[1] = a3[1] * len5;
  out2[2] = a3[2] * len5;
  return out2;
}
function dot(a3, b3) {
  return a3[0] * b3[0] + a3[1] * b3[1] + a3[2] * b3[2];
}
function cross(out2, a3, b3) {
  var ax = a3[0], ay = a3[1], az = a3[2];
  var bx = b3[0], by = b3[1], bz = b3[2];
  out2[0] = ay * bz - az * by;
  out2[1] = az * bx - ax * bz;
  out2[2] = ax * by - ay * bx;
  return out2;
}
function lerp(out2, a3, b3, t4) {
  var ax = a3[0];
  var ay = a3[1];
  var az = a3[2];
  out2[0] = ax + t4 * (b3[0] - ax);
  out2[1] = ay + t4 * (b3[1] - ay);
  out2[2] = az + t4 * (b3[2] - az);
  return out2;
}
function hermite(out2, a3, b3, c4, d3, t4) {
  var factorTimes2 = t4 * t4;
  var factor1 = factorTimes2 * (2 * t4 - 3) + 1;
  var factor2 = factorTimes2 * (t4 - 2) + t4;
  var factor3 = factorTimes2 * (t4 - 1);
  var factor4 = factorTimes2 * (3 - 2 * t4);
  out2[0] = a3[0] * factor1 + b3[0] * factor2 + c4[0] * factor3 + d3[0] * factor4;
  out2[1] = a3[1] * factor1 + b3[1] * factor2 + c4[1] * factor3 + d3[1] * factor4;
  out2[2] = a3[2] * factor1 + b3[2] * factor2 + c4[2] * factor3 + d3[2] * factor4;
  return out2;
}
function bezier(out2, a3, b3, c4, d3, t4) {
  var inverseFactor = 1 - t4;
  var inverseFactorTimesTwo = inverseFactor * inverseFactor;
  var factorTimes2 = t4 * t4;
  var factor1 = inverseFactorTimesTwo * inverseFactor;
  var factor2 = 3 * t4 * inverseFactorTimesTwo;
  var factor3 = 3 * factorTimes2 * inverseFactor;
  var factor4 = factorTimes2 * t4;
  out2[0] = a3[0] * factor1 + b3[0] * factor2 + c4[0] * factor3 + d3[0] * factor4;
  out2[1] = a3[1] * factor1 + b3[1] * factor2 + c4[1] * factor3 + d3[1] * factor4;
  out2[2] = a3[2] * factor1 + b3[2] * factor2 + c4[2] * factor3 + d3[2] * factor4;
  return out2;
}
function random(out2, scale6) {
  scale6 = scale6 || 1;
  var r5 = RANDOM() * 2 * Math.PI;
  var z = RANDOM() * 2 - 1;
  var zScale = Math.sqrt(1 - z * z) * scale6;
  out2[0] = Math.cos(r5) * zScale;
  out2[1] = Math.sin(r5) * zScale;
  out2[2] = z * scale6;
  return out2;
}
function transformMat4(out2, a3, m2) {
  var x2 = a3[0], y3 = a3[1], z = a3[2];
  var w2 = m2[3] * x2 + m2[7] * y3 + m2[11] * z + m2[15];
  w2 = w2 || 1;
  out2[0] = (m2[0] * x2 + m2[4] * y3 + m2[8] * z + m2[12]) / w2;
  out2[1] = (m2[1] * x2 + m2[5] * y3 + m2[9] * z + m2[13]) / w2;
  out2[2] = (m2[2] * x2 + m2[6] * y3 + m2[10] * z + m2[14]) / w2;
  return out2;
}
function transformMat3(out2, a3, m2) {
  var x2 = a3[0], y3 = a3[1], z = a3[2];
  out2[0] = x2 * m2[0] + y3 * m2[3] + z * m2[6];
  out2[1] = x2 * m2[1] + y3 * m2[4] + z * m2[7];
  out2[2] = x2 * m2[2] + y3 * m2[5] + z * m2[8];
  return out2;
}
function transformQuat(out2, a3, q) {
  var qx = q[0], qy = q[1], qz = q[2], qw = q[3];
  var x2 = a3[0], y3 = a3[1], z = a3[2];
  var uvx = qy * z - qz * y3, uvy = qz * x2 - qx * z, uvz = qx * y3 - qy * x2;
  var uuvx = qy * uvz - qz * uvy, uuvy = qz * uvx - qx * uvz, uuvz = qx * uvy - qy * uvx;
  var w2 = qw * 2;
  uvx *= w2;
  uvy *= w2;
  uvz *= w2;
  uuvx *= 2;
  uuvy *= 2;
  uuvz *= 2;
  out2[0] = x2 + uvx + uuvx;
  out2[1] = y3 + uvy + uuvy;
  out2[2] = z + uvz + uuvz;
  return out2;
}
function rotateX2(out2, a3, b3, rad) {
  var p3 = [], r5 = [];
  p3[0] = a3[0] - b3[0];
  p3[1] = a3[1] - b3[1];
  p3[2] = a3[2] - b3[2];
  r5[0] = p3[0];
  r5[1] = p3[1] * Math.cos(rad) - p3[2] * Math.sin(rad);
  r5[2] = p3[1] * Math.sin(rad) + p3[2] * Math.cos(rad);
  out2[0] = r5[0] + b3[0];
  out2[1] = r5[1] + b3[1];
  out2[2] = r5[2] + b3[2];
  return out2;
}
function rotateY2(out2, a3, b3, rad) {
  var p3 = [], r5 = [];
  p3[0] = a3[0] - b3[0];
  p3[1] = a3[1] - b3[1];
  p3[2] = a3[2] - b3[2];
  r5[0] = p3[2] * Math.sin(rad) + p3[0] * Math.cos(rad);
  r5[1] = p3[1];
  r5[2] = p3[2] * Math.cos(rad) - p3[0] * Math.sin(rad);
  out2[0] = r5[0] + b3[0];
  out2[1] = r5[1] + b3[1];
  out2[2] = r5[2] + b3[2];
  return out2;
}
function rotateZ2(out2, a3, b3, rad) {
  var p3 = [], r5 = [];
  p3[0] = a3[0] - b3[0];
  p3[1] = a3[1] - b3[1];
  p3[2] = a3[2] - b3[2];
  r5[0] = p3[0] * Math.cos(rad) - p3[1] * Math.sin(rad);
  r5[1] = p3[0] * Math.sin(rad) + p3[1] * Math.cos(rad);
  r5[2] = p3[2];
  out2[0] = r5[0] + b3[0];
  out2[1] = r5[1] + b3[1];
  out2[2] = r5[2] + b3[2];
  return out2;
}
function angle(a3, b3) {
  var ax = a3[0], ay = a3[1], az = a3[2], bx = b3[0], by = b3[1], bz = b3[2], mag1 = Math.sqrt(ax * ax + ay * ay + az * az), mag2 = Math.sqrt(bx * bx + by * by + bz * bz), mag = mag1 * mag2, cosine = mag && dot(a3, b3) / mag;
  return Math.acos(Math.min(Math.max(cosine, -1), 1));
}
function zero(out2) {
  out2[0] = 0;
  out2[1] = 0;
  out2[2] = 0;
  return out2;
}
function str2(a3) {
  return "vec3(" + a3[0] + ", " + a3[1] + ", " + a3[2] + ")";
}
function exactEquals2(a3, b3) {
  return a3[0] === b3[0] && a3[1] === b3[1] && a3[2] === b3[2];
}
function equals2(a3, b3) {
  var a0 = a3[0], a1 = a3[1], a22 = a3[2];
  var b0 = b3[0], b1 = b3[1], b22 = b3[2];
  return Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) && Math.abs(a22 - b22) <= EPSILON * Math.max(1, Math.abs(a22), Math.abs(b22));
}
var sub2 = subtract2;
var mul2 = multiply2;
var div = divide;
var dist = distance;
var sqrDist = squaredDistance;
var len = length;
var sqrLen = squaredLength;
var forEach = function() {
  var vec = create3();
  return function(a3, stride, offset, count, fn, arg) {
    var i4, l3;
    if (!stride) {
      stride = 3;
    }
    if (!offset) {
      offset = 0;
    }
    if (count) {
      l3 = Math.min(count * stride + offset, a3.length);
    } else {
      l3 = a3.length;
    }
    for (i4 = offset; i4 < l3; i4 += stride) {
      vec[0] = a3[i4];
      vec[1] = a3[i4 + 1];
      vec[2] = a3[i4 + 2];
      fn(vec, vec, arg);
      a3[i4] = vec[0];
      a3[i4 + 1] = vec[1];
      a3[i4 + 2] = vec[2];
    }
    return a3;
  };
}();

// node_modules/gl-matrix/esm/vec4.js
var vec4_exports = {};
__export(vec4_exports, {
  add: () => add3,
  ceil: () => ceil2,
  clone: () => clone3,
  copy: () => copy3,
  create: () => create4,
  cross: () => cross2,
  dist: () => dist2,
  distance: () => distance2,
  div: () => div2,
  divide: () => divide2,
  dot: () => dot2,
  equals: () => equals3,
  exactEquals: () => exactEquals3,
  floor: () => floor2,
  forEach: () => forEach2,
  fromValues: () => fromValues3,
  inverse: () => inverse2,
  len: () => len2,
  length: () => length2,
  lerp: () => lerp2,
  max: () => max2,
  min: () => min2,
  mul: () => mul3,
  multiply: () => multiply3,
  negate: () => negate2,
  normalize: () => normalize2,
  random: () => random2,
  round: () => round2,
  scale: () => scale3,
  scaleAndAdd: () => scaleAndAdd2,
  set: () => set3,
  sqrDist: () => sqrDist2,
  sqrLen: () => sqrLen2,
  squaredDistance: () => squaredDistance2,
  squaredLength: () => squaredLength2,
  str: () => str3,
  sub: () => sub3,
  subtract: () => subtract3,
  transformMat4: () => transformMat42,
  transformQuat: () => transformQuat2,
  zero: () => zero2
});
function create4() {
  var out2 = new ARRAY_TYPE(4);
  if (ARRAY_TYPE != Float32Array) {
    out2[0] = 0;
    out2[1] = 0;
    out2[2] = 0;
    out2[3] = 0;
  }
  return out2;
}
function clone3(a3) {
  var out2 = new ARRAY_TYPE(4);
  out2[0] = a3[0];
  out2[1] = a3[1];
  out2[2] = a3[2];
  out2[3] = a3[3];
  return out2;
}
function fromValues3(x2, y3, z, w2) {
  var out2 = new ARRAY_TYPE(4);
  out2[0] = x2;
  out2[1] = y3;
  out2[2] = z;
  out2[3] = w2;
  return out2;
}
function copy3(out2, a3) {
  out2[0] = a3[0];
  out2[1] = a3[1];
  out2[2] = a3[2];
  out2[3] = a3[3];
  return out2;
}
function set3(out2, x2, y3, z, w2) {
  out2[0] = x2;
  out2[1] = y3;
  out2[2] = z;
  out2[3] = w2;
  return out2;
}
function add3(out2, a3, b3) {
  out2[0] = a3[0] + b3[0];
  out2[1] = a3[1] + b3[1];
  out2[2] = a3[2] + b3[2];
  out2[3] = a3[3] + b3[3];
  return out2;
}
function subtract3(out2, a3, b3) {
  out2[0] = a3[0] - b3[0];
  out2[1] = a3[1] - b3[1];
  out2[2] = a3[2] - b3[2];
  out2[3] = a3[3] - b3[3];
  return out2;
}
function multiply3(out2, a3, b3) {
  out2[0] = a3[0] * b3[0];
  out2[1] = a3[1] * b3[1];
  out2[2] = a3[2] * b3[2];
  out2[3] = a3[3] * b3[3];
  return out2;
}
function divide2(out2, a3, b3) {
  out2[0] = a3[0] / b3[0];
  out2[1] = a3[1] / b3[1];
  out2[2] = a3[2] / b3[2];
  out2[3] = a3[3] / b3[3];
  return out2;
}
function ceil2(out2, a3) {
  out2[0] = Math.ceil(a3[0]);
  out2[1] = Math.ceil(a3[1]);
  out2[2] = Math.ceil(a3[2]);
  out2[3] = Math.ceil(a3[3]);
  return out2;
}
function floor2(out2, a3) {
  out2[0] = Math.floor(a3[0]);
  out2[1] = Math.floor(a3[1]);
  out2[2] = Math.floor(a3[2]);
  out2[3] = Math.floor(a3[3]);
  return out2;
}
function min2(out2, a3, b3) {
  out2[0] = Math.min(a3[0], b3[0]);
  out2[1] = Math.min(a3[1], b3[1]);
  out2[2] = Math.min(a3[2], b3[2]);
  out2[3] = Math.min(a3[3], b3[3]);
  return out2;
}
function max2(out2, a3, b3) {
  out2[0] = Math.max(a3[0], b3[0]);
  out2[1] = Math.max(a3[1], b3[1]);
  out2[2] = Math.max(a3[2], b3[2]);
  out2[3] = Math.max(a3[3], b3[3]);
  return out2;
}
function round2(out2, a3) {
  out2[0] = Math.round(a3[0]);
  out2[1] = Math.round(a3[1]);
  out2[2] = Math.round(a3[2]);
  out2[3] = Math.round(a3[3]);
  return out2;
}
function scale3(out2, a3, b3) {
  out2[0] = a3[0] * b3;
  out2[1] = a3[1] * b3;
  out2[2] = a3[2] * b3;
  out2[3] = a3[3] * b3;
  return out2;
}
function scaleAndAdd2(out2, a3, b3, scale6) {
  out2[0] = a3[0] + b3[0] * scale6;
  out2[1] = a3[1] + b3[1] * scale6;
  out2[2] = a3[2] + b3[2] * scale6;
  out2[3] = a3[3] + b3[3] * scale6;
  return out2;
}
function distance2(a3, b3) {
  var x2 = b3[0] - a3[0];
  var y3 = b3[1] - a3[1];
  var z = b3[2] - a3[2];
  var w2 = b3[3] - a3[3];
  return Math.hypot(x2, y3, z, w2);
}
function squaredDistance2(a3, b3) {
  var x2 = b3[0] - a3[0];
  var y3 = b3[1] - a3[1];
  var z = b3[2] - a3[2];
  var w2 = b3[3] - a3[3];
  return x2 * x2 + y3 * y3 + z * z + w2 * w2;
}
function length2(a3) {
  var x2 = a3[0];
  var y3 = a3[1];
  var z = a3[2];
  var w2 = a3[3];
  return Math.hypot(x2, y3, z, w2);
}
function squaredLength2(a3) {
  var x2 = a3[0];
  var y3 = a3[1];
  var z = a3[2];
  var w2 = a3[3];
  return x2 * x2 + y3 * y3 + z * z + w2 * w2;
}
function negate2(out2, a3) {
  out2[0] = -a3[0];
  out2[1] = -a3[1];
  out2[2] = -a3[2];
  out2[3] = -a3[3];
  return out2;
}
function inverse2(out2, a3) {
  out2[0] = 1 / a3[0];
  out2[1] = 1 / a3[1];
  out2[2] = 1 / a3[2];
  out2[3] = 1 / a3[3];
  return out2;
}
function normalize2(out2, a3) {
  var x2 = a3[0];
  var y3 = a3[1];
  var z = a3[2];
  var w2 = a3[3];
  var len5 = x2 * x2 + y3 * y3 + z * z + w2 * w2;
  if (len5 > 0) {
    len5 = 1 / Math.sqrt(len5);
  }
  out2[0] = x2 * len5;
  out2[1] = y3 * len5;
  out2[2] = z * len5;
  out2[3] = w2 * len5;
  return out2;
}
function dot2(a3, b3) {
  return a3[0] * b3[0] + a3[1] * b3[1] + a3[2] * b3[2] + a3[3] * b3[3];
}
function cross2(out2, u3, v2, w2) {
  var A2 = v2[0] * w2[1] - v2[1] * w2[0], B = v2[0] * w2[2] - v2[2] * w2[0], C2 = v2[0] * w2[3] - v2[3] * w2[0], D = v2[1] * w2[2] - v2[2] * w2[1], E2 = v2[1] * w2[3] - v2[3] * w2[1], F = v2[2] * w2[3] - v2[3] * w2[2];
  var G = u3[0];
  var H2 = u3[1];
  var I2 = u3[2];
  var J = u3[3];
  out2[0] = H2 * F - I2 * E2 + J * D;
  out2[1] = -(G * F) + I2 * C2 - J * B;
  out2[2] = G * E2 - H2 * C2 + J * A2;
  out2[3] = -(G * D) + H2 * B - I2 * A2;
  return out2;
}
function lerp2(out2, a3, b3, t4) {
  var ax = a3[0];
  var ay = a3[1];
  var az = a3[2];
  var aw = a3[3];
  out2[0] = ax + t4 * (b3[0] - ax);
  out2[1] = ay + t4 * (b3[1] - ay);
  out2[2] = az + t4 * (b3[2] - az);
  out2[3] = aw + t4 * (b3[3] - aw);
  return out2;
}
function random2(out2, scale6) {
  scale6 = scale6 || 1;
  var v1, v2, v3, v4;
  var s1, s22;
  do {
    v1 = RANDOM() * 2 - 1;
    v2 = RANDOM() * 2 - 1;
    s1 = v1 * v1 + v2 * v2;
  } while (s1 >= 1);
  do {
    v3 = RANDOM() * 2 - 1;
    v4 = RANDOM() * 2 - 1;
    s22 = v3 * v3 + v4 * v4;
  } while (s22 >= 1);
  var d3 = Math.sqrt((1 - s1) / s22);
  out2[0] = scale6 * v1;
  out2[1] = scale6 * v2;
  out2[2] = scale6 * v3 * d3;
  out2[3] = scale6 * v4 * d3;
  return out2;
}
function transformMat42(out2, a3, m2) {
  var x2 = a3[0], y3 = a3[1], z = a3[2], w2 = a3[3];
  out2[0] = m2[0] * x2 + m2[4] * y3 + m2[8] * z + m2[12] * w2;
  out2[1] = m2[1] * x2 + m2[5] * y3 + m2[9] * z + m2[13] * w2;
  out2[2] = m2[2] * x2 + m2[6] * y3 + m2[10] * z + m2[14] * w2;
  out2[3] = m2[3] * x2 + m2[7] * y3 + m2[11] * z + m2[15] * w2;
  return out2;
}
function transformQuat2(out2, a3, q) {
  var x2 = a3[0], y3 = a3[1], z = a3[2];
  var qx = q[0], qy = q[1], qz = q[2], qw = q[3];
  var ix = qw * x2 + qy * z - qz * y3;
  var iy = qw * y3 + qz * x2 - qx * z;
  var iz = qw * z + qx * y3 - qy * x2;
  var iw = -qx * x2 - qy * y3 - qz * z;
  out2[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;
  out2[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;
  out2[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;
  out2[3] = a3[3];
  return out2;
}
function zero2(out2) {
  out2[0] = 0;
  out2[1] = 0;
  out2[2] = 0;
  out2[3] = 0;
  return out2;
}
function str3(a3) {
  return "vec4(" + a3[0] + ", " + a3[1] + ", " + a3[2] + ", " + a3[3] + ")";
}
function exactEquals3(a3, b3) {
  return a3[0] === b3[0] && a3[1] === b3[1] && a3[2] === b3[2] && a3[3] === b3[3];
}
function equals3(a3, b3) {
  var a0 = a3[0], a1 = a3[1], a22 = a3[2], a32 = a3[3];
  var b0 = b3[0], b1 = b3[1], b22 = b3[2], b32 = b3[3];
  return Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1)) && Math.abs(a22 - b22) <= EPSILON * Math.max(1, Math.abs(a22), Math.abs(b22)) && Math.abs(a32 - b32) <= EPSILON * Math.max(1, Math.abs(a32), Math.abs(b32));
}
var sub3 = subtract3;
var mul3 = multiply3;
var div2 = divide2;
var dist2 = distance2;
var sqrDist2 = squaredDistance2;
var len2 = length2;
var sqrLen2 = squaredLength2;
var forEach2 = function() {
  var vec = create4();
  return function(a3, stride, offset, count, fn, arg) {
    var i4, l3;
    if (!stride) {
      stride = 4;
    }
    if (!offset) {
      offset = 0;
    }
    if (count) {
      l3 = Math.min(count * stride + offset, a3.length);
    } else {
      l3 = a3.length;
    }
    for (i4 = offset; i4 < l3; i4 += stride) {
      vec[0] = a3[i4];
      vec[1] = a3[i4 + 1];
      vec[2] = a3[i4 + 2];
      vec[3] = a3[i4 + 3];
      fn(vec, vec, arg);
      a3[i4] = vec[0];
      a3[i4 + 1] = vec[1];
      a3[i4 + 2] = vec[2];
      a3[i4 + 3] = vec[3];
    }
    return a3;
  };
}();

// node_modules/gl-matrix/esm/quat.js
function create5() {
  var out2 = new ARRAY_TYPE(4);
  if (ARRAY_TYPE != Float32Array) {
    out2[0] = 0;
    out2[1] = 0;
    out2[2] = 0;
  }
  out2[3] = 1;
  return out2;
}
function identity2(out2) {
  out2[0] = 0;
  out2[1] = 0;
  out2[2] = 0;
  out2[3] = 1;
  return out2;
}
function setAxisAngle(out2, axis, rad) {
  rad = rad * 0.5;
  var s4 = Math.sin(rad);
  out2[0] = s4 * axis[0];
  out2[1] = s4 * axis[1];
  out2[2] = s4 * axis[2];
  out2[3] = Math.cos(rad);
  return out2;
}
function getAxisAngle(out_axis, q) {
  var rad = Math.acos(q[3]) * 2;
  var s4 = Math.sin(rad / 2);
  if (s4 > EPSILON) {
    out_axis[0] = q[0] / s4;
    out_axis[1] = q[1] / s4;
    out_axis[2] = q[2] / s4;
  } else {
    out_axis[0] = 1;
    out_axis[1] = 0;
    out_axis[2] = 0;
  }
  return rad;
}
function getAngle(a3, b3) {
  var dotproduct = dot3(a3, b3);
  return Math.acos(2 * dotproduct * dotproduct - 1);
}
function multiply4(out2, a3, b3) {
  var ax = a3[0], ay = a3[1], az = a3[2], aw = a3[3];
  var bx = b3[0], by = b3[1], bz = b3[2], bw = b3[3];
  out2[0] = ax * bw + aw * bx + ay * bz - az * by;
  out2[1] = ay * bw + aw * by + az * bx - ax * bz;
  out2[2] = az * bw + aw * bz + ax * by - ay * bx;
  out2[3] = aw * bw - ax * bx - ay * by - az * bz;
  return out2;
}
function rotateX3(out2, a3, rad) {
  rad *= 0.5;
  var ax = a3[0], ay = a3[1], az = a3[2], aw = a3[3];
  var bx = Math.sin(rad), bw = Math.cos(rad);
  out2[0] = ax * bw + aw * bx;
  out2[1] = ay * bw + az * bx;
  out2[2] = az * bw - ay * bx;
  out2[3] = aw * bw - ax * bx;
  return out2;
}
function rotateY3(out2, a3, rad) {
  rad *= 0.5;
  var ax = a3[0], ay = a3[1], az = a3[2], aw = a3[3];
  var by = Math.sin(rad), bw = Math.cos(rad);
  out2[0] = ax * bw - az * by;
  out2[1] = ay * bw + aw * by;
  out2[2] = az * bw + ax * by;
  out2[3] = aw * bw - ay * by;
  return out2;
}
function rotateZ3(out2, a3, rad) {
  rad *= 0.5;
  var ax = a3[0], ay = a3[1], az = a3[2], aw = a3[3];
  var bz = Math.sin(rad), bw = Math.cos(rad);
  out2[0] = ax * bw + ay * bz;
  out2[1] = ay * bw - ax * bz;
  out2[2] = az * bw + aw * bz;
  out2[3] = aw * bw - az * bz;
  return out2;
}
function calculateW(out2, a3) {
  var x2 = a3[0], y3 = a3[1], z = a3[2];
  out2[0] = x2;
  out2[1] = y3;
  out2[2] = z;
  out2[3] = Math.sqrt(Math.abs(1 - x2 * x2 - y3 * y3 - z * z));
  return out2;
}
function exp(out2, a3) {
  var x2 = a3[0], y3 = a3[1], z = a3[2], w2 = a3[3];
  var r5 = Math.sqrt(x2 * x2 + y3 * y3 + z * z);
  var et = Math.exp(w2);
  var s4 = r5 > 0 ? et * Math.sin(r5) / r5 : 0;
  out2[0] = x2 * s4;
  out2[1] = y3 * s4;
  out2[2] = z * s4;
  out2[3] = et * Math.cos(r5);
  return out2;
}
function ln(out2, a3) {
  var x2 = a3[0], y3 = a3[1], z = a3[2], w2 = a3[3];
  var r5 = Math.sqrt(x2 * x2 + y3 * y3 + z * z);
  var t4 = r5 > 0 ? Math.atan2(r5, w2) / r5 : 0;
  out2[0] = x2 * t4;
  out2[1] = y3 * t4;
  out2[2] = z * t4;
  out2[3] = 0.5 * Math.log(x2 * x2 + y3 * y3 + z * z + w2 * w2);
  return out2;
}
function pow(out2, a3, b3) {
  ln(out2, a3);
  scale4(out2, out2, b3);
  exp(out2, out2);
  return out2;
}
function slerp(out2, a3, b3, t4) {
  var ax = a3[0], ay = a3[1], az = a3[2], aw = a3[3];
  var bx = b3[0], by = b3[1], bz = b3[2], bw = b3[3];
  var omega, cosom, sinom, scale0, scale1;
  cosom = ax * bx + ay * by + az * bz + aw * bw;
  if (cosom < 0) {
    cosom = -cosom;
    bx = -bx;
    by = -by;
    bz = -bz;
    bw = -bw;
  }
  if (1 - cosom > EPSILON) {
    omega = Math.acos(cosom);
    sinom = Math.sin(omega);
    scale0 = Math.sin((1 - t4) * omega) / sinom;
    scale1 = Math.sin(t4 * omega) / sinom;
  } else {
    scale0 = 1 - t4;
    scale1 = t4;
  }
  out2[0] = scale0 * ax + scale1 * bx;
  out2[1] = scale0 * ay + scale1 * by;
  out2[2] = scale0 * az + scale1 * bz;
  out2[3] = scale0 * aw + scale1 * bw;
  return out2;
}
function random3(out2) {
  var u1 = RANDOM();
  var u22 = RANDOM();
  var u3 = RANDOM();
  var sqrt1MinusU1 = Math.sqrt(1 - u1);
  var sqrtU1 = Math.sqrt(u1);
  out2[0] = sqrt1MinusU1 * Math.sin(2 * Math.PI * u22);
  out2[1] = sqrt1MinusU1 * Math.cos(2 * Math.PI * u22);
  out2[2] = sqrtU1 * Math.sin(2 * Math.PI * u3);
  out2[3] = sqrtU1 * Math.cos(2 * Math.PI * u3);
  return out2;
}
function invert2(out2, a3) {
  var a0 = a3[0], a1 = a3[1], a22 = a3[2], a32 = a3[3];
  var dot5 = a0 * a0 + a1 * a1 + a22 * a22 + a32 * a32;
  var invDot = dot5 ? 1 / dot5 : 0;
  out2[0] = -a0 * invDot;
  out2[1] = -a1 * invDot;
  out2[2] = -a22 * invDot;
  out2[3] = a32 * invDot;
  return out2;
}
function conjugate(out2, a3) {
  out2[0] = -a3[0];
  out2[1] = -a3[1];
  out2[2] = -a3[2];
  out2[3] = a3[3];
  return out2;
}
function fromMat3(out2, m2) {
  var fTrace = m2[0] + m2[4] + m2[8];
  var fRoot;
  if (fTrace > 0) {
    fRoot = Math.sqrt(fTrace + 1);
    out2[3] = 0.5 * fRoot;
    fRoot = 0.5 / fRoot;
    out2[0] = (m2[5] - m2[7]) * fRoot;
    out2[1] = (m2[6] - m2[2]) * fRoot;
    out2[2] = (m2[1] - m2[3]) * fRoot;
  } else {
    var i4 = 0;
    if (m2[4] > m2[0])
      i4 = 1;
    if (m2[8] > m2[i4 * 3 + i4])
      i4 = 2;
    var j2 = (i4 + 1) % 3;
    var k2 = (i4 + 2) % 3;
    fRoot = Math.sqrt(m2[i4 * 3 + i4] - m2[j2 * 3 + j2] - m2[k2 * 3 + k2] + 1);
    out2[i4] = 0.5 * fRoot;
    fRoot = 0.5 / fRoot;
    out2[3] = (m2[j2 * 3 + k2] - m2[k2 * 3 + j2]) * fRoot;
    out2[j2] = (m2[j2 * 3 + i4] + m2[i4 * 3 + j2]) * fRoot;
    out2[k2] = (m2[k2 * 3 + i4] + m2[i4 * 3 + k2]) * fRoot;
  }
  return out2;
}
function fromEuler(out2, x2, y3, z) {
  var halfToRad = 0.5 * Math.PI / 180;
  x2 *= halfToRad;
  y3 *= halfToRad;
  z *= halfToRad;
  var sx = Math.sin(x2);
  var cx = Math.cos(x2);
  var sy = Math.sin(y3);
  var cy = Math.cos(y3);
  var sz = Math.sin(z);
  var cz = Math.cos(z);
  out2[0] = sx * cy * cz - cx * sy * sz;
  out2[1] = cx * sy * cz + sx * cy * sz;
  out2[2] = cx * cy * sz - sx * sy * cz;
  out2[3] = cx * cy * cz + sx * sy * sz;
  return out2;
}
function str4(a3) {
  return "quat(" + a3[0] + ", " + a3[1] + ", " + a3[2] + ", " + a3[3] + ")";
}
var clone4 = clone3;
var fromValues4 = fromValues3;
var copy4 = copy3;
var set4 = set3;
var add4 = add3;
var mul4 = multiply4;
var scale4 = scale3;
var dot3 = dot2;
var lerp3 = lerp2;
var length3 = length2;
var len3 = length3;
var squaredLength3 = squaredLength2;
var sqrLen3 = squaredLength3;
var normalize3 = normalize2;
var exactEquals4 = exactEquals3;
var equals4 = equals3;
var rotationTo = function() {
  var tmpvec3 = create3();
  var xUnitVec3 = fromValues2(1, 0, 0);
  var yUnitVec3 = fromValues2(0, 1, 0);
  return function(out2, a3, b3) {
    var dot5 = dot(a3, b3);
    if (dot5 < -0.999999) {
      cross(tmpvec3, xUnitVec3, a3);
      if (len(tmpvec3) < 1e-6)
        cross(tmpvec3, yUnitVec3, a3);
      normalize(tmpvec3, tmpvec3);
      setAxisAngle(out2, tmpvec3, Math.PI);
      return out2;
    } else if (dot5 > 0.999999) {
      out2[0] = 0;
      out2[1] = 0;
      out2[2] = 0;
      out2[3] = 1;
      return out2;
    } else {
      cross(tmpvec3, a3, b3);
      out2[0] = tmpvec3[0];
      out2[1] = tmpvec3[1];
      out2[2] = tmpvec3[2];
      out2[3] = 1 + dot5;
      return normalize3(out2, out2);
    }
  };
}();
var sqlerp = function() {
  var temp1 = create5();
  var temp2 = create5();
  return function(out2, a3, b3, c4, d3, t4) {
    slerp(temp1, a3, d3, t4);
    slerp(temp2, b3, c4, t4);
    slerp(out2, temp1, temp2, 2 * t4 * (1 - t4));
    return out2;
  };
}();
var setAxes = function() {
  var matr = create();
  return function(out2, view, right, up) {
    matr[0] = right[0];
    matr[3] = right[1];
    matr[6] = right[2];
    matr[1] = up[0];
    matr[4] = up[1];
    matr[7] = up[2];
    matr[2] = -view[0];
    matr[5] = -view[1];
    matr[8] = -view[2];
    return normalize3(out2, fromMat3(out2, matr));
  };
}();

// node_modules/gl-matrix/esm/vec2.js
var vec2_exports = {};
__export(vec2_exports, {
  add: () => add5,
  angle: () => angle2,
  ceil: () => ceil3,
  clone: () => clone5,
  copy: () => copy5,
  create: () => create6,
  cross: () => cross3,
  dist: () => dist3,
  distance: () => distance3,
  div: () => div3,
  divide: () => divide3,
  dot: () => dot4,
  equals: () => equals5,
  exactEquals: () => exactEquals5,
  floor: () => floor3,
  forEach: () => forEach3,
  fromValues: () => fromValues5,
  inverse: () => inverse3,
  len: () => len4,
  length: () => length4,
  lerp: () => lerp4,
  max: () => max3,
  min: () => min3,
  mul: () => mul5,
  multiply: () => multiply5,
  negate: () => negate3,
  normalize: () => normalize4,
  random: () => random4,
  rotate: () => rotate2,
  round: () => round3,
  scale: () => scale5,
  scaleAndAdd: () => scaleAndAdd3,
  set: () => set5,
  sqrDist: () => sqrDist3,
  sqrLen: () => sqrLen4,
  squaredDistance: () => squaredDistance3,
  squaredLength: () => squaredLength4,
  str: () => str5,
  sub: () => sub4,
  subtract: () => subtract4,
  transformMat2: () => transformMat2,
  transformMat2d: () => transformMat2d,
  transformMat3: () => transformMat32,
  transformMat4: () => transformMat43,
  zero: () => zero3
});
function create6() {
  var out2 = new ARRAY_TYPE(2);
  if (ARRAY_TYPE != Float32Array) {
    out2[0] = 0;
    out2[1] = 0;
  }
  return out2;
}
function clone5(a3) {
  var out2 = new ARRAY_TYPE(2);
  out2[0] = a3[0];
  out2[1] = a3[1];
  return out2;
}
function fromValues5(x2, y3) {
  var out2 = new ARRAY_TYPE(2);
  out2[0] = x2;
  out2[1] = y3;
  return out2;
}
function copy5(out2, a3) {
  out2[0] = a3[0];
  out2[1] = a3[1];
  return out2;
}
function set5(out2, x2, y3) {
  out2[0] = x2;
  out2[1] = y3;
  return out2;
}
function add5(out2, a3, b3) {
  out2[0] = a3[0] + b3[0];
  out2[1] = a3[1] + b3[1];
  return out2;
}
function subtract4(out2, a3, b3) {
  out2[0] = a3[0] - b3[0];
  out2[1] = a3[1] - b3[1];
  return out2;
}
function multiply5(out2, a3, b3) {
  out2[0] = a3[0] * b3[0];
  out2[1] = a3[1] * b3[1];
  return out2;
}
function divide3(out2, a3, b3) {
  out2[0] = a3[0] / b3[0];
  out2[1] = a3[1] / b3[1];
  return out2;
}
function ceil3(out2, a3) {
  out2[0] = Math.ceil(a3[0]);
  out2[1] = Math.ceil(a3[1]);
  return out2;
}
function floor3(out2, a3) {
  out2[0] = Math.floor(a3[0]);
  out2[1] = Math.floor(a3[1]);
  return out2;
}
function min3(out2, a3, b3) {
  out2[0] = Math.min(a3[0], b3[0]);
  out2[1] = Math.min(a3[1], b3[1]);
  return out2;
}
function max3(out2, a3, b3) {
  out2[0] = Math.max(a3[0], b3[0]);
  out2[1] = Math.max(a3[1], b3[1]);
  return out2;
}
function round3(out2, a3) {
  out2[0] = Math.round(a3[0]);
  out2[1] = Math.round(a3[1]);
  return out2;
}
function scale5(out2, a3, b3) {
  out2[0] = a3[0] * b3;
  out2[1] = a3[1] * b3;
  return out2;
}
function scaleAndAdd3(out2, a3, b3, scale6) {
  out2[0] = a3[0] + b3[0] * scale6;
  out2[1] = a3[1] + b3[1] * scale6;
  return out2;
}
function distance3(a3, b3) {
  var x2 = b3[0] - a3[0], y3 = b3[1] - a3[1];
  return Math.hypot(x2, y3);
}
function squaredDistance3(a3, b3) {
  var x2 = b3[0] - a3[0], y3 = b3[1] - a3[1];
  return x2 * x2 + y3 * y3;
}
function length4(a3) {
  var x2 = a3[0], y3 = a3[1];
  return Math.hypot(x2, y3);
}
function squaredLength4(a3) {
  var x2 = a3[0], y3 = a3[1];
  return x2 * x2 + y3 * y3;
}
function negate3(out2, a3) {
  out2[0] = -a3[0];
  out2[1] = -a3[1];
  return out2;
}
function inverse3(out2, a3) {
  out2[0] = 1 / a3[0];
  out2[1] = 1 / a3[1];
  return out2;
}
function normalize4(out2, a3) {
  var x2 = a3[0], y3 = a3[1];
  var len5 = x2 * x2 + y3 * y3;
  if (len5 > 0) {
    len5 = 1 / Math.sqrt(len5);
  }
  out2[0] = a3[0] * len5;
  out2[1] = a3[1] * len5;
  return out2;
}
function dot4(a3, b3) {
  return a3[0] * b3[0] + a3[1] * b3[1];
}
function cross3(out2, a3, b3) {
  var z = a3[0] * b3[1] - a3[1] * b3[0];
  out2[0] = out2[1] = 0;
  out2[2] = z;
  return out2;
}
function lerp4(out2, a3, b3, t4) {
  var ax = a3[0], ay = a3[1];
  out2[0] = ax + t4 * (b3[0] - ax);
  out2[1] = ay + t4 * (b3[1] - ay);
  return out2;
}
function random4(out2, scale6) {
  scale6 = scale6 || 1;
  var r5 = RANDOM() * 2 * Math.PI;
  out2[0] = Math.cos(r5) * scale6;
  out2[1] = Math.sin(r5) * scale6;
  return out2;
}
function transformMat2(out2, a3, m2) {
  var x2 = a3[0], y3 = a3[1];
  out2[0] = m2[0] * x2 + m2[2] * y3;
  out2[1] = m2[1] * x2 + m2[3] * y3;
  return out2;
}
function transformMat2d(out2, a3, m2) {
  var x2 = a3[0], y3 = a3[1];
  out2[0] = m2[0] * x2 + m2[2] * y3 + m2[4];
  out2[1] = m2[1] * x2 + m2[3] * y3 + m2[5];
  return out2;
}
function transformMat32(out2, a3, m2) {
  var x2 = a3[0], y3 = a3[1];
  out2[0] = m2[0] * x2 + m2[3] * y3 + m2[6];
  out2[1] = m2[1] * x2 + m2[4] * y3 + m2[7];
  return out2;
}
function transformMat43(out2, a3, m2) {
  var x2 = a3[0];
  var y3 = a3[1];
  out2[0] = m2[0] * x2 + m2[4] * y3 + m2[12];
  out2[1] = m2[1] * x2 + m2[5] * y3 + m2[13];
  return out2;
}
function rotate2(out2, a3, b3, rad) {
  var p0 = a3[0] - b3[0], p1 = a3[1] - b3[1], sinC = Math.sin(rad), cosC = Math.cos(rad);
  out2[0] = p0 * cosC - p1 * sinC + b3[0];
  out2[1] = p0 * sinC + p1 * cosC + b3[1];
  return out2;
}
function angle2(a3, b3) {
  var x1 = a3[0], y1 = a3[1], x2 = b3[0], y22 = b3[1], mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y22 * y22), cosine = mag && (x1 * x2 + y1 * y22) / mag;
  return Math.acos(Math.min(Math.max(cosine, -1), 1));
}
function zero3(out2) {
  out2[0] = 0;
  out2[1] = 0;
  return out2;
}
function str5(a3) {
  return "vec2(" + a3[0] + ", " + a3[1] + ")";
}
function exactEquals5(a3, b3) {
  return a3[0] === b3[0] && a3[1] === b3[1];
}
function equals5(a3, b3) {
  var a0 = a3[0], a1 = a3[1];
  var b0 = b3[0], b1 = b3[1];
  return Math.abs(a0 - b0) <= EPSILON * Math.max(1, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= EPSILON * Math.max(1, Math.abs(a1), Math.abs(b1));
}
var len4 = length4;
var sub4 = subtract4;
var mul5 = multiply5;
var div3 = divide3;
var dist3 = distance3;
var sqrDist3 = squaredDistance3;
var sqrLen4 = squaredLength4;
var forEach3 = function() {
  var vec = create6();
  return function(a3, stride, offset, count, fn, arg) {
    var i4, l3;
    if (!stride) {
      stride = 2;
    }
    if (!offset) {
      offset = 0;
    }
    if (count) {
      l3 = Math.min(count * stride + offset, a3.length);
    } else {
      l3 = a3.length;
    }
    for (i4 = offset; i4 < l3; i4 += stride) {
      vec[0] = a3[i4];
      vec[1] = a3[i4 + 1];
      fn(vec, vec, arg);
      a3[i4] = vec[0];
      a3[i4 + 1] = vec[1];
    }
    return a3;
  };
}();

// src/loaders/GraferLoader.ts
function createGraferLoaderVec3(x2 = 0, y3 = 0, z = 0) {
  return { x: x2, y: y3, z };
}
function createGraferLoaderDomain(min4 = Number.MAX_SAFE_INTEGER, max4 = Number.MIN_SAFE_INTEGER) {
  return { min: min4, max: max4 };
}
function setGraferLoaderDomain(value, domain = createGraferLoaderDomain()) {
  domain.min = Math.min(domain.min, value);
  domain.max = Math.max(domain.max, value);
  return domain;
}
function mergeGraferLoaderDomain(a3, b3, out2 = a3) {
  out2.min = Math.min(a3.min, b3.min);
  out2.max = Math.max(a3.max, b3.max);
  return out2;
}
function normalizeNodeLayers(layers, reCenter = false, reSize = false) {
  const center = createGraferLoaderVec3();
  const sizeDomain = createGraferLoaderDomain();
  const coordsDomain = {
    x: createGraferLoaderDomain(),
    y: createGraferLoaderDomain(),
    z: createGraferLoaderDomain()
  };
  let count = 0;
  for (let i4 = 0, n5 = layers.length; i4 < n5; ++i4) {
    center.x += layers[i4].cumulative.x;
    center.y += layers[i4].cumulative.y;
    center.z += layers[i4].cumulative.z;
    count += layers[i4].count;
    mergeGraferLoaderDomain(sizeDomain, layers[i4].sizeDomain);
    mergeGraferLoaderDomain(coordsDomain.x, layers[i4].coordsDomain.x);
    mergeGraferLoaderDomain(coordsDomain.y, layers[i4].coordsDomain.y);
    mergeGraferLoaderDomain(coordsDomain.z, layers[i4].coordsDomain.z);
  }
  if (reCenter) {
    center.x /= count;
    center.y /= count;
    center.z /= count;
    coordsDomain.x.min -= center.x;
    coordsDomain.x.max -= center.x;
    coordsDomain.y.min -= center.y;
    coordsDomain.y.max -= center.y;
    coordsDomain.z.min -= center.z;
    coordsDomain.z.max -= center.z;
  } else {
    center.x = 0;
    center.y = 0;
    center.z = 0;
  }
  const bbCorners = vec3_exports.fromValues(
    Math.max(Math.abs(coordsDomain.x.min), Math.abs(coordsDomain.x.max)),
    Math.max(Math.abs(coordsDomain.y.min), Math.abs(coordsDomain.y.max)),
    Math.max(Math.abs(coordsDomain.z.min), Math.abs(coordsDomain.z.max))
  );
  const cornerLength = vec3_exports.len(bbCorners);
  const positionMult = reSize ? 300 / cornerLength : 1;
  coordsDomain.x.min *= positionMult;
  coordsDomain.x.max *= positionMult;
  coordsDomain.y.min *= positionMult;
  coordsDomain.y.max *= positionMult;
  coordsDomain.z.min *= positionMult;
  coordsDomain.z.max *= positionMult;
  for (let i4 = 0, n5 = layers.length; i4 < n5; ++i4) {
    const layer = layers[i4];
    const positions = layer.positions;
    const sizes = layer.sizes;
    for (let ii = 0, pi = 0, nn = layer.count; ii < nn; ++ii, pi += 3) {
      positions[pi] = (positions[pi] - center.x) * positionMult;
      positions[pi + 1] = (positions[pi + 1] - center.y) * positionMult;
      positions[pi + 2] = (positions[pi + 2] - center.z) * positionMult;
      if (sizeDomain.min !== sizeDomain.max) {
        sizes[ii] = (sizes[ii] - sizeDomain.min) / (sizeDomain.max - sizeDomain.min);
      } else {
        sizes[ii] = 1;
      }
    }
  }
  return {
    center,
    sizeDomain,
    coordsDomain,
    count,
    cornerLength: cornerLength * positionMult
  };
}

// src/loaders/LocalJSONL.ts
async function parseJSONL(input, cb) {
  const file = await DataFile.fromLocalSource(input);
  const sizeOf16MB = 16 * 1024 * 1024;
  const byteLength = await file.byteLength;
  const decoder = new TextDecoder();
  const lineBreak = "\n".charCodeAt(0);
  for (let offset = 0; offset <= byteLength; offset += sizeOf16MB) {
    const chunkEnd = Math.min(offset + sizeOf16MB, byteLength);
    const chunk = await file.loadData(offset, chunkEnd);
    const view = new DataView(chunk);
    let start = 0;
    for (let i4 = 0, n5 = chunk.byteLength; i4 < n5; ++i4) {
      if (view.getUint8(i4) === lineBreak || offset + i4 === byteLength) {
        const statementBuffer = new Uint8Array(chunk, start, i4 - start);
        start = i4 + 1;
        const str6 = decoder.decode(statementBuffer);
        const json = JSON.parse(str6);
        cb(json);
      }
    }
    if (start < chunk.byteLength) {
      offset -= chunk.byteLength - start;
    }
  }
}
async function loadNodes(file, palette = []) {
  const colorMap = /* @__PURE__ */ new Map();
  const map = /* @__PURE__ */ new Map();
  const raw = [];
  const points2 = [];
  const nodes = [];
  const positions = [];
  const sizes = [];
  const colors2 = [];
  const cumulative = createGraferLoaderVec3();
  const sizeDomain = createGraferLoaderDomain();
  const coordsDomain = {
    x: createGraferLoaderDomain(),
    y: createGraferLoaderDomain(),
    z: createGraferLoaderDomain()
  };
  let count = 0;
  await parseJSONL(file, (json) => {
    var _a6, _b2;
    raw.push(json);
    json.z = json.hasOwnProperty("z") ? json.z : 0;
    const { x: x2, y: y3, z, id, ...node } = json;
    points2.push({
      id,
      x: x2,
      y: y3,
      z
    });
    nodes.push({
      point: id,
      ...node
    });
    positions.push(x2, y3, z);
    map.set(json.id, count);
    setGraferLoaderDomain(x2, coordsDomain.x);
    setGraferLoaderDomain(y3, coordsDomain.y);
    setGraferLoaderDomain(z, coordsDomain.z);
    cumulative.x += x2;
    cumulative.y += y3;
    cumulative.z += z;
    ++count;
    const group = ((_b2 = (_a6 = json.group) != null ? _a6 : json.clusterID) != null ? _b2 : [0])[0];
    if (group < palette.length) {
      colors2.push(...palette[group], 255);
    } else {
      if (!colorMap.has(group)) {
        colorMap.set(group, [
          Math.round(Math.random() * 127 + 128),
          Math.round(Math.random() * 127 + 128),
          Math.round(Math.random() * 127 + 128)
        ]);
      }
      colors2.push(...colorMap.get(group), 255);
    }
    sizes.push(json.size);
    setGraferLoaderDomain(json.size, sizeDomain);
  });
  return {
    map,
    raw,
    points: points2,
    nodes,
    positions: new Float32Array(positions),
    sizes: new Float32Array(sizes),
    colors: new Uint8Array(colors2),
    cumulative,
    sizeDomain,
    coordsDomain,
    count
  };
}
async function loadEdges(file, nodes) {
  const raw = [];
  const positions = [];
  const colors2 = [];
  await parseJSONL(file, (json) => {
    if (nodes.map.has(json.source) && nodes.map.has(json.target)) {
      raw.push(json);
      const sourceIndex = nodes.map.get(json.source);
      const targetIndex = nodes.map.get(json.target);
      positions.push(
        nodes.positions[sourceIndex * 3],
        nodes.positions[sourceIndex * 3 + 1],
        nodes.positions[sourceIndex * 3 + 2]
      );
      positions.push(
        nodes.positions[targetIndex * 3],
        nodes.positions[targetIndex * 3 + 1],
        nodes.positions[targetIndex * 3 + 2]
      );
      colors2.push(
        nodes.colors[sourceIndex * 4],
        nodes.colors[sourceIndex * 4 + 1],
        nodes.colors[sourceIndex * 4 + 2],
        nodes.colors[sourceIndex * 4 + 3]
      );
      colors2.push(
        nodes.colors[targetIndex * 4],
        nodes.colors[targetIndex * 4 + 1],
        nodes.colors[targetIndex * 4 + 2],
        nodes.colors[targetIndex * 4 + 3]
      );
    }
  });
  return {
    raw,
    edges: raw,
    positions: new Float32Array(positions),
    colors: new Uint8Array(colors2)
  };
}
async function loadMeta(file) {
  const result = [];
  await parseJSONL(file, (json) => {
    result.push(json);
  });
  return result;
}
var LocalJSONL = {
  loadNodes,
  loadEdges,
  loadMeta
};

// src/data/mod.ts
var mod_exports = {};
__export(mod_exports, {
  GraphPoints: () => GraphPoints,
  PointsReader: () => PointsReader,
  computeDataTypes: () => computeDataTypes,
  concatenateData: () => concatenateData,
  dataIterator: () => dataIterator,
  extractData: () => extractData,
  flattenEntry: () => flattenEntry,
  kDataMappingFlatten: () => kDataMappingFlatten,
  packData: () => packData,
  printDataGL: () => printDataGL,
  writeValueToDataView: () => writeValueToDataView
});

// node_modules/picogl/build/module/constants.js
var GL = {
  DEPTH_BUFFER_BIT: 256,
  STENCIL_BUFFER_BIT: 1024,
  COLOR_BUFFER_BIT: 16384,
  POINTS: 0,
  LINES: 1,
  LINE_LOOP: 2,
  LINE_STRIP: 3,
  TRIANGLES: 4,
  TRIANGLE_STRIP: 5,
  TRIANGLE_FAN: 6,
  ZERO: 0,
  ONE: 1,
  SRC_COLOR: 768,
  ONE_MINUS_SRC_COLOR: 769,
  SRC_ALPHA: 770,
  ONE_MINUS_SRC_ALPHA: 771,
  DST_ALPHA: 772,
  ONE_MINUS_DST_ALPHA: 773,
  DST_COLOR: 774,
  ONE_MINUS_DST_COLOR: 775,
  SRC_ALPHA_SATURATE: 776,
  FUNC_ADD: 32774,
  BLEND_EQUATION: 32777,
  BLEND_EQUATION_RGB: 32777,
  BLEND_EQUATION_ALPHA: 34877,
  FUNC_SUBTRACT: 32778,
  FUNC_REVERSE_SUBTRACT: 32779,
  BLEND_DST_RGB: 32968,
  BLEND_SRC_RGB: 32969,
  BLEND_DST_ALPHA: 32970,
  BLEND_SRC_ALPHA: 32971,
  CONSTANT_COLOR: 32769,
  ONE_MINUS_CONSTANT_COLOR: 32770,
  CONSTANT_ALPHA: 32771,
  ONE_MINUS_CONSTANT_ALPHA: 32772,
  BLEND_COLOR: 32773,
  ARRAY_BUFFER: 34962,
  ELEMENT_ARRAY_BUFFER: 34963,
  ARRAY_BUFFER_BINDING: 34964,
  ELEMENT_ARRAY_BUFFER_BINDING: 34965,
  STREAM_DRAW: 35040,
  STATIC_DRAW: 35044,
  DYNAMIC_DRAW: 35048,
  BUFFER_SIZE: 34660,
  BUFFER_USAGE: 34661,
  CURRENT_VERTEX_ATTRIB: 34342,
  FRONT: 1028,
  BACK: 1029,
  FRONT_AND_BACK: 1032,
  CULL_FACE: 2884,
  BLEND: 3042,
  DITHER: 3024,
  STENCIL_TEST: 2960,
  DEPTH_TEST: 2929,
  SCISSOR_TEST: 3089,
  POLYGON_OFFSET_FILL: 32823,
  SAMPLE_ALPHA_TO_COVERAGE: 32926,
  SAMPLE_COVERAGE: 32928,
  NO_ERROR: 0,
  INVALID_ENUM: 1280,
  INVALID_VALUE: 1281,
  INVALID_OPERATION: 1282,
  OUT_OF_MEMORY: 1285,
  CW: 2304,
  CCW: 2305,
  LINE_WIDTH: 2849,
  ALIASED_POINT_SIZE_RANGE: 33901,
  ALIASED_LINE_WIDTH_RANGE: 33902,
  CULL_FACE_MODE: 2885,
  FRONT_FACE: 2886,
  DEPTH_RANGE: 2928,
  DEPTH_WRITEMASK: 2930,
  DEPTH_CLEAR_VALUE: 2931,
  DEPTH_FUNC: 2932,
  STENCIL_CLEAR_VALUE: 2961,
  STENCIL_FUNC: 2962,
  STENCIL_FAIL: 2964,
  STENCIL_PASS_DEPTH_FAIL: 2965,
  STENCIL_PASS_DEPTH_PASS: 2966,
  STENCIL_REF: 2967,
  STENCIL_VALUE_MASK: 2963,
  STENCIL_WRITEMASK: 2968,
  STENCIL_BACK_FUNC: 34816,
  STENCIL_BACK_FAIL: 34817,
  STENCIL_BACK_PASS_DEPTH_FAIL: 34818,
  STENCIL_BACK_PASS_DEPTH_PASS: 34819,
  STENCIL_BACK_REF: 36003,
  STENCIL_BACK_VALUE_MASK: 36004,
  STENCIL_BACK_WRITEMASK: 36005,
  VIEWPORT: 2978,
  SCISSOR_BOX: 3088,
  COLOR_CLEAR_VALUE: 3106,
  COLOR_WRITEMASK: 3107,
  UNPACK_ALIGNMENT: 3317,
  PACK_ALIGNMENT: 3333,
  MAX_TEXTURE_SIZE: 3379,
  MAX_VIEWPORT_DIMS: 3386,
  SUBPIXEL_BITS: 3408,
  RED_BITS: 3410,
  GREEN_BITS: 3411,
  BLUE_BITS: 3412,
  ALPHA_BITS: 3413,
  DEPTH_BITS: 3414,
  STENCIL_BITS: 3415,
  POLYGON_OFFSET_UNITS: 10752,
  POLYGON_OFFSET_FACTOR: 32824,
  TEXTURE_BINDING_2D: 32873,
  SAMPLE_BUFFERS: 32936,
  SAMPLES: 32937,
  SAMPLE_COVERAGE_VALUE: 32938,
  SAMPLE_COVERAGE_INVERT: 32939,
  COMPRESSED_TEXTURE_FORMATS: 34467,
  DONT_CARE: 4352,
  FASTEST: 4353,
  NICEST: 4354,
  GENERATE_MIPMAP_HINT: 33170,
  BYTE: 5120,
  UNSIGNED_BYTE: 5121,
  SHORT: 5122,
  UNSIGNED_SHORT: 5123,
  INT: 5124,
  UNSIGNED_INT: 5125,
  FLOAT: 5126,
  DEPTH_COMPONENT: 6402,
  ALPHA: 6406,
  RGB: 6407,
  RGBA: 6408,
  LUMINANCE: 6409,
  LUMINANCE_ALPHA: 6410,
  UNSIGNED_SHORT_4_4_4_4: 32819,
  UNSIGNED_SHORT_5_5_5_1: 32820,
  UNSIGNED_SHORT_5_6_5: 33635,
  FRAGMENT_SHADER: 35632,
  VERTEX_SHADER: 35633,
  MAX_VERTEX_ATTRIBS: 34921,
  MAX_VERTEX_UNIFORM_VECTORS: 36347,
  MAX_VARYING_VECTORS: 36348,
  MAX_COMBINED_TEXTURE_IMAGE_UNITS: 35661,
  MAX_VERTEX_TEXTURE_IMAGE_UNITS: 35660,
  MAX_TEXTURE_IMAGE_UNITS: 34930,
  MAX_FRAGMENT_UNIFORM_VECTORS: 36349,
  SHADER_TYPE: 35663,
  DELETE_STATUS: 35712,
  LINK_STATUS: 35714,
  VALIDATE_STATUS: 35715,
  ATTACHED_SHADERS: 35717,
  ACTIVE_UNIFORMS: 35718,
  ACTIVE_ATTRIBUTES: 35721,
  SHADING_LANGUAGE_VERSION: 35724,
  CURRENT_PROGRAM: 35725,
  NEVER: 512,
  LESS: 513,
  EQUAL: 514,
  LEQUAL: 515,
  GREATER: 516,
  NOTEQUAL: 517,
  GEQUAL: 518,
  ALWAYS: 519,
  KEEP: 7680,
  REPLACE: 7681,
  INCR: 7682,
  DECR: 7683,
  INVERT: 5386,
  INCR_WRAP: 34055,
  DECR_WRAP: 34056,
  VENDOR: 7936,
  RENDERER: 7937,
  VERSION: 7938,
  NEAREST: 9728,
  LINEAR: 9729,
  NEAREST_MIPMAP_NEAREST: 9984,
  LINEAR_MIPMAP_NEAREST: 9985,
  NEAREST_MIPMAP_LINEAR: 9986,
  LINEAR_MIPMAP_LINEAR: 9987,
  TEXTURE_MAG_FILTER: 10240,
  TEXTURE_MIN_FILTER: 10241,
  TEXTURE_WRAP_S: 10242,
  TEXTURE_WRAP_T: 10243,
  TEXTURE_2D: 3553,
  TEXTURE: 5890,
  TEXTURE_CUBE_MAP: 34067,
  TEXTURE_BINDING_CUBE_MAP: 34068,
  TEXTURE_CUBE_MAP_POSITIVE_X: 34069,
  TEXTURE_CUBE_MAP_NEGATIVE_X: 34070,
  TEXTURE_CUBE_MAP_POSITIVE_Y: 34071,
  TEXTURE_CUBE_MAP_NEGATIVE_Y: 34072,
  TEXTURE_CUBE_MAP_POSITIVE_Z: 34073,
  TEXTURE_CUBE_MAP_NEGATIVE_Z: 34074,
  MAX_CUBE_MAP_TEXTURE_SIZE: 34076,
  TEXTURE0: 33984,
  TEXTURE1: 33985,
  TEXTURE2: 33986,
  TEXTURE3: 33987,
  TEXTURE4: 33988,
  TEXTURE5: 33989,
  TEXTURE6: 33990,
  TEXTURE7: 33991,
  TEXTURE8: 33992,
  TEXTURE9: 33993,
  TEXTURE10: 33994,
  TEXTURE11: 33995,
  TEXTURE12: 33996,
  TEXTURE13: 33997,
  TEXTURE14: 33998,
  TEXTURE15: 33999,
  TEXTURE16: 34e3,
  TEXTURE17: 34001,
  TEXTURE18: 34002,
  TEXTURE19: 34003,
  TEXTURE20: 34004,
  TEXTURE21: 34005,
  TEXTURE22: 34006,
  TEXTURE23: 34007,
  TEXTURE24: 34008,
  TEXTURE25: 34009,
  TEXTURE26: 34010,
  TEXTURE27: 34011,
  TEXTURE28: 34012,
  TEXTURE29: 34013,
  TEXTURE30: 34014,
  TEXTURE31: 34015,
  ACTIVE_TEXTURE: 34016,
  REPEAT: 10497,
  CLAMP_TO_EDGE: 33071,
  MIRRORED_REPEAT: 33648,
  FLOAT_VEC2: 35664,
  FLOAT_VEC3: 35665,
  FLOAT_VEC4: 35666,
  INT_VEC2: 35667,
  INT_VEC3: 35668,
  INT_VEC4: 35669,
  BOOL: 35670,
  BOOL_VEC2: 35671,
  BOOL_VEC3: 35672,
  BOOL_VEC4: 35673,
  FLOAT_MAT2: 35674,
  FLOAT_MAT3: 35675,
  FLOAT_MAT4: 35676,
  SAMPLER_2D: 35678,
  SAMPLER_CUBE: 35680,
  VERTEX_ATTRIB_ARRAY_ENABLED: 34338,
  VERTEX_ATTRIB_ARRAY_SIZE: 34339,
  VERTEX_ATTRIB_ARRAY_STRIDE: 34340,
  VERTEX_ATTRIB_ARRAY_TYPE: 34341,
  VERTEX_ATTRIB_ARRAY_NORMALIZED: 34922,
  VERTEX_ATTRIB_ARRAY_POINTER: 34373,
  VERTEX_ATTRIB_ARRAY_BUFFER_BINDING: 34975,
  IMPLEMENTATION_COLOR_READ_TYPE: 35738,
  IMPLEMENTATION_COLOR_READ_FORMAT: 35739,
  COMPILE_STATUS: 35713,
  LOW_FLOAT: 36336,
  MEDIUM_FLOAT: 36337,
  HIGH_FLOAT: 36338,
  LOW_INT: 36339,
  MEDIUM_INT: 36340,
  HIGH_INT: 36341,
  FRAMEBUFFER: 36160,
  RENDERBUFFER: 36161,
  RGBA4: 32854,
  RGB5_A1: 32855,
  RGB565: 36194,
  DEPTH_COMPONENT16: 33189,
  STENCIL_INDEX: 6401,
  STENCIL_INDEX8: 36168,
  DEPTH_STENCIL: 34041,
  RENDERBUFFER_WIDTH: 36162,
  RENDERBUFFER_HEIGHT: 36163,
  RENDERBUFFER_INTERNAL_FORMAT: 36164,
  RENDERBUFFER_RED_SIZE: 36176,
  RENDERBUFFER_GREEN_SIZE: 36177,
  RENDERBUFFER_BLUE_SIZE: 36178,
  RENDERBUFFER_ALPHA_SIZE: 36179,
  RENDERBUFFER_DEPTH_SIZE: 36180,
  RENDERBUFFER_STENCIL_SIZE: 36181,
  FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE: 36048,
  FRAMEBUFFER_ATTACHMENT_OBJECT_NAME: 36049,
  FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL: 36050,
  FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE: 36051,
  COLOR_ATTACHMENT0: 36064,
  DEPTH_ATTACHMENT: 36096,
  STENCIL_ATTACHMENT: 36128,
  DEPTH_STENCIL_ATTACHMENT: 33306,
  NONE: 0,
  FRAMEBUFFER_COMPLETE: 36053,
  FRAMEBUFFER_INCOMPLETE_ATTACHMENT: 36054,
  FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT: 36055,
  FRAMEBUFFER_INCOMPLETE_DIMENSIONS: 36057,
  FRAMEBUFFER_UNSUPPORTED: 36061,
  FRAMEBUFFER_BINDING: 36006,
  RENDERBUFFER_BINDING: 36007,
  MAX_RENDERBUFFER_SIZE: 34024,
  INVALID_FRAMEBUFFER_OPERATION: 1286,
  UNPACK_FLIP_Y_WEBGL: 37440,
  UNPACK_PREMULTIPLY_ALPHA_WEBGL: 37441,
  CONTEXT_LOST_WEBGL: 37442,
  UNPACK_COLORSPACE_CONVERSION_WEBGL: 37443,
  BROWSER_DEFAULT_WEBGL: 37444,
  READ_BUFFER: 3074,
  UNPACK_ROW_LENGTH: 3314,
  UNPACK_SKIP_ROWS: 3315,
  UNPACK_SKIP_PIXELS: 3316,
  PACK_ROW_LENGTH: 3330,
  PACK_SKIP_ROWS: 3331,
  PACK_SKIP_PIXELS: 3332,
  COLOR: 6144,
  DEPTH: 6145,
  STENCIL: 6146,
  RED: 6403,
  RGB8: 32849,
  RGBA8: 32856,
  RGB10_A2: 32857,
  TEXTURE_BINDING_3D: 32874,
  UNPACK_SKIP_IMAGES: 32877,
  UNPACK_IMAGE_HEIGHT: 32878,
  TEXTURE_3D: 32879,
  TEXTURE_WRAP_R: 32882,
  MAX_3D_TEXTURE_SIZE: 32883,
  UNSIGNED_INT_2_10_10_10_REV: 33640,
  MAX_ELEMENTS_VERTICES: 33e3,
  MAX_ELEMENTS_INDICES: 33001,
  TEXTURE_MIN_LOD: 33082,
  TEXTURE_MAX_LOD: 33083,
  TEXTURE_BASE_LEVEL: 33084,
  TEXTURE_MAX_LEVEL: 33085,
  MIN: 32775,
  MAX: 32776,
  DEPTH_COMPONENT24: 33190,
  MAX_TEXTURE_LOD_BIAS: 34045,
  TEXTURE_COMPARE_MODE: 34892,
  TEXTURE_COMPARE_FUNC: 34893,
  CURRENT_QUERY: 34917,
  QUERY_RESULT: 34918,
  QUERY_RESULT_AVAILABLE: 34919,
  STREAM_READ: 35041,
  STREAM_COPY: 35042,
  STATIC_READ: 35045,
  STATIC_COPY: 35046,
  DYNAMIC_READ: 35049,
  DYNAMIC_COPY: 35050,
  MAX_DRAW_BUFFERS: 34852,
  DRAW_BUFFER0: 34853,
  DRAW_BUFFER1: 34854,
  DRAW_BUFFER2: 34855,
  DRAW_BUFFER3: 34856,
  DRAW_BUFFER4: 34857,
  DRAW_BUFFER5: 34858,
  DRAW_BUFFER6: 34859,
  DRAW_BUFFER7: 34860,
  DRAW_BUFFER8: 34861,
  DRAW_BUFFER9: 34862,
  DRAW_BUFFER10: 34863,
  DRAW_BUFFER11: 34864,
  DRAW_BUFFER12: 34865,
  DRAW_BUFFER13: 34866,
  DRAW_BUFFER14: 34867,
  DRAW_BUFFER15: 34868,
  MAX_FRAGMENT_UNIFORM_COMPONENTS: 35657,
  MAX_VERTEX_UNIFORM_COMPONENTS: 35658,
  SAMPLER_3D: 35679,
  SAMPLER_2D_SHADOW: 35682,
  FRAGMENT_SHADER_DERIVATIVE_HINT: 35723,
  PIXEL_PACK_BUFFER: 35051,
  PIXEL_UNPACK_BUFFER: 35052,
  PIXEL_PACK_BUFFER_BINDING: 35053,
  PIXEL_UNPACK_BUFFER_BINDING: 35055,
  FLOAT_MAT2x3: 35685,
  FLOAT_MAT2x4: 35686,
  FLOAT_MAT3x2: 35687,
  FLOAT_MAT3x4: 35688,
  FLOAT_MAT4x2: 35689,
  FLOAT_MAT4x3: 35690,
  SRGB: 35904,
  SRGB8: 35905,
  SRGB8_ALPHA8: 35907,
  COMPARE_REF_TO_TEXTURE: 34894,
  RGBA32F: 34836,
  RGB32F: 34837,
  RGBA16F: 34842,
  RGB16F: 34843,
  VERTEX_ATTRIB_ARRAY_INTEGER: 35069,
  MAX_ARRAY_TEXTURE_LAYERS: 35071,
  MIN_PROGRAM_TEXEL_OFFSET: 35076,
  MAX_PROGRAM_TEXEL_OFFSET: 35077,
  MAX_VARYING_COMPONENTS: 35659,
  TEXTURE_2D_ARRAY: 35866,
  TEXTURE_BINDING_2D_ARRAY: 35869,
  R11F_G11F_B10F: 35898,
  UNSIGNED_INT_10F_11F_11F_REV: 35899,
  RGB9_E5: 35901,
  UNSIGNED_INT_5_9_9_9_REV: 35902,
  TRANSFORM_FEEDBACK_BUFFER_MODE: 35967,
  MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS: 35968,
  TRANSFORM_FEEDBACK_VARYINGS: 35971,
  TRANSFORM_FEEDBACK_BUFFER_START: 35972,
  TRANSFORM_FEEDBACK_BUFFER_SIZE: 35973,
  TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN: 35976,
  RASTERIZER_DISCARD: 35977,
  MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS: 35978,
  MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS: 35979,
  INTERLEAVED_ATTRIBS: 35980,
  SEPARATE_ATTRIBS: 35981,
  TRANSFORM_FEEDBACK_BUFFER: 35982,
  TRANSFORM_FEEDBACK_BUFFER_BINDING: 35983,
  RGBA32UI: 36208,
  RGB32UI: 36209,
  RGBA16UI: 36214,
  RGB16UI: 36215,
  RGBA8UI: 36220,
  RGB8UI: 36221,
  RGBA32I: 36226,
  RGB32I: 36227,
  RGBA16I: 36232,
  RGB16I: 36233,
  RGBA8I: 36238,
  RGB8I: 36239,
  RED_INTEGER: 36244,
  RGB_INTEGER: 36248,
  RGBA_INTEGER: 36249,
  SAMPLER_2D_ARRAY: 36289,
  SAMPLER_2D_ARRAY_SHADOW: 36292,
  SAMPLER_CUBE_SHADOW: 36293,
  UNSIGNED_INT_VEC2: 36294,
  UNSIGNED_INT_VEC3: 36295,
  UNSIGNED_INT_VEC4: 36296,
  INT_SAMPLER_2D: 36298,
  INT_SAMPLER_3D: 36299,
  INT_SAMPLER_CUBE: 36300,
  INT_SAMPLER_2D_ARRAY: 36303,
  UNSIGNED_INT_SAMPLER_2D: 36306,
  UNSIGNED_INT_SAMPLER_3D: 36307,
  UNSIGNED_INT_SAMPLER_CUBE: 36308,
  UNSIGNED_INT_SAMPLER_2D_ARRAY: 36311,
  DEPTH_COMPONENT32F: 36012,
  DEPTH32F_STENCIL8: 36013,
  FLOAT_32_UNSIGNED_INT_24_8_REV: 36269,
  FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING: 33296,
  FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE: 33297,
  FRAMEBUFFER_ATTACHMENT_RED_SIZE: 33298,
  FRAMEBUFFER_ATTACHMENT_GREEN_SIZE: 33299,
  FRAMEBUFFER_ATTACHMENT_BLUE_SIZE: 33300,
  FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE: 33301,
  FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE: 33302,
  FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE: 33303,
  FRAMEBUFFER_DEFAULT: 33304,
  UNSIGNED_INT_24_8: 34042,
  DEPTH24_STENCIL8: 35056,
  UNSIGNED_NORMALIZED: 35863,
  DRAW_FRAMEBUFFER_BINDING: 36006,
  READ_FRAMEBUFFER: 36008,
  DRAW_FRAMEBUFFER: 36009,
  READ_FRAMEBUFFER_BINDING: 36010,
  RENDERBUFFER_SAMPLES: 36011,
  FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER: 36052,
  MAX_COLOR_ATTACHMENTS: 36063,
  COLOR_ATTACHMENT1: 36065,
  COLOR_ATTACHMENT2: 36066,
  COLOR_ATTACHMENT3: 36067,
  COLOR_ATTACHMENT4: 36068,
  COLOR_ATTACHMENT5: 36069,
  COLOR_ATTACHMENT6: 36070,
  COLOR_ATTACHMENT7: 36071,
  COLOR_ATTACHMENT8: 36072,
  COLOR_ATTACHMENT9: 36073,
  COLOR_ATTACHMENT10: 36074,
  COLOR_ATTACHMENT11: 36075,
  COLOR_ATTACHMENT12: 36076,
  COLOR_ATTACHMENT13: 36077,
  COLOR_ATTACHMENT14: 36078,
  COLOR_ATTACHMENT15: 36079,
  FRAMEBUFFER_INCOMPLETE_MULTISAMPLE: 36182,
  MAX_SAMPLES: 36183,
  HALF_FLOAT: 5131,
  RG: 33319,
  RG_INTEGER: 33320,
  R8: 33321,
  RG8: 33323,
  R16F: 33325,
  R32F: 33326,
  RG16F: 33327,
  RG32F: 33328,
  R8I: 33329,
  R8UI: 33330,
  R16I: 33331,
  R16UI: 33332,
  R32I: 33333,
  R32UI: 33334,
  RG8I: 33335,
  RG8UI: 33336,
  RG16I: 33337,
  RG16UI: 33338,
  RG32I: 33339,
  RG32UI: 33340,
  VERTEX_ARRAY_BINDING: 34229,
  R8_SNORM: 36756,
  RG8_SNORM: 36757,
  RGB8_SNORM: 36758,
  RGBA8_SNORM: 36759,
  SIGNED_NORMALIZED: 36764,
  COPY_READ_BUFFER: 36662,
  COPY_WRITE_BUFFER: 36663,
  COPY_READ_BUFFER_BINDING: 36662,
  COPY_WRITE_BUFFER_BINDING: 36663,
  UNIFORM_BUFFER: 35345,
  UNIFORM_BUFFER_BINDING: 35368,
  UNIFORM_BUFFER_START: 35369,
  UNIFORM_BUFFER_SIZE: 35370,
  MAX_VERTEX_UNIFORM_BLOCKS: 35371,
  MAX_FRAGMENT_UNIFORM_BLOCKS: 35373,
  MAX_COMBINED_UNIFORM_BLOCKS: 35374,
  MAX_UNIFORM_BUFFER_BINDINGS: 35375,
  MAX_UNIFORM_BLOCK_SIZE: 35376,
  MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS: 35377,
  MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS: 35379,
  UNIFORM_BUFFER_OFFSET_ALIGNMENT: 35380,
  ACTIVE_UNIFORM_BLOCKS: 35382,
  UNIFORM_TYPE: 35383,
  UNIFORM_SIZE: 35384,
  UNIFORM_BLOCK_INDEX: 35386,
  UNIFORM_OFFSET: 35387,
  UNIFORM_ARRAY_STRIDE: 35388,
  UNIFORM_MATRIX_STRIDE: 35389,
  UNIFORM_IS_ROW_MAJOR: 35390,
  UNIFORM_BLOCK_BINDING: 35391,
  UNIFORM_BLOCK_DATA_SIZE: 35392,
  UNIFORM_BLOCK_ACTIVE_UNIFORMS: 35394,
  UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES: 35395,
  UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER: 35396,
  UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER: 35398,
  INVALID_INDEX: 4294967295,
  MAX_VERTEX_OUTPUT_COMPONENTS: 37154,
  MAX_FRAGMENT_INPUT_COMPONENTS: 37157,
  MAX_SERVER_WAIT_TIMEOUT: 37137,
  OBJECT_TYPE: 37138,
  SYNC_CONDITION: 37139,
  SYNC_STATUS: 37140,
  SYNC_FLAGS: 37141,
  SYNC_FENCE: 37142,
  SYNC_GPU_COMMANDS_COMPLETE: 37143,
  UNSIGNALED: 37144,
  SIGNALED: 37145,
  ALREADY_SIGNALED: 37146,
  TIMEOUT_EXPIRED: 37147,
  CONDITION_SATISFIED: 37148,
  WAIT_FAILED: 37149,
  SYNC_FLUSH_COMMANDS_BIT: 1,
  VERTEX_ATTRIB_ARRAY_DIVISOR: 35070,
  ANY_SAMPLES_PASSED: 35887,
  ANY_SAMPLES_PASSED_CONSERVATIVE: 36202,
  SAMPLER_BINDING: 35097,
  RGB10_A2UI: 36975,
  INT_2_10_10_10_REV: 36255,
  TRANSFORM_FEEDBACK: 36386,
  TRANSFORM_FEEDBACK_PAUSED: 36387,
  TRANSFORM_FEEDBACK_ACTIVE: 36388,
  TRANSFORM_FEEDBACK_BINDING: 36389,
  TEXTURE_IMMUTABLE_FORMAT: 37167,
  MAX_ELEMENT_INDEX: 36203,
  TEXTURE_IMMUTABLE_LEVELS: 33503,
  TIMEOUT_IGNORED: -1,
  MAX_CLIENT_WAIT_TIMEOUT_WEBGL: 37447,
  QUERY_COUNTER_BITS_EXT: 34916,
  TIME_ELAPSED_EXT: 35007,
  TIMESTAMP_EXT: 36392,
  GPU_DISJOINT_EXT: 36795,
  TEXTURE_MAX_ANISOTROPY_EXT: 34046,
  MAX_TEXTURE_MAX_ANISOTROPY_EXT: 34047,
  UNMASKED_VENDOR_WEBGL: 37445,
  UNMASKED_RENDERER_WEBGL: 37446,
  COMPLETION_STATUS_KHR: 37297,
  COMPRESSED_RGB_S3TC_DXT1_EXT: 33776,
  COMPRESSED_RGBA_S3TC_DXT1_EXT: 33777,
  COMPRESSED_RGBA_S3TC_DXT3_EXT: 33778,
  COMPRESSED_RGBA_S3TC_DXT5_EXT: 33779,
  COMPRESSED_SRGB_S3TC_DXT1_EXT: 35916,
  COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT: 35917,
  COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT: 35918,
  COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT: 35919,
  COMPRESSED_R11_EAC: 37488,
  COMPRESSED_SIGNED_R11_EAC: 37489,
  COMPRESSED_RG11_EAC: 37490,
  COMPRESSED_SIGNED_RG11_EAC: 37491,
  COMPRESSED_RGB8_ETC2: 37492,
  COMPRESSED_SRGB8_ETC2: 37493,
  COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2: 37494,
  COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2: 37495,
  COMPRESSED_RGBA8_ETC2_EAC: 37496,
  COMPRESSED_SRGB8_ALPHA8_ETC2_EAC: 37497,
  COMPRESSED_RGB_PVRTC_4BPPV1_IMG: 35840,
  COMPRESSED_RGB_PVRTC_2BPPV1_IMG: 35841,
  COMPRESSED_RGBA_PVRTC_4BPPV1_IMG: 35842,
  COMPRESSED_RGBA_PVRTC_2BPPV1_IMG: 35843,
  COMPRESSED_RGBA_ASTC_4x4_KHR: 37808,
  COMPRESSED_RGBA_ASTC_5x4_KHR: 37809,
  COMPRESSED_RGBA_ASTC_5x5_KHR: 37810,
  COMPRESSED_RGBA_ASTC_6x5_KHR: 37811,
  COMPRESSED_RGBA_ASTC_6x6_KHR: 37812,
  COMPRESSED_RGBA_ASTC_8x5_KHR: 37813,
  COMPRESSED_RGBA_ASTC_8x6_KHR: 37814,
  COMPRESSED_RGBA_ASTC_8x8_KHR: 37815,
  COMPRESSED_RGBA_ASTC_10x5_KHR: 37816,
  COMPRESSED_RGBA_ASTC_10x6_KHR: 37817,
  COMPRESSED_RGBA_ASTC_10x8_KHR: 37818,
  COMPRESSED_RGBA_ASTC_10x10_KHR: 37819,
  COMPRESSED_RGBA_ASTC_12x10_KHR: 37820,
  COMPRESSED_RGBA_ASTC_12x12_KHR: 37821,
  COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR: 37840,
  COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR: 37841,
  COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR: 37842,
  COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR: 37843,
  COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR: 37844,
  COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR: 37845,
  COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR: 37846,
  COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR: 37847,
  COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR: 37848,
  COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR: 37849,
  COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR: 37850,
  COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR: 37851,
  COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR: 37852,
  COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR: 37853
};
var TYPE_SIZE = {
  [GL.BYTE]: 1,
  [GL.UNSIGNED_BYTE]: 1,
  [GL.SHORT]: 2,
  [GL.UNSIGNED_SHORT]: 2,
  [GL.INT]: 4,
  [GL.UNSIGNED_INT]: 4,
  [GL.FLOAT]: 4
};
var TEXTURE_FORMATS = {
  [GL.R8]: [GL.RED, GL.UNSIGNED_BYTE],
  [GL.R8_SNORM]: [GL.RED, GL.BYTE],
  [GL.R16F]: [GL.RED, GL.FLOAT],
  [GL.R32F]: [GL.RED, GL.FLOAT],
  [GL.R8UI]: [GL.RED_INTEGER, GL.UNSIGNED_BYTE],
  [GL.R8I]: [GL.RED_INTEGER, GL.BYTE],
  [GL.R16UI]: [GL.RED_INTEGER, GL.UNSIGNED_SHORT],
  [GL.R16I]: [GL.RED_INTEGER, GL.SHORT],
  [GL.R32UI]: [GL.RED_INTEGER, GL.UNSIGNED_INT],
  [GL.R32I]: [GL.RED_INTEGER, GL.INT],
  [GL.RG8]: [GL.RG, GL.UNSIGNED_BYTE],
  [GL.RG8_SNORM]: [GL.RG, GL.BYTE],
  [GL.RG16F]: [GL.RG, GL.FLOAT],
  [GL.RG32F]: [GL.RG, GL.FLOAT],
  [GL.RG8UI]: [GL.RG_INTEGER, GL.UNSIGNED_BYTE],
  [GL.RG8I]: [GL.RG_INTEGER, GL.BYTE],
  [GL.RG16UI]: [GL.RG_INTEGER, GL.UNSIGNED_SHORT],
  [GL.RG16I]: [GL.RG_INTEGER, GL.SHORT],
  [GL.RG32UI]: [GL.RG_INTEGER, GL.UNSIGNED_INT],
  [GL.RG32I]: [GL.RG_INTEGER, GL.INT],
  [GL.RGB8]: [GL.RGB, GL.UNSIGNED_BYTE],
  [GL.SRGB8]: [GL.RGB, GL.UNSIGNED_BYTE],
  [GL.RGB565]: [GL.RGB, GL.UNSIGNED_SHORT_5_6_5],
  [GL.RGB8_SNORM]: [GL.RGB, GL.BYTE],
  [GL.R11F_G11F_B10F]: [GL.RGB, GL.UNSIGNED_INT_10F_11F_11F_REV],
  [GL.RGB9_E5]: [GL.RGB, GL.UNSIGNED_INT_5_9_9_9_REV],
  [GL.RGB16F]: [GL.RGB, GL.FLOAT],
  [GL.RGB32F]: [GL.RGB, GL.FLOAT],
  [GL.RGB8UI]: [GL.RGB_INTEGER, GL.UNSIGNED_BYTE],
  [GL.RGB8I]: [GL.RGB_INTEGER, GL.BYTE],
  [GL.RGB16UI]: [GL.RGB_INTEGER, GL.UNSIGNED_SHORT],
  [GL.RGB16I]: [GL.RGB_INTEGER, GL.SHORT],
  [GL.RGB32UI]: [GL.RGB_INTEGER, GL.UNSIGNED_INT],
  [GL.RGB32I]: [GL.RGB_INTEGER, GL.INT],
  [GL.RGBA8]: [GL.RGBA, GL.UNSIGNED_BYTE],
  [GL.SRGB8_ALPHA8]: [GL.RGBA, GL.UNSIGNED_BYTE],
  [GL.RGBA8_SNORM]: [GL.RGBA, GL.BYTE],
  [GL.RGB5_A1]: [GL.RGBA, GL.UNSIGNED_SHORT_5_5_5_1],
  [GL.RGBA4]: [GL.RGBA, GL.UNSIGNED_SHORT_4_4_4_4],
  [GL.RGB10_A2]: [GL.RGBA, GL.UNSIGNED_INT_2_10_10_10_REV],
  [GL.RGBA16F]: [GL.RGBA, GL.FLOAT],
  [GL.RGBA32F]: [GL.RGBA, GL.FLOAT],
  [GL.RGBA8UI]: [GL.RGBA_INTEGER, GL.UNSIGNED_BYTE],
  [GL.RGBA8I]: [GL.RGBA_INTEGER, GL.BYTE],
  [GL.RGB10_A2UI]: [GL.RGBA_INTEGER, GL.UNSIGNED_INT_2_10_10_10_REV],
  [GL.RGBA16UI]: [GL.RGBA_INTEGER, GL.UNSIGNED_SHORT],
  [GL.RGBA16I]: [GL.RGBA_INTEGER, GL.SHORT],
  [GL.RGBA32I]: [GL.RGBA_INTEGER, GL.INT],
  [GL.RGBA32UI]: [GL.RGBA_INTEGER, GL.UNSIGNED_INT],
  [GL.DEPTH_COMPONENT16]: [GL.DEPTH_COMPONENT, GL.UNSIGNED_SHORT],
  [GL.DEPTH_COMPONENT24]: [GL.DEPTH_COMPONENT, GL.UNSIGNED_INT],
  [GL.DEPTH_COMPONENT32F]: [GL.DEPTH_COMPONENT, GL.FLOAT],
  [GL.DEPTH24_STENCIL8]: [GL.DEPTH_STENCIL, GL.UNSIGNED_INT_24_8],
  [GL.DEPTH32F_STENCIL8]: [GL.DEPTH_STENCIL, GL.FLOAT_32_UNSIGNED_INT_24_8_REV]
};
var COMPRESSED_TEXTURE_TYPES = {
  [GL.COMPRESSED_RGB_S3TC_DXT1_EXT]: true,
  [GL.COMPRESSED_RGBA_S3TC_DXT1_EXT]: true,
  [GL.COMPRESSED_RGBA_S3TC_DXT3_EXT]: true,
  [GL.COMPRESSED_RGBA_S3TC_DXT5_EXT]: true,
  [GL.COMPRESSED_SRGB_S3TC_DXT1_EXT]: true,
  [GL.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]: true,
  [GL.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]: true,
  [GL.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]: true,
  [GL.COMPRESSED_R11_EAC]: true,
  [GL.COMPRESSED_SIGNED_R11_EAC]: true,
  [GL.COMPRESSED_RG11_EAC]: true,
  [GL.COMPRESSED_SIGNED_RG11_EAC]: true,
  [GL.COMPRESSED_RGB8_ETC2]: true,
  [GL.COMPRESSED_SRGB8_ETC2]: true,
  [GL.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]: true,
  [GL.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]: true,
  [GL.COMPRESSED_RGBA8_ETC2_EAC]: true,
  [GL.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]: true,
  [GL.COMPRESSED_RGBA_ASTC_4x4_KHR]: true,
  [GL.COMPRESSED_RGBA_ASTC_5x4_KHR]: true,
  [GL.COMPRESSED_RGBA_ASTC_5x5_KHR]: true,
  [GL.COMPRESSED_RGBA_ASTC_6x5_KHR]: true,
  [GL.COMPRESSED_RGBA_ASTC_6x6_KHR]: true,
  [GL.COMPRESSED_RGBA_ASTC_8x5_KHR]: true,
  [GL.COMPRESSED_RGBA_ASTC_8x6_KHR]: true,
  [GL.COMPRESSED_RGBA_ASTC_8x8_KHR]: true,
  [GL.COMPRESSED_RGBA_ASTC_10x5_KHR]: true,
  [GL.COMPRESSED_RGBA_ASTC_10x6_KHR]: true,
  [GL.COMPRESSED_RGBA_ASTC_10x8_KHR]: true,
  [GL.COMPRESSED_RGBA_ASTC_10x10_KHR]: true,
  [GL.COMPRESSED_RGBA_ASTC_12x10_KHR]: true,
  [GL.COMPRESSED_RGBA_ASTC_12x12_KHR]: true,
  [GL.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR]: true,
  [GL.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR]: true,
  [GL.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR]: true,
  [GL.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR]: true,
  [GL.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR]: true,
  [GL.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR]: true,
  [GL.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR]: true,
  [GL.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR]: true,
  [GL.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR]: true,
  [GL.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR]: true,
  [GL.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR]: true,
  [GL.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR]: true,
  [GL.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR]: true,
  [GL.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR]: true,
  [GL.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]: true,
  [GL.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]: true,
  [GL.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]: true,
  [GL.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]: true
};
var WEBGL_INFO = {};
var DUMMY_UNIT_ARRAY = new Array(1);
var DUMMY_OBJECT = {};
var TEXTURE_FORMAT_DEFAULTS = {
  [GL.UNSIGNED_BYTE]: {
    [GL.RED]: GL.R8,
    [GL.RG]: GL.RG8,
    [GL.RGB]: GL.RGB8,
    [GL.RGBA]: GL.RGBA8
  },
  [GL.UNSIGNED_SHORT]: {
    [GL.DEPTH_COMPONENT]: GL.DEPTH_COMPONENT16
  },
  [GL.FLOAT]: {
    [GL.RED]: GL.R16F,
    [GL.RG]: GL.RG16F,
    [GL.RGB]: GL.RGB16F,
    [GL.RGBA]: GL.RGBA16F,
    [GL.DEPTH_COMPONENT]: GL.DEPTH_COMPONENT32F
  }
};

// node_modules/picogl/build/module/cubemap.js
var Cubemap = class {
  constructor(gl, appState, options) {
    this.gl = gl;
    this.texture = null;
    this.appState = appState;
    this.compressed = COMPRESSED_TEXTURE_TYPES[options.internalFormat];
    if (options.format !== void 0) {
      console.warn("Cubemap option 'format' is deprecated and will be removed. Use 'internalFormat' with a sized format instead.");
      this.compressed = Boolean(COMPRESSED_TEXTURE_TYPES[options.format]);
      if (options.type === void 0) {
        options.type = options.format === GL.DEPTH_COMPONENT ? GL.UNSIGNED_SHORT : GL.UNSIGNED_BYTE;
      }
      if (options.internalFormat === void 0) {
        if (this.compressed) {
          options.internalFormat = options.format;
        } else {
          options.internalFormat = TEXTURE_FORMAT_DEFAULTS[options.type][options.format];
        }
      }
    }
    if (this.compressed) {
      this.internalFormat = options.internalFormat;
      this.format = options.internalFormat;
      this.type = GL.UNSIGNED_BYTE;
    } else {
      this.internalFormat = options.internalFormat !== void 0 ? options.internalFormat : GL.RGBA8;
      let formatInfo = TEXTURE_FORMATS[this.internalFormat];
      this.format = formatInfo[0];
      this.type = options.type !== void 0 ? options.type : formatInfo[1];
    }
    this.currentUnit = -1;
    let arrayData = Array.isArray(options.negX);
    let negX = arrayData ? options.negX[0] : options.negX;
    let {
      width = negX.width,
      height = negX.height,
      flipY = false,
      premultiplyAlpha = false,
      minFilter = negX ? GL.LINEAR_MIPMAP_NEAREST : GL.NEAREST,
      magFilter = negX ? GL.LINEAR : GL.NEAREST,
      wrapS = GL.REPEAT,
      wrapT = GL.REPEAT,
      compareMode = GL.NONE,
      compareFunc = GL.LEQUAL,
      minLOD = null,
      maxLOD = null,
      baseLevel = null,
      maxLevel = null,
      maxAnisotropy = 1
    } = options;
    this.width = width;
    this.height = height;
    this.flipY = flipY;
    this.premultiplyAlpha = premultiplyAlpha;
    this.minFilter = minFilter;
    this.magFilter = magFilter;
    this.wrapS = wrapS;
    this.wrapT = wrapT;
    this.compareMode = compareMode;
    this.compareFunc = compareFunc;
    this.minLOD = minLOD;
    this.maxLOD = maxLOD;
    this.baseLevel = baseLevel;
    this.maxLevel = maxLevel;
    this.maxAnisotropy = Math.min(maxAnisotropy, WEBGL_INFO.MAX_TEXTURE_ANISOTROPY);
    this.mipmaps = minFilter === GL.LINEAR_MIPMAP_NEAREST || minFilter === GL.LINEAR_MIPMAP_LINEAR;
    this.miplevelsProvided = arrayData && options.negX.length > 1;
    this.levels = this.mipmaps ? Math.floor(Math.log2(Math.min(this.width, this.height))) + 1 : 1;
    this.restore(options);
  }
  restore(options = DUMMY_OBJECT) {
    this.texture = this.gl.createTexture();
    if (this.currentUnit !== -1) {
      this.appState.textures[this.currentUnit] = null;
    }
    this.bind(0);
    this.gl.texParameteri(GL.TEXTURE_CUBE_MAP, GL.TEXTURE_MAG_FILTER, this.magFilter);
    this.gl.texParameteri(GL.TEXTURE_CUBE_MAP, GL.TEXTURE_MIN_FILTER, this.minFilter);
    this.gl.texParameteri(GL.TEXTURE_CUBE_MAP, GL.TEXTURE_WRAP_S, this.wrapS);
    this.gl.texParameteri(GL.TEXTURE_CUBE_MAP, GL.TEXTURE_WRAP_T, this.wrapT);
    this.gl.texParameteri(GL.TEXTURE_CUBE_MAP, GL.TEXTURE_COMPARE_FUNC, this.compareFunc);
    this.gl.texParameteri(GL.TEXTURE_CUBE_MAP, GL.TEXTURE_COMPARE_MODE, this.compareMode);
    if (this.baseLevel !== null) {
      this.gl.texParameteri(GL.TEXTURE_CUBE_MAP, GL.TEXTURE_BASE_LEVEL, this.baseLevel);
    }
    if (this.maxLevel !== null) {
      this.gl.texParameteri(GL.TEXTURE_CUBE_MAP, GL.TEXTURE_MAX_LEVEL, this.maxLevel);
    }
    if (this.minLOD !== null) {
      this.gl.texParameteri(GL.TEXTURE_CUBE_MAP, GL.TEXTURE_MIN_LOD, this.minLOD);
    }
    if (this.maxLOD !== null) {
      this.gl.texParameteri(GL.TEXTURE_CUBE_MAP, GL.TEXTURE_MAX_LOD, this.maxLOD);
    }
    if (this.maxAnisotropy > 1) {
      this.gl.texParameteri(GL.TEXTURE_CUBE_MAP, GL.TEXTURE_MAX_ANISOTROPY_EXT, this.maxAnisotropy);
    }
    this.gl.texStorage2D(GL.TEXTURE_CUBE_MAP, this.levels, this.internalFormat, this.width, this.height);
    let { negX, posX, negY, posY, negZ, posZ } = options;
    if (negX) {
      this.faceData(GL.TEXTURE_CUBE_MAP_NEGATIVE_X, negX);
      this.faceData(GL.TEXTURE_CUBE_MAP_POSITIVE_X, posX);
      this.faceData(GL.TEXTURE_CUBE_MAP_NEGATIVE_Y, negY);
      this.faceData(GL.TEXTURE_CUBE_MAP_POSITIVE_Y, posY);
      this.faceData(GL.TEXTURE_CUBE_MAP_NEGATIVE_Z, negZ);
      this.faceData(GL.TEXTURE_CUBE_MAP_POSITIVE_Z, posZ);
    }
    if (this.mipmaps && !this.miplevelsProvided) {
      this.gl.generateMipmap(GL.TEXTURE_CUBE_MAP);
    }
    return this;
  }
  delete() {
    if (this.texture) {
      this.gl.deleteTexture(this.texture);
      this.texture = null;
      this.appState.textures[this.currentUnit] = null;
      this.currentUnit = -1;
    }
    return this;
  }
  faceData(face, data) {
    if (!Array.isArray(data)) {
      DUMMY_UNIT_ARRAY[0] = data;
      data = DUMMY_UNIT_ARRAY;
    }
    let numLevels = this.mipmaps ? data.length : 1;
    let width = this.width;
    let height = this.height;
    let i4;
    this.gl.pixelStorei(GL.UNPACK_FLIP_Y_WEBGL, this.flipY);
    this.gl.pixelStorei(GL.UNPACK_PREMULTIPLY_ALPHA_WEBGL, this.premultiplyAlpha);
    if (this.compressed) {
      for (i4 = 0; i4 < numLevels; ++i4) {
        this.gl.compressedTexSubImage2D(face, i4, 0, 0, width, height, this.format, data[i4]);
        width = Math.max(width >> 1, 1);
        height = Math.max(height >> 1, 1);
      }
    } else {
      for (i4 = 0; i4 < numLevels; ++i4) {
        this.gl.texSubImage2D(face, i4, 0, 0, width, height, this.format, this.type, data[i4]);
        width = Math.max(width >> 1, 1);
        height = Math.max(height >> 1, 1);
      }
    }
    return this;
  }
  bind(unit) {
    let currentTexture = this.appState.textures[unit];
    if (this.appState.activeTexture !== unit) {
      this.gl.activeTexture(GL.TEXTURE0 + unit);
      this.appState.activeTexture = unit;
    }
    if (currentTexture !== this) {
      if (currentTexture) {
        currentTexture.currentUnit = -1;
      }
      if (this.currentUnit !== -1) {
        this.appState.textures[this.currentUnit] = null;
      }
      this.gl.bindTexture(GL.TEXTURE_CUBE_MAP, this.texture);
      this.appState.textures[unit] = this;
      this.currentUnit = unit;
    }
    return this;
  }
};

// node_modules/picogl/build/module/draw-call.js
var DrawCall = class {
  constructor(gl, appState, program, vertexArray = null, primitive) {
    this.gl = gl;
    this.currentProgram = program;
    this.drawPrimitive = GL.TRIANGLES;
    this.currentVertexArray = vertexArray;
    this.currentTransformFeedback = null;
    this.appState = appState;
    this.uniformIndices = {};
    this.uniformNames = new Array(WEBGL_INFO.MAX_UNIFORMS);
    this.uniformValues = new Array(WEBGL_INFO.MAX_UNIFORMS);
    this.uniformCount = 0;
    this.uniformBuffers = new Array(WEBGL_INFO.MAX_UNIFORM_BUFFERS);
    this.uniformBlockNames = new Array(WEBGL_INFO.MAX_UNIFORM_BUFFERS);
    this.uniformBlockCount = 0;
    this.textures = new Array(WEBGL_INFO.MAX_TEXTURE_UNITS);
    this.textureCount = 0;
    this.offsets = new Int32Array(1);
    this.numElements = new Int32Array(1);
    this.numInstances = new Int32Array(1);
    this.numDraws = 1;
    this.drawCountsFromVertexArray = true;
    if (primitive !== void 0) {
      console.warn("Primitive argument to 'App.createDrawCall' is deprecated and will be removed. Use 'DrawCall.primitive' instead.");
      this.primitive(primitive);
    }
  }
  primitive(primitive) {
    this.drawPrimitive = primitive;
    return this;
  }
  transformFeedback(transformFeedback) {
    this.currentTransformFeedback = transformFeedback;
    return this;
  }
  uniform(name, value) {
    let index = this.uniformIndices[name];
    if (index === void 0) {
      index = this.uniformCount++;
      this.uniformIndices[name] = index;
      this.uniformNames[index] = name;
    }
    this.uniformValues[index] = value;
    return this;
  }
  texture(name, texture) {
    let unit = this.currentProgram.samplers[name];
    this.textures[unit] = texture;
    return this;
  }
  uniformBlock(name, buffer2) {
    let base = this.currentProgram.uniformBlocks[name];
    this.uniformBuffers[base] = buffer2;
    return this;
  }
  drawRanges(...counts) {
    this.numDraws = counts.length;
    if (this.offsets.length < this.numDraws) {
      this.offsets = new Int32Array(this.numDraws);
    }
    if (this.numElements.length < this.numDraws) {
      this.numElements = new Int32Array(this.numDraws);
    }
    if (this.numInstances.length < this.numDraws) {
      this.numInstances = new Int32Array(this.numDraws);
    }
    for (let i4 = 0; i4 < this.numDraws; ++i4) {
      let count = counts[i4];
      this.offsets[i4] = count[0];
      this.numElements[i4] = count[1];
      this.numInstances[i4] = count[2] || 1;
    }
    this.drawCountsFromVertexArray = false;
    return this;
  }
  draw() {
    let uniformNames = this.uniformNames;
    let uniformValues = this.uniformValues;
    let uniformBuffers = this.uniformBuffers;
    let uniformBlockCount = this.currentProgram.uniformBlockCount;
    let textures = this.textures;
    let textureCount = this.currentProgram.samplerCount;
    let indexed = false;
    this.currentProgram.bind();
    if (this.currentVertexArray) {
      this.currentVertexArray.bind();
      indexed = this.currentVertexArray.indexed;
      if (this.drawCountsFromVertexArray) {
        this.numElements[0] = this.currentVertexArray.numElements;
        this.numInstances[0] = this.currentVertexArray.numInstances;
      }
    }
    for (let uIndex = 0; uIndex < this.uniformCount; ++uIndex) {
      this.currentProgram.uniform(uniformNames[uIndex], uniformValues[uIndex]);
    }
    for (let base = 0; base < uniformBlockCount; ++base) {
      uniformBuffers[base].bind(base);
    }
    for (let tIndex = 0; tIndex < textureCount; ++tIndex) {
      textures[tIndex].bind(tIndex);
    }
    if (this.currentTransformFeedback) {
      this.currentTransformFeedback.bind();
      this.gl.beginTransformFeedback(this.drawPrimitive);
    } else if (this.appState.transformFeedback) {
      this.gl.bindTransformFeedback(GL.TRANSFORM_FEEDBACK, null);
      this.appState.transformFeedback = null;
    }
    if (WEBGL_INFO.MULTI_DRAW_INSTANCED) {
      let ext = this.appState.extensions.multiDrawInstanced;
      if (indexed) {
        ext.multiDrawElementsInstancedWEBGL(this.drawPrimitive, this.numElements, 0, this.currentVertexArray.indexType, this.offsets, 0, this.numInstances, 0, this.numDraws);
      } else {
        ext.multiDrawArraysInstancedWEBGL(this.drawPrimitive, this.offsets, 0, this.numElements, 0, this.numInstances, 0, this.numDraws);
      }
    } else if (indexed) {
      for (let i4 = 0; i4 < this.numDraws; ++i4) {
        this.gl.drawElementsInstanced(this.drawPrimitive, this.numElements[i4], this.currentVertexArray.indexType, this.offsets[i4], this.numInstances[i4]);
      }
    } else {
      for (let i4 = 0; i4 < this.numDraws; ++i4) {
        this.gl.drawArraysInstanced(this.drawPrimitive, this.offsets[i4], this.numElements[i4], this.numInstances[i4]);
      }
    }
    if (this.currentTransformFeedback) {
      this.gl.endTransformFeedback();
    }
    return this;
  }
};

// node_modules/picogl/build/module/texture.js
var Texture = class {
  constructor(gl, appState, binding, image, width = image.width, height = image.height, depth, is3D, options = DUMMY_OBJECT) {
    this.gl = gl;
    this.binding = binding;
    this.texture = null;
    this.width = width || 0;
    this.height = height || 0;
    this.depth = depth || 0;
    this.is3D = is3D;
    this.appState = appState;
    this.compressed = Boolean(COMPRESSED_TEXTURE_TYPES[options.internalFormat]);
    if (options.format !== void 0) {
      console.warn("Texture option 'format' is deprecated and will be removed. Use 'internalFormat' with a sized format instead.");
      this.compressed = Boolean(COMPRESSED_TEXTURE_TYPES[options.format]);
      if (options.type === void 0) {
        options.type = options.format === GL.DEPTH_COMPONENT ? GL.UNSIGNED_SHORT : GL.UNSIGNED_BYTE;
      }
      if (options.internalFormat === void 0) {
        if (this.compressed) {
          options.internalFormat = options.format;
        } else {
          options.internalFormat = TEXTURE_FORMAT_DEFAULTS[options.type][options.format];
        }
      }
    }
    if (this.compressed) {
      this.internalFormat = options.internalFormat;
      this.format = this.internalFormat;
      this.type = GL.UNSIGNED_BYTE;
    } else {
      this.internalFormat = options.internalFormat !== void 0 ? options.internalFormat : GL.RGBA8;
      let formatInfo = TEXTURE_FORMATS[this.internalFormat];
      this.format = formatInfo[0];
      this.type = options.type !== void 0 ? options.type : formatInfo[1];
    }
    this.currentUnit = -1;
    let {
      minFilter = image ? GL.LINEAR_MIPMAP_NEAREST : GL.NEAREST,
      magFilter = image ? GL.LINEAR : GL.NEAREST,
      wrapS = GL.REPEAT,
      wrapT = GL.REPEAT,
      wrapR = GL.REPEAT,
      compareMode = GL.NONE,
      compareFunc = GL.LEQUAL,
      minLOD = null,
      maxLOD = null,
      baseLevel = null,
      maxLevel = null,
      maxAnisotropy = 1,
      flipY = false,
      premultiplyAlpha = false
    } = options;
    this.minFilter = minFilter;
    this.magFilter = magFilter;
    this.wrapS = wrapS;
    this.wrapT = wrapT;
    this.wrapR = wrapR;
    this.compareMode = compareMode;
    this.compareFunc = compareFunc;
    this.minLOD = minLOD;
    this.maxLOD = maxLOD;
    this.baseLevel = baseLevel;
    this.maxLevel = maxLevel;
    this.maxAnisotropy = Math.min(maxAnisotropy, WEBGL_INFO.MAX_TEXTURE_ANISOTROPY);
    this.flipY = flipY;
    this.premultiplyAlpha = premultiplyAlpha;
    this.mipmaps = minFilter === GL.LINEAR_MIPMAP_NEAREST || minFilter === GL.LINEAR_MIPMAP_LINEAR;
    this.restore(image);
  }
  restore(image) {
    this.texture = null;
    this.resize(this.width, this.height, this.depth);
    if (image) {
      this.data(image);
    }
    return this;
  }
  resize(width, height, depth) {
    depth = depth || 0;
    if (this.texture && width === this.width && height === this.height && depth === this.depth) {
      return this;
    }
    this.gl.deleteTexture(this.texture);
    if (this.currentUnit !== -1) {
      this.appState.textures[this.currentUnit] = null;
    }
    this.texture = this.gl.createTexture();
    this.bind(Math.max(this.currentUnit, 0));
    this.width = width;
    this.height = height;
    this.depth = depth;
    this.gl.texParameteri(this.binding, GL.TEXTURE_MIN_FILTER, this.minFilter);
    this.gl.texParameteri(this.binding, GL.TEXTURE_MAG_FILTER, this.magFilter);
    this.gl.texParameteri(this.binding, GL.TEXTURE_WRAP_S, this.wrapS);
    this.gl.texParameteri(this.binding, GL.TEXTURE_WRAP_T, this.wrapT);
    this.gl.texParameteri(this.binding, GL.TEXTURE_WRAP_R, this.wrapR);
    this.gl.texParameteri(this.binding, GL.TEXTURE_COMPARE_FUNC, this.compareFunc);
    this.gl.texParameteri(this.binding, GL.TEXTURE_COMPARE_MODE, this.compareMode);
    if (this.minLOD !== null) {
      this.gl.texParameterf(this.binding, GL.TEXTURE_MIN_LOD, this.minLOD);
    }
    if (this.maxLOD !== null) {
      this.gl.texParameterf(this.binding, GL.TEXTURE_MAX_LOD, this.maxLOD);
    }
    if (this.baseLevel !== null) {
      this.gl.texParameteri(this.binding, GL.TEXTURE_BASE_LEVEL, this.baseLevel);
    }
    if (this.maxLevel !== null) {
      this.gl.texParameteri(this.binding, GL.TEXTURE_MAX_LEVEL, this.maxLevel);
    }
    if (this.maxAnisotropy > 1) {
      this.gl.texParameteri(this.binding, GL.TEXTURE_MAX_ANISOTROPY_EXT, this.maxAnisotropy);
    }
    let levels;
    if (this.is3D) {
      if (this.mipmaps) {
        levels = Math.floor(Math.log2(Math.max(Math.max(this.width, this.height), this.depth))) + 1;
      } else {
        levels = 1;
      }
      this.gl.texStorage3D(this.binding, levels, this.internalFormat, this.width, this.height, this.depth);
    } else {
      if (this.mipmaps) {
        levels = Math.floor(Math.log2(Math.max(this.width, this.height))) + 1;
      } else {
        levels = 1;
      }
      this.gl.texStorage2D(this.binding, levels, this.internalFormat, this.width, this.height);
    }
    return this;
  }
  data(data) {
    if (!Array.isArray(data)) {
      DUMMY_UNIT_ARRAY[0] = data;
      data = DUMMY_UNIT_ARRAY;
    }
    let numLevels = this.mipmaps ? data.length : 1;
    let width = this.width;
    let height = this.height;
    let depth = this.depth;
    let generateMipmaps = this.mipmaps && data.length === 1;
    let i4;
    this.bind(Math.max(this.currentUnit, 0));
    this.gl.pixelStorei(GL.UNPACK_FLIP_Y_WEBGL, this.flipY);
    this.gl.pixelStorei(GL.UNPACK_PREMULTIPLY_ALPHA_WEBGL, this.premultiplyAlpha);
    if (this.compressed) {
      if (this.is3D) {
        for (i4 = 0; i4 < numLevels; ++i4) {
          this.gl.compressedTexSubImage3D(this.binding, i4, 0, 0, 0, width, height, depth, this.format, data[i4]);
          width = Math.max(width >> 1, 1);
          height = Math.max(height >> 1, 1);
          depth = Math.max(depth >> 1, 1);
        }
      } else {
        for (i4 = 0; i4 < numLevels; ++i4) {
          this.gl.compressedTexSubImage2D(this.binding, i4, 0, 0, width, height, this.format, data[i4]);
          width = Math.max(width >> 1, 1);
          height = Math.max(height >> 1, 1);
        }
      }
    } else if (this.is3D) {
      for (i4 = 0; i4 < numLevels; ++i4) {
        this.gl.texSubImage3D(this.binding, i4, 0, 0, 0, width, height, depth, this.format, this.type, data[i4]);
        width = Math.max(width >> 1, 1);
        height = Math.max(height >> 1, 1);
        depth = Math.max(depth >> 1, 1);
      }
    } else {
      for (i4 = 0; i4 < numLevels; ++i4) {
        this.gl.texSubImage2D(this.binding, i4, 0, 0, width, height, this.format, this.type, data[i4]);
        width = Math.max(width >> 1, 1);
        height = Math.max(height >> 1, 1);
      }
    }
    if (generateMipmaps) {
      this.gl.generateMipmap(this.binding);
    }
    return this;
  }
  delete() {
    if (this.texture) {
      this.gl.deleteTexture(this.texture);
      this.texture = null;
      if (this.currentUnit !== -1 && this.appState.textures[this.currentUnit] === this) {
        this.appState.textures[this.currentUnit] = null;
        this.currentUnit = -1;
      }
    }
    return this;
  }
  bind(unit) {
    let currentTexture = this.appState.textures[unit];
    if (this.appState.activeTexture !== unit) {
      this.gl.activeTexture(GL.TEXTURE0 + unit);
      this.appState.activeTexture = unit;
    }
    if (currentTexture !== this) {
      if (currentTexture) {
        currentTexture.currentUnit = -1;
      }
      if (this.currentUnit !== -1) {
        this.appState.textures[this.currentUnit] = null;
      }
      this.gl.bindTexture(this.binding, this.texture);
      this.appState.textures[unit] = this;
      this.currentUnit = unit;
    }
    return this;
  }
};

// node_modules/picogl/build/module/renderbuffer.js
var Renderbuffer = class {
  constructor(gl, width, height, internalFormat, samples = 0) {
    this.gl = gl;
    this.renderbuffer = null;
    this.width = width;
    this.height = height;
    this.internalFormat = internalFormat;
    this.samples = samples;
    this.restore();
  }
  restore() {
    this.renderbuffer = this.gl.createRenderbuffer();
    this.resize(this.width, this.height);
    return this;
  }
  resize(width, height) {
    this.width = width;
    this.height = height;
    this.gl.bindRenderbuffer(GL.RENDERBUFFER, this.renderbuffer);
    this.gl.renderbufferStorageMultisample(GL.RENDERBUFFER, this.samples, this.internalFormat, this.width, this.height);
    this.gl.bindRenderbuffer(GL.RENDERBUFFER, null);
    return this;
  }
  delete() {
    this.gl.deleteRenderbuffer(this.renderbuffer);
    this.renderbuffer = null;
    return this;
  }
};

// node_modules/picogl/build/module/framebuffer.js
var Framebuffer = class {
  constructor(gl, appState) {
    this.gl = gl;
    this.framebuffer = null;
    this.appState = appState;
    this.numColorTargets = 0;
    this.colorAttachments = [];
    this.colorAttachmentEnums = [];
    this.colorAttachmentTargets = [];
    this.depthAttachment = null;
    this.depthAttachmentTarget = null;
    this.width = 0;
    this.height = 0;
    this.restore();
  }
  restore() {
    let currentFramebuffers = this.appState.framebuffers;
    for (let binding in currentFramebuffers) {
      if (currentFramebuffers[binding] === this) {
        currentFramebuffers[binding] = null;
      }
    }
    this.framebuffer = this.gl.createFramebuffer();
    return this;
  }
  colorTarget(index, attachment, target = attachment.is3D ? 0 : GL.TEXTURE_2D) {
    if (index >= this.numColorTargets) {
      let numColorTargets = index + 1;
      this.colorAttachmentEnums.length = numColorTargets;
      this.colorAttachments.length = numColorTargets;
      this.colorAttachmentTargets.length = numColorTargets;
      for (let i4 = this.numColorTargets; i4 < numColorTargets - 1; ++i4) {
        this.colorAttachmentEnums[i4] = GL.NONE;
        this.colorAttachments[i4] = null;
        this.colorAttachmentTargets[i4] = 0;
      }
      this.numColorTargets = numColorTargets;
    }
    this.colorAttachmentEnums[index] = GL.COLOR_ATTACHMENT0 + index;
    this.colorAttachments[index] = attachment;
    this.colorAttachmentTargets[index] = target;
    let currentFramebuffer = this.bindAndCaptureState();
    let binding = this.appState.drawFramebufferBinding;
    if (attachment instanceof Renderbuffer) {
      this.gl.framebufferRenderbuffer(binding, this.colorAttachmentEnums[index], GL.RENDERBUFFER, attachment.renderbuffer);
    } else if (attachment.is3D) {
      this.gl.framebufferTextureLayer(binding, this.colorAttachmentEnums[index], attachment.texture, 0, target);
    } else {
      this.gl.framebufferTexture2D(binding, this.colorAttachmentEnums[index], target, attachment.texture, 0);
    }
    this.gl.drawBuffers(this.colorAttachmentEnums);
    this.width = attachment.width;
    this.height = attachment.height;
    this.restoreState(currentFramebuffer);
    return this;
  }
  depthTarget(attachment, target = attachment.is3D ? 0 : GL.TEXTURE_2D) {
    let currentFramebuffer = this.bindAndCaptureState();
    let binding = this.appState.drawFramebufferBinding;
    this.depthAttachment = attachment;
    this.depthAttachmentTarget = target;
    if (attachment instanceof Renderbuffer) {
      this.gl.framebufferRenderbuffer(binding, GL.DEPTH_ATTACHMENT, GL.RENDERBUFFER, attachment.renderbuffer);
    } else if (attachment.is3D) {
      this.gl.framebufferTextureLayer(binding, GL.DEPTH_ATTACHMENT, attachment.texture, 0, target);
    } else {
      this.gl.framebufferTexture2D(binding, GL.DEPTH_ATTACHMENT, target, attachment.texture, 0);
    }
    this.width = attachment.width;
    this.height = attachment.height;
    this.restoreState(currentFramebuffer);
    return this;
  }
  resize(width = this.gl.drawingBufferWidth, height = this.gl.drawingBufferHeight) {
    let currentFramebuffer = this.bindAndCaptureState();
    let binding = this.appState.drawFramebufferBinding;
    for (let i4 = 0; i4 < this.numColorTargets; ++i4) {
      let attachment = this.colorAttachments[i4];
      if (!attachment) {
        continue;
      }
      attachment.resize(width, height);
      if (attachment instanceof Texture) {
        if (attachment.is3D) {
          this.gl.framebufferTextureLayer(binding, this.colorAttachmentEnums[i4], attachment.texture, 0, this.colorAttachmentTargets[i4]);
        } else {
          this.gl.framebufferTexture2D(binding, this.colorAttachmentEnums[i4], this.colorAttachmentTargets[i4], attachment.texture, 0);
        }
      }
    }
    if (this.depthAttachment) {
      this.depthAttachment.resize(width, height);
      if (this.depthAttachment instanceof Texture) {
        if (this.depthAttachment.is3D) {
          this.gl.framebufferTextureLayer(binding, GL.DEPTH_ATTACHMENT, this.depthAttachment.texture, 0, this.depthAttachmentTarget);
        } else {
          this.gl.framebufferTexture2D(binding, GL.DEPTH_ATTACHMENT, this.depthAttachmentTarget, this.depthAttachment.texture, 0);
        }
      }
    }
    this.width = width;
    this.height = height;
    this.restoreState(currentFramebuffer);
    return this;
  }
  delete() {
    if (this.framebuffer) {
      this.gl.deleteFramebuffer(this.framebuffer);
      this.framebuffer = null;
      let currentFramebuffers = this.appState.framebuffers;
      for (let binding in currentFramebuffers) {
        if (currentFramebuffers[binding] === this) {
          this.gl.bindFramebuffer(binding, null);
          currentFramebuffers[binding] = null;
        }
      }
    }
    return this;
  }
  getStatus() {
    let currentFramebuffer = this.bindAndCaptureState();
    let binding = this.appState.drawFramebufferBinding;
    let status = this.gl.checkFramebufferStatus(binding);
    this.restoreState(currentFramebuffer);
    return status;
  }
  bindForDraw() {
    let binding = this.appState.drawFramebufferBinding;
    let currentFramebuffers = this.appState.framebuffers;
    if (currentFramebuffers[binding] !== this) {
      this.gl.bindFramebuffer(binding, this.framebuffer);
      currentFramebuffers[binding] = this;
    }
    return this;
  }
  bindForRead() {
    let binding = this.appState.readFramebufferBinding;
    let currentFramebuffers = this.appState.framebuffers;
    if (currentFramebuffers[binding] !== this) {
      this.gl.bindFramebuffer(binding, this.framebuffer);
      currentFramebuffers[binding] = this;
    }
    return this;
  }
  bindAndCaptureState() {
    let binding = this.appState.drawFramebufferBinding;
    let currentFramebuffer = this.appState.framebuffers[binding];
    if (currentFramebuffer !== this) {
      this.gl.bindFramebuffer(binding, this.framebuffer);
    }
    return currentFramebuffer;
  }
  restoreState(framebuffer) {
    if (framebuffer !== this) {
      let binding = this.appState.drawFramebufferBinding;
      this.gl.bindFramebuffer(binding, framebuffer ? framebuffer.framebuffer : null);
    }
    return this;
  }
  get colorTextures() {
    console.error("Framebuffer.colorTextures is deprecated and will be removed. Please use Framebuffer.colorAttachments.");
    return this.colorAttachments;
  }
  get depthTexture() {
    console.error("Framebuffer.depthTexture is deprecated and will be removed. Please use Framebuffer.depthAttachment.");
    return this.depthAttachment;
  }
};

// node_modules/picogl/build/module/shader.js
var Shader = class {
  constructor(gl, appState, type, source) {
    this.gl = gl;
    this.appState = appState;
    this.shader = null;
    this.type = type;
    this.source = source.trim();
    this.restore();
  }
  restore() {
    this.shader = this.gl.createShader(this.type);
    this.gl.shaderSource(this.shader, this.source);
    this.gl.compileShader(this.shader);
    return this;
  }
  translatedSource() {
    if (WEBGL_INFO.DEBUG_SHADERS) {
      return this.appState.extensions.debugShaders.getTranslatedShaderSource(this.shader);
    } else {
      return "(Unavailable)";
    }
  }
  delete() {
    if (this.shader) {
      this.gl.deleteShader(this.shader);
      this.shader = null;
    }
    return this;
  }
  checkCompilation() {
    if (!this.gl.getShaderParameter(this.shader, GL.COMPILE_STATUS)) {
      let i4, lines;
      console.error(this.gl.getShaderInfoLog(this.shader));
      lines = this.source.split("\n");
      for (i4 = 0; i4 < lines.length; ++i4) {
        console.error(`${i4 + 1}: ${lines[i4]}`);
      }
    }
    return this;
  }
};

// node_modules/picogl/build/module/uniforms.js
var UNIFORM_FUNC_NAME = {};
UNIFORM_FUNC_NAME[GL.BOOL] = "uniform1i";
UNIFORM_FUNC_NAME[GL.INT] = "uniform1i";
UNIFORM_FUNC_NAME[GL.SAMPLER_2D] = "uniform1i";
UNIFORM_FUNC_NAME[GL.INT_SAMPLER_2D] = "uniform1i";
UNIFORM_FUNC_NAME[GL.UNSIGNED_INT_SAMPLER_2D] = "uniform1i";
UNIFORM_FUNC_NAME[GL.SAMPLER_2D_SHADOW] = "uniform1i";
UNIFORM_FUNC_NAME[GL.SAMPLER_2D_ARRAY] = "uniform1i";
UNIFORM_FUNC_NAME[GL.INT_SAMPLER_2D_ARRAY] = "uniform1i";
UNIFORM_FUNC_NAME[GL.UNSIGNED_INT_SAMPLER_2D_ARRAY] = "uniform1i";
UNIFORM_FUNC_NAME[GL.SAMPLER_2D_ARRAY_SHADOW] = "uniform1i";
UNIFORM_FUNC_NAME[GL.SAMPLER_CUBE] = "uniform1i";
UNIFORM_FUNC_NAME[GL.INT_SAMPLER_CUBE] = "uniform1i";
UNIFORM_FUNC_NAME[GL.UNSIGNED_INT_SAMPLER_CUBE] = "uniform1i";
UNIFORM_FUNC_NAME[GL.SAMPLER_CUBE_SHADOW] = "uniform1i";
UNIFORM_FUNC_NAME[GL.SAMPLER_3D] = "uniform1i";
UNIFORM_FUNC_NAME[GL.INT_SAMPLER_3D] = "uniform1i";
UNIFORM_FUNC_NAME[GL.UNSIGNED_INT_SAMPLER_3D] = "uniform1i";
UNIFORM_FUNC_NAME[GL.UNSIGNED_INT] = "uniform1ui";
UNIFORM_FUNC_NAME[GL.FLOAT] = "uniform1f";
UNIFORM_FUNC_NAME[GL.FLOAT_VEC2] = "uniform2f";
UNIFORM_FUNC_NAME[GL.FLOAT_VEC3] = "uniform3f";
UNIFORM_FUNC_NAME[GL.FLOAT_VEC4] = "uniform4f";
UNIFORM_FUNC_NAME[GL.INT_VEC2] = "uniform2i";
UNIFORM_FUNC_NAME[GL.INT_VEC3] = "uniform3i";
UNIFORM_FUNC_NAME[GL.INT_VEC4] = "uniform4i";
UNIFORM_FUNC_NAME[GL.UNSIGNED_INT_VEC2] = "uniform2ui";
UNIFORM_FUNC_NAME[GL.UNSIGNED_INT_VEC3] = "uniform3ui";
UNIFORM_FUNC_NAME[GL.UNSIGNED_INT_VEC4] = "uniform4ui";
UNIFORM_FUNC_NAME[GL.BOOL_VEC2] = "uniform2i";
UNIFORM_FUNC_NAME[GL.BOOL_VEC3] = "uniform3i";
UNIFORM_FUNC_NAME[GL.BOOL_VEC4] = "uniform4i";
UNIFORM_FUNC_NAME[GL.FLOAT_MAT2] = "uniformMatrix2fv";
UNIFORM_FUNC_NAME[GL.FLOAT_MAT3] = "uniformMatrix3fv";
UNIFORM_FUNC_NAME[GL.FLOAT_MAT4] = "uniformMatrix4fv";
UNIFORM_FUNC_NAME[GL.FLOAT_MAT2x3] = "uniformMatrix2x3fv";
UNIFORM_FUNC_NAME[GL.FLOAT_MAT2x4] = "uniformMatrix2x4fv";
UNIFORM_FUNC_NAME[GL.FLOAT_MAT3x2] = "uniformMatrix3x2fv";
UNIFORM_FUNC_NAME[GL.FLOAT_MAT3x4] = "uniformMatrix3x4fv";
UNIFORM_FUNC_NAME[GL.FLOAT_MAT4x2] = "uniformMatrix4x2fv";
UNIFORM_FUNC_NAME[GL.FLOAT_MAT4x3] = "uniformMatrix4x3fv";
var UNIFORM_COMPONENT_COUNT = {};
UNIFORM_COMPONENT_COUNT[GL.BOOL] = 1;
UNIFORM_COMPONENT_COUNT[GL.INT] = 1;
UNIFORM_COMPONENT_COUNT[GL.SAMPLER_2D] = 1;
UNIFORM_COMPONENT_COUNT[GL.INT_SAMPLER_2D] = 1;
UNIFORM_COMPONENT_COUNT[GL.UNSIGNED_INT_SAMPLER_2D] = 1;
UNIFORM_COMPONENT_COUNT[GL.SAMPLER_2D_SHADOW] = 1;
UNIFORM_COMPONENT_COUNT[GL.SAMPLER_2D_ARRAY] = 1;
UNIFORM_COMPONENT_COUNT[GL.INT_SAMPLER_2D_ARRAY] = 1;
UNIFORM_COMPONENT_COUNT[GL.UNSIGNED_INT_SAMPLER_2D_ARRAY] = 1;
UNIFORM_COMPONENT_COUNT[GL.SAMPLER_2D_ARRAY_SHADOW] = 1;
UNIFORM_COMPONENT_COUNT[GL.SAMPLER_CUBE] = 1;
UNIFORM_COMPONENT_COUNT[GL.INT_SAMPLER_CUBE] = 1;
UNIFORM_COMPONENT_COUNT[GL.UNSIGNED_INT_SAMPLER_CUBE] = 1;
UNIFORM_COMPONENT_COUNT[GL.SAMPLER_CUBE_SHADOW] = 1;
UNIFORM_COMPONENT_COUNT[GL.SAMPLER_3D] = 1;
UNIFORM_COMPONENT_COUNT[GL.INT_SAMPLER_3D] = 1;
UNIFORM_COMPONENT_COUNT[GL.UNSIGNED_INT_SAMPLER_3D] = 1;
UNIFORM_COMPONENT_COUNT[GL.UNSIGNED_INT] = 1;
UNIFORM_COMPONENT_COUNT[GL.FLOAT] = 1;
UNIFORM_COMPONENT_COUNT[GL.FLOAT_VEC2] = 2;
UNIFORM_COMPONENT_COUNT[GL.FLOAT_VEC3] = 3;
UNIFORM_COMPONENT_COUNT[GL.FLOAT_VEC4] = 4;
UNIFORM_COMPONENT_COUNT[GL.INT_VEC2] = 2;
UNIFORM_COMPONENT_COUNT[GL.INT_VEC3] = 3;
UNIFORM_COMPONENT_COUNT[GL.INT_VEC4] = 4;
UNIFORM_COMPONENT_COUNT[GL.UNSIGNED_INT_VEC2] = 2;
UNIFORM_COMPONENT_COUNT[GL.UNSIGNED_INT_VEC3] = 3;
UNIFORM_COMPONENT_COUNT[GL.UNSIGNED_INT_VEC4] = 4;
UNIFORM_COMPONENT_COUNT[GL.BOOL_VEC2] = 2;
UNIFORM_COMPONENT_COUNT[GL.BOOL_VEC3] = 3;
UNIFORM_COMPONENT_COUNT[GL.BOOL_VEC4] = 4;
UNIFORM_COMPONENT_COUNT[GL.FLOAT_MAT2] = 4;
UNIFORM_COMPONENT_COUNT[GL.FLOAT_MAT3] = 9;
UNIFORM_COMPONENT_COUNT[GL.FLOAT_MAT4] = 16;
UNIFORM_COMPONENT_COUNT[GL.FLOAT_MAT2x3] = 6;
UNIFORM_COMPONENT_COUNT[GL.FLOAT_MAT2x4] = 8;
UNIFORM_COMPONENT_COUNT[GL.FLOAT_MAT3x2] = 6;
UNIFORM_COMPONENT_COUNT[GL.FLOAT_MAT3x4] = 12;
UNIFORM_COMPONENT_COUNT[GL.FLOAT_MAT4x2] = 8;
UNIFORM_COMPONENT_COUNT[GL.FLOAT_MAT4x3] = 12;
var UNIFORM_CACHE_CLASS = {};
UNIFORM_CACHE_CLASS[GL.INT] = Int32Array;
UNIFORM_CACHE_CLASS[GL.SAMPLER_2D] = Int32Array;
UNIFORM_CACHE_CLASS[GL.INT_SAMPLER_2D] = Int32Array;
UNIFORM_CACHE_CLASS[GL.UNSIGNED_INT_SAMPLER_2D] = Int32Array;
UNIFORM_CACHE_CLASS[GL.SAMPLER_2D_SHADOW] = Int32Array;
UNIFORM_CACHE_CLASS[GL.SAMPLER_2D_ARRAY] = Int32Array;
UNIFORM_CACHE_CLASS[GL.INT_SAMPLER_2D_ARRAY] = Int32Array;
UNIFORM_CACHE_CLASS[GL.UNSIGNED_INT_SAMPLER_2D_ARRAY] = Int32Array;
UNIFORM_CACHE_CLASS[GL.SAMPLER_2D_ARRAY_SHADOW] = Int32Array;
UNIFORM_CACHE_CLASS[GL.SAMPLER_CUBE] = Int32Array;
UNIFORM_CACHE_CLASS[GL.INT_SAMPLER_CUBE] = Int32Array;
UNIFORM_CACHE_CLASS[GL.UNSIGNED_INT_SAMPLER_CUBE] = Int32Array;
UNIFORM_CACHE_CLASS[GL.SAMPLER_CUBE_SHADOW] = Int32Array;
UNIFORM_CACHE_CLASS[GL.SAMPLER_3D] = Int32Array;
UNIFORM_CACHE_CLASS[GL.INT_SAMPLER_3D] = Int32Array;
UNIFORM_CACHE_CLASS[GL.UNSIGNED_INT_SAMPLER_3D] = Int32Array;
UNIFORM_CACHE_CLASS[GL.UNSIGNED_INT] = Uint32Array;
UNIFORM_CACHE_CLASS[GL.FLOAT] = Float32Array;
UNIFORM_CACHE_CLASS[GL.FLOAT_VEC2] = Float32Array;
UNIFORM_CACHE_CLASS[GL.FLOAT_VEC3] = Float32Array;
UNIFORM_CACHE_CLASS[GL.FLOAT_VEC4] = Float32Array;
UNIFORM_CACHE_CLASS[GL.INT_VEC2] = Int32Array;
UNIFORM_CACHE_CLASS[GL.INT_VEC3] = Int32Array;
UNIFORM_CACHE_CLASS[GL.INT_VEC4] = Int32Array;
UNIFORM_CACHE_CLASS[GL.UNSIGNED_INT_VEC2] = Uint32Array;
UNIFORM_CACHE_CLASS[GL.UNSIGNED_INT_VEC3] = Uint32Array;
UNIFORM_CACHE_CLASS[GL.UNSIGNED_INT_VEC4] = Uint32Array;
var SingleComponentUniform = class {
  constructor(gl, handle, type) {
    this.gl = gl;
    this.handle = handle;
    this.glFuncName = UNIFORM_FUNC_NAME[type];
    this.cache = type === GL.BOOL ? false : 0;
  }
  set(value) {
    if (this.cache !== value) {
      this.gl[this.glFuncName](this.handle, value);
      this.cache = value;
    }
  }
};
var MultiNumericUniform = class {
  constructor(gl, handle, type, count) {
    this.gl = gl;
    this.handle = handle;
    this.glFuncName = UNIFORM_FUNC_NAME[type] + "v";
    this.count = count;
    this.cache = new UNIFORM_CACHE_CLASS[type](UNIFORM_COMPONENT_COUNT[type] * count);
  }
  set(value) {
    for (let i4 = 0, len5 = value.length; i4 < len5; ++i4) {
      if (this.cache[i4] !== value[i4]) {
        this.gl[this.glFuncName](this.handle, value);
        this.cache.set(value);
        return;
      }
    }
  }
};
var MultiBoolUniform = class {
  constructor(gl, handle, type, count) {
    this.gl = gl;
    this.handle = handle;
    this.glFuncName = UNIFORM_FUNC_NAME[type] + "v";
    this.count = count;
    this.cache = new Array(UNIFORM_COMPONENT_COUNT[type] * count).fill(false);
  }
  set(value) {
    for (let i4 = 0, len5 = value.length; i4 < len5; ++i4) {
      if (this.cache[i4] !== value[i4]) {
        this.gl[this.glFuncName](this.handle, value);
        for (let j2 = i4; j2 < len5; j2++) {
          this.cache[j2] = value[j2];
        }
        return;
      }
    }
  }
};
var MatrixUniform = class {
  constructor(gl, handle, type, count) {
    this.gl = gl;
    this.handle = handle;
    this.glFuncName = UNIFORM_FUNC_NAME[type];
    this.count = count;
    this.cache = new Float32Array(UNIFORM_COMPONENT_COUNT[type] * count);
  }
  set(value) {
    for (let i4 = 0, len5 = value.length; i4 < len5; ++i4) {
      if (this.cache[i4] !== value[i4]) {
        this.gl[this.glFuncName](this.handle, false, value);
        this.cache.set(value);
        return;
      }
    }
  }
};

// node_modules/picogl/build/module/program.js
var Program = class {
  constructor(gl, appState, vsSource, fsSource, xformFeebackVars, attributeLocations, transformFeedbackMode) {
    this.gl = gl;
    this.appState = appState;
    this.program = null;
    this.transformFeedbackVaryings = xformFeebackVars || null;
    this.transformFeedbackMode = transformFeedbackMode || GL.SEPARATE_ATTRIBS;
    this.attributeLocations = attributeLocations || null;
    this.uniforms = {};
    this.uniformBlocks = {};
    this.uniformBlockCount = 0;
    this.samplers = {};
    this.samplerCount = 0;
    this.vertexSource = null;
    this.vertexShader = null;
    this.fragmentSource = null;
    this.fragmentShader = null;
    this.linked = false;
    if (typeof vsSource === "string") {
      this.vertexSource = vsSource;
    } else {
      this.vertexShader = vsSource;
    }
    if (typeof fsSource === "string") {
      this.fragmentSource = fsSource;
    } else {
      this.fragmentShader = fsSource;
    }
    this.initialize();
  }
  restore() {
    this.initialize();
    this.link();
    this.checkLinkage();
    return this;
  }
  translatedVertexSource() {
    if (this.vertexShader) {
      return this.vertexShader.translatedSource();
    } else {
      let vertexShader = new Shader(this.gl, this.appState, GL.VERTEX_SHADER, this.vertexSource);
      let translatedSource = vertexShader.translatedSource();
      vertexShader.delete();
      return translatedSource;
    }
  }
  translatedFragmentSource() {
    if (this.fragmentShader) {
      return this.fragmentShader.translatedSource();
    } else {
      let fragmentShader = new Shader(this.gl, this.appState, GL.FRAGMENT_SHADER, this.fragmentSource);
      let translatedSource = fragmentShader.translatedSource();
      fragmentShader.delete();
      return translatedSource;
    }
  }
  delete() {
    if (this.program) {
      this.gl.deleteProgram(this.program);
      this.program = null;
      if (this.appState.program === this) {
        this.gl.useProgram(null);
        this.appState.program = null;
      }
    }
    return this;
  }
  initialize() {
    if (this.appState.program === this) {
      this.gl.useProgram(null);
      this.appState.program = null;
    }
    this.linked = false;
    this.uniformBlockCount = 0;
    this.samplerCount = 0;
    if (this.vertexSource) {
      this.vertexShader = new Shader(this.gl, this.appState, GL.VERTEX_SHADER, this.vertexSource);
    }
    if (this.fragmentSource) {
      this.fragmentShader = new Shader(this.gl, this.appState, GL.FRAGMENT_SHADER, this.fragmentSource);
    }
    this.program = this.gl.createProgram();
    return this;
  }
  link() {
    this.gl.attachShader(this.program, this.vertexShader.shader);
    this.gl.attachShader(this.program, this.fragmentShader.shader);
    if (this.transformFeedbackVaryings) {
      this.gl.transformFeedbackVaryings(this.program, this.transformFeedbackVaryings, this.transformFeedbackMode);
    }
    if (this.attributeLocations) {
      for (let name in this.attributeLocations) {
        this.gl.bindAttribLocation(this.program, this.attributeLocations[name], name);
      }
    }
    this.gl.linkProgram(this.program);
    return this;
  }
  checkCompletion() {
    if (WEBGL_INFO.PARALLEL_SHADER_COMPILE) {
      return this.gl.getProgramParameter(this.program, GL.COMPLETION_STATUS_KHR);
    }
    return true;
  }
  checkLinkage() {
    if (this.linked) {
      return this;
    }
    if (this.gl.getProgramParameter(this.program, GL.LINK_STATUS)) {
      this.linked = true;
      this.initVariables();
    } else {
      console.error(this.gl.getProgramInfoLog(this.program));
      this.vertexShader.checkCompilation();
      this.fragmentShader.checkCompilation();
    }
    if (this.vertexSource) {
      this.vertexShader.delete();
      this.vertexShader = null;
    }
    if (this.fragmentSource) {
      this.fragmentShader.delete();
      this.fragmentShader = null;
    }
    return this;
  }
  initVariables() {
    this.bind();
    let numUniforms = this.gl.getProgramParameter(this.program, GL.ACTIVE_UNIFORMS);
    let textureUnit;
    for (let i4 = 0; i4 < numUniforms; ++i4) {
      let uniformInfo = this.gl.getActiveUniform(this.program, i4);
      let uniformHandle = this.gl.getUniformLocation(this.program, uniformInfo.name);
      let UniformClass = null;
      let type = uniformInfo.type;
      let numElements = uniformInfo.size;
      switch (type) {
        case GL.SAMPLER_2D:
        case GL.INT_SAMPLER_2D:
        case GL.UNSIGNED_INT_SAMPLER_2D:
        case GL.SAMPLER_2D_SHADOW:
        case GL.SAMPLER_2D_ARRAY:
        case GL.INT_SAMPLER_2D_ARRAY:
        case GL.UNSIGNED_INT_SAMPLER_2D_ARRAY:
        case GL.SAMPLER_2D_ARRAY_SHADOW:
        case GL.SAMPLER_CUBE:
        case GL.INT_SAMPLER_CUBE:
        case GL.UNSIGNED_INT_SAMPLER_CUBE:
        case GL.SAMPLER_CUBE_SHADOW:
        case GL.SAMPLER_3D:
        case GL.INT_SAMPLER_3D:
        case GL.UNSIGNED_INT_SAMPLER_3D:
          textureUnit = this.samplerCount++;
          this.samplers[uniformInfo.name] = textureUnit;
          this.gl.uniform1i(uniformHandle, textureUnit);
          break;
        case GL.INT:
        case GL.UNSIGNED_INT:
        case GL.FLOAT:
          UniformClass = numElements > 1 ? MultiNumericUniform : SingleComponentUniform;
          break;
        case GL.BOOL:
          UniformClass = numElements > 1 ? MultiBoolUniform : SingleComponentUniform;
          break;
        case GL.FLOAT_VEC2:
        case GL.INT_VEC2:
        case GL.UNSIGNED_INT_VEC2:
        case GL.FLOAT_VEC3:
        case GL.INT_VEC3:
        case GL.UNSIGNED_INT_VEC3:
        case GL.FLOAT_VEC4:
        case GL.INT_VEC4:
        case GL.UNSIGNED_INT_VEC4:
          UniformClass = MultiNumericUniform;
          break;
        case GL.BOOL_VEC2:
        case GL.BOOL_VEC3:
        case GL.BOOL_VEC4:
          UniformClass = MultiBoolUniform;
          break;
        case GL.FLOAT_MAT2:
        case GL.FLOAT_MAT3:
        case GL.FLOAT_MAT4:
        case GL.FLOAT_MAT2x3:
        case GL.FLOAT_MAT2x4:
        case GL.FLOAT_MAT3x2:
        case GL.FLOAT_MAT3x4:
        case GL.FLOAT_MAT4x2:
        case GL.FLOAT_MAT4x3:
          UniformClass = MatrixUniform;
          break;
        default:
          console.error("Unrecognized type for uniform ", uniformInfo.name);
          break;
      }
      if (UniformClass) {
        this.uniforms[uniformInfo.name] = new UniformClass(this.gl, uniformHandle, type, numElements);
      }
    }
    let numUniformBlocks = this.gl.getProgramParameter(this.program, GL.ACTIVE_UNIFORM_BLOCKS);
    for (let i4 = 0; i4 < numUniformBlocks; ++i4) {
      let blockName = this.gl.getActiveUniformBlockName(this.program, i4);
      let blockIndex = this.gl.getUniformBlockIndex(this.program, blockName);
      let uniformBlockBase = this.uniformBlockCount++;
      this.gl.uniformBlockBinding(this.program, blockIndex, uniformBlockBase);
      this.uniformBlocks[blockName] = uniformBlockBase;
    }
  }
  uniform(name, value) {
    if (this.uniforms[name]) {
      this.uniforms[name].set(value);
    }
    return this;
  }
  bind() {
    if (this.appState.program !== this) {
      this.gl.useProgram(this.program);
      this.appState.program = this;
    }
    return this;
  }
};

// node_modules/picogl/build/module/query.js
var Query = class {
  constructor(gl, target) {
    this.gl = gl;
    this.query = null;
    this.target = target;
    this.active = false;
    this.result = null;
    this.restore();
  }
  restore() {
    this.query = this.gl.createQuery();
    this.active = false;
    this.result = null;
    return this;
  }
  begin() {
    if (!this.active) {
      this.gl.beginQuery(this.target, this.query);
      this.result = null;
    }
    return this;
  }
  end() {
    if (!this.active) {
      this.gl.endQuery(this.target);
      this.active = true;
    }
    return this;
  }
  ready() {
    if (this.active && this.gl.getQueryParameter(this.query, GL.QUERY_RESULT_AVAILABLE)) {
      this.active = false;
      this.result = Number(this.gl.getQueryParameter(this.query, GL.QUERY_RESULT));
      return true;
    }
    return false;
  }
  delete() {
    if (this.query) {
      this.gl.deleteQuery(this.query);
      this.query = null;
    }
    return this;
  }
};

// node_modules/picogl/build/module/timer.js
var Timer = class {
  constructor(gl) {
    this.gl = gl;
    this.cpuTimer = window.performance || window.Date;
    this.gpuTimerQuery = null;
    this.cpuStartTime = 0;
    this.cpuTime = 0;
    this.gpuTime = 0;
    this.restore();
  }
  restore() {
    if (WEBGL_INFO.GPU_TIMER) {
      if (this.gpuTimerQuery) {
        this.gpuTimerQuery.restore();
      } else {
        this.gpuTimerQuery = new Query(this.gl, GL.TIME_ELAPSED_EXT);
      }
    }
    this.cpuStartTime = 0;
    this.cpuTime = 0;
    this.gpuTime = 0;
    return this;
  }
  start() {
    if (WEBGL_INFO.GPU_TIMER) {
      if (!this.gpuTimerQuery.active) {
        this.gpuTimerQuery.begin();
        this.cpuStartTime = this.cpuTimer.now();
      }
    } else {
      this.cpuStartTime = this.cpuTimer.now();
    }
    return this;
  }
  end() {
    if (WEBGL_INFO.GPU_TIMER) {
      if (!this.gpuTimerQuery.active) {
        this.gpuTimerQuery.end();
        this.cpuTime = this.cpuTimer.now() - this.cpuStartTime;
      }
    } else {
      this.cpuTime = this.cpuTimer.now() - this.cpuStartTime;
    }
    return this;
  }
  ready() {
    if (WEBGL_INFO.GPU_TIMER) {
      if (!this.gpuTimerQuery.active) {
        return false;
      }
      var gpuTimerAvailable = this.gpuTimerQuery.ready();
      var gpuTimerDisjoint = this.gl.getParameter(GL.GPU_DISJOINT_EXT);
      if (gpuTimerAvailable && !gpuTimerDisjoint) {
        this.gpuTime = this.gpuTimerQuery.result / 1e6;
        return true;
      } else {
        return false;
      }
    } else {
      return Boolean(this.cpuStartTime);
    }
  }
  delete() {
    if (this.gpuTimerQuery) {
      this.gpuTimerQuery.delete();
      this.gpuTimerQuery = null;
    }
    return this;
  }
};

// node_modules/picogl/build/module/transform-feedback.js
var TransformFeedback = class {
  constructor(gl, appState) {
    this.gl = gl;
    this.appState = appState;
    this.transformFeedback = null;
    this.restore();
  }
  restore() {
    if (this.appState.transformFeedback === this) {
      this.appState.transformFeedback = null;
    }
    this.transformFeedback = this.gl.createTransformFeedback();
    return this;
  }
  feedbackBuffer(index, buffer2) {
    this.gl.bindTransformFeedback(GL.TRANSFORM_FEEDBACK, this.transformFeedback);
    this.gl.bindBufferBase(GL.TRANSFORM_FEEDBACK_BUFFER, index, buffer2.buffer);
    this.gl.bindTransformFeedback(GL.TRANSFORM_FEEDBACK, null);
    this.gl.bindBufferBase(GL.TRANSFORM_FEEDBACK_BUFFER, index, null);
    return this;
  }
  delete() {
    if (this.transformFeedback) {
      this.gl.deleteTransformFeedback(this.transformFeedback);
      this.transformFeedback = null;
      if (this.appState.transformFeedback === this) {
        this.gl.bindTransformFeedback(GL.TRANSFORM_FEEDBACK, null);
        this.appState.transformFeedback = null;
      }
    }
    return this;
  }
  bind() {
    if (this.appState.transformFeedback !== this) {
      this.gl.bindTransformFeedback(GL.TRANSFORM_FEEDBACK, this.transformFeedback);
      this.appState.transformFeedback = this;
    }
    return this;
  }
};

// node_modules/picogl/build/module/uniform-buffer.js
var UniformBuffer = class {
  constructor(gl, appState, layout, usage = gl.DYNAMIC_DRAW) {
    this.gl = gl;
    this.buffer = null;
    this.dataViews = {};
    this.offsets = new Array(layout.length);
    this.sizes = new Array(layout.length);
    this.types = new Array(layout.length);
    this.size = 0;
    this.usage = usage;
    this.appState = appState;
    this.currentBase = -1;
    for (let i4 = 0, len5 = layout.length; i4 < len5; ++i4) {
      let type = layout[i4];
      switch (type) {
        case GL.FLOAT:
        case GL.INT:
        case GL.UNSIGNED_INT:
        case GL.BOOL:
          this.offsets[i4] = this.size;
          this.sizes[i4] = 1;
          if (type === GL.INT) {
            this.types[i4] = GL.INT;
          } else if (type === GL.UNSIGNED_INT) {
            this.types[i4] = GL.UNSIGNED_INT;
          } else {
            this.types[i4] = GL.FLOAT;
          }
          this.size++;
          break;
        case GL.FLOAT_VEC2:
        case GL.INT_VEC2:
        case GL.UNSIGNED_INT_VEC2:
        case GL.BOOL_VEC2:
          this.size += this.size % 2;
          this.offsets[i4] = this.size;
          this.sizes[i4] = 2;
          if (type === GL.INT_VEC2) {
            this.types[i4] = GL.INT;
          } else if (type === GL.UNSIGNED_INT_VEC2) {
            this.types[i4] = GL.UNSIGNED_INT;
          } else {
            this.types[i4] = GL.FLOAT;
          }
          this.size += 2;
          break;
        case GL.FLOAT_VEC3:
        case GL.INT_VEC3:
        case GL.UNSIGNED_INT_VEC3:
        case GL.BOOL_VEC3:
        case GL.FLOAT_VEC4:
        case GL.INT_VEC4:
        case GL.UNSIGNED_INT_VEC4:
        case GL.BOOL_VEC4:
          this.size += (4 - this.size % 4) % 4;
          this.offsets[i4] = this.size;
          this.sizes[i4] = 4;
          if (type === GL.INT_VEC4 || type === GL.INT_VEC3) {
            this.types[i4] = GL.INT;
          } else if (type === GL.UNSIGNED_INT_VEC4 || type === GL.UNSIGNED_INT_VEC3) {
            this.types[i4] = GL.UNSIGNED_INT;
          } else {
            this.types[i4] = GL.FLOAT;
          }
          this.size += 4;
          break;
        case GL.FLOAT_MAT2:
        case GL.FLOAT_MAT2x3:
        case GL.FLOAT_MAT2x4:
          this.size += (4 - this.size % 4) % 4;
          this.offsets[i4] = this.size;
          this.sizes[i4] = 8;
          this.types[i4] = GL.FLOAT;
          this.size += 8;
          break;
        case GL.FLOAT_MAT3:
        case GL.FLOAT_MAT3x2:
        case GL.FLOAT_MAT3x4:
          this.size += (4 - this.size % 4) % 4;
          this.offsets[i4] = this.size;
          this.sizes[i4] = 12;
          this.types[i4] = GL.FLOAT;
          this.size += 12;
          break;
        case GL.FLOAT_MAT4:
        case GL.FLOAT_MAT4x2:
        case GL.FLOAT_MAT4x3:
          this.size += (4 - this.size % 4) % 4;
          this.offsets[i4] = this.size;
          this.sizes[i4] = 16;
          this.types[i4] = GL.FLOAT;
          this.size += 16;
          break;
        default:
          console.error("Unsupported type for uniform buffer.");
      }
    }
    this.size += (4 - this.size % 4) % 4;
    this.data = new Float32Array(this.size);
    this.dataViews[GL.FLOAT] = this.data;
    this.dataViews[GL.INT] = new Int32Array(this.data.buffer);
    this.dataViews[GL.UNSIGNED_INT] = new Uint32Array(this.data.buffer);
    this.dirtyStart = this.size;
    this.dirtyEnd = 0;
    this.restore();
  }
  restore() {
    if (this.currentBase !== -1 && this.appState.uniformBuffers[this.currentBase] === this) {
      this.appState.uniformBuffers[this.currentBase] = null;
    }
    this.buffer = this.gl.createBuffer();
    this.gl.bindBuffer(GL.UNIFORM_BUFFER, this.buffer);
    this.gl.bufferData(GL.UNIFORM_BUFFER, this.size * 4, this.usage);
    this.gl.bindBuffer(GL.UNIFORM_BUFFER, null);
    return this;
  }
  set(index, value) {
    let view = this.dataViews[this.types[index]];
    let offset = this.offsets[index];
    let size = this.sizes[index];
    if (this.sizes[index] === 1) {
      view[offset] = value;
    } else {
      view.set(value, offset);
    }
    if (offset < this.dirtyStart) {
      this.dirtyStart = offset;
    }
    if (this.dirtyEnd < offset + size) {
      this.dirtyEnd = offset + size;
    }
    return this;
  }
  update() {
    if (this.dirtyStart >= this.dirtyEnd) {
      return this;
    }
    let data = this.data.subarray(this.dirtyStart, this.dirtyEnd);
    let offset = this.dirtyStart * 4;
    this.gl.bindBuffer(this.gl.UNIFORM_BUFFER, this.buffer);
    this.gl.bufferSubData(this.gl.UNIFORM_BUFFER, offset, data);
    this.gl.bindBuffer(this.gl.UNIFORM_BUFFER, null);
    this.dirtyStart = this.size;
    this.dirtyEnd = 0;
    return this;
  }
  delete() {
    if (this.buffer) {
      this.gl.deleteBuffer(this.buffer);
      this.buffer = null;
      if (this.currentBase !== -1 && this.appState.uniformBuffers[this.currentBase] === this) {
        this.appState.uniformBuffers[this.currentBase] = null;
      }
      this.currentBase = -1;
    }
    return this;
  }
  bind(base) {
    let currentBuffer = this.appState.uniformBuffers[base];
    if (currentBuffer !== this) {
      if (currentBuffer) {
        currentBuffer.currentBase = -1;
      }
      if (this.currentBase !== -1) {
        this.appState.uniformBuffers[this.currentBase] = null;
      }
      this.gl.bindBufferBase(this.gl.UNIFORM_BUFFER, base, this.buffer);
      this.appState.uniformBuffers[base] = this;
      this.currentBase = base;
    }
    return this;
  }
};

// node_modules/picogl/build/module/vertex-array.js
var VertexArray = class {
  constructor(gl, appState) {
    this.gl = gl;
    this.appState = appState;
    this.vertexArray = null;
    this.indexType = null;
    this.indexed = false;
    this.numElements = 0;
    this.numInstances = 1;
    this.offsets = 0;
    this.numDraws = 1;
  }
  restore() {
    if (this.appState.vertexArray === this) {
      this.appState.vertexArray = null;
    }
    if (this.vertexArray !== null) {
      this.vertexArray = this.gl.createVertexArray();
    }
    return this;
  }
  vertexAttributeBuffer(attributeIndex, vertexBuffer, options = DUMMY_OBJECT) {
    this.attributeBuffer(attributeIndex, vertexBuffer, options, false);
    return this;
  }
  instanceAttributeBuffer(attributeIndex, vertexBuffer, options = DUMMY_OBJECT) {
    this.attributeBuffer(attributeIndex, vertexBuffer, options, true);
    return this;
  }
  indexBuffer(vertexBuffer) {
    if (this.vertexArray === null) {
      this.vertexArray = this.gl.createVertexArray();
    }
    this.bind();
    this.gl.bindBuffer(GL.ELEMENT_ARRAY_BUFFER, vertexBuffer.buffer);
    this.numElements = vertexBuffer.numItems * 3;
    this.indexType = vertexBuffer.type;
    this.indexed = true;
    return this;
  }
  delete() {
    if (this.vertexArray) {
      this.gl.deleteVertexArray(this.vertexArray);
      this.vertexArray = null;
      if (this.appState.vertexArray === this) {
        this.gl.bindVertexArray(null);
        this.appState.vertexArray = null;
      }
    }
    return this;
  }
  bind() {
    if (this.appState.vertexArray !== this) {
      this.gl.bindVertexArray(this.vertexArray);
      this.appState.vertexArray = this;
    }
    return this;
  }
  attributeBuffer(attributeIndex, vertexBuffer, options = {}, instanced) {
    if (this.vertexArray === null) {
      this.vertexArray = this.gl.createVertexArray();
    }
    this.bind();
    this.gl.bindBuffer(GL.ARRAY_BUFFER, vertexBuffer.buffer);
    let {
      type = vertexBuffer.type,
      size = vertexBuffer.itemSize,
      stride = 0,
      offset = 0,
      normalized = false,
      integer = Boolean(vertexBuffer.integer && !normalized)
    } = options;
    let numColumns = vertexBuffer.numColumns;
    if (stride === 0) {
      stride = numColumns * size * TYPE_SIZE[type];
    }
    let numItems = Math.ceil((vertexBuffer.byteLength - offset) / stride);
    for (let i4 = 0; i4 < numColumns; ++i4) {
      if (integer) {
        this.gl.vertexAttribIPointer(
          attributeIndex + i4,
          size,
          type,
          stride,
          offset + i4 * size * TYPE_SIZE[type]
        );
      } else {
        this.gl.vertexAttribPointer(
          attributeIndex + i4,
          size,
          type,
          normalized,
          stride,
          offset + i4 * size * TYPE_SIZE[type]
        );
      }
      if (instanced) {
        this.gl.vertexAttribDivisor(attributeIndex + i4, 1);
      }
      this.gl.enableVertexAttribArray(attributeIndex + i4);
    }
    if (this.numDraws === 1) {
      if (instanced) {
        this.numInstances = numItems;
      } else if (!this.indexed) {
        this.numElements = numItems;
      }
    }
    this.gl.bindBuffer(GL.ARRAY_BUFFER, null);
    return this;
  }
};

// node_modules/picogl/build/module/vertex-buffer.js
var INTEGER_TYPES = {
  [GL.BYTE]: true,
  [GL.UNSIGNED_BYTE]: true,
  [GL.SHORT]: true,
  [GL.UNSIGNED_SHORT]: true,
  [GL.INT]: true,
  [GL.UNSIGNED_INT]: true
};
var VertexBuffer = class {
  constructor(gl, appState, type, itemSize, data, usage = gl.STATIC_DRAW, indexArray) {
    let numColumns;
    switch (type) {
      case GL.FLOAT_MAT4:
      case GL.FLOAT_MAT4x2:
      case GL.FLOAT_MAT4x3:
        numColumns = 4;
        break;
      case GL.FLOAT_MAT3:
      case GL.FLOAT_MAT3x2:
      case GL.FLOAT_MAT3x4:
        numColumns = 3;
        break;
      case GL.FLOAT_MAT2:
      case GL.FLOAT_MAT2x3:
      case GL.FLOAT_MAT2x4:
        numColumns = 2;
        break;
      default:
        numColumns = 1;
    }
    switch (type) {
      case GL.FLOAT_MAT4:
      case GL.FLOAT_MAT3x4:
      case GL.FLOAT_MAT2x4:
        itemSize = 4;
        type = GL.FLOAT;
        break;
      case GL.FLOAT_MAT3:
      case GL.FLOAT_MAT4x3:
      case GL.FLOAT_MAT2x3:
        itemSize = 3;
        type = GL.FLOAT;
        break;
      case GL.FLOAT_MAT2:
      case GL.FLOAT_MAT3x2:
      case GL.FLOAT_MAT4x2:
        itemSize = 2;
        type = GL.FLOAT;
        break;
    }
    let dataLength;
    let byteLength;
    if (typeof data === "number") {
      dataLength = data;
      if (type) {
        data *= TYPE_SIZE[type];
      }
      byteLength = data;
    } else {
      dataLength = data.length;
      byteLength = data.byteLength;
    }
    this.gl = gl;
    this.buffer = null;
    this.appState = appState;
    this.type = type;
    this.itemSize = itemSize;
    this.numItems = type ? dataLength / (itemSize * numColumns) : byteLength / itemSize;
    this.numColumns = numColumns;
    this.byteLength = byteLength;
    this.usage = usage;
    this.indexArray = Boolean(indexArray);
    this.integer = Boolean(INTEGER_TYPES[this.type]);
    this.binding = this.indexArray ? GL.ELEMENT_ARRAY_BUFFER : GL.ARRAY_BUFFER;
    this.restore(data);
  }
  restore(data) {
    if (!data) {
      data = this.byteLength;
    }
    if (this.appState.vertexArray) {
      this.gl.bindVertexArray(null);
      this.appState.vertexArray = null;
    }
    this.buffer = this.gl.createBuffer();
    this.gl.bindBuffer(this.binding, this.buffer);
    this.gl.bufferData(this.binding, data, this.usage);
    this.gl.bindBuffer(this.binding, null);
    return this;
  }
  data(data, offset = 0) {
    if (this.appState.vertexArray) {
      this.gl.bindVertexArray(null);
      this.appState.vertexArray = null;
    }
    this.gl.bindBuffer(this.binding, this.buffer);
    this.gl.bufferSubData(this.binding, offset, data);
    this.gl.bindBuffer(this.binding, null);
    return this;
  }
  delete() {
    if (this.buffer) {
      this.gl.deleteBuffer(this.buffer);
      this.buffer = null;
    }
    return this;
  }
};

// node_modules/picogl/build/module/app.js
var App = class {
  constructor(gl) {
    this.gl = gl;
    this.canvas = gl.canvas;
    this.width = this.gl.drawingBufferWidth;
    this.height = this.gl.drawingBufferHeight;
    this.viewportX = 0;
    this.viewportY = 0;
    this.viewportWidth = 0;
    this.viewportHeight = 0;
    this.currentDrawCalls = null;
    this.emptyFragmentShader = null;
    this.state = {
      program: null,
      vertexArray: null,
      transformFeedback: null,
      activeTexture: -1,
      textures: new Array(WEBGL_INFO.MAX_TEXTURE_UNITS),
      uniformBuffers: new Array(WEBGL_INFO.MAX_UNIFORM_BUFFERS),
      freeUniformBufferBases: [],
      framebuffers: {},
      drawFramebufferBinding: GL.DRAW_FRAMEBUFFER,
      readFramebufferBinding: GL.READ_FRAMEBUFFER,
      extensions: {}
    };
    this.clearBits = this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT | this.gl.STENCIL_BUFFER_BIT;
    this.cpuTime = 0;
    this.gpuTime = 0;
    this.viewport(0, 0, this.width, this.height);
    this.contextLostExt = null;
    this.contextLostListener = null;
    this.contextRestoredListener = null;
    this.contextRestoredHandler = null;
    this.initExtensions();
  }
  loseContext() {
    if (this.contextLostExt) {
      this.contextLostExt.loseContext();
    }
    return this;
  }
  restoreContext() {
    if (this.contextLostExt) {
      this.contextLostExt.restoreContext();
    }
    return this;
  }
  onContextRestored(fn) {
    this.contextRestoredHandler = fn;
    this.initContextListeners();
    return this;
  }
  enable(cap) {
    this.gl.enable(cap);
    return this;
  }
  disable(cap) {
    this.gl.disable(cap);
    return this;
  }
  colorMask(r5, g2, b3, a3) {
    this.gl.colorMask(r5, g2, b3, a3);
    return this;
  }
  clearColor(r5, g2, b3, a3) {
    this.gl.clearColor(r5, g2, b3, a3);
    return this;
  }
  clearMask(mask) {
    this.clearBits = mask;
    return this;
  }
  clear() {
    this.gl.clear(this.clearBits);
    return this;
  }
  drawFramebuffer(framebuffer) {
    framebuffer.bindForDraw();
    return this;
  }
  readFramebuffer(framebuffer) {
    framebuffer.bindForRead();
    return this;
  }
  defaultDrawFramebuffer() {
    let binding = this.state.drawFramebufferBinding;
    if (this.state.framebuffers[binding] !== null) {
      this.gl.bindFramebuffer(binding, null);
      this.state.framebuffers[binding] = null;
    }
    return this;
  }
  defaultReadFramebuffer() {
    let binding = this.state.readFramebufferBinding;
    if (this.state.framebuffers[binding] !== null) {
      this.gl.bindFramebuffer(binding, null);
      this.state.framebuffers[binding] = null;
    }
    return this;
  }
  blitFramebuffer(mask, options = DUMMY_OBJECT) {
    let readBinding = this.state.readFramebufferBinding;
    let drawBinding = this.state.drawFramebufferBinding;
    let readFramebuffer = this.state.framebuffers[readBinding];
    let drawFramebuffer = this.state.framebuffers[drawBinding];
    let defaultReadWidth = readFramebuffer ? readFramebuffer.width : this.width;
    let defaultReadHeight = readFramebuffer ? readFramebuffer.height : this.height;
    let defaultDrawWidth = drawFramebuffer ? drawFramebuffer.width : this.width;
    let defaultDrawHeight = drawFramebuffer ? drawFramebuffer.height : this.height;
    let {
      srcStartX = 0,
      srcStartY = 0,
      srcEndX = defaultReadWidth,
      srcEndY = defaultReadHeight,
      dstStartX = 0,
      dstStartY = 0,
      dstEndX = defaultDrawWidth,
      dstEndY = defaultDrawHeight,
      filter = GL.NEAREST
    } = options;
    this.gl.blitFramebuffer(srcStartX, srcStartY, srcEndX, srcEndY, dstStartX, dstStartY, dstEndX, dstEndY, mask, filter);
    return this;
  }
  depthRange(near, far) {
    this.gl.depthRange(near, far);
    return this;
  }
  depthMask(mask) {
    this.gl.depthMask(mask);
    return this;
  }
  depthFunc(func) {
    this.gl.depthFunc(func);
    return this;
  }
  blendFunc(src, dest) {
    this.gl.blendFunc(src, dest);
    return this;
  }
  blendFuncSeparate(csrc, cdest, asrc, adest) {
    this.gl.blendFuncSeparate(csrc, cdest, asrc, adest);
    return this;
  }
  blendEquation(mode) {
    this.gl.blendEquation(mode);
    return this;
  }
  stencilMask(mask) {
    this.gl.stencilMask(mask);
    return this;
  }
  stencilMaskSeparate(face, mask) {
    this.gl.stencilMaskSeparate(face, mask);
    return this;
  }
  stencilFunc(func, ref, mask) {
    this.gl.stencilFunc(func, ref, mask);
    return this;
  }
  stencilFuncSeparate(face, func, ref, mask) {
    this.gl.stencilFuncSeparate(face, func, ref, mask);
    return this;
  }
  stencilOp(stencilFail, depthFail, pass) {
    this.gl.stencilOp(stencilFail, depthFail, pass);
    return this;
  }
  stencilOpSeparate(face, stencilFail, depthFail, pass) {
    this.gl.stencilOpSeparate(face, stencilFail, depthFail, pass);
    return this;
  }
  scissor(x2, y3, width, height) {
    this.gl.scissor(x2, y3, width, height);
    return this;
  }
  polygonOffset(factor, units) {
    this.gl.polygonOffset(factor, units);
    return this;
  }
  readPixel(x2, y3, outColor, options = DUMMY_OBJECT) {
    let {
      format = GL.RGBA,
      type = GL.UNSIGNED_BYTE
    } = options;
    this.gl.readPixels(x2, y3, 1, 1, format, type, outColor);
    return this;
  }
  viewport(x2, y3, width, height) {
    if (this.viewportWidth !== width || this.viewportHeight !== height || this.viewportX !== x2 || this.viewportY !== y3) {
      this.viewportX = x2;
      this.viewportY = y3;
      this.viewportWidth = width;
      this.viewportHeight = height;
      this.gl.viewport(x2, y3, this.viewportWidth, this.viewportHeight);
    }
    return this;
  }
  defaultViewport() {
    this.viewport(0, 0, this.width, this.height);
    return this;
  }
  resize(width, height) {
    this.canvas.width = width;
    this.canvas.height = height;
    this.width = this.gl.drawingBufferWidth;
    this.height = this.gl.drawingBufferHeight;
    this.viewport(0, 0, this.width, this.height);
    return this;
  }
  createProgram(vsSource, fsSource, opts = {}) {
    let { transformFeedbackVaryings, attributeLocations, transformFeedbackMode } = opts;
    return new Program(this.gl, this.state, vsSource, fsSource, transformFeedbackVaryings, attributeLocations, transformFeedbackMode).link().checkLinkage();
  }
  createPrograms(...sources) {
    return new Promise((resolve, reject) => {
      let numPrograms = sources.length;
      let programs = new Array(numPrograms);
      let pendingPrograms = new Array(numPrograms);
      let numPending = numPrograms;
      for (let i4 = 0; i4 < numPrograms; ++i4) {
        let source = sources[i4];
        let vsSource = source[0];
        let fsSource = source[1];
        let opts = source[2] || {};
        let { transformFeedbackVaryings, attributeLocations, transformFeedbackMode } = opts;
        programs[i4] = new Program(this.gl, this.state, vsSource, fsSource, transformFeedbackVaryings, attributeLocations, transformFeedbackMode);
        pendingPrograms[i4] = programs[i4];
      }
      for (let i4 = 0; i4 < numPrograms; ++i4) {
        programs[i4].link();
      }
      let poll = () => {
        let linked = 0;
        for (let i4 = 0; i4 < numPending; ++i4) {
          if (pendingPrograms[i4].checkCompletion()) {
            pendingPrograms[i4].checkLinkage();
            if (pendingPrograms[i4].linked) {
              ++linked;
            } else {
              reject(new Error("Program linkage failed"));
              return;
            }
          } else {
            pendingPrograms[i4 - linked] = pendingPrograms[i4];
          }
        }
        numPending -= linked;
        if (numPending === 0) {
          resolve(programs);
        } else {
          requestAnimationFrame(poll);
        }
      };
      poll();
    });
  }
  restorePrograms(...programs) {
    return new Promise((resolve, reject) => {
      let numPrograms = programs.length;
      let pendingPrograms = programs.slice();
      let numPending = numPrograms;
      for (let i4 = 0; i4 < numPrograms; ++i4) {
        programs[i4].initialize();
      }
      for (let i4 = 0; i4 < numPrograms; ++i4) {
        programs[i4].link();
      }
      for (let i4 = 0; i4 < numPrograms; ++i4) {
        programs[i4].checkCompletion();
      }
      let poll = () => {
        let linked = 0;
        for (let i4 = 0; i4 < numPending; ++i4) {
          if (pendingPrograms[i4].checkCompletion()) {
            pendingPrograms[i4].checkLinkage();
            if (pendingPrograms[i4].linked) {
              ++linked;
            } else {
              reject(new Error("Program linkage failed"));
              return;
            }
          } else {
            pendingPrograms[i4 - linked] = pendingPrograms[i4];
          }
        }
        numPending -= linked;
        if (numPending === 0) {
          resolve();
        } else {
          requestAnimationFrame(poll);
        }
      };
      poll();
    });
  }
  createShader(type, source) {
    return new Shader(this.gl, this.state, type, source);
  }
  createVertexArray() {
    return new VertexArray(this.gl, this.state);
  }
  createTransformFeedback() {
    return new TransformFeedback(this.gl, this.state);
  }
  createVertexBuffer(type, itemSize, data, usage) {
    return new VertexBuffer(this.gl, this.state, type, itemSize, data, usage);
  }
  createMatrixBuffer(type, data, usage) {
    return new VertexBuffer(this.gl, this.state, type, 0, data, usage);
  }
  createInterleavedBuffer(bytesPerVertex, data, usage) {
    return new VertexBuffer(this.gl, this.state, null, bytesPerVertex, data, usage);
  }
  createIndexBuffer(type, itemSize, data, usage) {
    if (ArrayBuffer.isView(itemSize)) {
      usage = data;
      data = itemSize;
      itemSize = 3;
    }
    return new VertexBuffer(this.gl, this.state, type, itemSize, data, usage, true);
  }
  createUniformBuffer(layout, usage) {
    return new UniformBuffer(this.gl, this.state, layout, usage);
  }
  createTexture2D(image, width, height, options) {
    if (typeof image === "number") {
      options = height;
      height = width;
      width = image;
      image = null;
    } else if (height === void 0) {
      options = width;
      width = image.width;
      height = image.height;
    }
    return new Texture(this.gl, this.state, this.gl.TEXTURE_2D, image, width, height, void 0, false, options);
  }
  createTextureArray(image, width, height, depth, options) {
    if (typeof image === "number") {
      options = depth;
      depth = height;
      height = width;
      width = image;
      image = null;
    }
    return new Texture(this.gl, this.state, this.gl.TEXTURE_2D_ARRAY, image, width, height, depth, true, options);
  }
  createTexture3D(image, width, height, depth, options) {
    if (typeof image === "number") {
      options = depth;
      depth = height;
      height = width;
      width = image;
      image = null;
    }
    return new Texture(this.gl, this.state, this.gl.TEXTURE_3D, image, width, height, depth, true, options);
  }
  createCubemap(options) {
    return new Cubemap(this.gl, this.state, options);
  }
  createRenderbuffer(width, height, internalFormat, samples = 0) {
    return new Renderbuffer(this.gl, width, height, internalFormat, samples);
  }
  createFramebuffer() {
    return new Framebuffer(this.gl, this.state);
  }
  createQuery(target) {
    return new Query(this.gl, target);
  }
  createTimer() {
    return new Timer(this.gl);
  }
  createDrawCall(program, vertexArray, primitive) {
    return new DrawCall(this.gl, this.state, program, vertexArray, primitive);
  }
  initExtensions() {
    this.gl.getExtension("EXT_color_buffer_float");
    this.gl.getExtension("OES_texture_float_linear");
    this.gl.getExtension("WEBGL_compressed_texture_s3tc");
    this.gl.getExtension("WEBGL_compressed_texture_s3tc_srgb");
    this.gl.getExtension("WEBGL_compressed_texture_etc");
    this.gl.getExtension("WEBGL_compressed_texture_astc");
    this.gl.getExtension("WEBGL_compressed_texture_pvrtc");
    this.gl.getExtension("EXT_disjoint_timer_query_webgl2");
    this.gl.getExtension("EXT_disjoint_timer_query");
    this.gl.getExtension("EXT_texture_filter_anisotropic");
    this.state.extensions.debugShaders = this.gl.getExtension("WEBGL_debug_shaders");
    this.contextLostExt = this.gl.getExtension("WEBGL_lose_context");
    this.gl.getExtension("KHR_parallel_shader_compile");
    this.state.extensions.multiDrawInstanced = this.gl.getExtension("WEBGL_multi_draw_instanced");
  }
  initContextListeners() {
    if (this.contextRestoredHandler) {
      this.contextLostListener = (e5) => {
        e5.preventDefault();
      };
      this.contextRestoredListener = () => {
        this.initExtensions();
        this.contextRestoredHandler();
      };
      this.canvas.addEventListener("webglcontextlost", this.contextLostListener);
      this.canvas.addEventListener("webglcontextrestored", this.contextRestoredListener);
    } else {
      this.canvas.removeEventListener("webglcontextlost", this.contextLostListener);
      this.canvas.removeEventListener("webglcontextrestored", this.contextRestoredListener);
      this.contextLostListener = null;
      this.contextRestoredListener = null;
    }
  }
  depthTest() {
    console.warn("App.depthTest is deprecated. Use App.enable(PicoGL.DEPTH_TEST) instead.");
    this.enable(GL.DEPTH_TEST);
    return this;
  }
  noDepthTest() {
    console.warn("App.noDepthTest is deprecated. Use App.disable(PicoGL.DEPTH_TEST) instead.");
    this.disable(GL.DEPTH_TEST);
    return this;
  }
  blend() {
    console.warn("App.blend is deprecated. Use App.enable(PicoGL.BLEND) instead.");
    this.enable(GL.BLEND);
    return this;
  }
  noBlend() {
    console.warn("App.noBlend is deprecated. Use App.disable(PicoGL.BLEND) instead.");
    this.disable(GL.BLEND);
    return this;
  }
  stencilTest() {
    console.warn("App.stencilTest is deprecated. Use App.enable(PicoGL.STENCIL_TEST) instead.");
    this.enable(GL.STENCIL_TEST);
    return this;
  }
  noStencilTest() {
    console.warn("App.noStencilTest is deprecated. Use App.disable(PicoGL.STENCIL_TEST) instead.");
    this.disable(GL.STENCIL_TEST);
    return this;
  }
  scissorTest() {
    console.warn("App.scissorTest is deprecated. Use App.enable(PicoGL.SCISSOR_TEST) instead.");
    this.enable(GL.SCISSOR_TEST);
    return this;
  }
  noScissorTest() {
    console.warn("App.noScissorTest is deprecated. Use App.disable(PicoGL.SCISSOR_TEST) instead.");
    this.disable(GL.SCISSOR_TEST);
    return this;
  }
  rasterize() {
    console.warn("App.noRasterize is deprecated. Use App.disable(PicoGL.RASTERIZER_DISCARD) instead.");
    this.disable(GL.RASTERIZER_DISCARD);
    return this;
  }
  noRasterize() {
    console.warn("App.rasterize is deprecated. Use App.enable(PicoGL.RASTERIZER_DISCARD) instead.");
    this.enable(GL.RASTERIZER_DISCARD);
    return this;
  }
  cullBackfaces() {
    console.warn("App.cullBackfaces is deprecated. Use App.enable(PicoGL.CULL_FACE) instead.");
    this.enable(GL.CULL_FACE);
    return this;
  }
  drawBackfaces() {
    console.warn("App.drawBackfaces is deprecated. Use App.disable(PicoGL.CULL_FACE) instead.");
    this.disable(GL.CULL_FACE);
    return this;
  }
};

// node_modules/picogl/build/module/picogl.js
var webglInfoInitialized = false;
var PicoGL = Object.assign({
  version: "0.17.9",
  WEBGL_INFO,
  createApp(gl, contextAttributes) {
    if (gl.tagName === "CANVAS") {
      gl = gl.getContext("webgl2", contextAttributes);
    }
    if (!webglInfoInitialized) {
      WEBGL_INFO.MAX_TEXTURE_UNITS = gl.getParameter(GL.MAX_COMBINED_TEXTURE_IMAGE_UNITS);
      WEBGL_INFO.MAX_UNIFORM_BUFFERS = gl.getParameter(GL.MAX_UNIFORM_BUFFER_BINDINGS);
      WEBGL_INFO.MAX_UNIFORMS = Math.min(
        gl.getParameter(GL.MAX_VERTEX_UNIFORM_VECTORS),
        gl.getParameter(GL.MAX_FRAGMENT_UNIFORM_VECTORS)
      );
      WEBGL_INFO.SAMPLES = gl.getParameter(GL.SAMPLES);
      WEBGL_INFO.VENDOR = "(Unknown)";
      WEBGL_INFO.RENDERER = "(Unknown)";
      WEBGL_INFO.FLOAT_RENDER_TARGETS = Boolean(gl.getExtension("EXT_color_buffer_float"));
      WEBGL_INFO.LINEAR_FLOAT_TEXTURES = Boolean(gl.getExtension("OES_texture_float_linear"));
      WEBGL_INFO.S3TC_TEXTURES = Boolean(gl.getExtension("WEBGL_compressed_texture_s3tc"));
      WEBGL_INFO.S3TC_SRGB_TEXTURES = Boolean(gl.getExtension("WEBGL_compressed_texture_s3tc_srgb"));
      WEBGL_INFO.ETC_TEXTURES = Boolean(gl.getExtension("WEBGL_compressed_texture_etc"));
      WEBGL_INFO.ASTC_TEXTURES = Boolean(gl.getExtension("WEBGL_compressed_texture_astc"));
      WEBGL_INFO.PVRTC_TEXTURES = Boolean(gl.getExtension("WEBGL_compressed_texture_pvrtc"));
      WEBGL_INFO.LOSE_CONTEXT = Boolean(gl.getExtension("WEBGL_lose_context"));
      WEBGL_INFO.DEBUG_SHADERS = Boolean(gl.getExtension("WEBGL_debug_shaders"));
      WEBGL_INFO.GPU_TIMER = Boolean(gl.getExtension("EXT_disjoint_timer_query_webgl2") || gl.getExtension("EXT_disjoint_timer_query"));
      WEBGL_INFO.TEXTURE_ANISOTROPY = Boolean(gl.getExtension("EXT_texture_filter_anisotropic"));
      WEBGL_INFO.MAX_TEXTURE_ANISOTROPY = WEBGL_INFO.TEXTURE_ANISOTROPY ? gl.getParameter(GL.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 1;
      WEBGL_INFO.DEBUG_RENDERER_INFO = Boolean(gl.getExtension("WEBGL_debug_renderer_info"));
      if (WEBGL_INFO.DEBUG_RENDERER_INFO) {
        WEBGL_INFO.VENDOR = gl.getParameter(GL.UNMASKED_VENDOR_WEBGL);
        WEBGL_INFO.RENDERER = gl.getParameter(GL.UNMASKED_RENDERER_WEBGL);
      }
      WEBGL_INFO.PARALLEL_SHADER_COMPILE = Boolean(gl.getExtension("KHR_parallel_shader_compile"));
      WEBGL_INFO.MULTI_DRAW_INSTANCED = Boolean(gl.getExtension("WEBGL_multi_draw_instanced"));
      webglInfoInitialized = true;
    }
    return new App(gl);
  }
}, GL);
var picogl_default = PicoGL;

// src/renderer/Renderable.ts
var RenderMode = /* @__PURE__ */ ((RenderMode2) => {
  RenderMode2[RenderMode2["DRAFT"] = 0] = "DRAFT";
  RenderMode2[RenderMode2["MEDIUM"] = 1] = "MEDIUM";
  RenderMode2[RenderMode2["HIGH"] = 2] = "HIGH";
  RenderMode2[RenderMode2["HIGH_PASS_1"] = 3] = "HIGH_PASS_1";
  RenderMode2[RenderMode2["HIGH_PASS_2"] = 4] = "HIGH_PASS_2";
  RenderMode2[RenderMode2["PICKING"] = 5] = "PICKING";
  return RenderMode2;
})(RenderMode || {});
var GL_TYPE_SIZE = {
  [picogl_default.BYTE]: 1,
  [picogl_default.UNSIGNED_BYTE]: 1,
  [picogl_default.SHORT]: 2,
  [picogl_default.UNSIGNED_SHORT]: 2,
  [picogl_default.INT]: 4,
  [picogl_default.UNSIGNED_INT]: 4,
  [picogl_default.FLOAT]: 4
};
var GL_TYPE_GETTER = {
  [picogl_default.BYTE]: (view, offset) => view.getInt8(offset),
  [picogl_default.UNSIGNED_BYTE]: (view, offset) => view.getUint8(offset),
  [picogl_default.SHORT]: (view, offset) => view.getInt16(offset, true),
  [picogl_default.UNSIGNED_SHORT]: (view, offset) => view.getUint16(offset, true),
  [picogl_default.INT]: (view, offset) => view.getInt32(offset, true),
  [picogl_default.UNSIGNED_INT]: (view, offset) => view.getUint32(offset, true),
  [picogl_default.FLOAT]: (view, offset) => view.getFloat32(offset, true)
};
var GL_TYPE_SETTER = {
  [picogl_default.BYTE]: (view, offset, value) => view.setInt8(offset, value),
  [picogl_default.UNSIGNED_BYTE]: (view, offset, value) => view.setUint8(offset, value),
  [picogl_default.SHORT]: (view, offset, value) => view.setInt16(offset, value, true),
  [picogl_default.UNSIGNED_SHORT]: (view, offset, value) => view.setUint16(offset, value, true),
  [picogl_default.INT]: (view, offset, value) => view.setInt32(offset, value, true),
  [picogl_default.UNSIGNED_INT]: (view, offset, value) => view.setUint32(offset, value, true),
  [picogl_default.FLOAT]: (view, offset, value) => view.setFloat32(offset, value, true)
};
function glDataTypeSize(type) {
  return Array.isArray(type) ? GL_TYPE_SIZE[type[0]] * type.length : GL_TYPE_SIZE[type];
}
function glIntegerType(type) {
  return type === picogl_default.FLOAT ? 0 : 1;
}
function glDataTypesInfo(types4) {
  const mappingsKeys = Object.keys(types4);
  const keys = [];
  let stride = 0;
  for (let i4 = 0, n5 = mappingsKeys.length; i4 < n5; ++i4) {
    if (types4[mappingsKeys[i4]]) {
      stride += glDataTypeSize(types4[mappingsKeys[i4]]);
      keys.push(mappingsKeys[i4]);
    }
  }
  return {
    keys,
    stride
  };
}
function setDrawCallUniforms(drawCall, uniforms) {
  for (const [key2, value] of Object.entries(uniforms)) {
    if (value.texture) {
      drawCall.texture(key2, value);
    } else {
      drawCall.uniform(key2, value);
    }
  }
}
function configureVAO(vao, vbo, types4, typesInfo, attrIndex = 0, instanced = false) {
  const functionKey = instanced ? "instanceAttributeBuffer" : "vertexAttributeBuffer";
  const stride = typesInfo.stride;
  let offset = 0;
  for (let i4 = 0, n5 = typesInfo.keys.length; i4 < n5; ++i4) {
    const type = types4[typesInfo.keys[i4]];
    const glType = Array.isArray(type) ? type[0] : type;
    const size = Array.isArray(type) ? type.length : 1;
    vao[functionKey](attrIndex + i4, vbo, {
      type: glType,
      integer: glIntegerType(glType),
      size,
      stride,
      offset
    });
    offset += glDataTypeSize(type);
  }
}

// src/data/DataTools.ts
var kDataMappingFlatten = Symbol("graffer:data::mapping::flatten::key");
var kDataEntryNeedsFlatten = Symbol("graffer:data::tools::needs::flatten");
function* dataIterator(data, mappings2) {
  const keys = Reflect.ownKeys(mappings2);
  for (let i4 = 0, n5 = data.length; i4 < n5; ++i4) {
    const entry = {};
    for (const key2 of keys) {
      if (mappings2[key2] !== null) {
        entry[key2] = mappings2[key2](data[i4], i4);
      }
    }
    yield [i4, entry];
  }
}
function extractData(data, mappings2) {
  const result = [];
  for (const [, entry] of dataIterator(data, mappings2)) {
    result.push(entry);
  }
  return result;
}
function concatenateData(data, mappings2) {
  const result = [];
  for (let i4 = 0, n5 = data.length; i4 < n5; ++i4) {
    for (const [, entry] of dataIterator(data[i4], mappings2)) {
      result.push(entry);
    }
  }
  return result;
}
function computeDataTypes(types4, mappings2) {
  const keys = Object.keys(types4);
  const result = {};
  for (let i4 = 0, n5 = keys.length; i4 < n5; ++i4) {
    if (keys[i4] in mappings2 && mappings2[keys[i4]] !== null) {
      result[keys[i4]] = types4[keys[i4]];
    }
  }
  return result;
}
function writeValueToDataView(view, value, type, offset) {
  if (Array.isArray(value)) {
    let writeOffset = 0;
    for (let i4 = 0, n5 = value.length; i4 < n5; ++i4) {
      GL_TYPE_SETTER[type[i4]](view, offset + writeOffset, value[i4]);
      writeOffset += GL_TYPE_SIZE[type[i4]];
    }
    return writeOffset;
  }
  GL_TYPE_SETTER[type](view, offset, value);
  return GL_TYPE_SIZE[type];
}
function flattenEntry(entry, types4, typesInfo, mappings2, view, offset) {
  var _a6, _b2;
  const flatMappings = {};
  let flattenLength = 0;
  for (let i4 = 0, n5 = typesInfo.keys.length; i4 < n5; ++i4) {
    const key2 = typesInfo.keys[i4];
    if (entry[kDataEntryNeedsFlatten].has(key2)) {
      flatMappings[key2] = (_a6 = mappings2[key2][kDataMappingFlatten]) != null ? _a6 : (entry2, i5) => entry2[key2][i5];
      flattenLength = entry[key2].length;
    } else {
      flatMappings[key2] = (_b2 = mappings2[key2][kDataMappingFlatten]) != null ? _b2 : (entry2) => entry2[key2];
    }
  }
  let flatOffset = 0;
  for (let i4 = 0; i4 < flattenLength; ++i4) {
    for (let ii = 0, n5 = typesInfo.keys.length; ii < n5; ++ii) {
      const key2 = typesInfo.keys[ii];
      flatOffset += writeValueToDataView(view, flatMappings[key2](entry, i4, flattenLength), types4[key2], offset + flatOffset);
    }
  }
  return flatOffset;
}
function packData(data, mappings2, types4, potLength, cb) {
  const typesInfo = glDataTypesInfo(computeDataTypes(types4, mappings2));
  const entries = [];
  let dataLength = 0;
  const cb1 = Array.isArray(cb) ? cb[0] : cb;
  const cb2 = Array.isArray(cb) ? cb[1] : null;
  for (const [index, entry] of dataIterator(data, mappings2)) {
    let entryLength = 1;
    for (let i4 = 0, n5 = typesInfo.keys.length; i4 < n5; ++i4) {
      const value = entry[typesInfo.keys[i4]];
      if (Array.isArray(value) && (!Array.isArray(types4[typesInfo.keys[i4]]) || mappings2[typesInfo.keys[i4]][kDataMappingFlatten])) {
        if (!entry[kDataEntryNeedsFlatten]) {
          entry[kDataEntryNeedsFlatten] = /* @__PURE__ */ new Set();
        }
        entry[kDataEntryNeedsFlatten].add(typesInfo.keys[i4]);
        entryLength = Math.max(entryLength, value.length);
      }
    }
    entries.push(entry);
    dataLength += entryLength;
    if (cb1) {
      cb1(index, entry);
    }
  }
  dataLength = potLength ? Math.pow(2, Math.ceil(Math.log2(dataLength))) : dataLength;
  const buffer2 = new ArrayBuffer(typesInfo.stride * dataLength);
  const view = new DataView(buffer2);
  let offset = 0;
  for (let i4 = 0, n5 = entries.length; i4 < n5; ++i4) {
    const entry = entries[i4];
    if (cb2) {
      cb2(i4, entry);
    }
    if (entry[kDataEntryNeedsFlatten]) {
      offset += flattenEntry(entry, types4, typesInfo, mappings2, view, offset);
    } else {
      for (let i5 = 0, n6 = typesInfo.keys.length; i5 < n6; ++i5) {
        offset += writeValueToDataView(view, entry[typesInfo.keys[i5]], types4[typesInfo.keys[i5]], offset);
      }
    }
  }
  return buffer2;
}
function printDataGL(context, vbo, count, types4) {
  const gl = context.gl;
  const typesInfo = glDataTypesInfo(types4);
  const result = new ArrayBuffer(typesInfo.stride * count);
  const view = new DataView(result);
  gl.bindTransformFeedback(gl.TRANSFORM_FEEDBACK, null);
  gl.bindBuffer(gl.ARRAY_BUFFER, vbo.buffer);
  gl.getBufferSubData(gl.ARRAY_BUFFER, 0, view);
  let off = 0;
  for (let i4 = 0; i4 < count; ++i4) {
    for (let ii = 0, nn = typesInfo.keys.length; ii < nn; ++ii) {
      const type = Array.isArray(types4[typesInfo.keys[ii]]) ? types4[typesInfo.keys[ii]] : [types4[typesInfo.keys[ii]]];
      const values = [];
      for (let iii = 0, nnn = type.length; iii < nnn; ++iii) {
        values.push(GL_TYPE_GETTER[type[iii]](view, off));
        off += GL_TYPE_SIZE[type[iii]];
      }
      console.log(`ELEMENT[${i4}] ATTR[${ii}]: ${values}`);
    }
  }
}

// src/data/shaders/GraphPoints.test.vs.glsl
var GraphPoints_test_vs_default = "#version 300 es\n#define GLSLIFY 1\n\nlayout(location=0) in uint aIndex;\n\nuniform sampler2D uDataTexture;\n\nflat out vec3 vPosition;\nflat out float vRadius;\nflat out float vYolo;\n\nvec4 getValueByIndexFromTexture(sampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0);\n}\n\nvoid main() {\n    vec4 value = getValueByIndexFromTexture(uDataTexture, int(aIndex));\n    vPosition = value.xyz;\n    vRadius = value.w;\n    vYolo = value.w / 10.0;\n}\n";

// src/data/shaders/noop.fs.glsl
var noop_fs_default = "#version 300 es\n#define GLSLIFY 1\nvoid main() {}\n";

// src/renderer/DataTexture.ts
var DataTexture = class {
  get texture() {
    this.update();
    return this._texture;
  }
  get capacity() {
    return this.textureSize[0] * this.textureSize[1];
  }
  constructor(context, initialCapacity = 1024) {
    this.context = context;
    this.textureSize = vec2_exports.create();
    this.resizeTexture(initialCapacity);
  }
  destroy() {
    this._texture.delete();
    this.context = null;
    this.textureSize = null;
    this._texture = null;
  }
  createTexture(width, height) {
    return this.context.createTexture2D(width, height);
  }
  resizeTexture(capacity) {
    if (this.capacity < capacity) {
      const textureWidth = Math.pow(2, Math.ceil(Math.log2(Math.ceil(Math.sqrt(capacity)))));
      const textureHeight = Math.pow(2, Math.ceil(Math.log2(Math.ceil(capacity / textureWidth))));
      this.textureSize = vec2_exports.fromValues(textureWidth, textureHeight);
      if (this._texture) {
        this._texture.resize(textureWidth, textureHeight);
      } else {
        this._texture = this.createTexture(textureWidth, textureHeight);
      }
    }
  }
};

// src/data/GraphPoints.ts
var kDefaultMappings = {
  id: (entry, i4) => "id" in entry ? entry.id : i4,
  x: (entry) => entry.x,
  y: (entry) => entry.y,
  z: (entry) => "z" in entry ? entry.z : 0,
  radius: (entry) => "radius" in entry ? entry.radius : 0
};
var kGLTypes = {
  x: picogl_default.FLOAT,
  y: picogl_default.FLOAT,
  z: picogl_default.FLOAT,
  radius: picogl_default.FLOAT
};
var GraphPoints = class extends DataTexture {
  constructor(context, data, mappings2 = {}) {
    super(context, data.length);
    this._length = 0;
    this.dirty = false;
    this.map = /* @__PURE__ */ new Map();
    this.bb = {
      min: vec3_exports.fromValues(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER),
      max: vec3_exports.fromValues(Number.MIN_SAFE_INTEGER, Number.MIN_SAFE_INTEGER, Number.MIN_SAFE_INTEGER)
    };
    this.bbCenter = vec3_exports.create();
    this._dataBuffer = this.packData(data, mappings2, true, true);
    this._dataView = new DataView(this._dataBuffer);
    const diagonalVec = vec3_exports.sub(vec3_exports.create(), this.bb.max, this.bb.min);
    this.bbDiagonal = vec3_exports.length(diagonalVec);
    this.bbCenter = vec3_exports.add(vec3_exports.create(), this.bb.min, vec3_exports.mul(vec3_exports.create(), diagonalVec, vec3_exports.fromValues(0.5, 0.5, 0.5)));
    this._length = data.length;
    this.dirty = true;
  }
  static createGraphFromNodes(context, nodes, mappings2 = {}) {
    let pointIndex = 0;
    const dataMappings = Object.assign({}, kDefaultMappings, {
      id: () => pointIndex++
    }, mappings2);
    const points2 = concatenateData(nodes, dataMappings);
    return new this(context, points2);
  }
  get dataBuffer() {
    return this._dataBuffer;
  }
  get dataView() {
    return this._dataView;
  }
  get length() {
    return this._length;
  }
  destroy() {
    super.destroy();
    this.map.clear();
    this._dataBuffer = null;
    this.map = null;
  }
  update() {
    if (this.dirty) {
      const float32 = new Float32Array(this._dataBuffer);
      this._texture.data(float32);
    }
    this.dirty = false;
  }
  getPointIndex(id) {
    return this.map.get(id);
  }
  getPointByIndex(index) {
    return [
      this._dataView.getFloat32(index * 16, true),
      this._dataView.getFloat32(index * 16 + 4, true),
      this._dataView.getFloat32(index * 16 + 8, true),
      this._dataView.getFloat32(index * 16 + 12, true)
    ];
  }
  getPointByID(id) {
    return this.getPointByIndex(this.getPointIndex(id));
  }
  setPointByIndex(index, data, mappings2 = {}) {
    const setBuffer = this.packData([data], mappings2, false, false);
    const setView = new Float32Array(setBuffer);
    const dataView = this._dataView;
    dataView.setFloat32(index * 16, setView[0], true);
    dataView.setFloat32(index * 16 + 4, setView[1], true);
    dataView.setFloat32(index * 16 + 8, setView[2], true);
    dataView.setFloat32(index * 16 + 12, setView[3], true);
    this.dirty = true;
  }
  setPointByID(id, data, mappings2 = {}) {
    return this.setPointByIndex(this.getPointIndex(id), data, mappings2);
  }
  addPoints(data, mappings2 = {}) {
    this.resizeTexture(this._length + data.length);
    const mergeBuffer = new ArrayBuffer(this.capacity * 16);
    const mergeBytes = new Uint8Array(mergeBuffer);
    const dataBuffer = this.packData(data, mappings2, false, true);
    const dataBytes = new Uint8Array(dataBuffer);
    const oldBytes = new Uint8Array(this._dataBuffer, 0, this._length * 16);
    mergeBytes.set(oldBytes);
    mergeBytes.set(dataBytes, oldBytes.length);
    this._dataBuffer = mergeBuffer;
    this._dataView = new DataView(this._dataBuffer);
    this._length += data.length;
    this.dirty = true;
  }
  createTexture(width, height) {
    return this.context.createTexture2D(width, height, {
      internalFormat: picogl_default.RGBA32F
    });
  }
  packData(data, mappings2, potLength, addMapEntry) {
    const dataMappings = Object.assign({}, kDefaultMappings, mappings2);
    return packData(data, dataMappings, kGLTypes, potLength, (i4, entry) => {
      if (addMapEntry)
        this.map.set(entry.id, this._length + i4);
      this.bb.min[0] = Math.min(this.bb.min[0], entry.x - entry.radius);
      this.bb.min[1] = Math.min(this.bb.min[1], entry.y - entry.radius);
      this.bb.min[2] = Math.min(this.bb.min[2], entry.z);
      this.bb.max[0] = Math.max(this.bb.max[0], entry.x + entry.radius);
      this.bb.max[1] = Math.max(this.bb.max[1], entry.y + entry.radius);
      this.bb.max[2] = Math.max(this.bb.max[2], entry.z);
    });
  }
  testFeedback(context) {
    const program = context.createProgram(GraphPoints_test_vs_default, noop_fs_default, { transformFeedbackVaryings: ["vPosition", "vRadius", "vYolo"], transformFeedbackMode: picogl_default.INTERLEAVED_ATTRIBS });
    const pointsTarget = context.createVertexBuffer(picogl_default.FLOAT, 4, 40);
    const pointsIndices = context.createVertexBuffer(picogl_default.UNSIGNED_BYTE, 1, new Uint8Array([
      0,
      1,
      2,
      3,
      4,
      5
    ]));
    const transformFeedback = context.createTransformFeedback().feedbackBuffer(0, pointsTarget);
    const vertexArray = context.createVertexArray().vertexAttributeBuffer(0, pointsIndices);
    const drawCall = context.createDrawCall(program, vertexArray).transformFeedback(transformFeedback);
    drawCall.primitive(picogl_default.POINTS);
    drawCall.texture("uDataTexture", this.texture);
    context.enable(picogl_default.RASTERIZER_DISCARD);
    drawCall.draw();
    context.disable(picogl_default.RASTERIZER_DISCARD);
    printDataGL(context, pointsTarget, 6, {
      position: [picogl_default.FLOAT, picogl_default.FLOAT, picogl_default.FLOAT],
      radius: picogl_default.FLOAT,
      yolo: picogl_default.FLOAT
    });
  }
};

// src/data/PointsReader.ts
var PointsReader = class {
  get dataTexture() {
    return this.points.texture;
  }
  constructor(...args) {
    this.initialize(...args);
  }
  initialize(context, points2, data, mappings2) {
    this.points = points2;
    this.ingestData(context, data, mappings2);
    this.initializeTargetBuffers(context, this.dataBuffer.byteLength / this.dataStride);
    this.initializeDataDrawCall(context);
  }
  ingestData(context, data, mappings2) {
    const dataMappings = this.computeMappings(mappings2);
    const types4 = computeDataTypes(this.getGLSourceTypes(), dataMappings);
    this.dataBuffer = packData(data, dataMappings, types4, false, this.packDataCB());
    this.dataView = new DataView(this.dataBuffer);
    const typesInfo = glDataTypesInfo(types4);
    this.dataStride = typesInfo.stride;
    this.sourceVBO = context.createInterleavedBuffer(this.dataStride, this.dataView);
    this.sourceVAO = context.createVertexArray();
    configureVAO(this.sourceVAO, this.sourceVBO, types4, typesInfo);
  }
  initializeTargetBuffers(context, dataLength) {
    const targetTypes = this.getGLTargetTypes();
    const stride = glDataTypesInfo(targetTypes).stride;
    this.targetVBO = context.createInterleavedBuffer(stride, dataLength * stride);
    this.targetTFO = context.createTransformFeedback().feedbackBuffer(0, this.targetVBO);
  }
  initializeDataDrawCall(context) {
    const dataShader = this.getDataShader();
    this.dataProgram = context.createProgram(dataShader.vs, noop_fs_default, {
      transformFeedbackVaryings: dataShader.varyings,
      transformFeedbackMode: PicoGL.INTERLEAVED_ATTRIBS
    });
    this.dataDrawCall = context.createDrawCall(this.dataProgram, this.sourceVAO).transformFeedback(this.targetTFO);
    this.dataDrawCall.primitive(PicoGL.POINTS);
  }
  compute(context, uniforms) {
    setDrawCallUniforms(this.dataDrawCall, uniforms);
    context.enable(PicoGL.RASTERIZER_DISCARD);
    this.dataDrawCall.draw();
    context.disable(PicoGL.RASTERIZER_DISCARD);
  }
  configureTargetVAO(vao, attrIndex = 1) {
    const types4 = this.getGLTargetTypes();
    const typesInfo = glDataTypesInfo(types4);
    configureVAO(vao, this.targetVBO, types4, typesInfo, attrIndex, true);
  }
  packDataCB() {
    return () => null;
  }
};

// src/renderer/mod.ts
var mod_exports3 = {};
__export(mod_exports3, {
  Camera: () => Camera,
  CameraMode: () => CameraMode,
  GL_TYPE_GETTER: () => GL_TYPE_GETTER,
  GL_TYPE_SETTER: () => GL_TYPE_SETTER,
  GL_TYPE_SIZE: () => GL_TYPE_SIZE,
  OffscreenBuffer: () => OffscreenBuffer,
  RenderMode: () => RenderMode,
  Viewport: () => Viewport,
  colors: () => mod_exports2,
  configureVAO: () => configureVAO,
  glDataTypeSize: () => glDataTypeSize,
  glDataTypesInfo: () => glDataTypesInfo,
  glIntegerType: () => glIntegerType,
  setDrawCallUniforms: () => setDrawCallUniforms
});

// src/renderer/Camera.ts
var CameraMode = /* @__PURE__ */ ((CameraMode2) => {
  CameraMode2[CameraMode2["2D"] = 0] = "2D";
  CameraMode2[CameraMode2["3D"] = 1] = "3D";
  return CameraMode2;
})(CameraMode || {});
var kDefaultOptions = {
  mode: 0 /* 2D */,
  position: vec3_exports.fromValues(0, 0, -500)
};
var Camera = class {
  constructor(viewportSize, options) {
    this._aovRad = 0;
    this._aov = 0;
    this._nearPlane = 1;
    this._farPlane = 1e3;
    const _options = Object.assign({}, kDefaultOptions, options);
    this._position = vec3_exports.copy(vec3_exports.create(), _options.position);
    this._mode = _options.mode;
    this._rotation = quat_exports.fromEuler(quat_exports.create(), 0, 0, 0);
    this._viewMatrix = mat4_exports.create();
    this._projectionMatrix = mat4_exports.create();
    this._viewportSize = vec2_exports.copy(vec2_exports.create(), viewportSize);
    this._aspect = this._viewportSize[0] / this._viewportSize[1];
    this.aov = 45;
    this.calculateProjectionMatrix();
  }
  get mode() {
    return this._mode;
  }
  set mode(value) {
    this._mode = value;
    this.calculateProjectionMatrix();
  }
  get aovRad() {
    return this._aovRad;
  }
  set aovRad(value) {
    this._aovRad = value;
    this._aov = value * 57.29577951308232;
    this.calculateProjectionMatrix();
  }
  get aov() {
    return this._aov;
  }
  set aov(value) {
    this._aov = value;
    this._aovRad = value * 0.017453292519943295;
    this.calculateProjectionMatrix();
  }
  get nearPlane() {
    return this._nearPlane;
  }
  set nearPlane(value) {
    this._nearPlane = value;
    this.calculateProjectionMatrix();
  }
  get farPlane() {
    return this._farPlane;
  }
  set farPlane(value) {
    this._farPlane = value;
    this.calculateProjectionMatrix();
  }
  get viewportSize() {
    return this._viewportSize;
  }
  set viewportSize(value) {
    vec2_exports.copy(this._viewportSize, value);
    this._aspect = this._viewportSize[0] / this._viewportSize[1];
    this.calculateProjectionMatrix();
  }
  get position() {
    return this._position;
  }
  set position(value) {
    vec3_exports.copy(this._position, value);
  }
  get rotation() {
    return this._rotation;
  }
  set rotation(value) {
    quat_exports.copy(this._rotation, value);
  }
  get target() {
    return this._target;
  }
  set target(value) {
    vec3_exports.copy(this._target, value);
  }
  get aspect() {
    return this._aspect;
  }
  get viewMatrix() {
    mat4_exports.fromQuat(this._viewMatrix, this._rotation);
    mat4_exports.translate(this._viewMatrix, this._viewMatrix, this._position);
    return this._viewMatrix;
  }
  get projectionMatrix() {
    return this._projectionMatrix;
  }
  rotate(rotation) {
    quat_exports.mul(this._rotation, rotation, this._rotation);
  }
  calculateProjectionMatrix() {
    if (this.mode === 0 /* 2D */) {
      const halfWidth = this._viewportSize[0] * 0.5;
      const halfHeight = this._viewportSize[1] * 0.5;
      mat4_exports.ortho(
        this._projectionMatrix,
        -halfWidth,
        halfWidth,
        -halfHeight,
        halfHeight,
        this._nearPlane,
        this._farPlane
      );
    } else {
      mat4_exports.perspective(
        this._projectionMatrix,
        this._aovRad,
        this._aspect,
        this._nearPlane,
        this._farPlane
      );
    }
  }
};

// src/UX/UXModule.ts
var UXModule = class {
  constructor() {
    this._enabled = false;
  }
  get enabled() {
    return this._enabled;
  }
  set enabled(value) {
    if (value !== this._enabled) {
      this._enabled = value;
      if (this._enabled) {
        this.hookEvents();
      } else {
        this.unhookEvents();
      }
    }
  }
};

// src/UX/mouse/MouseHandler.ts
var kEvents = {
  move: Symbol("Grafer::UX::MouseHandler::move"),
  down: Symbol("Grafer::UX::MouseHandler::down"),
  up: Symbol("Grafer::UX::MouseHandler::up"),
  click: Symbol("Grafer::UX::MouseHandler::click"),
  wheel: Symbol("Grafer::UX::MouseHandler::wheel")
};
Object.freeze(kEvents);
var kButton2Index = {
  primary: 1,
  secondary: 2,
  auxiliary: 4,
  fourth: 8,
  fifth: 16
};
Object.freeze(kButton2Index);
var kIndex2Button = {
  1: "primary",
  2: "secondary",
  4: "auxiliary",
  8: "fourth",
  16: "fifth"
};
Object.freeze(kIndex2Button);
var MouseHandler = class extends EventEmitter.mixin(UXModule) {
  constructor(canvas, rect, pixelRatio, enabled = true) {
    super();
    this.boundHandler = this.handleMouseEvent.bind(this);
    this.disableContextMenu = (e5) => e5.preventDefault();
    this.clickDragThreshold = 10;
    this.canvas = canvas;
    this.rect = rect;
    this.pixelRatio = pixelRatio;
    this.state = {
      valid: false,
      pixelRatio: this.pixelRatio,
      clientCoords: vec2_exports.create(),
      canvasCoords: vec2_exports.create(),
      glCoords: vec2_exports.create(),
      deltaCoords: vec2_exports.create(),
      clickPositionDelta: vec2_exports.create(),
      clickValid: false,
      wheel: 0,
      buttons: {
        primary: false,
        secondary: false,
        auxiliary: false,
        fourth: false,
        fifth: false
      }
    };
    this.newState = {
      valid: false,
      pixelRatio: this.pixelRatio,
      clientCoords: vec2_exports.create(),
      canvasCoords: vec2_exports.create(),
      glCoords: vec2_exports.create(),
      deltaCoords: vec2_exports.create(),
      clickPositionDelta: vec2_exports.create(),
      clickValid: false,
      wheel: 0,
      buttons: {
        primary: false,
        secondary: false,
        auxiliary: false,
        fourth: false,
        fifth: false
      }
    };
    this.enabled = enabled;
  }
  static get events() {
    return kEvents;
  }
  on(type, callback) {
    super.on(type, callback);
  }
  off(type, callback) {
    super.off(type, callback);
  }
  resize(rect, pixelRatio) {
    this.rect = rect;
    this.pixelRatio = pixelRatio;
    this.state.pixelRatio = this.pixelRatio;
    this.newState.pixelRatio = this.pixelRatio;
    this.syntheticUpdate(kEvents.move);
  }
  hookEvents() {
    this.canvas.addEventListener("mouseenter", this.boundHandler);
    this.canvas.addEventListener("mouseleave", this.boundHandler);
    this.canvas.addEventListener("mousemove", this.boundHandler);
    this.canvas.addEventListener("mousedown", this.boundHandler);
    this.canvas.addEventListener("mouseup", this.boundHandler);
    this.canvas.addEventListener("wheel", this.boundHandler);
    this.canvas.addEventListener("contextmenu", this.disableContextMenu);
  }
  unhookEvents() {
    this.canvas.removeEventListener("mouseenter", this.boundHandler);
    this.canvas.removeEventListener("mouseleave", this.boundHandler);
    this.canvas.removeEventListener("mousemove", this.boundHandler);
    this.canvas.removeEventListener("mousedown", this.boundHandler);
    this.canvas.removeEventListener("mouseup", this.boundHandler);
    this.canvas.removeEventListener("wheel", this.boundHandler);
    this.canvas.removeEventListener("contextmenu", this.disableContextMenu);
  }
  syntheticUpdate(event, buttonIndex) {
    switch (event) {
      case kEvents.up:
      case kEvents.down:
      case kEvents.click:
        this.emitEvents([{
          event,
          args: [buttonIndex, kIndex2Button[buttonIndex]]
        }]);
        break;
      case kEvents.move:
        this.emitEvents([{
          event,
          args: [vec2_exports.fromValues(0, 0), this.state.canvasCoords]
        }]);
        break;
      default:
        break;
    }
  }
  update(state) {
    const events = [];
    if (state.deltaCoords[0] !== 0 || state.deltaCoords[1] !== 0) {
      if (state.valid) {
        events.push({
          event: kEvents.move,
          args: [state.deltaCoords, state.canvasCoords]
        });
      }
    }
    const buttonKeys = Object.keys(state.buttons);
    for (let i4 = 0, n5 = buttonKeys.length; i4 < n5; ++i4) {
      const key2 = buttonKeys[i4];
      const pressed = state.valid && state.buttons[key2];
      if (this.state.buttons[key2] !== pressed) {
        this.state.buttons[key2] = pressed;
        events.push({
          event: pressed ? kEvents.down : kEvents.up,
          args: [kButton2Index[key2], key2, pressed]
        });
      }
    }
    this.setMouseState(state);
    this.emitEvents(events);
  }
  emitEvents(entries) {
    for (let i4 = 0, n5 = entries.length; i4 < n5; ++i4) {
      this.emit(entries[i4].event, this.state, ...entries[i4].args);
    }
  }
  setMouseState(state) {
    this.state.valid = state.valid;
    vec2_exports.copy(this.state.clientCoords, state.clientCoords);
    vec2_exports.copy(this.state.canvasCoords, state.canvasCoords);
    vec2_exports.copy(this.state.glCoords, state.glCoords);
    vec2_exports.copy(this.state.deltaCoords, state.deltaCoords);
    vec2_exports.copy(this.state.clickPositionDelta, state.clickPositionDelta);
    this.state.clickValid = state.clickValid;
    this.state.wheel = state.wheel;
    Object.assign(this.state.buttons, state.buttons);
  }
  handleClickEvent(e5, state) {
    this.setMouseState(state);
    this.emitEvents([{
      event: kEvents.click,
      args: [e5.button, kIndex2Button[e5.button]]
    }]);
  }
  handleWheelEvent(e5, state) {
    this.setMouseState(state);
    if (e5.deltaY) {
      const sign = e5.deltaY / Math.abs(e5.deltaY);
      const delta = sign * Math.min(Math.abs(e5.deltaY), 10) / 10;
      this.emitEvents([{
        event: kEvents.wheel,
        args: [delta]
      }]);
    }
  }
  handleMouseEvent(e5) {
    const client = this.newState.clientCoords;
    const canvas = this.newState.canvasCoords;
    const gl = this.newState.glCoords;
    const delta = this.newState.deltaCoords;
    const rect = this.rect;
    vec2_exports.set(client, e5.clientX, e5.clientY);
    vec2_exports.set(canvas, e5.clientX - rect.left, e5.clientY - rect.top);
    vec2_exports.set(gl, (e5.clientX - rect.left) * this.pixelRatio, (rect.bottom - e5.clientY) * this.pixelRatio);
    if (e5.type === "mousemove") {
      vec2_exports.set(delta, e5.movementX, e5.movementY);
      if (this.state.clickValid) {
        vec2_exports.add(this.newState.clickPositionDelta, this.state.clickPositionDelta, delta);
        if (vec2_exports.length(this.newState.clickPositionDelta) > this.clickDragThreshold) {
          this.newState.clickValid = false;
        }
      }
    } else {
      vec2_exports.set(delta, 0, 0);
    }
    this.newState.valid = Boolean(
      canvas[0] >= 0 && canvas[0] <= rect.width && canvas[1] >= 0 && canvas[1] <= rect.height
    );
    this.newState.buttons.primary = Boolean(e5.buttons & 1);
    this.newState.buttons.secondary = Boolean(e5.buttons & 2);
    this.newState.buttons.auxiliary = Boolean(e5.buttons & 4);
    this.newState.buttons.fourth = Boolean(e5.buttons & 8);
    this.newState.buttons.fifth = Boolean(e5.buttons & 16);
    switch (e5.type) {
      case "mousedown":
        if (this.newState.buttons.primary) {
          this.newState.clickValid = true;
          vec2_exports.set(this.newState.clickPositionDelta, 0, 0);
        }
        this.update(this.newState);
        break;
      case "mouseup":
        if (this.state.clickValid) {
          this.handleClickEvent(e5, this.newState);
        }
        this.update(this.newState);
        break;
      case "wheel":
        this.handleWheelEvent(e5, this.newState);
        break;
      case "mouseleave":
        this.newState.valid = false;
      default:
        this.update(this.newState);
        break;
    }
  }
};

// src/renderer/colors/ColorRegistry.ts
var ColorRegistryType = /* @__PURE__ */ ((ColorRegistryType2) => {
  ColorRegistryType2["mapped"] = "mapped";
  ColorRegistryType2["indexed"] = "indexed";
  return ColorRegistryType2;
})(ColorRegistryType || {});
var ColorRegistry = class extends DataTexture {
  constructor() {
    super(...arguments);
    this.dirty = false;
  }
};

// src/renderer/colors/ColorRegistryIndexed.ts
var import_chroma_js = __toESM(require_chroma(), 1);
var kCapacityIncreaseStep = 1024;
var ColorRegistryIndexed = class extends ColorRegistry {
  constructor(context, initialCapacity = kCapacityIncreaseStep) {
    super(context, initialCapacity);
    this.colorBuffer = new ArrayBuffer(this.capacity * 4);
    this.colors = new Uint8Array(this.colorBuffer);
    this._length = 0;
  }
  get length() {
    return this._length;
  }
  update() {
    if (this.dirty) {
      this._texture.data(this.colors);
    }
    this.dirty = false;
  }
  registerColor(color) {
    this.resizeBuffer(this._length * 4 + 4);
    const rgba = (0, import_chroma_js.default)(color).rgba();
    let i4 = this._length * 4;
    this.colors[i4++] = rgba[0];
    this.colors[i4++] = rgba[1];
    this.colors[i4++] = rgba[2];
    this.colors[i4++] = Math.round(rgba[3] * 255);
    this.dirty = true;
    return this._length++;
  }
  updateColor(index, color) {
    const rgba = (0, import_chroma_js.default)(color).rgba();
    let i4 = index * 4;
    this.colors[i4++] = rgba[0];
    this.colors[i4++] = rgba[1];
    this.colors[i4++] = rgba[2];
    this.colors[i4++] = Math.round(rgba[3] * 255);
    this.dirty = true;
  }
  resizeBuffer(byteCapacity) {
    if (this.colorBuffer.byteLength < byteCapacity) {
      const increase = Math.max(kCapacityIncreaseStep * 4, byteCapacity - this.colorBuffer.byteLength);
      this.resizeTexture((this.colorBuffer.byteLength + increase) / 4);
      const newBuffer = new ArrayBuffer(this.capacity * 4);
      const newView = new Uint8Array(newBuffer);
      newView.set(this.colors);
      this.colorBuffer = newBuffer;
      this.colors = newView;
    }
  }
};

// src/renderer/RectObserver.ts
var POLLING_RATE = 400;
var RectObserver = class {
  constructor(callback) {
    this.callback = callback;
  }
  observe(element) {
    this.elementTarget = element;
    this.rect = this.elementTarget.getBoundingClientRect();
    this.pollElement();
    this.poll = setInterval(this.pollElement.bind(this), POLLING_RATE);
  }
  disconnect() {
    clearInterval(this.poll);
  }
  pollElement() {
    const rect = this.elementTarget.getBoundingClientRect();
    if (!this.elementTarget.isConnected) {
      this.disconnect();
    }
    if (!this.rectEqual(this.rect, rect)) {
      this.rect = rect;
      this.callback(this.rect);
    }
  }
  rectEqual(prev, curr) {
    return prev.width === curr.width && prev.height === curr.height && prev.top === curr.top && prev.left === curr.left;
  }
};

// src/renderer/colors/ColorRegistryMapped.ts
var import_chroma_js2 = __toESM(require_chroma(), 1);
var ColorRegistryMapped = class extends ColorRegistry {
  constructor(context, initialCapacity = 1024) {
    super(context, initialCapacity);
    this.colorMap = /* @__PURE__ */ new Map();
  }
  get length() {
    return this.colorMap.size;
  }
  update() {
    if (this.dirty) {
      if (this.colorMap.size > this.capacity) {
        this.resizeTexture(this.colorMap.size);
      }
      const buffer2 = new Uint8Array(this.capacity * 4);
      let offset = 0;
      for (const color of this.colorMap.keys()) {
        const rgba = import_chroma_js2.default.hex(color).rgba();
        buffer2[offset++] = rgba[0];
        buffer2[offset++] = rgba[1];
        buffer2[offset++] = rgba[2];
        buffer2[offset++] = Math.round(rgba[3] * 255);
      }
      this._texture.data(buffer2);
    }
    this.dirty = false;
  }
  registerColor(color) {
    const hex = (0, import_chroma_js2.default)(color).hex();
    if (!this.colorMap.has(hex)) {
      this.colorMap.set(hex, this.colorMap.size);
      this.dirty = true;
    }
    return this.colorMap.get(hex);
  }
};

// node_modules/potpack/index.js
function potpack(boxes) {
  let area = 0;
  let maxWidth = 0;
  for (const box2 of boxes) {
    area += box2.w * box2.h;
    maxWidth = Math.max(maxWidth, box2.w);
  }
  boxes.sort((a3, b3) => b3.h - a3.h);
  const startWidth = Math.max(Math.ceil(Math.sqrt(area / 0.95)), maxWidth);
  const spaces = [{ x: 0, y: 0, w: startWidth, h: Infinity }];
  let width = 0;
  let height = 0;
  for (const box2 of boxes) {
    for (let i4 = spaces.length - 1; i4 >= 0; i4--) {
      const space = spaces[i4];
      if (box2.w > space.w || box2.h > space.h)
        continue;
      box2.x = space.x;
      box2.y = space.y;
      height = Math.max(height, box2.y + box2.h);
      width = Math.max(width, box2.x + box2.w);
      if (box2.w === space.w && box2.h === space.h) {
        const last = spaces.pop();
        if (i4 < spaces.length)
          spaces[i4] = last;
      } else if (box2.h === space.h) {
        space.x += box2.w;
        space.w -= box2.w;
      } else if (box2.w === space.w) {
        space.y += box2.h;
        space.h -= box2.h;
      } else {
        spaces.push({
          x: space.x + box2.w,
          y: space.y,
          w: space.w - box2.w,
          h: box2.h
        });
        space.y += box2.h;
        space.h -= box2.h;
      }
      break;
    }
  }
  return {
    w: width,
    h: height,
    fill: area / (width * height) || 0
  };
}

// src/renderer/TextureAtlas.ts
var kImageMargin = 12;
var INF = 1e20;
var kCharBoxDataMappings = {
  box: (entry) => [entry.x + kImageMargin, entry.y + kImageMargin, entry.w - kImageMargin * 2, entry.h - kImageMargin * 2]
};
var kCharBoxDataTypes = {
  box: [picogl_default.UNSIGNED_SHORT, picogl_default.UNSIGNED_SHORT, picogl_default.UNSIGNED_SHORT, picogl_default.UNSIGNED_SHORT]
};
var kLabelDataTypes = {
  texture: picogl_default.UNSIGNED_SHORT
};
var TextureAtlas = class {
  constructor(context) {
    this.dirty = false;
    this.textureKeyMap = /* @__PURE__ */ new Map();
    this.boxes = /* @__PURE__ */ new Map();
    this.boxesKeys = {};
    this._numTextures = 0;
    this.context = context;
    this._boxesTexture = context.createTexture2D(1, 1);
    this._indicesTexture = context.createTexture2D(1, 1);
    this._atlasTexture = context.createTexture2D(1, 1);
  }
  get numTextures() {
    return this._numTextures;
  }
  get boxesTexture() {
    return this._boxesTexture;
  }
  get indicesTexture() {
    return this._indicesTexture;
  }
  get atlasTexture() {
    return this._atlasTexture;
  }
  exportTextures(keyList, bufferX = 0, bufferY = 0) {
    if (!this.dirty) {
      return;
    }
    this.dirty = false;
    const canvas = document.createElement("canvas");
    canvas.setAttribute("style", "font-smooth: never;-webkit-font-smoothing : none;");
    const ctx = canvas.getContext("2d", { willReadFrequently: true });
    const boxes = Array.from(this.boxes.values());
    const pack = potpack(boxes);
    if (!keyList) {
      boxes.sort((a3, b3) => this.boxesKeys[a3.id] - this.boxesKeys[b3.id]);
    }
    const finalImage = ctx.createImageData(pack.w, pack.h);
    boxes.forEach((box2, i4) => {
      this.textureKeyMap.set(box2.id, i4);
      TextureAtlas.blitImageData(box2.image, finalImage, box2.x, finalImage.height - box2.y - box2.h);
      box2.x = box2.x + bufferX;
      box2.y = box2.y + bufferY;
      box2.w = box2.w - bufferX * 2;
      box2.h = box2.h - bufferY * 2;
    });
    const boxesBuffer = packData(boxes, kCharBoxDataMappings, kCharBoxDataTypes, true);
    this._boxesTexture = this.createTextureForBuffer(this.context, new Uint16Array(boxesBuffer), boxes.length, picogl_default.RGBA16UI);
    this._atlasTexture = this.context.createTexture2D(finalImage, {
      flipY: true,
      magFilter: picogl_default.NEAREST,
      minFilter: picogl_default.NEAREST
    });
    const labelDataMappings = {
      texture: (entry) => this.textureKeyMap.get(entry)
    };
    if (keyList) {
      const labelBuffer = packData(keyList, labelDataMappings, kLabelDataTypes, true);
      this._indicesTexture = this.createTextureForBuffer(this.context, new Uint16Array(labelBuffer), keyList.length, picogl_default.R16UI);
    }
  }
  addTexture(charKey, box2) {
    this.dirty = true;
    this.boxes.set(charKey, box2);
    this.boxesKeys = Array.from(this.boxes.keys()).reduce((acc, val, index) => {
      acc[val] = index;
      return acc;
    }, {});
    this.textureKeyMap.set(charKey, 0);
    this._numTextures = this.boxes.size;
  }
  createTextureForBuffer(context, data, dataLength, format) {
    const textureWidth = Math.pow(2, Math.ceil(Math.log2(Math.ceil(Math.sqrt(dataLength)))));
    const textureHeight = Math.pow(2, Math.ceil(Math.log2(Math.ceil(dataLength / textureWidth))));
    const texture = context.createTexture2D(textureWidth, textureHeight, {
      internalFormat: format
    });
    texture.data(data);
    return texture;
  }
  static blitImageData(src, dst, x2, y3) {
    for (let yy = 0; yy < src.height; ++yy) {
      const srcStart = src.width * yy * 4;
      const srcEnd = srcStart + src.width * 4;
      const dstOff = dst.width * (yy + y3) * 4 + x2 * 4;
      dst.data.set(src.data.subarray(srcStart, srcEnd), dstOff);
    }
  }
  static computeDistanceField(imageData, fontSize) {
    const dataLength = imageData.width * imageData.height;
    const maxDimension = Math.max(imageData.width, imageData.height);
    const gridOuter = new Float64Array(dataLength);
    const gridInner = new Float64Array(dataLength);
    const f3 = new Float64Array(maxDimension);
    const z = new Float64Array(maxDimension + 1);
    const v2 = new Uint16Array(maxDimension);
    gridOuter.fill(INF, 0, dataLength);
    gridInner.fill(0, 0, dataLength);
    for (let i4 = 0; i4 < dataLength; ++i4) {
      const a3 = imageData.data[i4 * 4 + 3] / 255;
      gridOuter[i4] = a3 === 1 ? 0 : a3 === 0 ? INF : Math.pow(Math.max(0, 0.5 - a3), 2);
      gridInner[i4] = a3 === 1 ? INF : a3 === 0 ? 0 : Math.pow(Math.max(0, a3 - 0.5), 2);
    }
    this.edt(gridOuter, imageData.width, imageData.height, f3, v2, z);
    this.edt(gridInner, imageData.width, imageData.height, f3, v2, z);
    const radius = fontSize;
    const data = imageData.data;
    for (let i4 = 0; i4 < dataLength; ++i4) {
      const d3 = Math.sqrt(gridOuter[i4]) - Math.sqrt(gridInner[i4]);
      const p3 = i4 * 4;
      const a3 = Math.round(255 - 255 * (d3 / radius + 0.5));
      data[p3] = 255;
      data[p3 + 1] = 255;
      data[p3 + 2] = 255;
      data[p3 + 3] = a3;
    }
    return imageData;
  }
  static edt(data, width, height, f3, v2, z) {
    for (let x2 = 0; x2 < width; ++x2) {
      this.edt1d(data, x2, width, height, f3, v2, z);
    }
    for (let y3 = 0; y3 < height; ++y3) {
      this.edt1d(data, y3 * width, 1, width, f3, v2, z);
    }
  }
  static edt1d(grid, offset, stride, length5, f3, v2, z) {
    let q, k2, s4, r5;
    v2[0] = 0;
    z[0] = -INF;
    z[1] = INF;
    for (q = 0; q < length5; ++q) {
      f3[q] = grid[offset + q * stride];
    }
    for (q = 1, k2 = 0, s4 = 0; q < length5; ++q) {
      do {
        r5 = v2[k2];
        s4 = (f3[q] - f3[r5] + q * q - r5 * r5) / (q - r5) / 2;
      } while (s4 <= z[k2] && --k2 > -1);
      ++k2;
      v2[k2] = q;
      z[k2] = s4;
      z[k2 + 1] = INF;
    }
    for (q = 0, k2 = 0; q < length5; ++q) {
      while (z[k2 + 1] < q) {
        ++k2;
      }
      r5 = v2[k2];
      grid[offset + q * stride] = f3[r5] + (q - r5) * (q - r5);
    }
  }
};

// src/renderer/textures/TextureRegistry.ts
var TextureRegistry = class extends TextureAtlas {
  constructor(context) {
    super(context);
    this.canvas = document.createElement("canvas");
    this.ctx = this.canvas.getContext("2d");
  }
  registerTexture(src) {
    const charKey = src;
    if (!this.textureKeyMap.has(charKey)) {
      this.addTexture(charKey, { id: charKey, w: 1, h: 1, image: new ImageData(1, 1) });
      return this.renderTexture(src).then((image) => this.addTexture(charKey, { id: charKey, w: image.width, h: image.height, image }));
    }
  }
  renderTexture(src) {
    const { canvas, ctx } = this;
    const img = new Image();
    return new Promise((resolve) => {
      img.crossOrigin = "Anonymous";
      img.src = src;
      img.onload = () => {
        canvas.width = img.width + 2 * kImageMargin;
        canvas.height = img.height + 2 * kImageMargin;
        ctx.drawImage(img, kImageMargin, kImageMargin);
        resolve(ctx.getImageData(0, 0, canvas.width, canvas.height));
      };
    });
  }
};

// src/renderer/PixelRatioObserver.ts
var subscriberSet = /* @__PURE__ */ new Set();
function listenOnDevicePixelRatio() {
  function onChange() {
    for (const subscriberFn of subscriberSet.values()) {
      subscriberFn(window.devicePixelRatio);
    }
    listenOnDevicePixelRatio();
  }
  matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`).addEventListener("change", onChange, { once: true });
}
listenOnDevicePixelRatio();
var PixelRatioObserver = class {
  constructor(callback) {
    this.callback = (pixelRatio) => {
      this.devicePixelRatio = pixelRatio;
      callback(pixelRatio);
    };
    subscriberSet.add(callback);
  }
  disconnect() {
    subscriberSet.delete(this.callback);
  }
};

// src/renderer/Viewport.ts
var kDefaultOptions2 = {
  colorRegistryType: "mapped" /* mapped */,
  colorRegistryCapacity: 1024
};
var Viewport = class {
  constructor(element, options) {
    this._clearColor = vec4_exports.create();
    this.animationFrameID = 0;
    this.timeoutID = 0;
    this.boundDelayedRender = this.delayedRender.bind(this);
    const pixelRatio = window.devicePixelRatio;
    const opts = Object.assign({}, kDefaultOptions2, options);
    this.element = element;
    if (this.element instanceof HTMLCanvasElement) {
      this.canvas = this.element;
    } else {
      this.canvas = document.createElement("canvas");
      this.canvas.style.width = "100%";
      this.canvas.style.height = "100%";
      this.element.appendChild(this.canvas);
    }
    this.rect = this.canvas.getBoundingClientRect();
    this.canvas.width = this.rect.width * pixelRatio;
    this.canvas.height = this.rect.height * pixelRatio;
    this.context = PicoGL.createApp(this.canvas, {
      antialias: false,
      premultipliedAlpha: false,
      preserveDrawingBuffer: true
    });
    this.clearColor = [0.141176471, 0.160784314, 0.2, 1];
    this.context.clearMask(PicoGL.COLOR_BUFFER_BIT | PicoGL.DEPTH_BUFFER_BIT);
    this.context.enable(PicoGL.DEPTH_TEST);
    this.context.enable(PicoGL.POLYGON_OFFSET_FILL);
    this.context.depthFunc(PicoGL.LESS);
    this.context.pixelRatio = pixelRatio;
    new PixelRatioObserver((pixelRatio2) => {
      this.context.pixelRatio = pixelRatio2;
    });
    this.mouseHandler = new MouseHandler(this.canvas, this.rect, this.pixelRatio);
    this.size = vec2_exports.fromValues(this.canvas.width, this.canvas.height);
    this.camera = new Camera(this.size, opts.camera);
    const resizeObserver = new RectObserver((rect) => {
      this.rect = rect;
      this.context.resize(this.rect.width * this.pixelRatio, this.rect.height * this.pixelRatio);
      vec2_exports.set(this.size, this.canvas.width, this.canvas.height);
      this.camera.viewportSize = this.size;
      this.mouseHandler.resize(this.rect, this.pixelRatio);
      this.graph.resize(this.context);
      this.render();
    });
    resizeObserver.observe(this.canvas);
    if (opts.colorRegistryType === "mapped" /* mapped */) {
      this.colorRegistry = new ColorRegistryMapped(this.context, opts.colorRegistryCapacity);
    } else {
      this.colorRegistry = new ColorRegistryIndexed(this.context, opts.colorRegistryCapacity);
    }
    this.textureRegistry = new TextureRegistry(this.context);
  }
  get clearColor() {
    return this._clearColor;
  }
  set clearColor(value) {
    vec4_exports.copy(this._clearColor, value);
    this.context.clearColor(...this._clearColor);
  }
  get pixelRatio() {
    return this.context.pixelRatio;
  }
  resetContextFlags() {
    this.context.blendFuncSeparate(PicoGL.SRC_ALPHA, PicoGL.ONE_MINUS_SRC_ALPHA, PicoGL.ONE, PicoGL.ONE);
    this.context.defaultDrawFramebuffer();
    this.context.defaultReadFramebuffer();
    this.context.disable(PicoGL.BLEND);
    this.context.enable(PicoGL.DEPTH_TEST);
    this.context.depthFunc(PicoGL.LESS);
    this.context.depthMask(true);
    this.context.depthRange(0, 1);
    this.context.clearColor(...this._clearColor);
  }
  render() {
    if (!this.animationFrameID) {
      this.renderMode = 0 /* DRAFT */;
      if (this.timeoutID) {
        clearTimeout(this.timeoutID);
        this.timeoutID = 0;
      }
      this.animationFrameID = requestAnimationFrame(() => this._render());
    }
  }
  scheduleRender(delay) {
    if (this.timeoutID) {
      clearTimeout(this.timeoutID);
    }
    this.timeoutID = window.setTimeout(this.boundDelayedRender, delay);
  }
  delayedRender() {
    this.timeoutID = 0;
    this._render();
  }
  _render() {
    this.textureRegistry.exportTextures();
    const uniforms = {
      uViewMatrix: this.camera.viewMatrix,
      uSceneMatrix: this.graph.matrix,
      uProjectionMatrix: this.camera.projectionMatrix,
      uViewportSize: this.size,
      uPixelRatio: this.pixelRatio,
      uClearColor: this._clearColor,
      uColorPalette: this.colorRegistry.texture,
      uTexBoxes: this.textureRegistry.boxesTexture,
      uTexAtlas: this.textureRegistry.atlasTexture,
      uRenderMode: this.renderMode,
      uCameraMode: this.camera.mode
    };
    this.resetContextFlags();
    this.context.clear();
    if (this.graph && this.graph.enabled) {
      this.graph.render(this.context, this.renderMode, uniforms);
      switch (this.renderMode) {
        case 0 /* DRAFT */:
          uniforms.uRenderMode = 5 /* PICKING */;
          this.graph.render(this.context, 5 /* PICKING */, uniforms);
          this.renderMode = 1 /* MEDIUM */;
          this.scheduleRender(85);
          break;
        case 1 /* MEDIUM */:
          this.renderMode = 2 /* HIGH */;
          this.scheduleRender(120);
          break;
      }
    }
    this.animationFrameID = 0;
  }
};

// src/renderer/OffscreenBuffer.ts
var OffscreenBuffer = class {
  constructor(context) {
    this._clearColor = vec4_exports.create();
    this.context = context;
    this.resize(context);
  }
  get clearColor() {
    return this._clearColor;
  }
  set clearColor(value) {
    vec4_exports.copy(this._clearColor, value);
  }
  get colorTarget() {
    return this._colorTarget;
  }
  resize(context) {
    if (this.frameBuffer) {
      this.frameBuffer.delete();
    }
    if (this._colorTarget) {
      this._colorTarget.delete();
    }
    if (this.depthTarget) {
      this.depthTarget.delete();
    }
    this._colorTarget = context.createTexture2D(context.width, context.height);
    this.depthTarget = context.createRenderbuffer(context.width, context.height, PicoGL.DEPTH_COMPONENT16);
    this.frameBuffer = context.createFramebuffer().colorTarget(0, this._colorTarget).depthTarget(this.depthTarget);
  }
  prepareContext(context) {
    context.readFramebuffer(this.frameBuffer);
    context.drawFramebuffer(this.frameBuffer).clearMask(PicoGL.COLOR_BUFFER_BIT | PicoGL.DEPTH_BUFFER_BIT).clearColor(...this._clearColor).clear().depthMask(true);
  }
  blitToBuffer(context, target, mask = PicoGL.COLOR_BUFFER_BIT) {
    context.drawFramebuffer(target.frameBuffer);
    context.readFramebuffer(this.frameBuffer);
    context.blitFramebuffer(mask);
  }
  blitToScreen(context, mask = PicoGL.COLOR_BUFFER_BIT) {
    context.defaultDrawFramebuffer();
    context.readFramebuffer(this.frameBuffer);
    context.blitFramebuffer(mask);
  }
  readPixel(x2, y3, buffer2) {
    this.context.defaultDrawFramebuffer().readFramebuffer(this.frameBuffer).readPixel(x2, y3, buffer2);
  }
};

// src/renderer/colors/mod.ts
var mod_exports2 = {};
__export(mod_exports2, {
  ColorRegistry: () => ColorRegistry,
  ColorRegistryIndexed: () => ColorRegistryIndexed,
  ColorRegistryMapped: () => ColorRegistryMapped,
  ColorRegistryType: () => ColorRegistryType
});

// src/graph/mod.ts
var mod_exports7 = {};
__export(mod_exports7, {
  Graph: () => Graph,
  edges: () => mod_exports5,
  labels: () => mod_exports6,
  nodes: () => mod_exports4
});

// src/renderer/shaders/postprocess/postProcess.vs.glsl
var postProcess_vs_default = "#version 300 es\n#define GLSLIFY 1\n\nlayout(location=0) in vec4 aVertex;\n\nout vec2 vUv;\n\nvoid main() {\n    vUv = (aVertex.xy + 1.) / 2.;\n    gl_Position = aVertex;\n}\n";

// src/renderer/shaders/postprocess/blur.fs.glsl
var blur_fs_default = "#version 300 es\nprecision lowp float;\n#define GLSLIFY 1\n\nin vec2 vUv;\n\nout vec4 fragColor;\n\nuniform sampler2D uFrameTexture;\nuniform vec2 uDirection;\nuniform float uStrength;\n\nfloat gaussian(float x, float a) {\n    float exponent = (x * x) / (2. * a * a);\n    exponent = -exponent;\n    return exp(exponent) / sqrt(3.141 * 2. * a);\n}\n\nvoid main() {\n    vec2 texSize = 1. / vec2(textureSize(uFrameTexture, 0).xy);\n\n    float strength = mix(1.5, 3., uStrength);\n    vec4 inputSample = texture(uFrameTexture, vUv);\n    vec4 result = inputSample * gaussian(0., strength);\n    for (int i = 1; i < 10; ++i) {\n        result += texture(uFrameTexture, vUv + vec2(uDirection * texSize * float(i))) * gaussian(float(i), strength);\n        result += texture(uFrameTexture, vUv - vec2(uDirection * texSize * float(i))) * gaussian(float(i), strength);\n    }\n\n    fragColor = result;\n}\n";

// src/renderer/shaders/postprocess/blend.fs.glsl
var blend_fs_default = "#version 300 es\nprecision lowp float;\n#define GLSLIFY 1\n\nin vec2 vUv;\n\nout vec4 fragColor;\n\nuniform sampler2D uFrameTexture;\nuniform sampler2D uGlowTexture;\n\nvoid main() {\n    fragColor = texture(uFrameTexture, vUv).rgba;\n\n    if(fragColor.a == 0.) {\n        fragColor = texture(uGlowTexture, vUv).rgba;\n    }\n}\n";

// src/renderer/shaders/postprocess/resample.fs.glsl
var resample_fs_default = "#version 300 es\nprecision lowp float;\n#define GLSLIFY 1\n\nin vec2 vUv;\n\nout vec4 fragColor;\n\nuniform sampler2D uFrameTexture;\n\nvoid main() {\n    fragColor = texture(uFrameTexture, vUv);\n}\n";

// src/renderer/PostProcess.ts
var PostProcess = class {
  get drawBuffer() {
    return this._drawBuffer;
  }
  get targetTexture() {
    return this._targetTexture;
  }
  constructor(context) {
    this.context = context;
    const verticesVBO = context.createVertexBuffer(picogl_default.FLOAT, 2, new Float32Array([
      -1,
      -1,
      1,
      -1,
      -1,
      1,
      1,
      1
    ]));
    const verticesVAO = context.createVertexArray().vertexAttributeBuffer(0, verticesVBO);
    const programBlur = context.createProgram(postProcess_vs_default, blur_fs_default);
    const drawCallBlur = context.createDrawCall(programBlur, verticesVAO).primitive(picogl_default.TRIANGLE_STRIP);
    this.drawCallBlur = drawCallBlur;
    const programResample = context.createProgram(postProcess_vs_default, resample_fs_default);
    const drawCallDownsample = context.createDrawCall(programResample, verticesVAO).primitive(picogl_default.TRIANGLE_STRIP);
    this.drawCallDownsample = drawCallDownsample;
    const programBlend = context.createProgram(postProcess_vs_default, blend_fs_default);
    const drawCallBlend = context.createDrawCall(programBlend, verticesVAO).primitive(picogl_default.TRIANGLE_STRIP);
    this.drawCallBlend = drawCallBlend;
    const textureSize = [context.width, context.height];
    const textureOptions = { minFilter: picogl_default.LINEAR, magFilter: picogl_default.LINEAR, wrapT: picogl_default.CLAMP_TO_EDGE, wrapS: picogl_default.CLAMP_TO_EDGE };
    this.outputTexture1 = context.createTexture2D(...textureSize, textureOptions);
    this.outputBuffer1 = context.createFramebuffer().colorTarget(0, this.outputTexture1);
    this.outputTexture2 = context.createTexture2D(...textureSize, textureOptions);
    this.outputBuffer2 = context.createFramebuffer().colorTarget(0, this.outputTexture2);
  }
  resample(viewportSize, sourceTexture) {
    this.context.viewport(0, 0, ...viewportSize);
    setDrawCallUniforms(this.drawCallDownsample, {
      uFrameTexture: sourceTexture
    });
    this.drawCallDownsample.draw();
  }
  blur(sourceTexture, isHorizontal, strength) {
    setDrawCallUniforms(this.drawCallBlur, {
      uFrameTexture: sourceTexture,
      uDirection: isHorizontal ? [1, 0] : [0, 1],
      uStrength: strength
    });
    this.drawCallBlur.draw();
  }
  blend(frameTexture, uGlowTexture) {
    const { context } = this;
    setDrawCallUniforms(this.drawCallBlend, {
      uFrameTexture: frameTexture,
      uGlowTexture
    });
    context.enable(picogl_default.BLEND);
    context.blendFuncSeparate(picogl_default.ONE, picogl_default.ONE_MINUS_SRC_ALPHA, picogl_default.ONE, picogl_default.ONE);
    this.drawCallBlend.draw();
  }
};

// src/graph/Graph.ts
var kEvents2 = {
  preRender: Symbol("grafer_graph_pre_render"),
  postRender: Symbol("grafer_graph_post_render")
};
Object.freeze(kEvents2);
var DOWNSAMPLED_RATIO = 1 / 5;
var Graph = class extends EventEmitter.mixin(GraphPoints) {
  constructor(context, data, mappings2 = {}) {
    super(context, data, mappings2);
    this.enabled = true;
    this._layers = [];
    this._rotation = quat_exports.create();
    this._translation = vec3_exports.create();
    this._scale = vec3_exports.fromValues(1, 1, 1);
    this._matrix = mat4_exports.create();
    this._renderBuffer = new OffscreenBuffer(context);
    this._postProcess = new PostProcess(context);
  }
  static get events() {
    return kEvents2;
  }
  get matrix() {
    mat4_exports.fromRotationTranslationScale(this._matrix, this._rotation, this._translation, this._scale);
    return this._matrix;
  }
  get layers() {
    return this._layers;
  }
  get rotation() {
    return this._rotation;
  }
  get translation() {
    return this._translation;
  }
  set translation(value) {
    vec3_exports.set(this._translation, value[0], value[1], value[2]);
  }
  setTranslationByRef(other) {
    this._translation = other;
  }
  get scale() {
    return this._scale[0];
  }
  set scale(value) {
    vec3_exports.set(this._scale, value, value, value);
  }
  get scaleVec3() {
    return this._scale;
  }
  setScaleByRef(other) {
    this._scale = other;
  }
  render(context, mode, uniforms) {
    var _a6;
    this.emit(kEvents2.preRender, this, mode, uniforms);
    const isPicking = mode === 5 /* PICKING */ && ((_a6 = this.picking) == null ? void 0 : _a6.enabled);
    if (isPicking) {
      this.picking.offscreenBuffer.prepareContext(context);
    }
    const localUniforms = [uniforms];
    if (mode === 2 /* HIGH */) {
      localUniforms.push(Object.assign({}, uniforms, { uRenderMode: 3 /* HIGH_PASS_1 */ }));
      localUniforms.push(Object.assign({}, uniforms, { uRenderMode: 4 /* HIGH_PASS_2 */ }));
    }
    for (let i4 = 0, n5 = this._layers.length; i4 < n5; ++i4) {
      const glow2 = Math.min(Math.max(this._layers[i4].glow, 0), 1);
      if (glow2 && !isPicking) {
        this._renderBuffer.prepareContext(context);
      }
      if (this._layers[i4].enabled) {
        this._layers[i4].render(context, mode, localUniforms, i4);
      }
      if (glow2 && !isPicking) {
        const { outputBuffer1, outputBuffer2, outputTexture1, outputTexture2 } = this._postProcess;
        const renderFrameTexture = this._renderBuffer.colorTarget;
        context.disable(picogl_default.BLEND);
        const downsampledSize = [
          Math.round(context.width * DOWNSAMPLED_RATIO),
          Math.round(context.height * DOWNSAMPLED_RATIO)
        ];
        outputTexture1.resize(...downsampledSize);
        outputBuffer1.colorTarget(0, outputTexture1);
        outputTexture2.resize(...downsampledSize);
        outputBuffer2.colorTarget(0, outputTexture2);
        this.context.drawFramebuffer(outputBuffer1);
        this._postProcess.resample(downsampledSize, renderFrameTexture);
        this.context.drawFramebuffer(outputBuffer2);
        this._postProcess.blur(outputTexture1, true, glow2);
        this.context.drawFramebuffer(outputBuffer1);
        this._postProcess.blur(outputTexture2, false, glow2);
        outputTexture2.resize(context.width, context.height);
        outputBuffer2.colorTarget(0, outputTexture2);
        this.context.drawFramebuffer(outputBuffer2);
        this._postProcess.resample([context.width, context.height], outputTexture1);
        outputTexture1.resize(context.width, context.height);
        outputBuffer1.colorTarget(0, outputTexture1);
        this.context.drawFramebuffer(outputBuffer1);
        this._postProcess.blur(outputTexture2, true, glow2);
        this.context.drawFramebuffer(outputBuffer2);
        this._postProcess.blur(outputTexture1, false, glow2);
        context.defaultDrawFramebuffer();
        this._postProcess.blend(renderFrameTexture, outputTexture2);
      }
    }
    if (isPicking && this.picking.debugRender) {
      this.picking.offscreenBuffer.blitToScreen(context);
    }
    this.emit(kEvents2.postRender, this, mode, uniforms);
  }
  resize(context) {
    this._renderBuffer.resize(context);
    if (this.picking) {
      this.picking.offscreenBuffer.resize(context);
    }
  }
  rotate(rotation) {
    quat_exports.mul(this._rotation, rotation, this._rotation);
  }
  translate(translation) {
    vec3_exports.add(this._translation, this._translation, translation);
  }
  addLayer(layer) {
    this._layers.push(layer);
  }
  addLayerAt(layer, index) {
    if (index >= 0 && index <= this._layers.length) {
      this._layers.splice(index, 0, layer);
    }
  }
  removeLayer(layer) {
    const i4 = this._layers.indexOf(layer);
    if (i4 !== -1) {
      this._layers.splice(i4, 1);
    }
  }
  removeLayerAt(index) {
    if (index >= 0 && index < this._layers.length) {
      this._layers.splice(index, 1);
    }
  }
};

// src/graph/nodes/mod.ts
var mod_exports4 = {};
__export(mod_exports4, {
  Circle: () => Circle,
  Cross: () => Cross,
  Nodes: () => Nodes,
  Octagon: () => Octagon,
  Pentagon: () => Pentagon,
  Plus: () => Plus,
  Ring: () => Ring,
  Star: () => Star,
  Triangle: () => Triangle,
  kBasicNodeDataTypes: () => kBasicNodeDataTypes,
  kBasicNodeMappings: () => kBasicNodeMappings,
  kGLCircleNodeTypes: () => kGLCircleNodeTypes,
  types: () => types
});

// src/graph/nodes/circle/Circle.vs.glsl
var Circle_vs_default = '#version 300 es\n\nlayout(location=0) in vec3 aVertex;\nlayout(location=1) in uint iPositionIndex;\nlayout(location=2) in float iRadius;\nlayout(location=3) in uint iColor;\nlayout(location=4) in uvec4 iPickingColor;\n\n//layout(std140) uniform RenderUniforms {\n    uniform mat4 uViewMatrix;\n    uniform mat4 uSceneMatrix;\n    uniform mat4 uProjectionMatrix;\n    uniform vec2 uViewportSize;\n    uniform float uPixelRatio;\n    uniform sampler2D uGraphPoints;\n    uniform sampler2D uColorPalette;\n    uniform uint uCameraMode; // 0 = 2D; 1 = 3D;\n//};\n\nuniform bool uPixelSizing;\nuniform bool uBillboard;\n\nuniform bool uPicking;\n\nflat out vec4 fColor;\nflat out float fPixelLength;\nout vec2 vFromCenter;\n\nprecision lowp usampler2D;\n#define GLSLIFY 1\n\nvec4 valueForIndex(sampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0);\n}\n\nuvec4 uvalueForIndex(usampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0);\n}\n\nuint uivalueForIndex(usampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0)[0];\n}\n\nvoid main() {\n    // claculate the offset matrix, done as a matrix to be able to compute "billboard" vertices in the shader\n    mat4 offsetMatrix = mat4(1.0);\n    offsetMatrix[3] = vec4(valueForIndex(uGraphPoints, int(iPositionIndex)).xyz, 1.0);\n\n    // reset the rotation of the model-view matrix\n    mat4 modelMatrix = uViewMatrix * uSceneMatrix * offsetMatrix;\n    mat4 lookAtMatrix = mat4(modelMatrix);\n    if (uCameraMode == 1u) {\n        lookAtMatrix[0] = vec4(1.0, 0.0, 0.0, lookAtMatrix[0][3]);\n        lookAtMatrix[1] = vec4(0.0, 1.0, 0.0, lookAtMatrix[1][3]);\n        lookAtMatrix[2] = vec4(0.0, 0.0, 1.0, lookAtMatrix[2][3]);\n    }\n\n    // the on-screen center of this node\n    vec4 quadCenter = uProjectionMatrix * lookAtMatrix * vec4(0.0, 0.0, 0.0, 1.0);\n    vec2 screenQuadCenter = quadCenter.xy / quadCenter.w;\n\n    // the on-screen position of a side of this quad\n    vec4 quadSide = uProjectionMatrix * lookAtMatrix * vec4(iRadius, 0.0, 0.0, 1.0);\n    vec2 screenQuadSide = quadSide.xy / quadSide.w;\n\n    // compute the pixel radius of this node for a size of 1 in world coordinates\n    float pixelRadius = max(1.0, length((screenQuadSide - screenQuadCenter) * uViewportSize * 0.5));\n\n    // calculate the desired pixel radius for the size mode\n    float desiredPixelRadius = (uPixelSizing ? iRadius : pixelRadius);\n\n    // calculate the pixel radius multiplier needed to acomplish the desired pixel radius\n    float pixelRadiusMult = desiredPixelRadius / pixelRadius;\n\n    // calculate the render matrix\n    mat4 renderMatrix = uBillboard ? uProjectionMatrix * lookAtMatrix : uProjectionMatrix * modelMatrix;\n\n    // compute the vertex position and its screen position\n    vec4 worldVertex = renderMatrix * vec4(aVertex * iRadius * pixelRadiusMult, 1.0);\n\n    // send the render color to the fragment shader\n    fColor = uPicking ? vec4(iPickingColor) / 255.0 : valueForIndex(uColorPalette, int(iColor));\n    // send the normalized length of a single pixel to the fragment shader\n    fPixelLength = 1.0 / desiredPixelRadius;\n    // send the normalized distance from the center to the fragment shader\n    vFromCenter = aVertex.xy;\n\n    // set the render vertex location\n    gl_Position = worldVertex;\n}\n';

// src/graph/nodes/circle/Circle.fs.glsl
var Circle_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\n// from https://en.wikipedia.org/wiki/SRGB#The_reverse_transformation\nfloat luminance_x(float x) {\n    return x <= 0.04045 ? x / 12.92 : pow((x + 0.055) / 1.055, 2.4);\n}\nfloat color_l(float l) {\n    return min(1.0, max(0.0, l <= 0.0031308 ? l * 12.92 : pow(l * 1.055, 1.0 / 2.4) - 0.055));\n}\n\n// from https://en.wikipedia.org/wiki/Relative_luminance\nfloat rgb2luminance(vec3 color) {\n    // relative luminance\n    // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    float r = luminance_x(color.r);\n    float g = luminance_x(color.g);\n    float b = luminance_x(color.b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n}\n\nvec3 setLuminance(vec3 color, float luminance) {\n    float r = luminance_x(color.r) * 0.2126;\n    float g = luminance_x(color.g) * 0.7152;\n    float b = luminance_x(color.b) * 0.0722;\n    float colorLuminance = r + g + b;\n\n    float tr = luminance * (r / colorLuminance);\n    float tg = luminance * (g / colorLuminance);\n    float tb = luminance * (b / colorLuminance);\n\n    float rr = color_l(tr / 0.2126);\n    float rg = color_l(tg / 0.7152);\n    float rb = color_l(tb / 0.0722);\n\n    return vec3(rr, rg, rb );\n}\n\n// https://www.w3.org/TR/WCAG20/#contrast-ratiodef\n// (L1 + 0.05) / (L2 + 0.05), where\n// - L1 is the relative luminance of the lighter of the colors, and\n// - L2 is the relative luminance of the darker of the colors.\nfloat findDarker(float luminance, float contrast) {\n    return (contrast * luminance) + (0.05 * contrast) - 0.05;\n}\nfloat findLighter(float luminance, float contrast) {\n    return (luminance + 0.05 - (0.05 * contrast)) / contrast;\n}\n\nvec3 contrastingColor(vec3 color, float contrast) {\n    float luminance = rgb2luminance(color);\n    float darker = findDarker(luminance, contrast);\n    float lighter = findLighter(luminance, contrast);\n\n    float targetLuminance;\n    if (darker < 0.0 || darker > 1.0) {\n        targetLuminance = lighter;\n    } else if (lighter < 0.0 || lighter > 1.0) {\n        targetLuminance = darker;\n    } else {\n        targetLuminance = abs(luminance - lighter) < abs(darker - luminance) ? lighter : darker;\n    }\n\n    return setLuminance(color, targetLuminance);\n}\n\nvec3 desaturateColor(vec3 color, float amount) {\n    float l = rgb2luminance(color);\n    vec3 gray = vec3(l, l, l);\n    return mix(color, gray, amount);\n}\n\nuniform vec4 uClearColor;\nuniform float uDesaturate;\nuniform float uBrightness;\nuniform float uFade;\nuniform float uAlpha;\n\nvec4 outputColor(vec4 color) {\n    // desaturate => fade => alpha\n    vec3 ret = mix(color.rgb, vec3(uBrightness + 1.0 / 2.0), abs(uBrightness));\n    ret = vec3(desaturateColor(ret, uDesaturate));\n    ret = mix(ret, uClearColor.rgb, uFade);\n    return vec4(ret, color.a * uAlpha);\n}\n\n#define MODE_DRAFT 0u\n#define MODE_MEDIUM 1u\n#define MODE_HIGH 2u\n#define MODE_HIGH_PASS_1 3u\n#define MODE_HIGH_PASS_2 4u\n#define MODE_PICKING 5u\n\n// most of these come from this excellent post:\n// https://iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n\nfloat opRound(in float d, in float r) {\n    return d - r;\n}\n\nfloat opOnion(in float d, in float r) {\n    return abs(d) - r;\n}\n\nfloat sdCircle(in vec2 p, in float r ) {\n    return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(in vec2 p, in float r) {\n    const float k = sqrt(3.0);\n    p.x = abs(p.x) - r;\n    p.y = p.y + (r) / k;\n    if (p.x + k * p.y > 0.0) {\n        p = vec2(p.x-k*p.y,-k*p.x-p.y) / 2.0;\n    }\n    p.x -= clamp(p.x, -2.0 * r, 0.0);\n    return -length(p) * sign(p.y);\n}\n\nfloat sdPentagon(in vec2 p, in float r) {\n    const vec3 k = vec3(0.809016994, 0.587785252, 0.726542528);\n    p.y = -(p.y) * 1.25;\n    p.x = abs(p.x) * 1.25;\n    p -= 2.0 * min(dot(vec2(-k.x, k.y), p), 0.0) * vec2(-k.x, k.y);\n    p -= 2.0 * min(dot(vec2(k.x, k.y), p), 0.0) * vec2(k.x, k.y);\n    p -= vec2(clamp(p.x, -r*k.z, r*k.z), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdOctagon(in vec2 p, in float r) {\n    // pi/8: cos, sin, tan.\n    const vec3 k = vec3(\n        -0.9238795325,   // sqrt(2+sqrt(2))/2\n        0.3826834323,   // sqrt(2-sqrt(2))/2\n        0.4142135623\n    ); // sqrt(2)-1\n    // reflections\n    p = abs(p) * 1.1;\n    p -= 2.0 * min(dot(vec2(k.x,k.y), p), 0.0) * vec2(k.x,k.y);\n    p -= 2.0 * min(dot(vec2(-k.x,k.y), p), 0.0) * vec2(-k.x,k.y);\n    // Polygon side.\n    p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdStar(in vec2 p, in float r, in uint n, in float m) { // m=[2,n]\n    // these 4 lines can be precomputed for a given shape\n    float an = 3.141593 / float(n);\n    float en = 3.141593 / m;\n    vec2  acs = vec2(cos(an), sin(an));\n    vec2  ecs = vec2(cos(en), sin(en)); // ecs=vec2(0,1) and simplify, for regular polygon,\n\n    // reduce to first sector\n    float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n    p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n    // line sdf\n    p -= r * acs;\n    p += ecs * clamp(-dot(p, ecs), 0.0, r * acs.y / ecs.y);\n    return length(p) * sign(p.x);\n}\n\nfloat sdCross(in vec2 p, in float w, in float r) {\n    p = abs(p);\n    return length(p - min(p.x + p.y, w) * 0.5) - r;\n}\n\n// TODO: Precompute this, we always pass the same parameters tot his function (v, vec2(1.0, 0.3), 0.0)\nfloat sdPlus( in vec2 p, in vec2 b, float r ) {\n    p = abs(p);\n    p = (p.y > p.x) ? p.yx : p.xy;\n\n    vec2  q = p - b;\n    float k = max(q.y, q.x);\n    vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);\n\n    return sign(k)*length(max(w, 0.0)) + r;\n}\n\nfloat sdBox( in vec2 p, in vec2 b ) {\n    vec2 d = abs(p) - b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nuniform float uPixelRatio;\nuniform uint uRenderMode;\nuniform float uOutline;\n\nflat in vec4 fColor;\nflat in float fPixelLength;\nin vec2 vFromCenter;\n\nout vec4 fragColor;\n\nvoid main() {\n    float antialias = fPixelLength * 1.5;\n    float sd = sdCircle(vFromCenter, 1.0);\n    float outline = opOnion(sd, min(0.15, fPixelLength * uOutline * uPixelRatio));\n    float modeDistance = uRenderMode == MODE_HIGH_PASS_1 ? -antialias : -antialias * 0.5;\n    float distance = uRenderMode == MODE_HIGH_PASS_2 ? 0.0 : modeDistance;\n\n    if (sd > distance) {\n        discard;\n    }\n\n    vec3 color = fColor.rgb * (1.0 - 0.25 * smoothstep(antialias, 0.0, outline));\n\n    if (uRenderMode == MODE_HIGH_PASS_2) {\n        if (sd < -antialias) {\n            discard;\n        }\n        fragColor = outputColor(vec4(color, smoothstep(0.0, antialias, abs(sd))));\n    } else {\n        fragColor = outputColor(vec4(color, 1.0));\n    }\n}\n";

// src/graph/nodes/circle/Circle.data.vs.glsl
var Circle_data_vs_default = "#version 300 es\n\nlayout(location=0) in uint aPositionIndex;\nlayout(location=1) in uint aColor;\nlayout(location=2) in float aRadius; // optional atthe end\n\nuniform sampler2D uGraphPoints;\nuniform bool uUsePointRadius;\n\nflat out uint fPoint;\nflat out float fRadius;\nflat out uint fColor;\n\nprecision lowp usampler2D;\n#define GLSLIFY 1\n\nvec4 valueForIndex(sampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0);\n}\n\nuvec4 uvalueForIndex(usampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0);\n}\n\nuint uivalueForIndex(usampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0)[0];\n}\n\nvoid main() {\n    vec4 value = valueForIndex(uGraphPoints, int(aPositionIndex));\n    if (uUsePointRadius) {\n        fRadius = value.w;\n    } else {\n        fRadius = aRadius;\n    }\n\n    fPoint = aPositionIndex;\n    fColor = aColor;\n}\n";

// src/graph/nodes/circle/Circle.picking.fs.glsl
var Circle_picking_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\n// most of these come from this excellent post:\n// https://iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n\nfloat opRound(in float d, in float r) {\n    return d - r;\n}\n\nfloat opOnion(in float d, in float r) {\n    return abs(d) - r;\n}\n\nfloat sdCircle(in vec2 p, in float r ) {\n    return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(in vec2 p, in float r) {\n    const float k = sqrt(3.0);\n    p.x = abs(p.x) - r;\n    p.y = p.y + (r) / k;\n    if (p.x + k * p.y > 0.0) {\n        p = vec2(p.x-k*p.y,-k*p.x-p.y) / 2.0;\n    }\n    p.x -= clamp(p.x, -2.0 * r, 0.0);\n    return -length(p) * sign(p.y);\n}\n\nfloat sdPentagon(in vec2 p, in float r) {\n    const vec3 k = vec3(0.809016994, 0.587785252, 0.726542528);\n    p.y = -(p.y) * 1.25;\n    p.x = abs(p.x) * 1.25;\n    p -= 2.0 * min(dot(vec2(-k.x, k.y), p), 0.0) * vec2(-k.x, k.y);\n    p -= 2.0 * min(dot(vec2(k.x, k.y), p), 0.0) * vec2(k.x, k.y);\n    p -= vec2(clamp(p.x, -r*k.z, r*k.z), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdOctagon(in vec2 p, in float r) {\n    // pi/8: cos, sin, tan.\n    const vec3 k = vec3(\n        -0.9238795325,   // sqrt(2+sqrt(2))/2\n        0.3826834323,   // sqrt(2-sqrt(2))/2\n        0.4142135623\n    ); // sqrt(2)-1\n    // reflections\n    p = abs(p) * 1.1;\n    p -= 2.0 * min(dot(vec2(k.x,k.y), p), 0.0) * vec2(k.x,k.y);\n    p -= 2.0 * min(dot(vec2(-k.x,k.y), p), 0.0) * vec2(-k.x,k.y);\n    // Polygon side.\n    p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdStar(in vec2 p, in float r, in uint n, in float m) { // m=[2,n]\n    // these 4 lines can be precomputed for a given shape\n    float an = 3.141593 / float(n);\n    float en = 3.141593 / m;\n    vec2  acs = vec2(cos(an), sin(an));\n    vec2  ecs = vec2(cos(en), sin(en)); // ecs=vec2(0,1) and simplify, for regular polygon,\n\n    // reduce to first sector\n    float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n    p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n    // line sdf\n    p -= r * acs;\n    p += ecs * clamp(-dot(p, ecs), 0.0, r * acs.y / ecs.y);\n    return length(p) * sign(p.x);\n}\n\nfloat sdCross(in vec2 p, in float w, in float r) {\n    p = abs(p);\n    return length(p - min(p.x + p.y, w) * 0.5) - r;\n}\n\n// TODO: Precompute this, we always pass the same parameters tot his function (v, vec2(1.0, 0.3), 0.0)\nfloat sdPlus( in vec2 p, in vec2 b, float r ) {\n    p = abs(p);\n    p = (p.y > p.x) ? p.yx : p.xy;\n\n    vec2  q = p - b;\n    float k = max(q.y, q.x);\n    vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);\n\n    return sign(k)*length(max(w, 0.0)) + r;\n}\n\nfloat sdBox( in vec2 p, in vec2 b ) {\n    vec2 d = abs(p) - b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nflat in vec4 fColor;\nflat in float fPixelLength;\nin vec2 vFromCenter;\n\nout vec4 fragColor;\n\nvoid main() {\n    float sd = sdCircle(vFromCenter, 1.0);\n    if (sd > 0.0) {\n        discard;\n    }\n    fragColor = fColor;\n}\n";

// src/graph/LayerRenderable.ts
var PointsReaderEmitter = EventEmitter.mixin(PointsReader);
var LayerRenderable = class extends PointsReaderEmitter {
  constructor(...args) {
    super(...args);
    this.enabled = true;
    this.nearDepth = 0;
    this.farDepth = 1;
    this.blendMode = 1 /* NORMAL */;
  }
  static get defaultMappings() {
    return void 0;
  }
  get alpha() {
    return this.localUniforms.uAlpha;
  }
  set alpha(value) {
    this.localUniforms.uAlpha = value;
  }
  get fade() {
    return this.localUniforms.uFade;
  }
  set fade(value) {
    this.localUniforms.uFade = value;
  }
  get desaturate() {
    return this.localUniforms.uDesaturate;
  }
  set desaturate(value) {
    this.localUniforms.uDesaturate = value;
  }
  get brightness() {
    return this.localUniforms.uBrightness;
  }
  set brightness(value) {
    this.localUniforms.uBrightness = value;
  }
  get opaque() {
    return this.alpha >= 1 || this.blendMode === 0 /* NONE */;
  }
  initialize(context, points2, data, mappings2, pickingManager) {
    this.pickingManager = pickingManager;
    this.picking = true;
    this.localUniforms = Object.assign({}, this.localUniforms, {
      uAlpha: 1,
      uFade: 0,
      uDesaturate: 0,
      uBrightness: 0
    });
    super.initialize(context, points2, data, mappings2);
  }
  configureRenderContext(context, renderMode) {
    context.depthRange(this.nearDepth, this.farDepth);
    switch (renderMode) {
      case 5 /* PICKING */:
        context.depthMask(false);
        context.disable(PicoGL.BLEND);
        break;
      case 4 /* HIGH_PASS_2 */:
        context.depthMask(false);
        context.enable(PicoGL.BLEND);
        if (this.blendMode === 2 /* ADDITIVE */) {
          context.blendFuncSeparate(PicoGL.SRC_ALPHA, PicoGL.ONE, PicoGL.ONE, PicoGL.ONE);
        } else {
          context.blendFuncSeparate(PicoGL.SRC_ALPHA, PicoGL.ONE_MINUS_SRC_ALPHA, PicoGL.ONE, PicoGL.ONE);
        }
        break;
      default:
        if (this.opaque) {
          context.disable(PicoGL.BLEND);
          context.depthMask(true);
        } else {
          context.enable(PicoGL.BLEND);
          context.depthMask(false);
          if (this.blendMode === 2 /* ADDITIVE */) {
            context.blendFuncSeparate(PicoGL.SRC_ALPHA, PicoGL.ONE, PicoGL.ONE, PicoGL.ONE);
          } else {
            context.blendFuncSeparate(PicoGL.SRC_ALPHA, PicoGL.ONE_MINUS_SRC_ALPHA, PicoGL.ONE, PicoGL.ONE);
          }
        }
        break;
    }
  }
};

// src/graph/nodes/Nodes.ts
var kBasicNodeMappings = {
  id: (entry, i4) => "id" in entry ? entry.id : i4,
  point: (entry, i4) => "point" in entry ? entry.point : i4,
  color: (entry) => "color" in entry ? entry.color : 0,
  texture: (entry) => "texture" in entry ? entry.texture : 0,
  radius: null
};
var kBasicNodeDataTypes = {
  point: picogl_default.UNSIGNED_INT,
  color: picogl_default.UNSIGNED_INT,
  radius: picogl_default.FLOAT
};
var Nodes = class extends LayerRenderable {
  static get defaultMappings() {
    return kBasicNodeMappings;
  }
  get pixelSizing() {
    return this.localUniforms.uPixelSizing;
  }
  set pixelSizing(value) {
    this.localUniforms.uPixelSizing = value;
  }
  get billboard() {
    return this.localUniforms.uBillboard;
  }
  set billboard(value) {
    this.localUniforms.uBillboard = value;
  }
  get outline() {
    return this.localUniforms.uOutline;
  }
  set outline(value) {
    this.localUniforms.uOutline = value;
  }
  initialize(...args) {
    super.initialize(...args);
    this.localUniforms = Object.assign({}, this.localUniforms, {
      uGraphPoints: this.dataTexture,
      uPixelSizing: false,
      uBillboard: true,
      uOutline: 6
    });
  }
  computeMappings(mappings2) {
    const nodesMappings = Object.assign({}, kBasicNodeMappings, mappings2);
    const pointMapping = nodesMappings.point;
    nodesMappings.point = (entry, i4) => {
      return this.points.getPointIndex(pointMapping(entry, i4));
    };
    return nodesMappings;
  }
  ingestData(context, data, mappings2) {
    this.map = /* @__PURE__ */ new Map();
    this.idArray = [];
    super.ingestData(context, data, mappings2);
  }
  packDataCB() {
    return (i4, entry) => {
      this.map.set(entry.id, entry.point);
      this.idArray.push(entry.id);
    };
  }
  getEntryPointID(id) {
    return this.map.get(id);
  }
};

// src/UX/picking/PickingManager.ts
var kEvents3 = {
  hoverOn: Symbol("grafer_hover_on"),
  hoverOff: Symbol("grafer_hover_off"),
  click: Symbol("grafer_click"),
  emptyClick: Symbol("grafer_empty_click")
};
Object.freeze(kEvents3);
var PickingManager = class extends EventEmitter.mixin(UXModule) {
  constructor(context, mouseHandler, enabled = true) {
    super();
    this._debugRender = false;
    this.boundMouseHandler = this.handleMouse.bind(this);
    this.colorBuffer = new ArrayBuffer(4);
    this.colorBufferUint8 = new Uint8Array(this.colorBuffer);
    this.colorBufferView = new DataView(this.colorBuffer);
    this.colorHoverID = 0;
    this._offscreenBuffer = new OffscreenBuffer(context);
    this.mouseHandler = mouseHandler;
    this.availableIndices = [{
      start: 0,
      end: 4026531839
    }];
    this.enabled = enabled;
  }
  static get events() {
    return kEvents3;
  }
  get offscreenBuffer() {
    return this._offscreenBuffer;
  }
  get debugRender() {
    return this._debugRender;
  }
  set debugRender(value) {
    this._debugRender = value;
  }
  on(type, callback) {
    super.on(type, callback);
  }
  off(type, callback) {
    super.off(type, callback);
  }
  allocatePickingColors(count) {
    const colors2 = new Uint8Array(count * 4);
    const ranges = [];
    const map = /* @__PURE__ */ new Map();
    let offset = 0;
    let left = count;
    for (let i4 = 0, n5 = this.availableIndices.length; i4 < n5 && left > 0; ++i4) {
      const availableRange = this.availableIndices[i4];
      const rangeLength = availableRange.end - availableRange.start;
      if (rangeLength > left) {
        const range = { start: availableRange.start, end: availableRange.start + left };
        offset = this.pickingColorsForIndices(colors2, offset, range);
        this.mapPickingColorIDs(map, count - left, range);
        ranges.push(range);
        availableRange.start += left;
        left = 0;
      } else {
        offset = this.pickingColorsForIndices(colors2, offset, availableRange);
        this.mapPickingColorIDs(map, count - left, availableRange);
        ranges.push(availableRange);
        left -= rangeLength;
        this.availableIndices.splice(i4--, 1);
      }
    }
    return {
      colors: colors2,
      ranges,
      map
    };
  }
  deallocatePickingColors(colors2) {
    for (let i4 = 0, n5 = colors2.ranges.length; i4 < n5; ++i4) {
      this.deallocatePickingRange(colors2.ranges[i4]);
    }
    colors2.colors = new Uint8Array([]);
    colors2.ranges.length = 0;
    colors2.map.clear();
  }
  hookEvents() {
    this.mouseHandler.on(MouseHandler.events.move, this.boundMouseHandler);
    this.mouseHandler.on(MouseHandler.events.click, this.boundMouseHandler);
  }
  unhookEvents() {
    this.mouseHandler.off(MouseHandler.events.move, this.boundMouseHandler);
    this.mouseHandler.off(MouseHandler.events.click, this.boundMouseHandler);
  }
  handleMouse(event, state) {
    const glCoords = state.glCoords;
    this._offscreenBuffer.readPixel(glCoords[0], glCoords[1], this.colorBufferUint8);
    const colorID = this.colorBufferView.getUint32(0);
    switch (event) {
      case MouseHandler.events.move:
        if (colorID !== this.colorHoverID) {
          if (this.colorHoverID !== 0) {
            this.emit(kEvents3.hoverOff, this.colorHoverID >> 1);
          }
          this.colorHoverID = colorID;
          if (this.colorHoverID !== 0) {
            this.emit(kEvents3.hoverOn, this.colorHoverID >> 1);
          }
        }
        break;
      case MouseHandler.events.click:
        if (colorID !== 0) {
          this.emit(kEvents3.click, colorID >> 1);
        } else {
          this.emit(kEvents3.emptyClick);
        }
        break;
    }
  }
  deallocatePickingRange(range) {
    for (let i4 = 0, n5 = this.availableIndices.length; i4 < n5; ++i4) {
      const availableRange = this.availableIndices[i4];
      if (availableRange.start > range.start) {
        if (availableRange.start === range.end) {
          availableRange.start = range.start;
        } else {
          this.availableIndices.splice(i4, 0, {
            start: range.start,
            end: range.end
          });
        }
        break;
      }
    }
  }
  mapPickingColorIDs(out2, idStart, range) {
    for (let i4 = 0, n5 = range.end - range.start; i4 < n5; ++i4) {
      out2.set(range.start + i4, idStart + i4);
    }
  }
  pickingColorsForIndices(out2, offset, range) {
    for (let i4 = range.start; i4 < range.end; ++i4) {
      const color = this.pickingColorForNumber(i4);
      out2[offset++] = color[0];
      out2[offset++] = color[1];
      out2[offset++] = color[2];
      out2[offset++] = color[3];
    }
    return offset;
  }
  pickingColorForNumber(num) {
    const pickingNumber = num << 1 | 1;
    const buffer2 = new ArrayBuffer(4);
    const view = new DataView(buffer2);
    view.setUint32(0, pickingNumber);
    return new Uint8Array(buffer2);
  }
};

// src/graph/nodes/circle/Circle.ts
var kGLCircleNodeTypes = {
  position: PicoGL.UNSIGNED_INT,
  radius: PicoGL.FLOAT,
  color: PicoGL.UNSIGNED_INT
};
var Circle = class extends Nodes {
  constructor(...args) {
    super(...args);
  }
  initialize(context, points2, data, mappings2, pickingManager) {
    super.initialize(context, points2, data, mappings2, pickingManager);
    this.verticesVBO = context.createVertexBuffer(PicoGL.FLOAT, 2, new Float32Array([
      -1,
      -1,
      1,
      -1,
      -1,
      1,
      1,
      1
    ]));
    this.pickingHandler = this.handlePickingEvent.bind(this);
    this.pickingColors = this.pickingManager.allocatePickingColors(data.length);
    this.pickingVBO = context.createVertexBuffer(PicoGL.UNSIGNED_BYTE, 4, this.pickingColors.colors);
    this.nodesVAO = context.createVertexArray().vertexAttributeBuffer(0, this.verticesVBO);
    this.configureTargetVAO(this.nodesVAO);
    this.nodesVAO.instanceAttributeBuffer(4, this.pickingVBO);
    const shaders = this.getDrawShaders();
    this.program = context.createProgram(shaders.vs, shaders.fs);
    this.drawCall = context.createDrawCall(this.program, this.nodesVAO).primitive(PicoGL.TRIANGLE_STRIP);
    const pickingShaders = this.getPickingShaders();
    this.pickingProgram = context.createProgram(pickingShaders.vs, pickingShaders.fs);
    this.pickingDrawCall = context.createDrawCall(this.pickingProgram, this.nodesVAO).primitive(PicoGL.TRIANGLE_STRIP);
    const computedMappings = this.computeMappings(mappings2);
    this.usePointRadius = computedMappings.radius === null;
    this.compute(context, {
      uGraphPoints: this.dataTexture,
      uUsePointRadius: this.usePointRadius
    });
    this.pickingManager.on(PickingManager.events.hoverOn, this.pickingHandler);
    this.pickingManager.on(PickingManager.events.hoverOff, this.pickingHandler);
    this.pickingManager.on(PickingManager.events.click, this.pickingHandler);
  }
  destroy() {
  }
  render(context, mode, uniforms) {
    this.configureRenderContext(context, mode);
    switch (mode) {
      case 5 /* PICKING */:
        if (this.picking) {
          setDrawCallUniforms(this.pickingDrawCall, uniforms);
          setDrawCallUniforms(this.pickingDrawCall, this.localUniforms);
          this.pickingDrawCall.uniform("uPicking", true);
          this.pickingDrawCall.draw();
        }
        break;
      case 4 /* HIGH_PASS_2 */:
        context.depthMask(false);
      default:
        setDrawCallUniforms(this.drawCall, uniforms);
        setDrawCallUniforms(this.drawCall, this.localUniforms);
        this.drawCall.uniform("uPicking", false);
        this.drawCall.draw();
        break;
    }
  }
  getDrawShaders() {
    return {
      vs: Circle_vs_default,
      fs: Circle_fs_default
    };
  }
  getPickingShaders() {
    return {
      vs: Circle_vs_default,
      fs: Circle_picking_fs_default
    };
  }
  getGLSourceTypes() {
    return kBasicNodeDataTypes;
  }
  getGLTargetTypes() {
    return kGLCircleNodeTypes;
  }
  getDataShader() {
    return {
      vs: Circle_data_vs_default,
      varyings: ["fPoint", "fRadius", "fColor"]
    };
  }
  handlePickingEvent(event, colorID) {
    if (this.picking && this.pickingColors.map.has(colorID)) {
      const id = this.idArray[this.pickingColors.map.get(colorID)];
      this.emit(event, id);
    }
  }
};

// src/graph/nodes/ring/Ring.fs.glsl
var Ring_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\n// from https://en.wikipedia.org/wiki/SRGB#The_reverse_transformation\nfloat luminance_x(float x) {\n    return x <= 0.04045 ? x / 12.92 : pow((x + 0.055) / 1.055, 2.4);\n}\nfloat color_l(float l) {\n    return min(1.0, max(0.0, l <= 0.0031308 ? l * 12.92 : pow(l * 1.055, 1.0 / 2.4) - 0.055));\n}\n\n// from https://en.wikipedia.org/wiki/Relative_luminance\nfloat rgb2luminance(vec3 color) {\n    // relative luminance\n    // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    float r = luminance_x(color.r);\n    float g = luminance_x(color.g);\n    float b = luminance_x(color.b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n}\n\nvec3 setLuminance(vec3 color, float luminance) {\n    float r = luminance_x(color.r) * 0.2126;\n    float g = luminance_x(color.g) * 0.7152;\n    float b = luminance_x(color.b) * 0.0722;\n    float colorLuminance = r + g + b;\n\n    float tr = luminance * (r / colorLuminance);\n    float tg = luminance * (g / colorLuminance);\n    float tb = luminance * (b / colorLuminance);\n\n    float rr = color_l(tr / 0.2126);\n    float rg = color_l(tg / 0.7152);\n    float rb = color_l(tb / 0.0722);\n\n    return vec3(rr, rg, rb );\n}\n\n// https://www.w3.org/TR/WCAG20/#contrast-ratiodef\n// (L1 + 0.05) / (L2 + 0.05), where\n// - L1 is the relative luminance of the lighter of the colors, and\n// - L2 is the relative luminance of the darker of the colors.\nfloat findDarker(float luminance, float contrast) {\n    return (contrast * luminance) + (0.05 * contrast) - 0.05;\n}\nfloat findLighter(float luminance, float contrast) {\n    return (luminance + 0.05 - (0.05 * contrast)) / contrast;\n}\n\nvec3 contrastingColor(vec3 color, float contrast) {\n    float luminance = rgb2luminance(color);\n    float darker = findDarker(luminance, contrast);\n    float lighter = findLighter(luminance, contrast);\n\n    float targetLuminance;\n    if (darker < 0.0 || darker > 1.0) {\n        targetLuminance = lighter;\n    } else if (lighter < 0.0 || lighter > 1.0) {\n        targetLuminance = darker;\n    } else {\n        targetLuminance = abs(luminance - lighter) < abs(darker - luminance) ? lighter : darker;\n    }\n\n    return setLuminance(color, targetLuminance);\n}\n\nvec3 desaturateColor(vec3 color, float amount) {\n    float l = rgb2luminance(color);\n    vec3 gray = vec3(l, l, l);\n    return mix(color, gray, amount);\n}\n\nuniform vec4 uClearColor;\nuniform float uDesaturate;\nuniform float uBrightness;\nuniform float uFade;\nuniform float uAlpha;\n\nvec4 outputColor(vec4 color) {\n    // desaturate => fade => alpha\n    vec3 ret = mix(color.rgb, vec3(uBrightness + 1.0 / 2.0), abs(uBrightness));\n    ret = vec3(desaturateColor(ret, uDesaturate));\n    ret = mix(ret, uClearColor.rgb, uFade);\n    return vec4(ret, color.a * uAlpha);\n}\n\n#define MODE_DRAFT 0u\n#define MODE_MEDIUM 1u\n#define MODE_HIGH 2u\n#define MODE_HIGH_PASS_1 3u\n#define MODE_HIGH_PASS_2 4u\n#define MODE_PICKING 5u\n\n// most of these come from this excellent post:\n// https://iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n\nfloat opRound(in float d, in float r) {\n    return d - r;\n}\n\nfloat opOnion(in float d, in float r) {\n    return abs(d) - r;\n}\n\nfloat sdCircle(in vec2 p, in float r ) {\n    return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(in vec2 p, in float r) {\n    const float k = sqrt(3.0);\n    p.x = abs(p.x) - r;\n    p.y = p.y + (r) / k;\n    if (p.x + k * p.y > 0.0) {\n        p = vec2(p.x-k*p.y,-k*p.x-p.y) / 2.0;\n    }\n    p.x -= clamp(p.x, -2.0 * r, 0.0);\n    return -length(p) * sign(p.y);\n}\n\nfloat sdPentagon(in vec2 p, in float r) {\n    const vec3 k = vec3(0.809016994, 0.587785252, 0.726542528);\n    p.y = -(p.y) * 1.25;\n    p.x = abs(p.x) * 1.25;\n    p -= 2.0 * min(dot(vec2(-k.x, k.y), p), 0.0) * vec2(-k.x, k.y);\n    p -= 2.0 * min(dot(vec2(k.x, k.y), p), 0.0) * vec2(k.x, k.y);\n    p -= vec2(clamp(p.x, -r*k.z, r*k.z), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdOctagon(in vec2 p, in float r) {\n    // pi/8: cos, sin, tan.\n    const vec3 k = vec3(\n        -0.9238795325,   // sqrt(2+sqrt(2))/2\n        0.3826834323,   // sqrt(2-sqrt(2))/2\n        0.4142135623\n    ); // sqrt(2)-1\n    // reflections\n    p = abs(p) * 1.1;\n    p -= 2.0 * min(dot(vec2(k.x,k.y), p), 0.0) * vec2(k.x,k.y);\n    p -= 2.0 * min(dot(vec2(-k.x,k.y), p), 0.0) * vec2(-k.x,k.y);\n    // Polygon side.\n    p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdStar(in vec2 p, in float r, in uint n, in float m) { // m=[2,n]\n    // these 4 lines can be precomputed for a given shape\n    float an = 3.141593 / float(n);\n    float en = 3.141593 / m;\n    vec2  acs = vec2(cos(an), sin(an));\n    vec2  ecs = vec2(cos(en), sin(en)); // ecs=vec2(0,1) and simplify, for regular polygon,\n\n    // reduce to first sector\n    float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n    p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n    // line sdf\n    p -= r * acs;\n    p += ecs * clamp(-dot(p, ecs), 0.0, r * acs.y / ecs.y);\n    return length(p) * sign(p.x);\n}\n\nfloat sdCross(in vec2 p, in float w, in float r) {\n    p = abs(p);\n    return length(p - min(p.x + p.y, w) * 0.5) - r;\n}\n\n// TODO: Precompute this, we always pass the same parameters tot his function (v, vec2(1.0, 0.3), 0.0)\nfloat sdPlus( in vec2 p, in vec2 b, float r ) {\n    p = abs(p);\n    p = (p.y > p.x) ? p.yx : p.xy;\n\n    vec2  q = p - b;\n    float k = max(q.y, q.x);\n    vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);\n\n    return sign(k)*length(max(w, 0.0)) + r;\n}\n\nfloat sdBox( in vec2 p, in vec2 b ) {\n    vec2 d = abs(p) - b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nuniform float uPixelRatio;\nuniform uint uRenderMode;\nuniform float uOutline;\n\nflat in vec4 fColor;\nflat in float fPixelLength;\nin vec2 vFromCenter;\n\nout vec4 fragColor;\n\nvoid main() {\n    float thickness = uOutline / 2.0;\n    float innerRadius = 1.0 - thickness;\n    float ring = opOnion(sdCircle(vFromCenter, innerRadius), thickness);\n    float antialias = fPixelLength * 1.5;\n\n    if (ring > 0.0) {\n        discard;\n    }\n\n    if (uRenderMode == MODE_HIGH_PASS_2) {\n        if (ring < -antialias) {\n            discard;\n        }\n        fragColor = outputColor(vec4(fColor.rgb, smoothstep(0.0, antialias, abs(ring))));\n    } else {\n        fragColor = outputColor(vec4(fColor.rgb, 1.0));\n    }\n}\n";

// src/graph/nodes/ring/Ring.ts
var Ring = class extends Circle {
  getDrawShaders() {
    const shaders = super.getDrawShaders();
    shaders.fs = Ring_fs_default;
    return shaders;
  }
};

// src/graph/nodes/triangle/Triangle.fs.glsl
var Triangle_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\n// from https://en.wikipedia.org/wiki/SRGB#The_reverse_transformation\nfloat luminance_x(float x) {\n    return x <= 0.04045 ? x / 12.92 : pow((x + 0.055) / 1.055, 2.4);\n}\nfloat color_l(float l) {\n    return min(1.0, max(0.0, l <= 0.0031308 ? l * 12.92 : pow(l * 1.055, 1.0 / 2.4) - 0.055));\n}\n\n// from https://en.wikipedia.org/wiki/Relative_luminance\nfloat rgb2luminance(vec3 color) {\n    // relative luminance\n    // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    float r = luminance_x(color.r);\n    float g = luminance_x(color.g);\n    float b = luminance_x(color.b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n}\n\nvec3 setLuminance(vec3 color, float luminance) {\n    float r = luminance_x(color.r) * 0.2126;\n    float g = luminance_x(color.g) * 0.7152;\n    float b = luminance_x(color.b) * 0.0722;\n    float colorLuminance = r + g + b;\n\n    float tr = luminance * (r / colorLuminance);\n    float tg = luminance * (g / colorLuminance);\n    float tb = luminance * (b / colorLuminance);\n\n    float rr = color_l(tr / 0.2126);\n    float rg = color_l(tg / 0.7152);\n    float rb = color_l(tb / 0.0722);\n\n    return vec3(rr, rg, rb );\n}\n\n// https://www.w3.org/TR/WCAG20/#contrast-ratiodef\n// (L1 + 0.05) / (L2 + 0.05), where\n// - L1 is the relative luminance of the lighter of the colors, and\n// - L2 is the relative luminance of the darker of the colors.\nfloat findDarker(float luminance, float contrast) {\n    return (contrast * luminance) + (0.05 * contrast) - 0.05;\n}\nfloat findLighter(float luminance, float contrast) {\n    return (luminance + 0.05 - (0.05 * contrast)) / contrast;\n}\n\nvec3 contrastingColor(vec3 color, float contrast) {\n    float luminance = rgb2luminance(color);\n    float darker = findDarker(luminance, contrast);\n    float lighter = findLighter(luminance, contrast);\n\n    float targetLuminance;\n    if (darker < 0.0 || darker > 1.0) {\n        targetLuminance = lighter;\n    } else if (lighter < 0.0 || lighter > 1.0) {\n        targetLuminance = darker;\n    } else {\n        targetLuminance = abs(luminance - lighter) < abs(darker - luminance) ? lighter : darker;\n    }\n\n    return setLuminance(color, targetLuminance);\n}\n\nvec3 desaturateColor(vec3 color, float amount) {\n    float l = rgb2luminance(color);\n    vec3 gray = vec3(l, l, l);\n    return mix(color, gray, amount);\n}\n\nuniform vec4 uClearColor;\nuniform float uDesaturate;\nuniform float uBrightness;\nuniform float uFade;\nuniform float uAlpha;\n\nvec4 outputColor(vec4 color) {\n    // desaturate => fade => alpha\n    vec3 ret = mix(color.rgb, vec3(uBrightness + 1.0 / 2.0), abs(uBrightness));\n    ret = vec3(desaturateColor(ret, uDesaturate));\n    ret = mix(ret, uClearColor.rgb, uFade);\n    return vec4(ret, color.a * uAlpha);\n}\n\n#define MODE_DRAFT 0u\n#define MODE_MEDIUM 1u\n#define MODE_HIGH 2u\n#define MODE_HIGH_PASS_1 3u\n#define MODE_HIGH_PASS_2 4u\n#define MODE_PICKING 5u\n\n// most of these come from this excellent post:\n// https://iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n\nfloat opRound(in float d, in float r) {\n    return d - r;\n}\n\nfloat opOnion(in float d, in float r) {\n    return abs(d) - r;\n}\n\nfloat sdCircle(in vec2 p, in float r ) {\n    return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(in vec2 p, in float r) {\n    const float k = sqrt(3.0);\n    p.x = abs(p.x) - r;\n    p.y = p.y + (r) / k;\n    if (p.x + k * p.y > 0.0) {\n        p = vec2(p.x-k*p.y,-k*p.x-p.y) / 2.0;\n    }\n    p.x -= clamp(p.x, -2.0 * r, 0.0);\n    return -length(p) * sign(p.y);\n}\n\nfloat sdPentagon(in vec2 p, in float r) {\n    const vec3 k = vec3(0.809016994, 0.587785252, 0.726542528);\n    p.y = -(p.y) * 1.25;\n    p.x = abs(p.x) * 1.25;\n    p -= 2.0 * min(dot(vec2(-k.x, k.y), p), 0.0) * vec2(-k.x, k.y);\n    p -= 2.0 * min(dot(vec2(k.x, k.y), p), 0.0) * vec2(k.x, k.y);\n    p -= vec2(clamp(p.x, -r*k.z, r*k.z), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdOctagon(in vec2 p, in float r) {\n    // pi/8: cos, sin, tan.\n    const vec3 k = vec3(\n        -0.9238795325,   // sqrt(2+sqrt(2))/2\n        0.3826834323,   // sqrt(2-sqrt(2))/2\n        0.4142135623\n    ); // sqrt(2)-1\n    // reflections\n    p = abs(p) * 1.1;\n    p -= 2.0 * min(dot(vec2(k.x,k.y), p), 0.0) * vec2(k.x,k.y);\n    p -= 2.0 * min(dot(vec2(-k.x,k.y), p), 0.0) * vec2(-k.x,k.y);\n    // Polygon side.\n    p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdStar(in vec2 p, in float r, in uint n, in float m) { // m=[2,n]\n    // these 4 lines can be precomputed for a given shape\n    float an = 3.141593 / float(n);\n    float en = 3.141593 / m;\n    vec2  acs = vec2(cos(an), sin(an));\n    vec2  ecs = vec2(cos(en), sin(en)); // ecs=vec2(0,1) and simplify, for regular polygon,\n\n    // reduce to first sector\n    float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n    p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n    // line sdf\n    p -= r * acs;\n    p += ecs * clamp(-dot(p, ecs), 0.0, r * acs.y / ecs.y);\n    return length(p) * sign(p.x);\n}\n\nfloat sdCross(in vec2 p, in float w, in float r) {\n    p = abs(p);\n    return length(p - min(p.x + p.y, w) * 0.5) - r;\n}\n\n// TODO: Precompute this, we always pass the same parameters tot his function (v, vec2(1.0, 0.3), 0.0)\nfloat sdPlus( in vec2 p, in vec2 b, float r ) {\n    p = abs(p);\n    p = (p.y > p.x) ? p.yx : p.xy;\n\n    vec2  q = p - b;\n    float k = max(q.y, q.x);\n    vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);\n\n    return sign(k)*length(max(w, 0.0)) + r;\n}\n\nfloat sdBox( in vec2 p, in vec2 b ) {\n    vec2 d = abs(p) - b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nuniform float uPixelRatio;\nuniform uint uRenderMode;\nuniform float uOutline;\n\nflat in vec4 fColor;\nflat in float fPixelLength;\nin vec2 vFromCenter;\n\nout vec4 fragColor;\n\nvoid main() {\n    float antialias = fPixelLength * 1.5;\n    float sd = sdEquilateralTriangle(vFromCenter, 0.85);\n    float outline = opOnion(sd, min(0.15, fPixelLength * uOutline * uPixelRatio));\n    float modeDistance = uRenderMode == MODE_HIGH_PASS_1 ? -antialias : -antialias * 0.5;\n    float distance = uRenderMode == MODE_HIGH_PASS_2 ? 0.0 : modeDistance;\n\n    if (sd > distance) {\n        discard;\n    }\n\n    vec3 color = fColor.rgb * (1.0 - 0.25 * smoothstep(antialias, 0.0, outline));\n\n    if (uRenderMode == MODE_HIGH_PASS_2) {\n        if (sd < -antialias) {\n            discard;\n        }\n        fragColor = outputColor(vec4(color, smoothstep(0.0, antialias, abs(sd))));\n    } else {\n        fragColor = outputColor(vec4(color, 1.0));\n    }\n}\n";

// src/graph/nodes/triangle/Triangle.picking.fs.glsl
var Triangle_picking_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\n// most of these come from this excellent post:\n// https://iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n\nfloat opRound(in float d, in float r) {\n    return d - r;\n}\n\nfloat opOnion(in float d, in float r) {\n    return abs(d) - r;\n}\n\nfloat sdCircle(in vec2 p, in float r ) {\n    return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(in vec2 p, in float r) {\n    const float k = sqrt(3.0);\n    p.x = abs(p.x) - r;\n    p.y = p.y + (r) / k;\n    if (p.x + k * p.y > 0.0) {\n        p = vec2(p.x-k*p.y,-k*p.x-p.y) / 2.0;\n    }\n    p.x -= clamp(p.x, -2.0 * r, 0.0);\n    return -length(p) * sign(p.y);\n}\n\nfloat sdPentagon(in vec2 p, in float r) {\n    const vec3 k = vec3(0.809016994, 0.587785252, 0.726542528);\n    p.y = -(p.y) * 1.25;\n    p.x = abs(p.x) * 1.25;\n    p -= 2.0 * min(dot(vec2(-k.x, k.y), p), 0.0) * vec2(-k.x, k.y);\n    p -= 2.0 * min(dot(vec2(k.x, k.y), p), 0.0) * vec2(k.x, k.y);\n    p -= vec2(clamp(p.x, -r*k.z, r*k.z), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdOctagon(in vec2 p, in float r) {\n    // pi/8: cos, sin, tan.\n    const vec3 k = vec3(\n        -0.9238795325,   // sqrt(2+sqrt(2))/2\n        0.3826834323,   // sqrt(2-sqrt(2))/2\n        0.4142135623\n    ); // sqrt(2)-1\n    // reflections\n    p = abs(p) * 1.1;\n    p -= 2.0 * min(dot(vec2(k.x,k.y), p), 0.0) * vec2(k.x,k.y);\n    p -= 2.0 * min(dot(vec2(-k.x,k.y), p), 0.0) * vec2(-k.x,k.y);\n    // Polygon side.\n    p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdStar(in vec2 p, in float r, in uint n, in float m) { // m=[2,n]\n    // these 4 lines can be precomputed for a given shape\n    float an = 3.141593 / float(n);\n    float en = 3.141593 / m;\n    vec2  acs = vec2(cos(an), sin(an));\n    vec2  ecs = vec2(cos(en), sin(en)); // ecs=vec2(0,1) and simplify, for regular polygon,\n\n    // reduce to first sector\n    float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n    p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n    // line sdf\n    p -= r * acs;\n    p += ecs * clamp(-dot(p, ecs), 0.0, r * acs.y / ecs.y);\n    return length(p) * sign(p.x);\n}\n\nfloat sdCross(in vec2 p, in float w, in float r) {\n    p = abs(p);\n    return length(p - min(p.x + p.y, w) * 0.5) - r;\n}\n\n// TODO: Precompute this, we always pass the same parameters tot his function (v, vec2(1.0, 0.3), 0.0)\nfloat sdPlus( in vec2 p, in vec2 b, float r ) {\n    p = abs(p);\n    p = (p.y > p.x) ? p.yx : p.xy;\n\n    vec2  q = p - b;\n    float k = max(q.y, q.x);\n    vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);\n\n    return sign(k)*length(max(w, 0.0)) + r;\n}\n\nfloat sdBox( in vec2 p, in vec2 b ) {\n    vec2 d = abs(p) - b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nflat in vec4 fColor;\nflat in float fPixelLength;\nin vec2 vFromCenter;\n\nout vec4 fragColor;\n\nvoid main() {\n    float sd = sdEquilateralTriangle(vFromCenter, 1.0);\n    if (sd > 0.0) {\n        discard;\n    }\n    fragColor = fColor;\n}\n";

// src/graph/nodes/triangle/Triangle.ts
var Triangle = class extends Circle {
  getDrawShaders() {
    const shaders = super.getDrawShaders();
    shaders.fs = Triangle_fs_default;
    return shaders;
  }
  getPickingShaders() {
    const shaders = super.getPickingShaders();
    shaders.fs = Triangle_picking_fs_default;
    return shaders;
  }
};

// src/graph/nodes/pentagon/Pentagon.fs.glsl
var Pentagon_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\n// from https://en.wikipedia.org/wiki/SRGB#The_reverse_transformation\nfloat luminance_x(float x) {\n    return x <= 0.04045 ? x / 12.92 : pow((x + 0.055) / 1.055, 2.4);\n}\nfloat color_l(float l) {\n    return min(1.0, max(0.0, l <= 0.0031308 ? l * 12.92 : pow(l * 1.055, 1.0 / 2.4) - 0.055));\n}\n\n// from https://en.wikipedia.org/wiki/Relative_luminance\nfloat rgb2luminance(vec3 color) {\n    // relative luminance\n    // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    float r = luminance_x(color.r);\n    float g = luminance_x(color.g);\n    float b = luminance_x(color.b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n}\n\nvec3 setLuminance(vec3 color, float luminance) {\n    float r = luminance_x(color.r) * 0.2126;\n    float g = luminance_x(color.g) * 0.7152;\n    float b = luminance_x(color.b) * 0.0722;\n    float colorLuminance = r + g + b;\n\n    float tr = luminance * (r / colorLuminance);\n    float tg = luminance * (g / colorLuminance);\n    float tb = luminance * (b / colorLuminance);\n\n    float rr = color_l(tr / 0.2126);\n    float rg = color_l(tg / 0.7152);\n    float rb = color_l(tb / 0.0722);\n\n    return vec3(rr, rg, rb );\n}\n\n// https://www.w3.org/TR/WCAG20/#contrast-ratiodef\n// (L1 + 0.05) / (L2 + 0.05), where\n// - L1 is the relative luminance of the lighter of the colors, and\n// - L2 is the relative luminance of the darker of the colors.\nfloat findDarker(float luminance, float contrast) {\n    return (contrast * luminance) + (0.05 * contrast) - 0.05;\n}\nfloat findLighter(float luminance, float contrast) {\n    return (luminance + 0.05 - (0.05 * contrast)) / contrast;\n}\n\nvec3 contrastingColor(vec3 color, float contrast) {\n    float luminance = rgb2luminance(color);\n    float darker = findDarker(luminance, contrast);\n    float lighter = findLighter(luminance, contrast);\n\n    float targetLuminance;\n    if (darker < 0.0 || darker > 1.0) {\n        targetLuminance = lighter;\n    } else if (lighter < 0.0 || lighter > 1.0) {\n        targetLuminance = darker;\n    } else {\n        targetLuminance = abs(luminance - lighter) < abs(darker - luminance) ? lighter : darker;\n    }\n\n    return setLuminance(color, targetLuminance);\n}\n\nvec3 desaturateColor(vec3 color, float amount) {\n    float l = rgb2luminance(color);\n    vec3 gray = vec3(l, l, l);\n    return mix(color, gray, amount);\n}\n\nuniform vec4 uClearColor;\nuniform float uDesaturate;\nuniform float uBrightness;\nuniform float uFade;\nuniform float uAlpha;\n\nvec4 outputColor(vec4 color) {\n    // desaturate => fade => alpha\n    vec3 ret = mix(color.rgb, vec3(uBrightness + 1.0 / 2.0), abs(uBrightness));\n    ret = vec3(desaturateColor(ret, uDesaturate));\n    ret = mix(ret, uClearColor.rgb, uFade);\n    return vec4(ret, color.a * uAlpha);\n}\n\n#define MODE_DRAFT 0u\n#define MODE_MEDIUM 1u\n#define MODE_HIGH 2u\n#define MODE_HIGH_PASS_1 3u\n#define MODE_HIGH_PASS_2 4u\n#define MODE_PICKING 5u\n\n// most of these come from this excellent post:\n// https://iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n\nfloat opRound(in float d, in float r) {\n    return d - r;\n}\n\nfloat opOnion(in float d, in float r) {\n    return abs(d) - r;\n}\n\nfloat sdCircle(in vec2 p, in float r ) {\n    return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(in vec2 p, in float r) {\n    const float k = sqrt(3.0);\n    p.x = abs(p.x) - r;\n    p.y = p.y + (r) / k;\n    if (p.x + k * p.y > 0.0) {\n        p = vec2(p.x-k*p.y,-k*p.x-p.y) / 2.0;\n    }\n    p.x -= clamp(p.x, -2.0 * r, 0.0);\n    return -length(p) * sign(p.y);\n}\n\nfloat sdPentagon(in vec2 p, in float r) {\n    const vec3 k = vec3(0.809016994, 0.587785252, 0.726542528);\n    p.y = -(p.y) * 1.25;\n    p.x = abs(p.x) * 1.25;\n    p -= 2.0 * min(dot(vec2(-k.x, k.y), p), 0.0) * vec2(-k.x, k.y);\n    p -= 2.0 * min(dot(vec2(k.x, k.y), p), 0.0) * vec2(k.x, k.y);\n    p -= vec2(clamp(p.x, -r*k.z, r*k.z), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdOctagon(in vec2 p, in float r) {\n    // pi/8: cos, sin, tan.\n    const vec3 k = vec3(\n        -0.9238795325,   // sqrt(2+sqrt(2))/2\n        0.3826834323,   // sqrt(2-sqrt(2))/2\n        0.4142135623\n    ); // sqrt(2)-1\n    // reflections\n    p = abs(p) * 1.1;\n    p -= 2.0 * min(dot(vec2(k.x,k.y), p), 0.0) * vec2(k.x,k.y);\n    p -= 2.0 * min(dot(vec2(-k.x,k.y), p), 0.0) * vec2(-k.x,k.y);\n    // Polygon side.\n    p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdStar(in vec2 p, in float r, in uint n, in float m) { // m=[2,n]\n    // these 4 lines can be precomputed for a given shape\n    float an = 3.141593 / float(n);\n    float en = 3.141593 / m;\n    vec2  acs = vec2(cos(an), sin(an));\n    vec2  ecs = vec2(cos(en), sin(en)); // ecs=vec2(0,1) and simplify, for regular polygon,\n\n    // reduce to first sector\n    float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n    p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n    // line sdf\n    p -= r * acs;\n    p += ecs * clamp(-dot(p, ecs), 0.0, r * acs.y / ecs.y);\n    return length(p) * sign(p.x);\n}\n\nfloat sdCross(in vec2 p, in float w, in float r) {\n    p = abs(p);\n    return length(p - min(p.x + p.y, w) * 0.5) - r;\n}\n\n// TODO: Precompute this, we always pass the same parameters tot his function (v, vec2(1.0, 0.3), 0.0)\nfloat sdPlus( in vec2 p, in vec2 b, float r ) {\n    p = abs(p);\n    p = (p.y > p.x) ? p.yx : p.xy;\n\n    vec2  q = p - b;\n    float k = max(q.y, q.x);\n    vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);\n\n    return sign(k)*length(max(w, 0.0)) + r;\n}\n\nfloat sdBox( in vec2 p, in vec2 b ) {\n    vec2 d = abs(p) - b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nuniform float uPixelRatio;\nuniform uint uRenderMode;\nuniform float uOutline;\n\nflat in vec4 fColor;\nflat in float fPixelLength;\nin vec2 vFromCenter;\n\nout vec4 fragColor;\n\nvoid main() {\n    float antialias = fPixelLength * 1.5;\n    float sd = sdPentagon(vFromCenter, 1.0);\n    float outline = opOnion(sd, min(0.15, fPixelLength * uOutline * uPixelRatio));\n    float modeDistance = uRenderMode == MODE_HIGH_PASS_1 ? -antialias : -antialias * 0.5;\n    float distance = uRenderMode == MODE_HIGH_PASS_2 ? 0.0 : modeDistance;\n\n    if (sd > distance) {\n        discard;\n    }\n\n    vec3 color = fColor.rgb * (1.0 - 0.25 * smoothstep(antialias, 0.0, outline));\n\n    if (uRenderMode == MODE_HIGH_PASS_2) {\n        if (sd < -antialias) {\n            discard;\n        }\n        fragColor = outputColor(vec4(color, smoothstep(0.0, antialias, abs(sd))));\n    } else {\n        fragColor = outputColor(vec4(color, 1.0));\n    }\n}\n";

// src/graph/nodes/pentagon/Pentagon.picking.fs.glsl
var Pentagon_picking_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\n// most of these come from this excellent post:\n// https://iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n\nfloat opRound(in float d, in float r) {\n    return d - r;\n}\n\nfloat opOnion(in float d, in float r) {\n    return abs(d) - r;\n}\n\nfloat sdCircle(in vec2 p, in float r ) {\n    return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(in vec2 p, in float r) {\n    const float k = sqrt(3.0);\n    p.x = abs(p.x) - r;\n    p.y = p.y + (r) / k;\n    if (p.x + k * p.y > 0.0) {\n        p = vec2(p.x-k*p.y,-k*p.x-p.y) / 2.0;\n    }\n    p.x -= clamp(p.x, -2.0 * r, 0.0);\n    return -length(p) * sign(p.y);\n}\n\nfloat sdPentagon(in vec2 p, in float r) {\n    const vec3 k = vec3(0.809016994, 0.587785252, 0.726542528);\n    p.y = -(p.y) * 1.25;\n    p.x = abs(p.x) * 1.25;\n    p -= 2.0 * min(dot(vec2(-k.x, k.y), p), 0.0) * vec2(-k.x, k.y);\n    p -= 2.0 * min(dot(vec2(k.x, k.y), p), 0.0) * vec2(k.x, k.y);\n    p -= vec2(clamp(p.x, -r*k.z, r*k.z), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdOctagon(in vec2 p, in float r) {\n    // pi/8: cos, sin, tan.\n    const vec3 k = vec3(\n        -0.9238795325,   // sqrt(2+sqrt(2))/2\n        0.3826834323,   // sqrt(2-sqrt(2))/2\n        0.4142135623\n    ); // sqrt(2)-1\n    // reflections\n    p = abs(p) * 1.1;\n    p -= 2.0 * min(dot(vec2(k.x,k.y), p), 0.0) * vec2(k.x,k.y);\n    p -= 2.0 * min(dot(vec2(-k.x,k.y), p), 0.0) * vec2(-k.x,k.y);\n    // Polygon side.\n    p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdStar(in vec2 p, in float r, in uint n, in float m) { // m=[2,n]\n    // these 4 lines can be precomputed for a given shape\n    float an = 3.141593 / float(n);\n    float en = 3.141593 / m;\n    vec2  acs = vec2(cos(an), sin(an));\n    vec2  ecs = vec2(cos(en), sin(en)); // ecs=vec2(0,1) and simplify, for regular polygon,\n\n    // reduce to first sector\n    float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n    p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n    // line sdf\n    p -= r * acs;\n    p += ecs * clamp(-dot(p, ecs), 0.0, r * acs.y / ecs.y);\n    return length(p) * sign(p.x);\n}\n\nfloat sdCross(in vec2 p, in float w, in float r) {\n    p = abs(p);\n    return length(p - min(p.x + p.y, w) * 0.5) - r;\n}\n\n// TODO: Precompute this, we always pass the same parameters tot his function (v, vec2(1.0, 0.3), 0.0)\nfloat sdPlus( in vec2 p, in vec2 b, float r ) {\n    p = abs(p);\n    p = (p.y > p.x) ? p.yx : p.xy;\n\n    vec2  q = p - b;\n    float k = max(q.y, q.x);\n    vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);\n\n    return sign(k)*length(max(w, 0.0)) + r;\n}\n\nfloat sdBox( in vec2 p, in vec2 b ) {\n    vec2 d = abs(p) - b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nflat in vec4 fColor;\nflat in float fPixelLength;\nin vec2 vFromCenter;\n\nout vec4 fragColor;\n\nvoid main() {\n    float sd = sdPentagon(vFromCenter, 1.0);\n    if (sd > 0.0) {\n        discard;\n    }\n    fragColor = fColor;\n}\n";

// src/graph/nodes/pentagon/Pentagon.ts
var Pentagon = class extends Circle {
  getDrawShaders() {
    const shaders = super.getDrawShaders();
    shaders.fs = Pentagon_fs_default;
    return shaders;
  }
  getPickingShaders() {
    const shaders = super.getPickingShaders();
    shaders.fs = Pentagon_picking_fs_default;
    return shaders;
  }
};

// src/graph/nodes/octagon/Octagon.fs.glsl
var Octagon_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\n// from https://en.wikipedia.org/wiki/SRGB#The_reverse_transformation\nfloat luminance_x(float x) {\n    return x <= 0.04045 ? x / 12.92 : pow((x + 0.055) / 1.055, 2.4);\n}\nfloat color_l(float l) {\n    return min(1.0, max(0.0, l <= 0.0031308 ? l * 12.92 : pow(l * 1.055, 1.0 / 2.4) - 0.055));\n}\n\n// from https://en.wikipedia.org/wiki/Relative_luminance\nfloat rgb2luminance(vec3 color) {\n    // relative luminance\n    // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    float r = luminance_x(color.r);\n    float g = luminance_x(color.g);\n    float b = luminance_x(color.b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n}\n\nvec3 setLuminance(vec3 color, float luminance) {\n    float r = luminance_x(color.r) * 0.2126;\n    float g = luminance_x(color.g) * 0.7152;\n    float b = luminance_x(color.b) * 0.0722;\n    float colorLuminance = r + g + b;\n\n    float tr = luminance * (r / colorLuminance);\n    float tg = luminance * (g / colorLuminance);\n    float tb = luminance * (b / colorLuminance);\n\n    float rr = color_l(tr / 0.2126);\n    float rg = color_l(tg / 0.7152);\n    float rb = color_l(tb / 0.0722);\n\n    return vec3(rr, rg, rb );\n}\n\n// https://www.w3.org/TR/WCAG20/#contrast-ratiodef\n// (L1 + 0.05) / (L2 + 0.05), where\n// - L1 is the relative luminance of the lighter of the colors, and\n// - L2 is the relative luminance of the darker of the colors.\nfloat findDarker(float luminance, float contrast) {\n    return (contrast * luminance) + (0.05 * contrast) - 0.05;\n}\nfloat findLighter(float luminance, float contrast) {\n    return (luminance + 0.05 - (0.05 * contrast)) / contrast;\n}\n\nvec3 contrastingColor(vec3 color, float contrast) {\n    float luminance = rgb2luminance(color);\n    float darker = findDarker(luminance, contrast);\n    float lighter = findLighter(luminance, contrast);\n\n    float targetLuminance;\n    if (darker < 0.0 || darker > 1.0) {\n        targetLuminance = lighter;\n    } else if (lighter < 0.0 || lighter > 1.0) {\n        targetLuminance = darker;\n    } else {\n        targetLuminance = abs(luminance - lighter) < abs(darker - luminance) ? lighter : darker;\n    }\n\n    return setLuminance(color, targetLuminance);\n}\n\nvec3 desaturateColor(vec3 color, float amount) {\n    float l = rgb2luminance(color);\n    vec3 gray = vec3(l, l, l);\n    return mix(color, gray, amount);\n}\n\nuniform vec4 uClearColor;\nuniform float uDesaturate;\nuniform float uBrightness;\nuniform float uFade;\nuniform float uAlpha;\n\nvec4 outputColor(vec4 color) {\n    // desaturate => fade => alpha\n    vec3 ret = mix(color.rgb, vec3(uBrightness + 1.0 / 2.0), abs(uBrightness));\n    ret = vec3(desaturateColor(ret, uDesaturate));\n    ret = mix(ret, uClearColor.rgb, uFade);\n    return vec4(ret, color.a * uAlpha);\n}\n\n#define MODE_DRAFT 0u\n#define MODE_MEDIUM 1u\n#define MODE_HIGH 2u\n#define MODE_HIGH_PASS_1 3u\n#define MODE_HIGH_PASS_2 4u\n#define MODE_PICKING 5u\n\n// most of these come from this excellent post:\n// https://iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n\nfloat opRound(in float d, in float r) {\n    return d - r;\n}\n\nfloat opOnion(in float d, in float r) {\n    return abs(d) - r;\n}\n\nfloat sdCircle(in vec2 p, in float r ) {\n    return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(in vec2 p, in float r) {\n    const float k = sqrt(3.0);\n    p.x = abs(p.x) - r;\n    p.y = p.y + (r) / k;\n    if (p.x + k * p.y > 0.0) {\n        p = vec2(p.x-k*p.y,-k*p.x-p.y) / 2.0;\n    }\n    p.x -= clamp(p.x, -2.0 * r, 0.0);\n    return -length(p) * sign(p.y);\n}\n\nfloat sdPentagon(in vec2 p, in float r) {\n    const vec3 k = vec3(0.809016994, 0.587785252, 0.726542528);\n    p.y = -(p.y) * 1.25;\n    p.x = abs(p.x) * 1.25;\n    p -= 2.0 * min(dot(vec2(-k.x, k.y), p), 0.0) * vec2(-k.x, k.y);\n    p -= 2.0 * min(dot(vec2(k.x, k.y), p), 0.0) * vec2(k.x, k.y);\n    p -= vec2(clamp(p.x, -r*k.z, r*k.z), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdOctagon(in vec2 p, in float r) {\n    // pi/8: cos, sin, tan.\n    const vec3 k = vec3(\n        -0.9238795325,   // sqrt(2+sqrt(2))/2\n        0.3826834323,   // sqrt(2-sqrt(2))/2\n        0.4142135623\n    ); // sqrt(2)-1\n    // reflections\n    p = abs(p) * 1.1;\n    p -= 2.0 * min(dot(vec2(k.x,k.y), p), 0.0) * vec2(k.x,k.y);\n    p -= 2.0 * min(dot(vec2(-k.x,k.y), p), 0.0) * vec2(-k.x,k.y);\n    // Polygon side.\n    p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdStar(in vec2 p, in float r, in uint n, in float m) { // m=[2,n]\n    // these 4 lines can be precomputed for a given shape\n    float an = 3.141593 / float(n);\n    float en = 3.141593 / m;\n    vec2  acs = vec2(cos(an), sin(an));\n    vec2  ecs = vec2(cos(en), sin(en)); // ecs=vec2(0,1) and simplify, for regular polygon,\n\n    // reduce to first sector\n    float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n    p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n    // line sdf\n    p -= r * acs;\n    p += ecs * clamp(-dot(p, ecs), 0.0, r * acs.y / ecs.y);\n    return length(p) * sign(p.x);\n}\n\nfloat sdCross(in vec2 p, in float w, in float r) {\n    p = abs(p);\n    return length(p - min(p.x + p.y, w) * 0.5) - r;\n}\n\n// TODO: Precompute this, we always pass the same parameters tot his function (v, vec2(1.0, 0.3), 0.0)\nfloat sdPlus( in vec2 p, in vec2 b, float r ) {\n    p = abs(p);\n    p = (p.y > p.x) ? p.yx : p.xy;\n\n    vec2  q = p - b;\n    float k = max(q.y, q.x);\n    vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);\n\n    return sign(k)*length(max(w, 0.0)) + r;\n}\n\nfloat sdBox( in vec2 p, in vec2 b ) {\n    vec2 d = abs(p) - b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nuniform float uPixelRatio;\nuniform uint uRenderMode;\nuniform float uOutline;\n\nflat in vec4 fColor;\nflat in float fPixelLength;\nin vec2 vFromCenter;\n\nout vec4 fragColor;\n\nvoid main() {\n    float antialias = fPixelLength * 1.5;\n    float sd = sdOctagon(vFromCenter, 1.0);\n    float outline = opOnion(sd, min(0.15, fPixelLength * uOutline * uPixelRatio));\n    float modeDistance = uRenderMode == MODE_HIGH_PASS_1 ? -antialias : -antialias * 0.5;\n    float distance = uRenderMode == MODE_HIGH_PASS_2 ? 0.0 : modeDistance;\n\n    if (sd > distance) {\n        discard;\n    }\n\n    vec3 color = fColor.rgb * (1.0 - 0.25 * smoothstep(antialias, 0.0, outline));\n\n    if (uRenderMode == MODE_HIGH_PASS_2) {\n        if (sd < -antialias) {\n            discard;\n        }\n        fragColor = outputColor(vec4(color, smoothstep(0.0, antialias, abs(sd))));\n    } else {\n        fragColor = outputColor(vec4(color, 1.0));\n    }\n}\n";

// src/graph/nodes/octagon/Octagon.picking.fs.glsl
var Octagon_picking_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\n// most of these come from this excellent post:\n// https://iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n\nfloat opRound(in float d, in float r) {\n    return d - r;\n}\n\nfloat opOnion(in float d, in float r) {\n    return abs(d) - r;\n}\n\nfloat sdCircle(in vec2 p, in float r ) {\n    return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(in vec2 p, in float r) {\n    const float k = sqrt(3.0);\n    p.x = abs(p.x) - r;\n    p.y = p.y + (r) / k;\n    if (p.x + k * p.y > 0.0) {\n        p = vec2(p.x-k*p.y,-k*p.x-p.y) / 2.0;\n    }\n    p.x -= clamp(p.x, -2.0 * r, 0.0);\n    return -length(p) * sign(p.y);\n}\n\nfloat sdPentagon(in vec2 p, in float r) {\n    const vec3 k = vec3(0.809016994, 0.587785252, 0.726542528);\n    p.y = -(p.y) * 1.25;\n    p.x = abs(p.x) * 1.25;\n    p -= 2.0 * min(dot(vec2(-k.x, k.y), p), 0.0) * vec2(-k.x, k.y);\n    p -= 2.0 * min(dot(vec2(k.x, k.y), p), 0.0) * vec2(k.x, k.y);\n    p -= vec2(clamp(p.x, -r*k.z, r*k.z), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdOctagon(in vec2 p, in float r) {\n    // pi/8: cos, sin, tan.\n    const vec3 k = vec3(\n        -0.9238795325,   // sqrt(2+sqrt(2))/2\n        0.3826834323,   // sqrt(2-sqrt(2))/2\n        0.4142135623\n    ); // sqrt(2)-1\n    // reflections\n    p = abs(p) * 1.1;\n    p -= 2.0 * min(dot(vec2(k.x,k.y), p), 0.0) * vec2(k.x,k.y);\n    p -= 2.0 * min(dot(vec2(-k.x,k.y), p), 0.0) * vec2(-k.x,k.y);\n    // Polygon side.\n    p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdStar(in vec2 p, in float r, in uint n, in float m) { // m=[2,n]\n    // these 4 lines can be precomputed for a given shape\n    float an = 3.141593 / float(n);\n    float en = 3.141593 / m;\n    vec2  acs = vec2(cos(an), sin(an));\n    vec2  ecs = vec2(cos(en), sin(en)); // ecs=vec2(0,1) and simplify, for regular polygon,\n\n    // reduce to first sector\n    float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n    p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n    // line sdf\n    p -= r * acs;\n    p += ecs * clamp(-dot(p, ecs), 0.0, r * acs.y / ecs.y);\n    return length(p) * sign(p.x);\n}\n\nfloat sdCross(in vec2 p, in float w, in float r) {\n    p = abs(p);\n    return length(p - min(p.x + p.y, w) * 0.5) - r;\n}\n\n// TODO: Precompute this, we always pass the same parameters tot his function (v, vec2(1.0, 0.3), 0.0)\nfloat sdPlus( in vec2 p, in vec2 b, float r ) {\n    p = abs(p);\n    p = (p.y > p.x) ? p.yx : p.xy;\n\n    vec2  q = p - b;\n    float k = max(q.y, q.x);\n    vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);\n\n    return sign(k)*length(max(w, 0.0)) + r;\n}\n\nfloat sdBox( in vec2 p, in vec2 b ) {\n    vec2 d = abs(p) - b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nflat in vec4 fColor;\nflat in float fPixelLength;\nin vec2 vFromCenter;\n\nout vec4 fragColor;\n\nvoid main() {\n    float sd = sdOctagon(vFromCenter, 1.0);\n    if (sd > 0.0) {\n        discard;\n    }\n    fragColor = fColor;\n}\n";

// src/graph/nodes/octagon/Octagon.ts
var Octagon = class extends Circle {
  getDrawShaders() {
    const shaders = super.getDrawShaders();
    shaders.fs = Octagon_fs_default;
    return shaders;
  }
  getPickingShaders() {
    const shaders = super.getPickingShaders();
    shaders.fs = Octagon_picking_fs_default;
    return shaders;
  }
};

// src/graph/nodes/star/Star.fs.glsl
var Star_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\n// from https://en.wikipedia.org/wiki/SRGB#The_reverse_transformation\nfloat luminance_x(float x) {\n    return x <= 0.04045 ? x / 12.92 : pow((x + 0.055) / 1.055, 2.4);\n}\nfloat color_l(float l) {\n    return min(1.0, max(0.0, l <= 0.0031308 ? l * 12.92 : pow(l * 1.055, 1.0 / 2.4) - 0.055));\n}\n\n// from https://en.wikipedia.org/wiki/Relative_luminance\nfloat rgb2luminance(vec3 color) {\n    // relative luminance\n    // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    float r = luminance_x(color.r);\n    float g = luminance_x(color.g);\n    float b = luminance_x(color.b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n}\n\nvec3 setLuminance(vec3 color, float luminance) {\n    float r = luminance_x(color.r) * 0.2126;\n    float g = luminance_x(color.g) * 0.7152;\n    float b = luminance_x(color.b) * 0.0722;\n    float colorLuminance = r + g + b;\n\n    float tr = luminance * (r / colorLuminance);\n    float tg = luminance * (g / colorLuminance);\n    float tb = luminance * (b / colorLuminance);\n\n    float rr = color_l(tr / 0.2126);\n    float rg = color_l(tg / 0.7152);\n    float rb = color_l(tb / 0.0722);\n\n    return vec3(rr, rg, rb );\n}\n\n// https://www.w3.org/TR/WCAG20/#contrast-ratiodef\n// (L1 + 0.05) / (L2 + 0.05), where\n// - L1 is the relative luminance of the lighter of the colors, and\n// - L2 is the relative luminance of the darker of the colors.\nfloat findDarker(float luminance, float contrast) {\n    return (contrast * luminance) + (0.05 * contrast) - 0.05;\n}\nfloat findLighter(float luminance, float contrast) {\n    return (luminance + 0.05 - (0.05 * contrast)) / contrast;\n}\n\nvec3 contrastingColor(vec3 color, float contrast) {\n    float luminance = rgb2luminance(color);\n    float darker = findDarker(luminance, contrast);\n    float lighter = findLighter(luminance, contrast);\n\n    float targetLuminance;\n    if (darker < 0.0 || darker > 1.0) {\n        targetLuminance = lighter;\n    } else if (lighter < 0.0 || lighter > 1.0) {\n        targetLuminance = darker;\n    } else {\n        targetLuminance = abs(luminance - lighter) < abs(darker - luminance) ? lighter : darker;\n    }\n\n    return setLuminance(color, targetLuminance);\n}\n\nvec3 desaturateColor(vec3 color, float amount) {\n    float l = rgb2luminance(color);\n    vec3 gray = vec3(l, l, l);\n    return mix(color, gray, amount);\n}\n\nuniform vec4 uClearColor;\nuniform float uDesaturate;\nuniform float uBrightness;\nuniform float uFade;\nuniform float uAlpha;\n\nvec4 outputColor(vec4 color) {\n    // desaturate => fade => alpha\n    vec3 ret = mix(color.rgb, vec3(uBrightness + 1.0 / 2.0), abs(uBrightness));\n    ret = vec3(desaturateColor(ret, uDesaturate));\n    ret = mix(ret, uClearColor.rgb, uFade);\n    return vec4(ret, color.a * uAlpha);\n}\n\n#define MODE_DRAFT 0u\n#define MODE_MEDIUM 1u\n#define MODE_HIGH 2u\n#define MODE_HIGH_PASS_1 3u\n#define MODE_HIGH_PASS_2 4u\n#define MODE_PICKING 5u\n\n// most of these come from this excellent post:\n// https://iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n\nfloat opRound(in float d, in float r) {\n    return d - r;\n}\n\nfloat opOnion(in float d, in float r) {\n    return abs(d) - r;\n}\n\nfloat sdCircle(in vec2 p, in float r ) {\n    return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(in vec2 p, in float r) {\n    const float k = sqrt(3.0);\n    p.x = abs(p.x) - r;\n    p.y = p.y + (r) / k;\n    if (p.x + k * p.y > 0.0) {\n        p = vec2(p.x-k*p.y,-k*p.x-p.y) / 2.0;\n    }\n    p.x -= clamp(p.x, -2.0 * r, 0.0);\n    return -length(p) * sign(p.y);\n}\n\nfloat sdPentagon(in vec2 p, in float r) {\n    const vec3 k = vec3(0.809016994, 0.587785252, 0.726542528);\n    p.y = -(p.y) * 1.25;\n    p.x = abs(p.x) * 1.25;\n    p -= 2.0 * min(dot(vec2(-k.x, k.y), p), 0.0) * vec2(-k.x, k.y);\n    p -= 2.0 * min(dot(vec2(k.x, k.y), p), 0.0) * vec2(k.x, k.y);\n    p -= vec2(clamp(p.x, -r*k.z, r*k.z), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdOctagon(in vec2 p, in float r) {\n    // pi/8: cos, sin, tan.\n    const vec3 k = vec3(\n        -0.9238795325,   // sqrt(2+sqrt(2))/2\n        0.3826834323,   // sqrt(2-sqrt(2))/2\n        0.4142135623\n    ); // sqrt(2)-1\n    // reflections\n    p = abs(p) * 1.1;\n    p -= 2.0 * min(dot(vec2(k.x,k.y), p), 0.0) * vec2(k.x,k.y);\n    p -= 2.0 * min(dot(vec2(-k.x,k.y), p), 0.0) * vec2(-k.x,k.y);\n    // Polygon side.\n    p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdStar(in vec2 p, in float r, in uint n, in float m) { // m=[2,n]\n    // these 4 lines can be precomputed for a given shape\n    float an = 3.141593 / float(n);\n    float en = 3.141593 / m;\n    vec2  acs = vec2(cos(an), sin(an));\n    vec2  ecs = vec2(cos(en), sin(en)); // ecs=vec2(0,1) and simplify, for regular polygon,\n\n    // reduce to first sector\n    float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n    p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n    // line sdf\n    p -= r * acs;\n    p += ecs * clamp(-dot(p, ecs), 0.0, r * acs.y / ecs.y);\n    return length(p) * sign(p.x);\n}\n\nfloat sdCross(in vec2 p, in float w, in float r) {\n    p = abs(p);\n    return length(p - min(p.x + p.y, w) * 0.5) - r;\n}\n\n// TODO: Precompute this, we always pass the same parameters tot his function (v, vec2(1.0, 0.3), 0.0)\nfloat sdPlus( in vec2 p, in vec2 b, float r ) {\n    p = abs(p);\n    p = (p.y > p.x) ? p.yx : p.xy;\n\n    vec2  q = p - b;\n    float k = max(q.y, q.x);\n    vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);\n\n    return sign(k)*length(max(w, 0.0)) + r;\n}\n\nfloat sdBox( in vec2 p, in vec2 b ) {\n    vec2 d = abs(p) - b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nuniform float uPixelRatio;\nuniform uint uRenderMode;\nuniform float uOutline;\nuniform uint uSides;\nuniform float uAngleDivisor;\n\nflat in vec4 fColor;\nflat in float fPixelLength;\nin vec2 vFromCenter;\n\nout vec4 fragColor;\n\nvoid main() {\n    float antialias = fPixelLength * 1.5;\n    float sd = sdStar(vFromCenter, 1.0, uSides, uAngleDivisor);\n    float outline = opOnion(sd, min(0.15, fPixelLength * uOutline * uPixelRatio));\n    float modeDistance = uRenderMode == MODE_HIGH_PASS_1 ? -antialias : -antialias * 0.5;\n    float distance = uRenderMode == MODE_HIGH_PASS_2 ? 0.0 : modeDistance;\n\n    if (sd > distance) {\n        discard;\n    }\n\n    vec3 color = fColor.rgb * (1.0 - 0.25 * smoothstep(antialias, 0.0, outline));\n\n    if (uRenderMode == MODE_HIGH_PASS_2) {\n        if (sd < -antialias) {\n            discard;\n        }\n        fragColor = outputColor(vec4(color, smoothstep(0.0, antialias, abs(sd))));\n    } else {\n        fragColor = outputColor(vec4(color, 1.0));\n    }\n}\n";

// src/graph/nodes/star/Star.picking.fs.glsl
var Star_picking_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\n// most of these come from this excellent post:\n// https://iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n\nfloat opRound(in float d, in float r) {\n    return d - r;\n}\n\nfloat opOnion(in float d, in float r) {\n    return abs(d) - r;\n}\n\nfloat sdCircle(in vec2 p, in float r ) {\n    return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(in vec2 p, in float r) {\n    const float k = sqrt(3.0);\n    p.x = abs(p.x) - r;\n    p.y = p.y + (r) / k;\n    if (p.x + k * p.y > 0.0) {\n        p = vec2(p.x-k*p.y,-k*p.x-p.y) / 2.0;\n    }\n    p.x -= clamp(p.x, -2.0 * r, 0.0);\n    return -length(p) * sign(p.y);\n}\n\nfloat sdPentagon(in vec2 p, in float r) {\n    const vec3 k = vec3(0.809016994, 0.587785252, 0.726542528);\n    p.y = -(p.y) * 1.25;\n    p.x = abs(p.x) * 1.25;\n    p -= 2.0 * min(dot(vec2(-k.x, k.y), p), 0.0) * vec2(-k.x, k.y);\n    p -= 2.0 * min(dot(vec2(k.x, k.y), p), 0.0) * vec2(k.x, k.y);\n    p -= vec2(clamp(p.x, -r*k.z, r*k.z), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdOctagon(in vec2 p, in float r) {\n    // pi/8: cos, sin, tan.\n    const vec3 k = vec3(\n        -0.9238795325,   // sqrt(2+sqrt(2))/2\n        0.3826834323,   // sqrt(2-sqrt(2))/2\n        0.4142135623\n    ); // sqrt(2)-1\n    // reflections\n    p = abs(p) * 1.1;\n    p -= 2.0 * min(dot(vec2(k.x,k.y), p), 0.0) * vec2(k.x,k.y);\n    p -= 2.0 * min(dot(vec2(-k.x,k.y), p), 0.0) * vec2(-k.x,k.y);\n    // Polygon side.\n    p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdStar(in vec2 p, in float r, in uint n, in float m) { // m=[2,n]\n    // these 4 lines can be precomputed for a given shape\n    float an = 3.141593 / float(n);\n    float en = 3.141593 / m;\n    vec2  acs = vec2(cos(an), sin(an));\n    vec2  ecs = vec2(cos(en), sin(en)); // ecs=vec2(0,1) and simplify, for regular polygon,\n\n    // reduce to first sector\n    float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n    p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n    // line sdf\n    p -= r * acs;\n    p += ecs * clamp(-dot(p, ecs), 0.0, r * acs.y / ecs.y);\n    return length(p) * sign(p.x);\n}\n\nfloat sdCross(in vec2 p, in float w, in float r) {\n    p = abs(p);\n    return length(p - min(p.x + p.y, w) * 0.5) - r;\n}\n\n// TODO: Precompute this, we always pass the same parameters tot his function (v, vec2(1.0, 0.3), 0.0)\nfloat sdPlus( in vec2 p, in vec2 b, float r ) {\n    p = abs(p);\n    p = (p.y > p.x) ? p.yx : p.xy;\n\n    vec2  q = p - b;\n    float k = max(q.y, q.x);\n    vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);\n\n    return sign(k)*length(max(w, 0.0)) + r;\n}\n\nfloat sdBox( in vec2 p, in vec2 b ) {\n    vec2 d = abs(p) - b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nuniform uint uSides;\nuniform float uAngleDivisor;\n\nflat in vec4 fColor;\nflat in float fPixelLength;\nin vec2 vFromCenter;\n\nout vec4 fragColor;\n\nvoid main() {\n    float sd = sdStar(vFromCenter, 1.0, uSides, uAngleDivisor);\n    if (sd > 0.0) {\n        discard;\n    }\n    fragColor = fColor;\n}\n";

// src/graph/nodes/star/Star.ts
var Star = class extends Circle {
  get sides() {
    return this.localUniforms.uSides;
  }
  set sides(value) {
    this.localUniforms.uSides = value;
  }
  get angleDivisor() {
    return this.localUniforms.uAngleDivisor;
  }
  set angleDivisor(value) {
    this.localUniforms.uAngleDivisor = value;
  }
  constructor(context, points2, data, mappings2, pickingManager, sides = 5, angleDivisor = 3) {
    super(context, points2, data, mappings2, pickingManager, sides, angleDivisor);
  }
  initialize(context, points2, data, mappings2, pickingManager, sides, angleDivisor) {
    super.initialize(context, points2, data, mappings2, pickingManager);
    this.localUniforms.uSides = sides;
    this.localUniforms.uAngleDivisor = angleDivisor;
  }
  getDrawShaders() {
    const shaders = super.getDrawShaders();
    shaders.fs = Star_fs_default;
    return shaders;
  }
  getPickingShaders() {
    const shaders = super.getPickingShaders();
    shaders.fs = Star_picking_fs_default;
    return shaders;
  }
};

// src/graph/nodes/cross/Cross.fs.glsl
var Cross_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\n// from https://en.wikipedia.org/wiki/SRGB#The_reverse_transformation\nfloat luminance_x(float x) {\n    return x <= 0.04045 ? x / 12.92 : pow((x + 0.055) / 1.055, 2.4);\n}\nfloat color_l(float l) {\n    return min(1.0, max(0.0, l <= 0.0031308 ? l * 12.92 : pow(l * 1.055, 1.0 / 2.4) - 0.055));\n}\n\n// from https://en.wikipedia.org/wiki/Relative_luminance\nfloat rgb2luminance(vec3 color) {\n    // relative luminance\n    // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    float r = luminance_x(color.r);\n    float g = luminance_x(color.g);\n    float b = luminance_x(color.b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n}\n\nvec3 setLuminance(vec3 color, float luminance) {\n    float r = luminance_x(color.r) * 0.2126;\n    float g = luminance_x(color.g) * 0.7152;\n    float b = luminance_x(color.b) * 0.0722;\n    float colorLuminance = r + g + b;\n\n    float tr = luminance * (r / colorLuminance);\n    float tg = luminance * (g / colorLuminance);\n    float tb = luminance * (b / colorLuminance);\n\n    float rr = color_l(tr / 0.2126);\n    float rg = color_l(tg / 0.7152);\n    float rb = color_l(tb / 0.0722);\n\n    return vec3(rr, rg, rb );\n}\n\n// https://www.w3.org/TR/WCAG20/#contrast-ratiodef\n// (L1 + 0.05) / (L2 + 0.05), where\n// - L1 is the relative luminance of the lighter of the colors, and\n// - L2 is the relative luminance of the darker of the colors.\nfloat findDarker(float luminance, float contrast) {\n    return (contrast * luminance) + (0.05 * contrast) - 0.05;\n}\nfloat findLighter(float luminance, float contrast) {\n    return (luminance + 0.05 - (0.05 * contrast)) / contrast;\n}\n\nvec3 contrastingColor(vec3 color, float contrast) {\n    float luminance = rgb2luminance(color);\n    float darker = findDarker(luminance, contrast);\n    float lighter = findLighter(luminance, contrast);\n\n    float targetLuminance;\n    if (darker < 0.0 || darker > 1.0) {\n        targetLuminance = lighter;\n    } else if (lighter < 0.0 || lighter > 1.0) {\n        targetLuminance = darker;\n    } else {\n        targetLuminance = abs(luminance - lighter) < abs(darker - luminance) ? lighter : darker;\n    }\n\n    return setLuminance(color, targetLuminance);\n}\n\nvec3 desaturateColor(vec3 color, float amount) {\n    float l = rgb2luminance(color);\n    vec3 gray = vec3(l, l, l);\n    return mix(color, gray, amount);\n}\n\nuniform vec4 uClearColor;\nuniform float uDesaturate;\nuniform float uBrightness;\nuniform float uFade;\nuniform float uAlpha;\n\nvec4 outputColor(vec4 color) {\n    // desaturate => fade => alpha\n    vec3 ret = mix(color.rgb, vec3(uBrightness + 1.0 / 2.0), abs(uBrightness));\n    ret = vec3(desaturateColor(ret, uDesaturate));\n    ret = mix(ret, uClearColor.rgb, uFade);\n    return vec4(ret, color.a * uAlpha);\n}\n\n#define MODE_DRAFT 0u\n#define MODE_MEDIUM 1u\n#define MODE_HIGH 2u\n#define MODE_HIGH_PASS_1 3u\n#define MODE_HIGH_PASS_2 4u\n#define MODE_PICKING 5u\n\n// most of these come from this excellent post:\n// https://iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n\nfloat opRound(in float d, in float r) {\n    return d - r;\n}\n\nfloat opOnion(in float d, in float r) {\n    return abs(d) - r;\n}\n\nfloat sdCircle(in vec2 p, in float r ) {\n    return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(in vec2 p, in float r) {\n    const float k = sqrt(3.0);\n    p.x = abs(p.x) - r;\n    p.y = p.y + (r) / k;\n    if (p.x + k * p.y > 0.0) {\n        p = vec2(p.x-k*p.y,-k*p.x-p.y) / 2.0;\n    }\n    p.x -= clamp(p.x, -2.0 * r, 0.0);\n    return -length(p) * sign(p.y);\n}\n\nfloat sdPentagon(in vec2 p, in float r) {\n    const vec3 k = vec3(0.809016994, 0.587785252, 0.726542528);\n    p.y = -(p.y) * 1.25;\n    p.x = abs(p.x) * 1.25;\n    p -= 2.0 * min(dot(vec2(-k.x, k.y), p), 0.0) * vec2(-k.x, k.y);\n    p -= 2.0 * min(dot(vec2(k.x, k.y), p), 0.0) * vec2(k.x, k.y);\n    p -= vec2(clamp(p.x, -r*k.z, r*k.z), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdOctagon(in vec2 p, in float r) {\n    // pi/8: cos, sin, tan.\n    const vec3 k = vec3(\n        -0.9238795325,   // sqrt(2+sqrt(2))/2\n        0.3826834323,   // sqrt(2-sqrt(2))/2\n        0.4142135623\n    ); // sqrt(2)-1\n    // reflections\n    p = abs(p) * 1.1;\n    p -= 2.0 * min(dot(vec2(k.x,k.y), p), 0.0) * vec2(k.x,k.y);\n    p -= 2.0 * min(dot(vec2(-k.x,k.y), p), 0.0) * vec2(-k.x,k.y);\n    // Polygon side.\n    p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdStar(in vec2 p, in float r, in uint n, in float m) { // m=[2,n]\n    // these 4 lines can be precomputed for a given shape\n    float an = 3.141593 / float(n);\n    float en = 3.141593 / m;\n    vec2  acs = vec2(cos(an), sin(an));\n    vec2  ecs = vec2(cos(en), sin(en)); // ecs=vec2(0,1) and simplify, for regular polygon,\n\n    // reduce to first sector\n    float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n    p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n    // line sdf\n    p -= r * acs;\n    p += ecs * clamp(-dot(p, ecs), 0.0, r * acs.y / ecs.y);\n    return length(p) * sign(p.x);\n}\n\nfloat sdCross(in vec2 p, in float w, in float r) {\n    p = abs(p);\n    return length(p - min(p.x + p.y, w) * 0.5) - r;\n}\n\n// TODO: Precompute this, we always pass the same parameters tot his function (v, vec2(1.0, 0.3), 0.0)\nfloat sdPlus( in vec2 p, in vec2 b, float r ) {\n    p = abs(p);\n    p = (p.y > p.x) ? p.yx : p.xy;\n\n    vec2  q = p - b;\n    float k = max(q.y, q.x);\n    vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);\n\n    return sign(k)*length(max(w, 0.0)) + r;\n}\n\nfloat sdBox( in vec2 p, in vec2 b ) {\n    vec2 d = abs(p) - b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nuniform float uPixelRatio;\nuniform uint uRenderMode;\nuniform float uOutline;\n\nflat in vec4 fColor;\nflat in float fPixelLength;\nin vec2 vFromCenter;\n\nout vec4 fragColor;\n\nvoid main() {\n    float antialias = fPixelLength * 1.5;\n    float sd = sdCross(vFromCenter, 1.0, 0.3);\n    float outline = opOnion(sd, min(0.15, fPixelLength * uOutline * uPixelRatio));\n    float modeDistance = uRenderMode == MODE_HIGH_PASS_1 ? -antialias : -antialias * 0.5;\n    float distance = uRenderMode == MODE_HIGH_PASS_2 ? 0.0 : modeDistance;\n\n    if (sd > distance) {\n        discard;\n    }\n\n    vec3 color = fColor.rgb * (1.0 - 0.25 * smoothstep(antialias, 0.0, outline));\n\n    if (uRenderMode == MODE_HIGH_PASS_2) {\n        if (sd < -antialias) {\n            discard;\n        }\n        fragColor = outputColor(vec4(color, smoothstep(0.0, antialias, abs(sd))));\n    } else {\n        fragColor = outputColor(vec4(color, 1.0));\n    }\n}\n";

// src/graph/nodes/cross/Cross.picking.fs.glsl
var Cross_picking_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\n// most of these come from this excellent post:\n// https://iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n\nfloat opRound(in float d, in float r) {\n    return d - r;\n}\n\nfloat opOnion(in float d, in float r) {\n    return abs(d) - r;\n}\n\nfloat sdCircle(in vec2 p, in float r ) {\n    return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(in vec2 p, in float r) {\n    const float k = sqrt(3.0);\n    p.x = abs(p.x) - r;\n    p.y = p.y + (r) / k;\n    if (p.x + k * p.y > 0.0) {\n        p = vec2(p.x-k*p.y,-k*p.x-p.y) / 2.0;\n    }\n    p.x -= clamp(p.x, -2.0 * r, 0.0);\n    return -length(p) * sign(p.y);\n}\n\nfloat sdPentagon(in vec2 p, in float r) {\n    const vec3 k = vec3(0.809016994, 0.587785252, 0.726542528);\n    p.y = -(p.y) * 1.25;\n    p.x = abs(p.x) * 1.25;\n    p -= 2.0 * min(dot(vec2(-k.x, k.y), p), 0.0) * vec2(-k.x, k.y);\n    p -= 2.0 * min(dot(vec2(k.x, k.y), p), 0.0) * vec2(k.x, k.y);\n    p -= vec2(clamp(p.x, -r*k.z, r*k.z), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdOctagon(in vec2 p, in float r) {\n    // pi/8: cos, sin, tan.\n    const vec3 k = vec3(\n        -0.9238795325,   // sqrt(2+sqrt(2))/2\n        0.3826834323,   // sqrt(2-sqrt(2))/2\n        0.4142135623\n    ); // sqrt(2)-1\n    // reflections\n    p = abs(p) * 1.1;\n    p -= 2.0 * min(dot(vec2(k.x,k.y), p), 0.0) * vec2(k.x,k.y);\n    p -= 2.0 * min(dot(vec2(-k.x,k.y), p), 0.0) * vec2(-k.x,k.y);\n    // Polygon side.\n    p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdStar(in vec2 p, in float r, in uint n, in float m) { // m=[2,n]\n    // these 4 lines can be precomputed for a given shape\n    float an = 3.141593 / float(n);\n    float en = 3.141593 / m;\n    vec2  acs = vec2(cos(an), sin(an));\n    vec2  ecs = vec2(cos(en), sin(en)); // ecs=vec2(0,1) and simplify, for regular polygon,\n\n    // reduce to first sector\n    float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n    p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n    // line sdf\n    p -= r * acs;\n    p += ecs * clamp(-dot(p, ecs), 0.0, r * acs.y / ecs.y);\n    return length(p) * sign(p.x);\n}\n\nfloat sdCross(in vec2 p, in float w, in float r) {\n    p = abs(p);\n    return length(p - min(p.x + p.y, w) * 0.5) - r;\n}\n\n// TODO: Precompute this, we always pass the same parameters tot his function (v, vec2(1.0, 0.3), 0.0)\nfloat sdPlus( in vec2 p, in vec2 b, float r ) {\n    p = abs(p);\n    p = (p.y > p.x) ? p.yx : p.xy;\n\n    vec2  q = p - b;\n    float k = max(q.y, q.x);\n    vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);\n\n    return sign(k)*length(max(w, 0.0)) + r;\n}\n\nfloat sdBox( in vec2 p, in vec2 b ) {\n    vec2 d = abs(p) - b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nflat in vec4 fColor;\nflat in float fPixelLength;\nin vec2 vFromCenter;\n\nout vec4 fragColor;\n\nvoid main() {\n    float sd = sdCross(vFromCenter, 1.0, 0.3);\n    if (sd > 0.0) {\n        discard;\n    }\n    fragColor = fColor;\n}\n";

// src/graph/nodes/cross/Cross.ts
var Cross = class extends Circle {
  getDrawShaders() {
    const shaders = super.getDrawShaders();
    shaders.fs = Cross_fs_default;
    return shaders;
  }
  getPickingShaders() {
    const shaders = super.getPickingShaders();
    shaders.fs = Cross_picking_fs_default;
    return shaders;
  }
};

// src/graph/nodes/plus/Plus.fs.glsl
var Plus_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\n// from https://en.wikipedia.org/wiki/SRGB#The_reverse_transformation\nfloat luminance_x(float x) {\n    return x <= 0.04045 ? x / 12.92 : pow((x + 0.055) / 1.055, 2.4);\n}\nfloat color_l(float l) {\n    return min(1.0, max(0.0, l <= 0.0031308 ? l * 12.92 : pow(l * 1.055, 1.0 / 2.4) - 0.055));\n}\n\n// from https://en.wikipedia.org/wiki/Relative_luminance\nfloat rgb2luminance(vec3 color) {\n    // relative luminance\n    // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    float r = luminance_x(color.r);\n    float g = luminance_x(color.g);\n    float b = luminance_x(color.b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n}\n\nvec3 setLuminance(vec3 color, float luminance) {\n    float r = luminance_x(color.r) * 0.2126;\n    float g = luminance_x(color.g) * 0.7152;\n    float b = luminance_x(color.b) * 0.0722;\n    float colorLuminance = r + g + b;\n\n    float tr = luminance * (r / colorLuminance);\n    float tg = luminance * (g / colorLuminance);\n    float tb = luminance * (b / colorLuminance);\n\n    float rr = color_l(tr / 0.2126);\n    float rg = color_l(tg / 0.7152);\n    float rb = color_l(tb / 0.0722);\n\n    return vec3(rr, rg, rb );\n}\n\n// https://www.w3.org/TR/WCAG20/#contrast-ratiodef\n// (L1 + 0.05) / (L2 + 0.05), where\n// - L1 is the relative luminance of the lighter of the colors, and\n// - L2 is the relative luminance of the darker of the colors.\nfloat findDarker(float luminance, float contrast) {\n    return (contrast * luminance) + (0.05 * contrast) - 0.05;\n}\nfloat findLighter(float luminance, float contrast) {\n    return (luminance + 0.05 - (0.05 * contrast)) / contrast;\n}\n\nvec3 contrastingColor(vec3 color, float contrast) {\n    float luminance = rgb2luminance(color);\n    float darker = findDarker(luminance, contrast);\n    float lighter = findLighter(luminance, contrast);\n\n    float targetLuminance;\n    if (darker < 0.0 || darker > 1.0) {\n        targetLuminance = lighter;\n    } else if (lighter < 0.0 || lighter > 1.0) {\n        targetLuminance = darker;\n    } else {\n        targetLuminance = abs(luminance - lighter) < abs(darker - luminance) ? lighter : darker;\n    }\n\n    return setLuminance(color, targetLuminance);\n}\n\nvec3 desaturateColor(vec3 color, float amount) {\n    float l = rgb2luminance(color);\n    vec3 gray = vec3(l, l, l);\n    return mix(color, gray, amount);\n}\n\nuniform vec4 uClearColor;\nuniform float uDesaturate;\nuniform float uBrightness;\nuniform float uFade;\nuniform float uAlpha;\n\nvec4 outputColor(vec4 color) {\n    // desaturate => fade => alpha\n    vec3 ret = mix(color.rgb, vec3(uBrightness + 1.0 / 2.0), abs(uBrightness));\n    ret = vec3(desaturateColor(ret, uDesaturate));\n    ret = mix(ret, uClearColor.rgb, uFade);\n    return vec4(ret, color.a * uAlpha);\n}\n\n#define MODE_DRAFT 0u\n#define MODE_MEDIUM 1u\n#define MODE_HIGH 2u\n#define MODE_HIGH_PASS_1 3u\n#define MODE_HIGH_PASS_2 4u\n#define MODE_PICKING 5u\n\n// most of these come from this excellent post:\n// https://iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n\nfloat opRound(in float d, in float r) {\n    return d - r;\n}\n\nfloat opOnion(in float d, in float r) {\n    return abs(d) - r;\n}\n\nfloat sdCircle(in vec2 p, in float r ) {\n    return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(in vec2 p, in float r) {\n    const float k = sqrt(3.0);\n    p.x = abs(p.x) - r;\n    p.y = p.y + (r) / k;\n    if (p.x + k * p.y > 0.0) {\n        p = vec2(p.x-k*p.y,-k*p.x-p.y) / 2.0;\n    }\n    p.x -= clamp(p.x, -2.0 * r, 0.0);\n    return -length(p) * sign(p.y);\n}\n\nfloat sdPentagon(in vec2 p, in float r) {\n    const vec3 k = vec3(0.809016994, 0.587785252, 0.726542528);\n    p.y = -(p.y) * 1.25;\n    p.x = abs(p.x) * 1.25;\n    p -= 2.0 * min(dot(vec2(-k.x, k.y), p), 0.0) * vec2(-k.x, k.y);\n    p -= 2.0 * min(dot(vec2(k.x, k.y), p), 0.0) * vec2(k.x, k.y);\n    p -= vec2(clamp(p.x, -r*k.z, r*k.z), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdOctagon(in vec2 p, in float r) {\n    // pi/8: cos, sin, tan.\n    const vec3 k = vec3(\n        -0.9238795325,   // sqrt(2+sqrt(2))/2\n        0.3826834323,   // sqrt(2-sqrt(2))/2\n        0.4142135623\n    ); // sqrt(2)-1\n    // reflections\n    p = abs(p) * 1.1;\n    p -= 2.0 * min(dot(vec2(k.x,k.y), p), 0.0) * vec2(k.x,k.y);\n    p -= 2.0 * min(dot(vec2(-k.x,k.y), p), 0.0) * vec2(-k.x,k.y);\n    // Polygon side.\n    p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdStar(in vec2 p, in float r, in uint n, in float m) { // m=[2,n]\n    // these 4 lines can be precomputed for a given shape\n    float an = 3.141593 / float(n);\n    float en = 3.141593 / m;\n    vec2  acs = vec2(cos(an), sin(an));\n    vec2  ecs = vec2(cos(en), sin(en)); // ecs=vec2(0,1) and simplify, for regular polygon,\n\n    // reduce to first sector\n    float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n    p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n    // line sdf\n    p -= r * acs;\n    p += ecs * clamp(-dot(p, ecs), 0.0, r * acs.y / ecs.y);\n    return length(p) * sign(p.x);\n}\n\nfloat sdCross(in vec2 p, in float w, in float r) {\n    p = abs(p);\n    return length(p - min(p.x + p.y, w) * 0.5) - r;\n}\n\n// TODO: Precompute this, we always pass the same parameters tot his function (v, vec2(1.0, 0.3), 0.0)\nfloat sdPlus( in vec2 p, in vec2 b, float r ) {\n    p = abs(p);\n    p = (p.y > p.x) ? p.yx : p.xy;\n\n    vec2  q = p - b;\n    float k = max(q.y, q.x);\n    vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);\n\n    return sign(k)*length(max(w, 0.0)) + r;\n}\n\nfloat sdBox( in vec2 p, in vec2 b ) {\n    vec2 d = abs(p) - b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nuniform float uPixelRatio;\nuniform uint uRenderMode;\nuniform float uOutline;\n\nflat in vec4 fColor;\nflat in float fPixelLength;\nin vec2 vFromCenter;\n\nout vec4 fragColor;\n\nvoid main() {\n    float antialias = fPixelLength * 1.5;\n    float sd = sdPlus(vFromCenter, vec2(0.9, 0.3), 0.0);\n    float outline = opOnion(sd, min(0.15, fPixelLength * uOutline * uPixelRatio));\n    float modeDistance = uRenderMode == MODE_HIGH_PASS_1 ? -antialias : -antialias * 0.5;\n    float distance = uRenderMode == MODE_HIGH_PASS_2 ? 0.0 : modeDistance;\n\n    if (sd > distance) {\n        discard;\n    }\n\n    vec3 color = fColor.rgb * (1.0 - 0.25 * smoothstep(antialias, 0.0, outline));\n\n    if (uRenderMode == MODE_HIGH_PASS_2) {\n        if (sd < -antialias) {\n            discard;\n        }\n        fragColor = outputColor(vec4(color, smoothstep(0.0, antialias, abs(sd))));\n    } else {\n        fragColor = outputColor(vec4(color, 1.0));\n    }\n}\n";

// src/graph/nodes/plus/Plus.picking.fs.glsl
var Plus_picking_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\n// most of these come from this excellent post:\n// https://iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n\nfloat opRound(in float d, in float r) {\n    return d - r;\n}\n\nfloat opOnion(in float d, in float r) {\n    return abs(d) - r;\n}\n\nfloat sdCircle(in vec2 p, in float r ) {\n    return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(in vec2 p, in float r) {\n    const float k = sqrt(3.0);\n    p.x = abs(p.x) - r;\n    p.y = p.y + (r) / k;\n    if (p.x + k * p.y > 0.0) {\n        p = vec2(p.x-k*p.y,-k*p.x-p.y) / 2.0;\n    }\n    p.x -= clamp(p.x, -2.0 * r, 0.0);\n    return -length(p) * sign(p.y);\n}\n\nfloat sdPentagon(in vec2 p, in float r) {\n    const vec3 k = vec3(0.809016994, 0.587785252, 0.726542528);\n    p.y = -(p.y) * 1.25;\n    p.x = abs(p.x) * 1.25;\n    p -= 2.0 * min(dot(vec2(-k.x, k.y), p), 0.0) * vec2(-k.x, k.y);\n    p -= 2.0 * min(dot(vec2(k.x, k.y), p), 0.0) * vec2(k.x, k.y);\n    p -= vec2(clamp(p.x, -r*k.z, r*k.z), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdOctagon(in vec2 p, in float r) {\n    // pi/8: cos, sin, tan.\n    const vec3 k = vec3(\n        -0.9238795325,   // sqrt(2+sqrt(2))/2\n        0.3826834323,   // sqrt(2-sqrt(2))/2\n        0.4142135623\n    ); // sqrt(2)-1\n    // reflections\n    p = abs(p) * 1.1;\n    p -= 2.0 * min(dot(vec2(k.x,k.y), p), 0.0) * vec2(k.x,k.y);\n    p -= 2.0 * min(dot(vec2(-k.x,k.y), p), 0.0) * vec2(-k.x,k.y);\n    // Polygon side.\n    p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdStar(in vec2 p, in float r, in uint n, in float m) { // m=[2,n]\n    // these 4 lines can be precomputed for a given shape\n    float an = 3.141593 / float(n);\n    float en = 3.141593 / m;\n    vec2  acs = vec2(cos(an), sin(an));\n    vec2  ecs = vec2(cos(en), sin(en)); // ecs=vec2(0,1) and simplify, for regular polygon,\n\n    // reduce to first sector\n    float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n    p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n    // line sdf\n    p -= r * acs;\n    p += ecs * clamp(-dot(p, ecs), 0.0, r * acs.y / ecs.y);\n    return length(p) * sign(p.x);\n}\n\nfloat sdCross(in vec2 p, in float w, in float r) {\n    p = abs(p);\n    return length(p - min(p.x + p.y, w) * 0.5) - r;\n}\n\n// TODO: Precompute this, we always pass the same parameters tot his function (v, vec2(1.0, 0.3), 0.0)\nfloat sdPlus( in vec2 p, in vec2 b, float r ) {\n    p = abs(p);\n    p = (p.y > p.x) ? p.yx : p.xy;\n\n    vec2  q = p - b;\n    float k = max(q.y, q.x);\n    vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);\n\n    return sign(k)*length(max(w, 0.0)) + r;\n}\n\nfloat sdBox( in vec2 p, in vec2 b ) {\n    vec2 d = abs(p) - b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nflat in vec4 fColor;\nflat in float fPixelLength;\nin vec2 vFromCenter;\n\nout vec4 fragColor;\n\nvoid main() {\n    float sd = sdPlus(vFromCenter, vec2(1.0, 0.3), 0.0);\n    if (sd > 0.0) {\n        discard;\n    }\n    fragColor = fColor;\n}\n";

// src/graph/nodes/plus/Plus.ts
var Plus = class extends Circle {
  getDrawShaders() {
    const shaders = super.getDrawShaders();
    shaders.fs = Plus_fs_default;
    return shaders;
  }
  getPickingShaders() {
    const shaders = super.getPickingShaders();
    shaders.fs = Plus_picking_fs_default;
    return shaders;
  }
};

// src/graph/nodes/box/Box.fs.glsl
var Box_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\n// from https://en.wikipedia.org/wiki/SRGB#The_reverse_transformation\nfloat luminance_x(float x) {\n    return x <= 0.04045 ? x / 12.92 : pow((x + 0.055) / 1.055, 2.4);\n}\nfloat color_l(float l) {\n    return min(1.0, max(0.0, l <= 0.0031308 ? l * 12.92 : pow(l * 1.055, 1.0 / 2.4) - 0.055));\n}\n\n// from https://en.wikipedia.org/wiki/Relative_luminance\nfloat rgb2luminance(vec3 color) {\n    // relative luminance\n    // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    float r = luminance_x(color.r);\n    float g = luminance_x(color.g);\n    float b = luminance_x(color.b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n}\n\nvec3 setLuminance(vec3 color, float luminance) {\n    float r = luminance_x(color.r) * 0.2126;\n    float g = luminance_x(color.g) * 0.7152;\n    float b = luminance_x(color.b) * 0.0722;\n    float colorLuminance = r + g + b;\n\n    float tr = luminance * (r / colorLuminance);\n    float tg = luminance * (g / colorLuminance);\n    float tb = luminance * (b / colorLuminance);\n\n    float rr = color_l(tr / 0.2126);\n    float rg = color_l(tg / 0.7152);\n    float rb = color_l(tb / 0.0722);\n\n    return vec3(rr, rg, rb );\n}\n\n// https://www.w3.org/TR/WCAG20/#contrast-ratiodef\n// (L1 + 0.05) / (L2 + 0.05), where\n// - L1 is the relative luminance of the lighter of the colors, and\n// - L2 is the relative luminance of the darker of the colors.\nfloat findDarker(float luminance, float contrast) {\n    return (contrast * luminance) + (0.05 * contrast) - 0.05;\n}\nfloat findLighter(float luminance, float contrast) {\n    return (luminance + 0.05 - (0.05 * contrast)) / contrast;\n}\n\nvec3 contrastingColor(vec3 color, float contrast) {\n    float luminance = rgb2luminance(color);\n    float darker = findDarker(luminance, contrast);\n    float lighter = findLighter(luminance, contrast);\n\n    float targetLuminance;\n    if (darker < 0.0 || darker > 1.0) {\n        targetLuminance = lighter;\n    } else if (lighter < 0.0 || lighter > 1.0) {\n        targetLuminance = darker;\n    } else {\n        targetLuminance = abs(luminance - lighter) < abs(darker - luminance) ? lighter : darker;\n    }\n\n    return setLuminance(color, targetLuminance);\n}\n\nvec3 desaturateColor(vec3 color, float amount) {\n    float l = rgb2luminance(color);\n    vec3 gray = vec3(l, l, l);\n    return mix(color, gray, amount);\n}\n\nuniform vec4 uClearColor;\nuniform float uDesaturate;\nuniform float uBrightness;\nuniform float uFade;\nuniform float uAlpha;\n\nvec4 outputColor(vec4 color) {\n    // desaturate => fade => alpha\n    vec3 ret = mix(color.rgb, vec3(uBrightness + 1.0 / 2.0), abs(uBrightness));\n    ret = vec3(desaturateColor(ret, uDesaturate));\n    ret = mix(ret, uClearColor.rgb, uFade);\n    return vec4(ret, color.a * uAlpha);\n}\n\n#define MODE_DRAFT 0u\n#define MODE_MEDIUM 1u\n#define MODE_HIGH 2u\n#define MODE_HIGH_PASS_1 3u\n#define MODE_HIGH_PASS_2 4u\n#define MODE_PICKING 5u\n\n// most of these come from this excellent post:\n// https://iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n\nfloat opRound(in float d, in float r) {\n    return d - r;\n}\n\nfloat opOnion(in float d, in float r) {\n    return abs(d) - r;\n}\n\nfloat sdCircle(in vec2 p, in float r ) {\n    return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(in vec2 p, in float r) {\n    const float k = sqrt(3.0);\n    p.x = abs(p.x) - r;\n    p.y = p.y + (r) / k;\n    if (p.x + k * p.y > 0.0) {\n        p = vec2(p.x-k*p.y,-k*p.x-p.y) / 2.0;\n    }\n    p.x -= clamp(p.x, -2.0 * r, 0.0);\n    return -length(p) * sign(p.y);\n}\n\nfloat sdPentagon(in vec2 p, in float r) {\n    const vec3 k = vec3(0.809016994, 0.587785252, 0.726542528);\n    p.y = -(p.y) * 1.25;\n    p.x = abs(p.x) * 1.25;\n    p -= 2.0 * min(dot(vec2(-k.x, k.y), p), 0.0) * vec2(-k.x, k.y);\n    p -= 2.0 * min(dot(vec2(k.x, k.y), p), 0.0) * vec2(k.x, k.y);\n    p -= vec2(clamp(p.x, -r*k.z, r*k.z), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdOctagon(in vec2 p, in float r) {\n    // pi/8: cos, sin, tan.\n    const vec3 k = vec3(\n        -0.9238795325,   // sqrt(2+sqrt(2))/2\n        0.3826834323,   // sqrt(2-sqrt(2))/2\n        0.4142135623\n    ); // sqrt(2)-1\n    // reflections\n    p = abs(p) * 1.1;\n    p -= 2.0 * min(dot(vec2(k.x,k.y), p), 0.0) * vec2(k.x,k.y);\n    p -= 2.0 * min(dot(vec2(-k.x,k.y), p), 0.0) * vec2(-k.x,k.y);\n    // Polygon side.\n    p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdStar(in vec2 p, in float r, in uint n, in float m) { // m=[2,n]\n    // these 4 lines can be precomputed for a given shape\n    float an = 3.141593 / float(n);\n    float en = 3.141593 / m;\n    vec2  acs = vec2(cos(an), sin(an));\n    vec2  ecs = vec2(cos(en), sin(en)); // ecs=vec2(0,1) and simplify, for regular polygon,\n\n    // reduce to first sector\n    float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n    p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n    // line sdf\n    p -= r * acs;\n    p += ecs * clamp(-dot(p, ecs), 0.0, r * acs.y / ecs.y);\n    return length(p) * sign(p.x);\n}\n\nfloat sdCross(in vec2 p, in float w, in float r) {\n    p = abs(p);\n    return length(p - min(p.x + p.y, w) * 0.5) - r;\n}\n\n// TODO: Precompute this, we always pass the same parameters tot his function (v, vec2(1.0, 0.3), 0.0)\nfloat sdPlus( in vec2 p, in vec2 b, float r ) {\n    p = abs(p);\n    p = (p.y > p.x) ? p.yx : p.xy;\n\n    vec2  q = p - b;\n    float k = max(q.y, q.x);\n    vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);\n\n    return sign(k)*length(max(w, 0.0)) + r;\n}\n\nfloat sdBox( in vec2 p, in vec2 b ) {\n    vec2 d = abs(p) - b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nuniform float uPixelRatio;\nuniform uint uRenderMode;\nuniform float uOutline;\n\nflat in vec4 fColor;\nflat in float fPixelLength;\nin vec2 vFromCenter;\n\nout vec4 fragColor;\n\nvoid main() {\n    float antialias = fPixelLength * 1.5;\n    float sd = sdBox(vFromCenter, vec2(1.0, 1.0));\n    float outline = opOnion(sd, min(0.15, fPixelLength * uOutline * uPixelRatio));\n    float modeDistance = uRenderMode == MODE_HIGH_PASS_1 ? -antialias : -antialias * 0.5;\n    float distance = uRenderMode == MODE_HIGH_PASS_2 ? 0.0 : modeDistance;\n\n    if (sd > distance) {\n        discard;\n    }\n\n    vec3 color = fColor.rgb * (1.0 - 0.25 * smoothstep(antialias, 0.0, outline));\n\n    if (uRenderMode == MODE_HIGH_PASS_2) {\n        if (sd < -antialias) {\n            discard;\n        }\n        fragColor = outputColor(vec4(color, smoothstep(0.0, antialias, abs(sd))));\n    } else {\n        fragColor = outputColor(vec4(color, 1.0));\n    }\n}\n";

// src/graph/nodes/box/Box.picking.fs.glsl
var Box_picking_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\n// most of these come from this excellent post:\n// https://iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n\nfloat opRound(in float d, in float r) {\n    return d - r;\n}\n\nfloat opOnion(in float d, in float r) {\n    return abs(d) - r;\n}\n\nfloat sdCircle(in vec2 p, in float r ) {\n    return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(in vec2 p, in float r) {\n    const float k = sqrt(3.0);\n    p.x = abs(p.x) - r;\n    p.y = p.y + (r) / k;\n    if (p.x + k * p.y > 0.0) {\n        p = vec2(p.x-k*p.y,-k*p.x-p.y) / 2.0;\n    }\n    p.x -= clamp(p.x, -2.0 * r, 0.0);\n    return -length(p) * sign(p.y);\n}\n\nfloat sdPentagon(in vec2 p, in float r) {\n    const vec3 k = vec3(0.809016994, 0.587785252, 0.726542528);\n    p.y = -(p.y) * 1.25;\n    p.x = abs(p.x) * 1.25;\n    p -= 2.0 * min(dot(vec2(-k.x, k.y), p), 0.0) * vec2(-k.x, k.y);\n    p -= 2.0 * min(dot(vec2(k.x, k.y), p), 0.0) * vec2(k.x, k.y);\n    p -= vec2(clamp(p.x, -r*k.z, r*k.z), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdOctagon(in vec2 p, in float r) {\n    // pi/8: cos, sin, tan.\n    const vec3 k = vec3(\n        -0.9238795325,   // sqrt(2+sqrt(2))/2\n        0.3826834323,   // sqrt(2-sqrt(2))/2\n        0.4142135623\n    ); // sqrt(2)-1\n    // reflections\n    p = abs(p) * 1.1;\n    p -= 2.0 * min(dot(vec2(k.x,k.y), p), 0.0) * vec2(k.x,k.y);\n    p -= 2.0 * min(dot(vec2(-k.x,k.y), p), 0.0) * vec2(-k.x,k.y);\n    // Polygon side.\n    p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdStar(in vec2 p, in float r, in uint n, in float m) { // m=[2,n]\n    // these 4 lines can be precomputed for a given shape\n    float an = 3.141593 / float(n);\n    float en = 3.141593 / m;\n    vec2  acs = vec2(cos(an), sin(an));\n    vec2  ecs = vec2(cos(en), sin(en)); // ecs=vec2(0,1) and simplify, for regular polygon,\n\n    // reduce to first sector\n    float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n    p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n    // line sdf\n    p -= r * acs;\n    p += ecs * clamp(-dot(p, ecs), 0.0, r * acs.y / ecs.y);\n    return length(p) * sign(p.x);\n}\n\nfloat sdCross(in vec2 p, in float w, in float r) {\n    p = abs(p);\n    return length(p - min(p.x + p.y, w) * 0.5) - r;\n}\n\n// TODO: Precompute this, we always pass the same parameters tot his function (v, vec2(1.0, 0.3), 0.0)\nfloat sdPlus( in vec2 p, in vec2 b, float r ) {\n    p = abs(p);\n    p = (p.y > p.x) ? p.yx : p.xy;\n\n    vec2  q = p - b;\n    float k = max(q.y, q.x);\n    vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);\n\n    return sign(k)*length(max(w, 0.0)) + r;\n}\n\nfloat sdBox( in vec2 p, in vec2 b ) {\n    vec2 d = abs(p) - b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nflat in vec4 fColor;\nflat in float fPixelLength;\nin vec2 vFromCenter;\n\nout vec4 fragColor;\n\nvoid main() {\n    float sd = sdBox(vFromCenter, vec2(1.0, 1.0));\n    if (sd > 0.0) {\n        discard;\n    }\n    fragColor = fColor;\n}\n";

// src/graph/nodes/box/Box.ts
var Box = class extends Circle {
  getDrawShaders() {
    const shaders = super.getDrawShaders();
    shaders.fs = Box_fs_default;
    return shaders;
  }
  getPickingShaders() {
    const shaders = super.getPickingShaders();
    shaders.fs = Box_picking_fs_default;
    return shaders;
  }
};

// src/graph/nodes/custom/Custom.data.vs.glsl
var Custom_data_vs_default = "#version 300 es\n\nlayout(location=0) in uint aPositionIndex;\nlayout(location=1) in uint aColor;\nlayout(location=2) in uint aTexture;\nlayout(location=3) in float aRadius; // optional atthe end\n\nuniform sampler2D uGraphPoints;\nuniform bool uUsePointRadius;\n\nflat out uint fPoint;\nflat out float fRadius;\nflat out uint fColor;\nflat out uint fTexture;\n\nprecision lowp usampler2D;\n#define GLSLIFY 1\n\nvec4 valueForIndex(sampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0);\n}\n\nuvec4 uvalueForIndex(usampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0);\n}\n\nuint uivalueForIndex(usampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0)[0];\n}\n\nvoid main() {\n    vec4 value = valueForIndex(uGraphPoints, int(aPositionIndex));\n    if (uUsePointRadius) {\n        fRadius = value.w;\n    } else {\n        fRadius = aRadius;\n    }\n\n    fPoint = aPositionIndex;\n    fColor = aColor;\n    fTexture = aTexture;\n}\n";

// src/graph/nodes/custom/Custom.vs.glsl
var Custom_vs_default = '#version 300 es\n\nlayout(location=0) in vec3 aVertex;\nlayout(location=1) in uint iPositionIndex;\nlayout(location=2) in float iRadius;\nlayout(location=3) in uint iColor;\nlayout(location=4) in uint iTexture;\nlayout(location=5) in uvec4 iPickingColor;\n\n//layout(std140) uniform RenderUniforms {\n    uniform mat4 uViewMatrix;\n    uniform mat4 uSceneMatrix;\n    uniform mat4 uProjectionMatrix;\n    uniform vec2 uViewportSize;\n    uniform float uPixelRatio;\n    uniform sampler2D uGraphPoints;\n    uniform sampler2D uColorPalette;\n    uniform sampler2D uTexAtlas;\n    uniform uint uCameraMode; // 0 = 2D; 1 = 3D;\n//};\n\nuniform bool uPixelSizing;\nuniform bool uBillboard;\n\nuniform bool uPicking;\n\nflat out vec4 fColor;\nflat out uint fTexture;\nflat out vec2 fTextureAtlasSize;\nflat out float fPixelLength;\nout vec2 vFromCenter;\n\nprecision lowp usampler2D;\n#define GLSLIFY 1\n\nvec4 valueForIndex(sampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0);\n}\n\nuvec4 uvalueForIndex(usampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0);\n}\n\nuint uivalueForIndex(usampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0)[0];\n}\n\nvoid main() {\n    // claculate the offset matrix, done as a matrix to be able to compute "billboard" vertices in the shader\n    mat4 offsetMatrix = mat4(1.0);\n    offsetMatrix[3] = vec4(valueForIndex(uGraphPoints, int(iPositionIndex)).xyz, 1.0);\n\n    // reset the rotation of the model-view matrix\n    mat4 modelMatrix = uViewMatrix * uSceneMatrix * offsetMatrix;\n    mat4 lookAtMatrix = mat4(modelMatrix);\n    if (uCameraMode == 1u) {\n        lookAtMatrix[0] = vec4(1.0, 0.0, 0.0, lookAtMatrix[0][3]);\n        lookAtMatrix[1] = vec4(0.0, 1.0, 0.0, lookAtMatrix[1][3]);\n        lookAtMatrix[2] = vec4(0.0, 0.0, 1.0, lookAtMatrix[2][3]);\n    }\n\n    // the on-screen center of this node\n    vec4 quadCenter = uProjectionMatrix * lookAtMatrix * vec4(0.0, 0.0, 0.0, 1.0);\n    vec2 screenQuadCenter = quadCenter.xy / quadCenter.w;\n\n    // the on-screen position of a side of this quad\n    vec4 quadSide = uProjectionMatrix * lookAtMatrix * vec4(iRadius, 0.0, 0.0, 1.0);\n    vec2 screenQuadSide = quadSide.xy / quadSide.w;\n\n    // compute the pixel radius of this node for a size of 1 in world coordinates\n    float pixelRadius = max(1.0, length((screenQuadSide - screenQuadCenter) * uViewportSize * 0.5));\n\n    // calculate the desired pixel radius for the size mode\n    float desiredPixelRadius = (uPixelSizing ? iRadius : pixelRadius);\n\n    // calculate the pixel radius multiplier needed to acomplish the desired pixel radius\n    float pixelRadiusMult = desiredPixelRadius / pixelRadius;\n\n    // calculate the render matrix\n    mat4 renderMatrix = uBillboard ? uProjectionMatrix * lookAtMatrix : uProjectionMatrix * modelMatrix;\n\n    // compute the vertex position and its screen position\n    vec4 worldVertex = renderMatrix * vec4(aVertex * iRadius * pixelRadiusMult, 1.0);\n\n    // send the render color to the fragment shader\n    fColor = uPicking ? vec4(iPickingColor) / 255.0 : valueForIndex(uColorPalette, int(iColor));\n    // send the texture index to the fragment shader\n    fTexture = iTexture;\n    // send the size of the char texture to the fragment shader\n    fTextureAtlasSize = vec2(textureSize(uTexAtlas, 0));\n    // send the normalized length of a single pixel to the fragment shader\n    fPixelLength = 1.0 / desiredPixelRadius;\n    // send the normalized distance from the center to the fragment shader\n    vFromCenter = aVertex.xy;\n\n    // set the render vertex location\n    gl_Position = worldVertex;\n}\n';

// src/graph/nodes/custom/Custom.fs.glsl
var Custom_fs_default = "#version 300 es\nprecision highp float;\n\nprecision lowp usampler2D;\n#define GLSLIFY 1\n\nvec4 valueForIndex(sampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0);\n}\n\nuvec4 uvalueForIndex(usampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0);\n}\n\nuint uivalueForIndex(usampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0)[0];\n}\n\n// from https://en.wikipedia.org/wiki/SRGB#The_reverse_transformation\nfloat luminance_x(float x) {\n    return x <= 0.04045 ? x / 12.92 : pow((x + 0.055) / 1.055, 2.4);\n}\nfloat color_l(float l) {\n    return min(1.0, max(0.0, l <= 0.0031308 ? l * 12.92 : pow(l * 1.055, 1.0 / 2.4) - 0.055));\n}\n\n// from https://en.wikipedia.org/wiki/Relative_luminance\nfloat rgb2luminance(vec3 color) {\n    // relative luminance\n    // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    float r = luminance_x(color.r);\n    float g = luminance_x(color.g);\n    float b = luminance_x(color.b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n}\n\nvec3 setLuminance(vec3 color, float luminance) {\n    float r = luminance_x(color.r) * 0.2126;\n    float g = luminance_x(color.g) * 0.7152;\n    float b = luminance_x(color.b) * 0.0722;\n    float colorLuminance = r + g + b;\n\n    float tr = luminance * (r / colorLuminance);\n    float tg = luminance * (g / colorLuminance);\n    float tb = luminance * (b / colorLuminance);\n\n    float rr = color_l(tr / 0.2126);\n    float rg = color_l(tg / 0.7152);\n    float rb = color_l(tb / 0.0722);\n\n    return vec3(rr, rg, rb );\n}\n\n// https://www.w3.org/TR/WCAG20/#contrast-ratiodef\n// (L1 + 0.05) / (L2 + 0.05), where\n// - L1 is the relative luminance of the lighter of the colors, and\n// - L2 is the relative luminance of the darker of the colors.\nfloat findDarker(float luminance, float contrast) {\n    return (contrast * luminance) + (0.05 * contrast) - 0.05;\n}\nfloat findLighter(float luminance, float contrast) {\n    return (luminance + 0.05 - (0.05 * contrast)) / contrast;\n}\n\nvec3 contrastingColor(vec3 color, float contrast) {\n    float luminance = rgb2luminance(color);\n    float darker = findDarker(luminance, contrast);\n    float lighter = findLighter(luminance, contrast);\n\n    float targetLuminance;\n    if (darker < 0.0 || darker > 1.0) {\n        targetLuminance = lighter;\n    } else if (lighter < 0.0 || lighter > 1.0) {\n        targetLuminance = darker;\n    } else {\n        targetLuminance = abs(luminance - lighter) < abs(darker - luminance) ? lighter : darker;\n    }\n\n    return setLuminance(color, targetLuminance);\n}\n\nvec3 desaturateColor(vec3 color, float amount) {\n    float l = rgb2luminance(color);\n    vec3 gray = vec3(l, l, l);\n    return mix(color, gray, amount);\n}\n\nuniform vec4 uClearColor;\nuniform float uDesaturate;\nuniform float uBrightness;\nuniform float uFade;\nuniform float uAlpha;\n\nvec4 outputColor(vec4 color) {\n    // desaturate => fade => alpha\n    vec3 ret = mix(color.rgb, vec3(uBrightness + 1.0 / 2.0), abs(uBrightness));\n    ret = vec3(desaturateColor(ret, uDesaturate));\n    ret = mix(ret, uClearColor.rgb, uFade);\n    return vec4(ret, color.a * uAlpha);\n}\n\n#define MODE_DRAFT 0u\n#define MODE_MEDIUM 1u\n#define MODE_HIGH 2u\n#define MODE_HIGH_PASS_1 3u\n#define MODE_HIGH_PASS_2 4u\n#define MODE_PICKING 5u\n\n// most of these come from this excellent post:\n// https://iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n\nfloat opRound(in float d, in float r) {\n    return d - r;\n}\n\nfloat opOnion(in float d, in float r) {\n    return abs(d) - r;\n}\n\nfloat sdCircle(in vec2 p, in float r ) {\n    return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(in vec2 p, in float r) {\n    const float k = sqrt(3.0);\n    p.x = abs(p.x) - r;\n    p.y = p.y + (r) / k;\n    if (p.x + k * p.y > 0.0) {\n        p = vec2(p.x-k*p.y,-k*p.x-p.y) / 2.0;\n    }\n    p.x -= clamp(p.x, -2.0 * r, 0.0);\n    return -length(p) * sign(p.y);\n}\n\nfloat sdPentagon(in vec2 p, in float r) {\n    const vec3 k = vec3(0.809016994, 0.587785252, 0.726542528);\n    p.y = -(p.y) * 1.25;\n    p.x = abs(p.x) * 1.25;\n    p -= 2.0 * min(dot(vec2(-k.x, k.y), p), 0.0) * vec2(-k.x, k.y);\n    p -= 2.0 * min(dot(vec2(k.x, k.y), p), 0.0) * vec2(k.x, k.y);\n    p -= vec2(clamp(p.x, -r*k.z, r*k.z), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdOctagon(in vec2 p, in float r) {\n    // pi/8: cos, sin, tan.\n    const vec3 k = vec3(\n        -0.9238795325,   // sqrt(2+sqrt(2))/2\n        0.3826834323,   // sqrt(2-sqrt(2))/2\n        0.4142135623\n    ); // sqrt(2)-1\n    // reflections\n    p = abs(p) * 1.1;\n    p -= 2.0 * min(dot(vec2(k.x,k.y), p), 0.0) * vec2(k.x,k.y);\n    p -= 2.0 * min(dot(vec2(-k.x,k.y), p), 0.0) * vec2(-k.x,k.y);\n    // Polygon side.\n    p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdStar(in vec2 p, in float r, in uint n, in float m) { // m=[2,n]\n    // these 4 lines can be precomputed for a given shape\n    float an = 3.141593 / float(n);\n    float en = 3.141593 / m;\n    vec2  acs = vec2(cos(an), sin(an));\n    vec2  ecs = vec2(cos(en), sin(en)); // ecs=vec2(0,1) and simplify, for regular polygon,\n\n    // reduce to first sector\n    float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n    p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n    // line sdf\n    p -= r * acs;\n    p += ecs * clamp(-dot(p, ecs), 0.0, r * acs.y / ecs.y);\n    return length(p) * sign(p.x);\n}\n\nfloat sdCross(in vec2 p, in float w, in float r) {\n    p = abs(p);\n    return length(p - min(p.x + p.y, w) * 0.5) - r;\n}\n\n// TODO: Precompute this, we always pass the same parameters tot his function (v, vec2(1.0, 0.3), 0.0)\nfloat sdPlus( in vec2 p, in vec2 b, float r ) {\n    p = abs(p);\n    p = (p.y > p.x) ? p.yx : p.xy;\n\n    vec2  q = p - b;\n    float k = max(q.y, q.x);\n    vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);\n\n    return sign(k)*length(max(w, 0.0)) + r;\n}\n\nfloat sdBox( in vec2 p, in vec2 b ) {\n    vec2 d = abs(p) - b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nuniform float uPixelRatio;\nuniform uint uRenderMode;\nuniform float uOutline;\nuniform usampler2D uTexBoxes;\nuniform sampler2D uTexAtlas;\n\nflat in vec4 fColor;\nflat in uint fTexture;\nflat in vec2 fTextureAtlasSize;\nflat in float fPixelLength;\nin vec2 vFromCenter;\n\nout vec4 fragColor;\n\nvoid main() {\n    float antialias = fPixelLength * 1.5;\n    float sd = sdBox(vFromCenter, vec2(1.0, 1.0));\n    float modeDistance = uRenderMode == MODE_HIGH_PASS_1 ? -antialias : -antialias * 0.5;\n    float distance = uRenderMode == MODE_HIGH_PASS_2 ? 0.0 : modeDistance;\n\n    if (sd > distance) {\n        discard;\n    }\n\n    vec2 mult = (vFromCenter + 1.) * 0.5;\n    vec4 textureBox = vec4(uvalueForIndex(uTexBoxes, int(fTexture)));\n    vec4 textureUV = textureBox / vec4(fTextureAtlasSize, fTextureAtlasSize);\n    vec2 uv = vec2(textureUV[0] + textureUV[2] * mult[0], textureUV[1] + textureUV[3] * mult[1]);\n    vec4 texPixel = texture(uTexAtlas, uv);\n\n    if (texPixel.a == 0.) {\n        discard;\n    }\n\n    // float texPixelLen = length(texPixel.rgba) / sqrt(4.);\n    vec4 texColor = mix(uClearColor, fColor, texPixel.a);\n    fragColor = outputColor(texColor);\n}\n";

// src/graph/nodes/custom/Custom.ts
var kCustomDataTypes = {
  point: picogl_default.UNSIGNED_INT,
  color: picogl_default.UNSIGNED_INT,
  texture: picogl_default.UNSIGNED_INT,
  radius: picogl_default.FLOAT
};
var kGLCustomNodeTypes = {
  position: picogl_default.UNSIGNED_INT,
  radius: picogl_default.FLOAT,
  color: picogl_default.UNSIGNED_INT,
  texture: picogl_default.UNSIGNED_INT
};
var Custom = class extends Circle {
  initialize(context, points2, data, mappings2, pickingManager) {
    super.initialize(context, points2, data, mappings2, pickingManager);
    this.verticesVBO = context.createVertexBuffer(picogl_default.FLOAT, 2, new Float32Array([
      -1,
      -1,
      1,
      -1,
      -1,
      1,
      1,
      1
    ]));
    this.pickingHandler = this.handlePickingEvent.bind(this);
    this.pickingColors = this.pickingManager.allocatePickingColors(data.length);
    this.pickingVBO = context.createVertexBuffer(picogl_default.UNSIGNED_BYTE, 4, this.pickingColors.colors);
    this.nodesVAO = context.createVertexArray().vertexAttributeBuffer(0, this.verticesVBO);
    this.configureTargetVAO(this.nodesVAO);
    this.nodesVAO.instanceAttributeBuffer(5, this.pickingVBO);
    const shaders = this.getDrawShaders();
    this.program = context.createProgram(shaders.vs, shaders.fs);
    this.drawCall = context.createDrawCall(this.program, this.nodesVAO).primitive(picogl_default.TRIANGLE_STRIP);
    const pickingShaders = this.getPickingShaders();
    this.pickingProgram = context.createProgram(pickingShaders.vs, pickingShaders.fs);
    this.pickingDrawCall = context.createDrawCall(this.pickingProgram, this.nodesVAO).primitive(picogl_default.TRIANGLE_STRIP);
    const computedMappings = this.computeMappings(mappings2);
    this.usePointRadius = computedMappings.radius === null;
    this.compute(context, {
      uGraphPoints: this.dataTexture,
      uUsePointRadius: this.usePointRadius
    });
    this.pickingManager.on(PickingManager.events.hoverOn, this.pickingHandler);
    this.pickingManager.on(PickingManager.events.hoverOff, this.pickingHandler);
    this.pickingManager.on(PickingManager.events.click, this.pickingHandler);
  }
  getGLSourceTypes() {
    return kCustomDataTypes;
  }
  getDataShader() {
    return {
      vs: Custom_data_vs_default,
      varyings: ["fPoint", "fRadius", "fColor", "fTexture"]
    };
  }
  getGLTargetTypes() {
    return kGLCustomNodeTypes;
  }
  getDrawShaders() {
    return {
      vs: Custom_vs_default,
      fs: Custom_fs_default
    };
  }
  getPickingShaders() {
    const shaders = super.getPickingShaders();
    shaders.fs = Box_picking_fs_default;
    return shaders;
  }
};

// src/graph/nodes/mod.ts
var types = {
  Circle,
  Ring,
  Triangle,
  Pentagon,
  Octagon,
  Star,
  Cross,
  Plus,
  Box,
  Custom
};

// src/graph/edges/mod.ts
var mod_exports5 = {};
__export(mod_exports5, {
  ClusterBundle: () => ClusterBundle,
  CurvedPath: () => CurvedPath,
  Dashed: () => Dashed,
  Edges: () => Edges,
  Gravity: () => Gravity,
  Straight: () => Straight,
  StraightPath: () => StraightPath,
  kBasicEdgeDataTypes: () => kBasicEdgeDataTypes,
  kBasicEdgeMappings: () => kBasicEdgeMappings,
  kClusterBundleEdgeDataTypes: () => kClusterBundleEdgeDataTypes,
  kClusterBundleEdgeMappings: () => kClusterBundleEdgeMappings,
  kCurvedPathEdgeDataTypes: () => kCurvedPathEdgeDataTypes,
  kCurvedPathEdgeMappings: () => kCurvedPathEdgeMappings,
  kGLClusterBundleEdgeTypes: () => kGLClusterBundleEdgeTypes,
  kGLCurvedPathEdgeTypes: () => kGLCurvedPathEdgeTypes,
  kGLGravityEdgeTypes: () => kGLGravityEdgeTypes,
  kGLStraightEdgeTypes: () => kGLStraightEdgeTypes,
  kGLStraightPathEdgeTypes: () => kGLStraightPathEdgeTypes,
  kStraightPathEdgeDataTypes: () => kStraightPathEdgeDataTypes,
  types: () => types2
});

// src/graph/edges/straight/Straight.vs.glsl
var Straight_vs_default = "#version 300 es\n\nlayout(location=0) in vec3 aVertex;\nlayout(location=1) in uint iPointA;\nlayout(location=2) in uint iPointB;\nlayout(location=3) in uint iColorA;\nlayout(location=4) in uint iColorB;\nlayout(location=5) in float iWidth;\nlayout(location=6) in uvec4 iPickingColor;\n\nuniform bool uPicking;\n\nuniform mat4 uViewMatrix;\nuniform mat4 uSceneMatrix;\nuniform mat4 uProjectionMatrix;\nuniform vec2 uViewportSize;\nuniform float uPixelRatio;\nuniform float uPickingWidth;\nuniform sampler2D uGraphPoints;\nuniform sampler2D uColorPalette;\n\nflat out float fLineWidth;\nflat out vec4 fPickingColor;\nout vec3 vColor;\nout vec2 vProjectedPosition;\nout float vProjectedW;\n\nprecision lowp usampler2D;\n#define GLSLIFY 1\n\nvec4 valueForIndex(sampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0);\n}\n\nuvec4 uvalueForIndex(usampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0);\n}\n\nuint uivalueForIndex(usampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0)[0];\n}\n\nvoid main() {\n    fPickingColor = uPicking ? vec4(iPickingColor) / 255.0 : vec4(0.0);\n\n    vec4 pointA = valueForIndex(uGraphPoints, int(iPointA));\n    vec4 pointB = valueForIndex(uGraphPoints, int(iPointB));\n\n    vec3 direction = normalize(pointB.xyz - pointA.xyz);\n\n    vec3 offsetA = pointA.xyz + direction * pointA[3];\n    vec3 offsetB = pointB.xyz - direction * pointB[3];\n\n    float multA = aVertex.y;\n    float multB = 1.0 - aVertex.y;\n\n    vec4 colorA = valueForIndex(uColorPalette, int(iColorA));\n    vec4 colorB = valueForIndex(uColorPalette, int(iColorB));\n\n    vColor = colorA.rgb * multA + colorB.rgb * multB;\n\n    mat4 renderMatrix = uProjectionMatrix * uViewMatrix * uSceneMatrix;\n\n    vec4 aProjected = renderMatrix * vec4(offsetA, 1.0);\n    vec2 aScreen = aProjected.xy / aProjected.w * uViewportSize * 0.5;\n\n    vec4 bProjected = renderMatrix * vec4(offsetB, 1.0);\n    vec2 bScreen = bProjected.xy / bProjected.w * uViewportSize * 0.5;\n\n    vec2 screenDirection = normalize(bScreen - aScreen);\n    vec2 perp = vec2(-screenDirection.y, screenDirection.x);\n\n    fLineWidth = (uPicking ? iWidth * uPickingWidth : iWidth) * uPixelRatio;\n    float offsetWidth = fLineWidth + 0.5;\n    vec4 position = aProjected * multA + bProjected * multB;\n    vec4 offset = vec4(((aVertex.x * perp * offsetWidth) / uViewportSize) * position.w, 0.0, 0.0);\n    gl_Position = position + offset;\n\n    vProjectedPosition = position.xy;\n    vProjectedW = position.w;\n}\n";

// src/graph/edges/straight/Straight.fs.glsl
var Straight_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\n// from https://en.wikipedia.org/wiki/SRGB#The_reverse_transformation\nfloat luminance_x_1540259130(float x) {\n    return x <= 0.04045 ? x / 12.92 : pow((x + 0.055) / 1.055, 2.4);\n}\nfloat color_l_1540259130(float l) {\n    return min(1.0, max(0.0, l <= 0.0031308 ? l * 12.92 : pow(l * 1.055, 1.0 / 2.4) - 0.055));\n}\n\n// from https://en.wikipedia.org/wiki/Relative_luminance\nfloat rgb2luminance(vec3 color) {\n    // relative luminance\n    // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    float r = luminance_x_1540259130(color.r);\n    float g = luminance_x_1540259130(color.g);\n    float b = luminance_x_1540259130(color.b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n}\n\nvec3 setLuminance(vec3 color, float luminance) {\n    float r = luminance_x_1540259130(color.r) * 0.2126;\n    float g = luminance_x_1540259130(color.g) * 0.7152;\n    float b = luminance_x_1540259130(color.b) * 0.0722;\n    float colorLuminance = r + g + b;\n\n    float tr = luminance * (r / colorLuminance);\n    float tg = luminance * (g / colorLuminance);\n    float tb = luminance * (b / colorLuminance);\n\n    float rr = color_l_1540259130(tr / 0.2126);\n    float rg = color_l_1540259130(tg / 0.7152);\n    float rb = color_l_1540259130(tb / 0.0722);\n\n    return vec3(rr, rg, rb );\n}\n\n// https://www.w3.org/TR/WCAG20/#contrast-ratiodef\n// (L1 + 0.05) / (L2 + 0.05), where\n// - L1 is the relative luminance of the lighter of the colors, and\n// - L2 is the relative luminance of the darker of the colors.\nfloat findDarker(float luminance, float contrast) {\n    return (contrast * luminance) + (0.05 * contrast) - 0.05;\n}\nfloat findLighter(float luminance, float contrast) {\n    return (luminance + 0.05 - (0.05 * contrast)) / contrast;\n}\n\nvec3 contrastingColor(vec3 color, float contrast) {\n    float luminance = rgb2luminance(color);\n    float darker = findDarker(luminance, contrast);\n    float lighter = findLighter(luminance, contrast);\n\n    float targetLuminance;\n    if (darker < 0.0 || darker > 1.0) {\n        targetLuminance = lighter;\n    } else if (lighter < 0.0 || lighter > 1.0) {\n        targetLuminance = darker;\n    } else {\n        targetLuminance = abs(luminance - lighter) < abs(darker - luminance) ? lighter : darker;\n    }\n\n    return setLuminance(color, targetLuminance);\n}\n\nvec3 desaturateColor(vec3 color, float amount) {\n    float l = rgb2luminance(color);\n    vec3 gray = vec3(l, l, l);\n    return mix(color, gray, amount);\n}\n\nuniform vec4 uClearColor;\nuniform float uDesaturate;\nuniform float uBrightness;\nuniform float uFade;\nuniform float uAlpha;\n\nvec4 outputColor(vec4 color) {\n    // desaturate => fade => alpha\n    vec3 ret = mix(color.rgb, vec3(uBrightness + 1.0 / 2.0), abs(uBrightness));\n    ret = vec3(desaturateColor(ret, uDesaturate));\n    ret = mix(ret, uClearColor.rgb, uFade);\n    return vec4(ret, color.a * uAlpha);\n}\n\n#define MODE_DRAFT 0u\n#define MODE_MEDIUM 1u\n#define MODE_HIGH 2u\n#define MODE_HIGH_PASS_1 3u\n#define MODE_HIGH_PASS_2 4u\n#define MODE_PICKING 5u\n\n#define ONE_ALPHA 0.00392156862 // 1.0 / 255.0\n\nfloat lineAlpha(vec2 position, float w, vec2 viewportSize, float lineWidth) {\n    vec2 lineCenter = ((position / w) * 0.5 + 0.5) * viewportSize;\n    float distOffset = (lineWidth - 1.0) * 0.5;\n    float dist = smoothstep(lineWidth * 0.5 - 0.5, lineWidth * 0.5 + 0.5, distance(lineCenter, gl_FragCoord.xy));\n    return (1.0 - dist);\n}\n\nvec4 lineColor(vec3 color, vec2 position, float w, vec2 viewportSize, uint mode, float lineWidth) {\n    if (mode < MODE_HIGH_PASS_1) {\n        return outputColor(vec4(color, 1.0));\n    }\n\n    float a = lineAlpha(position, w, viewportSize, lineWidth);\n\n    if (mode == MODE_HIGH_PASS_1) {\n        if (a == 1.0) {\n            return outputColor(vec4(color, a));\n        } else {\n            discard;\n        }\n    }\n\n    // Possible optimization.\n    // Edges run into fill rate issues because too many of them overlap, discarging pixels below a certain alpha\n    // threshold might help speed things up a bit.\n    if (a < ONE_ALPHA) {\n        discard;\n    }\n\n    return outputColor(vec4(color, a));\n}\n\nuniform vec2 uViewportSize;\nuniform uint uRenderMode;\n\nflat in float fLineWidth;\nin vec3 vColor;\nin vec2 vProjectedPosition;\nin float vProjectedW;\n\nout vec4 fragColor;\n\nvoid main() {\n    fragColor = lineColor(vColor, vProjectedPosition, vProjectedW, uViewportSize, uRenderMode, fLineWidth);\n}\n";

// src/graph/edges/straight/Straight.picking.fs.glsl
var Straight_picking_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\nflat in vec4 fPickingColor;\n\nout vec4 fragColor;\n\nvoid main() {\n    fragColor = fPickingColor;\n}\n";

// src/graph/edges/straight/Straight.data.vs.glsl
var Straight_data_vs_default = "#version 300 es\n#define GLSLIFY 1\n\nlayout(location=0) in uint aSourceIndex;\nlayout(location=1) in uint aTargetIndex;\nlayout(location=2) in uint aSourceColor;\nlayout(location=3) in uint aTargetColor;\nlayout(location=4) in float aWidth;\n\nflat out uint fSource;\nflat out uint fTarget;\nflat out uint fSourceColor;\nflat out uint fTargetColor;\nflat out float fWidth;\n\nvoid main() {\n    fSource = aSourceIndex;\n    fTarget = aTargetIndex;\n    fSourceColor = aSourceColor;\n    fTargetColor = aTargetColor;\n    fWidth = aWidth;\n}\n";

// src/graph/edges/Edges.ts
var kBasicEdgeMappings = {
  id: (entry, i4) => "id" in entry ? entry.id : i4,
  source: (entry) => entry.source,
  target: (entry) => entry.target,
  sourceColor: (entry) => "sourceColor" in entry ? entry.sourceColor : 0,
  targetColor: (entry) => "targetColor" in entry ? entry.targetColor : 0,
  width: (entry) => {
    var _a6;
    return (_a6 = entry.width) != null ? _a6 : 1.5;
  }
};
var kBasicEdgeDataTypes = {
  source: picogl_default.UNSIGNED_INT,
  target: picogl_default.UNSIGNED_INT,
  sourceColor: picogl_default.UNSIGNED_INT,
  targetColor: picogl_default.UNSIGNED_INT,
  width: picogl_default.FLOAT
};
var Edges = class extends LayerRenderable {
  constructor(...args) {
    super(...args);
  }
  static get defaultMappings() {
    return kBasicEdgeMappings;
  }
  get pickingWidth() {
    return this.localUniforms.uPickingWidth;
  }
  set pickingWidth(value) {
    this.localUniforms.uPickingWidth = value;
  }
  initialize(...args) {
    super.initialize(...args);
    this.localUniforms = Object.assign({}, this.localUniforms, {
      uGraphPoints: this.dataTexture,
      uPickingWidth: 8
    });
  }
  computeMappings(mappings2) {
    const edgesMappings = Object.assign({}, kBasicEdgeMappings, mappings2);
    const sourceMapping = edgesMappings.source;
    edgesMappings.source = (entry, i4) => {
      return this.points.getPointIndex(sourceMapping(entry, i4));
    };
    const targetMapping = edgesMappings.target;
    edgesMappings.target = (entry, i4) => {
      return this.points.getPointIndex(targetMapping(entry, i4));
    };
    return edgesMappings;
  }
  ingestData(context, data, mappings2) {
    this.idArray = [];
    super.ingestData(context, data, mappings2);
  }
  packDataCB() {
    return (i4, entry) => {
      this.idArray.push(entry.id);
    };
  }
};

// src/graph/edges/straight/Straight.ts
var kGLStraightEdgeTypes = {
  source: PicoGL.UNSIGNED_INT,
  target: PicoGL.UNSIGNED_INT,
  sourceColor: PicoGL.UNSIGNED_INT,
  targetColor: PicoGL.UNSIGNED_INT,
  width: PicoGL.FLOAT
};
var Straight = class extends Edges {
  initialize(context, points2, data, mappings2, pickingManager) {
    super.initialize(context, points2, data, mappings2, pickingManager);
    this.verticesVBO = context.createVertexBuffer(PicoGL.FLOAT, 2, new Float32Array([
      -1,
      0,
      1,
      0,
      -1,
      1,
      1,
      1
    ]));
    this.pickingHandler = this.handlePickingEvent.bind(this);
    this.pickingColors = this.pickingManager.allocatePickingColors(data.length);
    this.pickingVBO = context.createVertexBuffer(PicoGL.UNSIGNED_BYTE, 4, this.pickingColors.colors);
    this.edgesVAO = context.createVertexArray().vertexAttributeBuffer(0, this.verticesVBO);
    this.configureTargetVAO(this.edgesVAO);
    this.edgesVAO.instanceAttributeBuffer(6, this.pickingVBO);
    const shaders = this.getDrawShaders();
    this.program = context.createProgram(shaders.vs, shaders.fs);
    this.drawCall = context.createDrawCall(this.program, this.edgesVAO).primitive(PicoGL.TRIANGLE_STRIP);
    const pickingShaders = this.getPickingShaders();
    this.pickingProgram = context.createProgram(pickingShaders.vs, pickingShaders.fs);
    this.pickingDrawCall = context.createDrawCall(this.pickingProgram, this.edgesVAO).primitive(PicoGL.TRIANGLE_STRIP);
    this.compute(context, {});
    this.pickingManager.on(PickingManager.events.hoverOn, this.pickingHandler);
    this.pickingManager.on(PickingManager.events.hoverOff, this.pickingHandler);
    this.pickingManager.on(PickingManager.events.click, this.pickingHandler);
  }
  destroy() {
  }
  render(context, mode, uniforms) {
    this.configureRenderContext(context, mode);
    switch (mode) {
      case 5 /* PICKING */:
        setDrawCallUniforms(this.pickingDrawCall, uniforms);
        setDrawCallUniforms(this.pickingDrawCall, this.localUniforms);
        this.pickingDrawCall.uniform("uPicking", true);
        this.pickingDrawCall.draw();
        break;
      default:
        setDrawCallUniforms(this.drawCall, uniforms);
        setDrawCallUniforms(this.drawCall, this.localUniforms);
        this.drawCall.uniform("uPicking", false);
        this.drawCall.draw();
        break;
    }
  }
  getDrawShaders() {
    return {
      vs: Straight_vs_default,
      fs: Straight_fs_default
    };
  }
  getPickingShaders() {
    return {
      vs: Straight_vs_default,
      fs: Straight_picking_fs_default
    };
  }
  getGLSourceTypes() {
    return kBasicEdgeDataTypes;
  }
  getGLTargetTypes() {
    return kGLStraightEdgeTypes;
  }
  getDataShader() {
    return {
      vs: Straight_data_vs_default,
      varyings: ["fSource", "fTarget", "fSourceColor", "fTargetColor", "fWidth"]
    };
  }
  handlePickingEvent(event, colorID) {
    if (this.picking && this.pickingColors.map.has(colorID)) {
      const id = this.idArray[this.pickingColors.map.get(colorID)];
      this.emit(event, id);
    }
  }
};

// src/graph/edges/dashed/Dashed.vs.glsl
var Dashed_vs_default = "#version 300 es\n#define GLSLIFY 1\n\nlayout(location=0) in vec3 aVertex;\nlayout(location=1) in uint iPointA;\nlayout(location=2) in uint iPointB;\nlayout(location=3) in uint iColorA;\nlayout(location=4) in uint iColorB;\nlayout(location=5) in float iWidth;\nlayout(location=6) in uvec4 iPickingColor;\n\nuniform bool uPicking;\n\nuniform mat4 uViewMatrix;\nuniform mat4 uSceneMatrix;\nuniform mat4 uProjectionMatrix;\nuniform vec2 uViewportSize;\nuniform float uPixelRatio;\nuniform float uPickingWidth;\nuniform sampler2D uGraphPoints;\nuniform sampler2D uColorPalette;\nuniform uint uDashLength;\n\nflat out float fLineWidth;\nflat out vec4 fPickingColor;\nout vec3 vColor;\nout float vDashLength;\nout vec2 vProjectedPosition;\nout float vProjectedW;\n\n// manual import from ../../../renderer/shaders/valueForIndex.glsl\n// to avoid uvec4 glslify error\nvec4 valueForIndex(sampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0);\n}\n\nvoid main() {\n    fPickingColor = uPicking ? vec4(iPickingColor) / 255.0 : vec4(0.0);\n\n    vec4 pointA = valueForIndex(uGraphPoints, int(iPointA));\n    vec4 pointB = valueForIndex(uGraphPoints, int(iPointB));\n\n    vec3 direction = normalize(pointB.xyz - pointA.xyz);\n\n    vec3 offsetA = pointA.xyz + direction * pointA[3];\n    vec3 offsetB = pointB.xyz - direction * pointB[3];\n\n    float multA = aVertex.y;\n    float multB = 1.0 - aVertex.y;\n\n    vec4 colorA = valueForIndex(uColorPalette, int(iColorA));\n    vec4 colorB = valueForIndex(uColorPalette, int(iColorB));\n\n    vColor = colorA.rgb * multA + colorB.rgb * multB;\n\n    mat4 renderMatrix = uProjectionMatrix * uViewMatrix * uSceneMatrix;\n\n    vec4 aProjected = renderMatrix * vec4(offsetA, 1.0);\n    vec2 aScreen = (aProjected.xy / aProjected.w) * (uViewportSize / 2.0);\n\n    vec4 bProjected = renderMatrix * vec4(offsetB, 1.0);\n    vec2 bScreen = (bProjected.xy / bProjected.w) * (uViewportSize / 2.0);\n\n    vec2 screenDirection = normalize(bScreen - aScreen);\n    vec2 perp = vec2(-screenDirection.y, screenDirection.x);\n\n    fLineWidth = (uPicking ? iWidth * uPickingWidth : iWidth) * uPixelRatio;\n    float offsetWidth = fLineWidth + 0.5;\n    vec4 position = aProjected * multA + bProjected * multB;\n    vec4 offset = vec4(((aVertex.x * perp * offsetWidth) / uViewportSize) * position.w, 0.0, 0.0);\n    gl_Position = position + offset;\n\n    vProjectedPosition = position.xy;\n    vProjectedW = position.w;\n\n    float screenDistance = distance(aScreen, bScreen);\n    vDashLength = (screenDistance / float(uDashLength)) * aVertex.y;\n}\n";

// src/graph/edges/dashed/Dashed.fs.glsl
var Dashed_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\n// from https://en.wikipedia.org/wiki/SRGB#The_reverse_transformation\nfloat luminance_x_1540259130(float x) {\n    return x <= 0.04045 ? x / 12.92 : pow((x + 0.055) / 1.055, 2.4);\n}\nfloat color_l_1540259130(float l) {\n    return min(1.0, max(0.0, l <= 0.0031308 ? l * 12.92 : pow(l * 1.055, 1.0 / 2.4) - 0.055));\n}\n\n// from https://en.wikipedia.org/wiki/Relative_luminance\nfloat rgb2luminance(vec3 color) {\n    // relative luminance\n    // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    float r = luminance_x_1540259130(color.r);\n    float g = luminance_x_1540259130(color.g);\n    float b = luminance_x_1540259130(color.b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n}\n\nvec3 setLuminance(vec3 color, float luminance) {\n    float r = luminance_x_1540259130(color.r) * 0.2126;\n    float g = luminance_x_1540259130(color.g) * 0.7152;\n    float b = luminance_x_1540259130(color.b) * 0.0722;\n    float colorLuminance = r + g + b;\n\n    float tr = luminance * (r / colorLuminance);\n    float tg = luminance * (g / colorLuminance);\n    float tb = luminance * (b / colorLuminance);\n\n    float rr = color_l_1540259130(tr / 0.2126);\n    float rg = color_l_1540259130(tg / 0.7152);\n    float rb = color_l_1540259130(tb / 0.0722);\n\n    return vec3(rr, rg, rb );\n}\n\n// https://www.w3.org/TR/WCAG20/#contrast-ratiodef\n// (L1 + 0.05) / (L2 + 0.05), where\n// - L1 is the relative luminance of the lighter of the colors, and\n// - L2 is the relative luminance of the darker of the colors.\nfloat findDarker(float luminance, float contrast) {\n    return (contrast * luminance) + (0.05 * contrast) - 0.05;\n}\nfloat findLighter(float luminance, float contrast) {\n    return (luminance + 0.05 - (0.05 * contrast)) / contrast;\n}\n\nvec3 contrastingColor(vec3 color, float contrast) {\n    float luminance = rgb2luminance(color);\n    float darker = findDarker(luminance, contrast);\n    float lighter = findLighter(luminance, contrast);\n\n    float targetLuminance;\n    if (darker < 0.0 || darker > 1.0) {\n        targetLuminance = lighter;\n    } else if (lighter < 0.0 || lighter > 1.0) {\n        targetLuminance = darker;\n    } else {\n        targetLuminance = abs(luminance - lighter) < abs(darker - luminance) ? lighter : darker;\n    }\n\n    return setLuminance(color, targetLuminance);\n}\n\nvec3 desaturateColor(vec3 color, float amount) {\n    float l = rgb2luminance(color);\n    vec3 gray = vec3(l, l, l);\n    return mix(color, gray, amount);\n}\n\nuniform vec4 uClearColor;\nuniform float uDesaturate;\nuniform float uBrightness;\nuniform float uFade;\nuniform float uAlpha;\n\nvec4 outputColor(vec4 color) {\n    // desaturate => fade => alpha\n    vec3 ret = mix(color.rgb, vec3(uBrightness + 1.0 / 2.0), abs(uBrightness));\n    ret = vec3(desaturateColor(ret, uDesaturate));\n    ret = mix(ret, uClearColor.rgb, uFade);\n    return vec4(ret, color.a * uAlpha);\n}\n\n#define MODE_DRAFT 0u\n#define MODE_MEDIUM 1u\n#define MODE_HIGH 2u\n#define MODE_HIGH_PASS_1 3u\n#define MODE_HIGH_PASS_2 4u\n#define MODE_PICKING 5u\n\n#define ONE_ALPHA 0.00392156862 // 1.0 / 255.0\n\nfloat lineAlpha(vec2 position, float w, vec2 viewportSize, float lineWidth) {\n    vec2 lineCenter = ((position / w) * 0.5 + 0.5) * viewportSize;\n    float distOffset = (lineWidth - 1.0) * 0.5;\n    float dist = smoothstep(lineWidth * 0.5 - 0.5, lineWidth * 0.5 + 0.5, distance(lineCenter, gl_FragCoord.xy));\n    return (1.0 - dist);\n}\n\nvec4 lineColor(vec3 color, vec2 position, float w, vec2 viewportSize, uint mode, float lineWidth) {\n    if (mode < MODE_HIGH_PASS_1) {\n        return outputColor(vec4(color, 1.0));\n    }\n\n    float a = lineAlpha(position, w, viewportSize, lineWidth);\n\n    if (mode == MODE_HIGH_PASS_1) {\n        if (a == 1.0) {\n            return outputColor(vec4(color, a));\n        } else {\n            discard;\n        }\n    }\n\n    // Possible optimization.\n    // Edges run into fill rate issues because too many of them overlap, discarging pixels below a certain alpha\n    // threshold might help speed things up a bit.\n    if (a < ONE_ALPHA) {\n        discard;\n    }\n\n    return outputColor(vec4(color, a));\n}\n\nuniform vec2 uViewportSize;\nuniform uint uRenderMode;\n\nflat in float fLineWidth;\nin vec3 vColor;\nin float vDashLength;\nin vec2 vProjectedPosition;\nin float vProjectedW;\n\nout vec4 fragColor;\n\nvoid main() {\n    if (int(vDashLength) % 2 == 1) {\n        discard;\n    }\n    fragColor = lineColor(vColor, vProjectedPosition, vProjectedW, uViewportSize, uRenderMode, fLineWidth);\n}\n";

// src/graph/edges/dashed/Dashed.ts
var Dashed = class extends Straight {
  get dashLength() {
    return this.localUniforms.uDashLength;
  }
  set dashLength(value) {
    this.localUniforms.uDashLength = value;
  }
  initialize(context, points2, data, mappings2, pickingManager) {
    super.initialize(context, points2, data, mappings2, pickingManager);
    this.localUniforms.uDashLength = 10;
  }
  getDrawShaders() {
    return {
      vs: Dashed_vs_default,
      fs: Dashed_fs_default
    };
  }
};

// src/graph/edges/gravity/Gravity.vs.glsl
var Gravity_vs_default = "#version 300 es\n#define GLSLIFY 1\n\nlayout(location=0) in vec3 aVertex;\nlayout(location=1) in uint iPointA;\nlayout(location=2) in uint iPointB;\nlayout(location=3) in uint iColorA;\nlayout(location=4) in uint iColorB;\nlayout(location=5) in float iWidth;\nlayout(location=6) in uvec4 iPickingColor;\n\nuniform bool uPicking;\n\nuniform mat4 uViewMatrix;\nuniform mat4 uSceneMatrix;\nuniform mat4 uProjectionMatrix;\nuniform vec2 uViewportSize;\nuniform float uPixelRatio;\nuniform float uPickingWidth;\nuniform float uGravity;\nuniform sampler2D uColorPalette;\nuniform sampler2D uGraphPoints;\n\nflat out float fLineWidth;\nflat out vec4 fPickingColor;\nout vec3 vColor;\nout vec2 vProjectedPosition;\nout float vProjectedW;\n\n// manual import from ../../../renderer/shaders/valueForIndex.glsl\n// to avoid uvec4 glslify error\nvec4 valueForIndex(sampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0);\n}\n\nvoid main() {\n    fPickingColor = uPicking ? vec4(iPickingColor) / 255.0 : vec4(0.0);\n\n    float multA = aVertex.x;\n    float multB = 1.0 - aVertex.x;\n\n    vec3 offsetA = valueForIndex(uGraphPoints, int(iPointA)).xyz;\n    vec3 offsetB = valueForIndex(uGraphPoints, int(iPointB)).xyz;\n\n    vec4 colorA = valueForIndex(uColorPalette, int(iColorA));\n    vec4 colorB = valueForIndex(uColorPalette, int(iColorB));\n\n    vColor = colorA.rgb * multA + colorB.rgb * multB;\n\n    vec3 direction = offsetB - offsetA;\n    vec3 middle = offsetA + direction * 0.5;\n    float distance = length(direction);\n\n    float toCenter = length(middle);\n    vec3 towardsCenter = (middle * -1.0) / toCenter;\n\n    fLineWidth = (uPicking ? iWidth * uPickingWidth : iWidth) * uPixelRatio;\n\n    vec3 gravity = middle + towardsCenter * min(toCenter, distance * uGravity);\n    vec3 position = gravity + pow(multB, 2.0) * (offsetB - gravity) + pow(multA, 2.0) * (offsetA - gravity);\n\n    mat4 renderMatrix = uProjectionMatrix * uViewMatrix * uSceneMatrix;\n    gl_Position = renderMatrix * vec4(position, 1.0);\n\n    vProjectedPosition = gl_Position.xy;\n    vProjectedW = gl_Position.w;\n}\n";

// src/graph/edges/gravity/Gravity.fs.glsl
var Gravity_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\n// from https://en.wikipedia.org/wiki/SRGB#The_reverse_transformation\nfloat luminance_x_1540259130(float x) {\n    return x <= 0.04045 ? x / 12.92 : pow((x + 0.055) / 1.055, 2.4);\n}\nfloat color_l_1540259130(float l) {\n    return min(1.0, max(0.0, l <= 0.0031308 ? l * 12.92 : pow(l * 1.055, 1.0 / 2.4) - 0.055));\n}\n\n// from https://en.wikipedia.org/wiki/Relative_luminance\nfloat rgb2luminance(vec3 color) {\n    // relative luminance\n    // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    float r = luminance_x_1540259130(color.r);\n    float g = luminance_x_1540259130(color.g);\n    float b = luminance_x_1540259130(color.b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n}\n\nvec3 setLuminance(vec3 color, float luminance) {\n    float r = luminance_x_1540259130(color.r) * 0.2126;\n    float g = luminance_x_1540259130(color.g) * 0.7152;\n    float b = luminance_x_1540259130(color.b) * 0.0722;\n    float colorLuminance = r + g + b;\n\n    float tr = luminance * (r / colorLuminance);\n    float tg = luminance * (g / colorLuminance);\n    float tb = luminance * (b / colorLuminance);\n\n    float rr = color_l_1540259130(tr / 0.2126);\n    float rg = color_l_1540259130(tg / 0.7152);\n    float rb = color_l_1540259130(tb / 0.0722);\n\n    return vec3(rr, rg, rb );\n}\n\n// https://www.w3.org/TR/WCAG20/#contrast-ratiodef\n// (L1 + 0.05) / (L2 + 0.05), where\n// - L1 is the relative luminance of the lighter of the colors, and\n// - L2 is the relative luminance of the darker of the colors.\nfloat findDarker(float luminance, float contrast) {\n    return (contrast * luminance) + (0.05 * contrast) - 0.05;\n}\nfloat findLighter(float luminance, float contrast) {\n    return (luminance + 0.05 - (0.05 * contrast)) / contrast;\n}\n\nvec3 contrastingColor(vec3 color, float contrast) {\n    float luminance = rgb2luminance(color);\n    float darker = findDarker(luminance, contrast);\n    float lighter = findLighter(luminance, contrast);\n\n    float targetLuminance;\n    if (darker < 0.0 || darker > 1.0) {\n        targetLuminance = lighter;\n    } else if (lighter < 0.0 || lighter > 1.0) {\n        targetLuminance = darker;\n    } else {\n        targetLuminance = abs(luminance - lighter) < abs(darker - luminance) ? lighter : darker;\n    }\n\n    return setLuminance(color, targetLuminance);\n}\n\nvec3 desaturateColor(vec3 color, float amount) {\n    float l = rgb2luminance(color);\n    vec3 gray = vec3(l, l, l);\n    return mix(color, gray, amount);\n}\n\nuniform vec4 uClearColor;\nuniform float uDesaturate;\nuniform float uBrightness;\nuniform float uFade;\nuniform float uAlpha;\n\nvec4 outputColor(vec4 color) {\n    // desaturate => fade => alpha\n    vec3 ret = mix(color.rgb, vec3(uBrightness + 1.0 / 2.0), abs(uBrightness));\n    ret = vec3(desaturateColor(ret, uDesaturate));\n    ret = mix(ret, uClearColor.rgb, uFade);\n    return vec4(ret, color.a * uAlpha);\n}\n\n#define MODE_DRAFT 0u\n#define MODE_MEDIUM 1u\n#define MODE_HIGH 2u\n#define MODE_HIGH_PASS_1 3u\n#define MODE_HIGH_PASS_2 4u\n#define MODE_PICKING 5u\n\n#define ONE_ALPHA 0.00392156862 // 1.0 / 255.0\n\nfloat lineAlpha(vec2 position, float w, vec2 viewportSize, float lineWidth) {\n    vec2 lineCenter = ((position / w) * 0.5 + 0.5) * viewportSize;\n    float distOffset = (lineWidth - 1.0) * 0.5;\n    float dist = smoothstep(lineWidth * 0.5 - 0.5, lineWidth * 0.5 + 0.5, distance(lineCenter, gl_FragCoord.xy));\n    return (1.0 - dist);\n}\n\nvec4 lineColor(vec3 color, vec2 position, float w, vec2 viewportSize, uint mode, float lineWidth) {\n    if (mode < MODE_HIGH_PASS_1) {\n        return outputColor(vec4(color, 1.0));\n    }\n\n    float a = lineAlpha(position, w, viewportSize, lineWidth);\n\n    if (mode == MODE_HIGH_PASS_1) {\n        if (a == 1.0) {\n            return outputColor(vec4(color, a));\n        } else {\n            discard;\n        }\n    }\n\n    // Possible optimization.\n    // Edges run into fill rate issues because too many of them overlap, discarging pixels below a certain alpha\n    // threshold might help speed things up a bit.\n    if (a < ONE_ALPHA) {\n        discard;\n    }\n\n    return outputColor(vec4(color, a));\n}\n\nuniform vec2 uViewportSize;\nuniform uint uRenderMode;\n\nflat in float fLineWidth;\nin vec3 vColor;\nin vec2 vProjectedPosition;\nin float vProjectedW;\n\nout vec4 fragColor;\n\nvoid main() {\n    fragColor = lineColor(vColor, vProjectedPosition, vProjectedW, uViewportSize, uRenderMode, fLineWidth);\n}\n";

// src/graph/edges/gravity/Gravity.picking.fs.glsl
var Gravity_picking_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\nflat in vec4 fPickingColor;\n\nout vec4 fragColor;\n\nvoid main() {\n    fragColor = fPickingColor;\n}\n";

// src/graph/edges/gravity/Gravity.data.vs.glsl
var Gravity_data_vs_default = "#version 300 es\n#define GLSLIFY 1\n\nlayout(location=0) in uint aSourceIndex;\nlayout(location=1) in uint aTargetIndex;\nlayout(location=2) in uint aSourceColor;\nlayout(location=3) in uint aTargetColor;\nlayout(location=4) in float aWidth;\n\nuniform sampler2D uGraphPoints;\n\nflat out uint fSource;\nflat out uint fTarget;\nflat out uint fSourceColor;\nflat out uint fTargetColor;\nflat out float fWidth;\n\nvoid main() {\n    fSource = aSourceIndex;\n    fTarget = aTargetIndex;\n    fSourceColor = aSourceColor;\n    fTargetColor = aTargetColor;\n    fWidth = aWidth;\n}\n";

// src/graph/edges/gravity/Gravity.ts
var kGLGravityEdgeTypes = {
  source: PicoGL.UNSIGNED_INT,
  target: PicoGL.UNSIGNED_INT,
  sourceColor: PicoGL.UNSIGNED_INT,
  targetColor: PicoGL.UNSIGNED_INT,
  width: PicoGL.FLOAT
};
var Gravity = class extends Edges {
  constructor(context, points2, data, mappings2, pickingManager, segments = 16) {
    super(context, points2, data, mappings2, pickingManager, segments);
  }
  get gravity() {
    return this.localUniforms.uGravity;
  }
  set gravity(value) {
    this.localUniforms.uGravity = value;
  }
  initialize(context, points2, data, mappings2, pickingManager, segments) {
    super.initialize(context, points2, data, mappings2, pickingManager);
    this.localUniforms.uGravity = -0.2;
    const segmentVertices = [];
    for (let i4 = 0; i4 <= segments; ++i4) {
      segmentVertices.push(i4 / segments, 0);
    }
    this.verticesVBO = context.createVertexBuffer(PicoGL.FLOAT, 2, new Float32Array(segmentVertices));
    this.pickingHandler = this.handlePickingEvent.bind(this);
    this.pickingColors = this.pickingManager.allocatePickingColors(data.length);
    this.pickingVBO = context.createVertexBuffer(PicoGL.UNSIGNED_BYTE, 4, this.pickingColors.colors);
    this.edgesVAO = context.createVertexArray().vertexAttributeBuffer(0, this.verticesVBO);
    this.configureTargetVAO(this.edgesVAO);
    this.edgesVAO.instanceAttributeBuffer(6, this.pickingVBO);
    const shaders = this.getDrawShaders();
    this.program = context.createProgram(shaders.vs, shaders.fs);
    this.drawCall = context.createDrawCall(this.program, this.edgesVAO).primitive(PicoGL.LINE_STRIP);
    const pickingShaders = this.getPickingShaders();
    this.pickingProgram = context.createProgram(pickingShaders.vs, pickingShaders.fs);
    this.pickingDrawCall = context.createDrawCall(this.pickingProgram, this.edgesVAO).primitive(PicoGL.TRIANGLE_STRIP);
    this.compute(context, {});
    this.pickingManager.on(PickingManager.events.hoverOn, this.pickingHandler);
    this.pickingManager.on(PickingManager.events.hoverOff, this.pickingHandler);
    this.pickingManager.on(PickingManager.events.click, this.pickingHandler);
  }
  destroy() {
  }
  render(context, mode, uniforms) {
    this.configureRenderContext(context, mode);
    switch (mode) {
      case 5 /* PICKING */:
        setDrawCallUniforms(this.pickingDrawCall, uniforms);
        setDrawCallUniforms(this.pickingDrawCall, this.localUniforms);
        this.pickingDrawCall.uniform("uPicking", true);
        this.pickingDrawCall.draw();
        break;
      default:
        setDrawCallUniforms(this.drawCall, uniforms);
        setDrawCallUniforms(this.drawCall, this.localUniforms);
        this.drawCall.uniform("uPicking", false);
        this.drawCall.draw();
    }
  }
  getDrawShaders() {
    return {
      vs: Gravity_vs_default,
      fs: Gravity_fs_default
    };
  }
  getPickingShaders() {
    return {
      vs: Gravity_vs_default,
      fs: Gravity_picking_fs_default
    };
  }
  getGLSourceTypes() {
    return kBasicEdgeDataTypes;
  }
  getGLTargetTypes() {
    return kGLStraightEdgeTypes;
  }
  getDataShader() {
    return {
      vs: Gravity_data_vs_default,
      varyings: ["fSource", "fTarget", "fSourceColor", "fTargetColor", "fWidth"]
    };
  }
  handlePickingEvent(event, colorID) {
    if (this.picking && this.pickingColors.map.has(colorID)) {
      const id = this.idArray[this.pickingColors.map.get(colorID)];
      this.emit(event, id);
    }
  }
};

// src/graph/edges/path/CurvedPath.vs.glsl
var CurvedPath_vs_default = "#version 300 es\n#define GLSLIFY 1\n\nlayout(location=0) in vec3 aVertex;\nlayout(location=1) in vec3 iOffsetA;\nlayout(location=2) in vec3 iOffsetB;\nlayout(location=3) in vec3 iControl;\nlayout(location=4) in uint iColorA;\nlayout(location=5) in uint iColorB;\nlayout(location=6) in vec2 iColorMix;\nlayout(location=7) in float iWidth;\nlayout(location=8) in uvec4 iPickingColor;\n\nuniform bool uPicking;\n\nuniform mat4 uViewMatrix;\nuniform mat4 uSceneMatrix;\nuniform mat4 uProjectionMatrix;\nuniform vec2 uViewportSize;\nuniform float uPixelRatio;\nuniform float uPickingWidth;\nuniform sampler2D uColorPalette;\n\nuniform float uLineWidth;\nuniform float uSegments;\n\nflat out float fLineWidth;\nflat out vec4 fPickingColor;\nout vec3 vColor;\nout vec2 vProjectedPosition;\nout float vProjectedW;\n\nvec4 getColorByIndexFromTexture(sampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0);\n}\n\nvec3 bezier(vec3 p0, vec3 p1, vec3 p2, float t) {\n    return p1 + pow(1.0 - t, 2.0) * (p2 - p1) + pow(t, 2.0) * (p0 - p1);\n}\n\nvoid main() {\n    fPickingColor = uPicking ? vec4(iPickingColor) / 255.0 : vec4(0.0);\n\n    // bezier works fine with 0 > t > 1\n    float t0 = aVertex.y / uSegments;\n    float t1 = (aVertex.y + 1.0) / uSegments;\n\n    // calculate both bezier points\n    vec3 b0 = bezier(iOffsetA, iControl, iOffsetB, t0);\n    vec3 b1 = bezier(iOffsetA, iControl, iOffsetB, t1);\n\n    // project the points to the screen\n    mat4 renderMatrix = uProjectionMatrix * uViewMatrix * uSceneMatrix;\n    vec4 b0Projected = renderMatrix * vec4(b0, 1.0);\n    vec4 b1Projected = renderMatrix * vec4(b1, 1.0);\n\n    // get their screen coords\n    vec2 b0Screen = (b0Projected.xy / b0Projected.w) * uViewportSize * 0.5;\n    vec2 b1Screen = (b1Projected.xy / b1Projected.w) * uViewportSize * 0.5;\n\n    // get the direction and normal of the segment\n    vec2 direction = normalize(b1Screen - b0Screen);\n    vec2 normal = vec2(-direction.y, direction.x);\n\n    // calculate the pixel offset\n    fLineWidth = (uPicking ? iWidth * uPickingWidth : iWidth) * uPixelRatio;\n    float offsetWidth = fLineWidth + 0.5;\n    vec4 offset = vec4(((aVertex.x * normal * offsetWidth) / uViewportSize) * b0Projected.w, 0.0, 0.0);\n\n    // set the final vertex position\n    gl_Position = b0Projected + offset;\n    vProjectedPosition = b0Projected.xy;\n    vProjectedW = b0Projected.w;\n\n    // calculate the color\n    vec4 colorA = getColorByIndexFromTexture(uColorPalette, int(iColorA));\n    vec4 colorB = getColorByIndexFromTexture(uColorPalette, int(iColorB));\n    vec3 mixColorA = mix(colorA.rgb, colorB.rgb, iColorMix[1]);\n    vec3 mixColorB = mix(colorA.rgb, colorB.rgb, iColorMix[0]);\n    vColor = mix(mixColorA.rgb, mixColorB.rgb, t0);\n}\n";

// src/graph/edges/path/CurvedPath.fs.glsl
var CurvedPath_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\n// from https://en.wikipedia.org/wiki/SRGB#The_reverse_transformation\nfloat luminance_x_1540259130(float x) {\n    return x <= 0.04045 ? x / 12.92 : pow((x + 0.055) / 1.055, 2.4);\n}\nfloat color_l_1540259130(float l) {\n    return min(1.0, max(0.0, l <= 0.0031308 ? l * 12.92 : pow(l * 1.055, 1.0 / 2.4) - 0.055));\n}\n\n// from https://en.wikipedia.org/wiki/Relative_luminance\nfloat rgb2luminance(vec3 color) {\n    // relative luminance\n    // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    float r = luminance_x_1540259130(color.r);\n    float g = luminance_x_1540259130(color.g);\n    float b = luminance_x_1540259130(color.b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n}\n\nvec3 setLuminance(vec3 color, float luminance) {\n    float r = luminance_x_1540259130(color.r) * 0.2126;\n    float g = luminance_x_1540259130(color.g) * 0.7152;\n    float b = luminance_x_1540259130(color.b) * 0.0722;\n    float colorLuminance = r + g + b;\n\n    float tr = luminance * (r / colorLuminance);\n    float tg = luminance * (g / colorLuminance);\n    float tb = luminance * (b / colorLuminance);\n\n    float rr = color_l_1540259130(tr / 0.2126);\n    float rg = color_l_1540259130(tg / 0.7152);\n    float rb = color_l_1540259130(tb / 0.0722);\n\n    return vec3(rr, rg, rb );\n}\n\n// https://www.w3.org/TR/WCAG20/#contrast-ratiodef\n// (L1 + 0.05) / (L2 + 0.05), where\n// - L1 is the relative luminance of the lighter of the colors, and\n// - L2 is the relative luminance of the darker of the colors.\nfloat findDarker(float luminance, float contrast) {\n    return (contrast * luminance) + (0.05 * contrast) - 0.05;\n}\nfloat findLighter(float luminance, float contrast) {\n    return (luminance + 0.05 - (0.05 * contrast)) / contrast;\n}\n\nvec3 contrastingColor(vec3 color, float contrast) {\n    float luminance = rgb2luminance(color);\n    float darker = findDarker(luminance, contrast);\n    float lighter = findLighter(luminance, contrast);\n\n    float targetLuminance;\n    if (darker < 0.0 || darker > 1.0) {\n        targetLuminance = lighter;\n    } else if (lighter < 0.0 || lighter > 1.0) {\n        targetLuminance = darker;\n    } else {\n        targetLuminance = abs(luminance - lighter) < abs(darker - luminance) ? lighter : darker;\n    }\n\n    return setLuminance(color, targetLuminance);\n}\n\nvec3 desaturateColor(vec3 color, float amount) {\n    float l = rgb2luminance(color);\n    vec3 gray = vec3(l, l, l);\n    return mix(color, gray, amount);\n}\n\nuniform vec4 uClearColor;\nuniform float uDesaturate;\nuniform float uBrightness;\nuniform float uFade;\nuniform float uAlpha;\n\nvec4 outputColor(vec4 color) {\n    // desaturate => fade => alpha\n    vec3 ret = mix(color.rgb, vec3(uBrightness + 1.0 / 2.0), abs(uBrightness));\n    ret = vec3(desaturateColor(ret, uDesaturate));\n    ret = mix(ret, uClearColor.rgb, uFade);\n    return vec4(ret, color.a * uAlpha);\n}\n\n#define MODE_DRAFT 0u\n#define MODE_MEDIUM 1u\n#define MODE_HIGH 2u\n#define MODE_HIGH_PASS_1 3u\n#define MODE_HIGH_PASS_2 4u\n#define MODE_PICKING 5u\n\n#define ONE_ALPHA 0.00392156862 // 1.0 / 255.0\n\nfloat lineAlpha(vec2 position, float w, vec2 viewportSize, float lineWidth) {\n    vec2 lineCenter = ((position / w) * 0.5 + 0.5) * viewportSize;\n    float distOffset = (lineWidth - 1.0) * 0.5;\n    float dist = smoothstep(lineWidth * 0.5 - 0.5, lineWidth * 0.5 + 0.5, distance(lineCenter, gl_FragCoord.xy));\n    return (1.0 - dist);\n}\n\nvec4 lineColor(vec3 color, vec2 position, float w, vec2 viewportSize, uint mode, float lineWidth) {\n    if (mode < MODE_HIGH_PASS_1) {\n        return outputColor(vec4(color, 1.0));\n    }\n\n    float a = lineAlpha(position, w, viewportSize, lineWidth);\n\n    if (mode == MODE_HIGH_PASS_1) {\n        if (a == 1.0) {\n            return outputColor(vec4(color, a));\n        } else {\n            discard;\n        }\n    }\n\n    // Possible optimization.\n    // Edges run into fill rate issues because too many of them overlap, discarging pixels below a certain alpha\n    // threshold might help speed things up a bit.\n    if (a < ONE_ALPHA) {\n        discard;\n    }\n\n    return outputColor(vec4(color, a));\n}\n\nuniform vec2 uViewportSize;\nuniform uint uRenderMode;\n\nflat in float fLineWidth;\nin vec3 vColor;\nin vec2 vProjectedPosition;\nin float vProjectedW;\n\nout vec4 fragColor;\n\nvoid main() {\n    fragColor = lineColor(vColor, vProjectedPosition, vProjectedW, uViewportSize, uRenderMode, fLineWidth);\n}\n";

// src/graph/edges/path/CurvedPath.picking.fs.glsl
var CurvedPath_picking_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\nflat in vec4 fPickingColor;\n\nout vec4 fragColor;\n\nvoid main() {\n    fragColor = fPickingColor;\n}\n";

// src/graph/edges/path/CurvedPath.data.vs.glsl
var CurvedPath_data_vs_default = "#version 300 es\n#define GLSLIFY 1\n\nlayout(location=0) in uint aSourceIndex;\nlayout(location=1) in uint aTargetIndex;\nlayout(location=2) in uvec3 aControl;\nlayout(location=3) in uint aSourceColor;\nlayout(location=4) in uint aTargetColor;\nlayout(location=5) in float aWidth;\nlayout(location=6) in uvec4 aPickingColor;\n\nuniform sampler2D uGraphPoints;\n\nout vec3 vSource;\nout vec3 vTarget;\nout vec3 vControl;\nflat out uint vSourceColor;\nflat out uint vTargetColor;\nout vec2 vColorMix;\nflat out float vWidth;\nflat out uvec4 vPickingColor;\n\n// manual import from ../../../renderer/shaders/valueForIndex.glsl\n// to avoid uvec4 glslify error\nvec4 valueForIndex(sampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0);\n}\n\nvoid main() {\n    vec4 source = valueForIndex(uGraphPoints, int(aSourceIndex));\n    vec4 target = valueForIndex(uGraphPoints, int(aTargetIndex));\n    vec4 control = valueForIndex(uGraphPoints, int(aControl[0]));\n\n    // TODO: Optimize this to avoid branches. (If performance becomes a problem)\n    if (aControl[1] == 0u) {\n        vSource = source.xyz;\n    } else {\n        vSource = (source.xyz + control.xyz) / 2.0;\n    }\n\n    if (aControl[1] == aControl[2] - 1u) {\n        vTarget = target.xyz;\n    } else {\n        vTarget = (target.xyz + control.xyz) / 2.0;\n    }\n\n    vControl = control.xyz;\n\n    vSourceColor = aSourceColor;\n    vTargetColor = aTargetColor;\n\n    vColorMix = vec2(float(aControl[1]) / float(aControl[2]), float(aControl[1] + 1u) / float(aControl[2]));\n\n    vWidth = aWidth;\n    vPickingColor = aPickingColor;\n}\n";

// src/graph/edges/path/CurvedPath.ts
var pickingColorNoOpMapping = () => null;
var kCurvedPathEdgeMappings = {
  id: (entry, i4) => "id" in entry ? entry.id : i4,
  source: (entry) => entry.source,
  target: (entry) => entry.target,
  control: (entry) => entry.control,
  sourceColor: (entry) => "sourceColor" in entry ? entry.sourceColor : 0,
  targetColor: (entry) => "targetColor" in entry ? entry.targetColor : 0,
  width: (entry) => {
    var _a6;
    return (_a6 = entry.width) != null ? _a6 : 1.5;
  },
  pickingColor: pickingColorNoOpMapping
};
var kCurvedPathEdgeDataTypes = {
  source: PicoGL.UNSIGNED_INT,
  target: PicoGL.UNSIGNED_INT,
  control: [PicoGL.UNSIGNED_INT, PicoGL.UNSIGNED_INT, PicoGL.UNSIGNED_INT],
  sourceColor: PicoGL.UNSIGNED_INT,
  targetColor: PicoGL.UNSIGNED_INT,
  width: PicoGL.FLOAT,
  pickingColor: [PicoGL.UNSIGNED_INT, PicoGL.UNSIGNED_INT, PicoGL.UNSIGNED_INT, PicoGL.UNSIGNED_INT]
};
var kGLCurvedPathEdgeTypes = {
  source: [PicoGL.FLOAT, PicoGL.FLOAT, PicoGL.FLOAT],
  target: [PicoGL.FLOAT, PicoGL.FLOAT, PicoGL.FLOAT],
  control: [PicoGL.FLOAT, PicoGL.FLOAT, PicoGL.FLOAT],
  sourceColor: PicoGL.UNSIGNED_INT,
  targetColor: PicoGL.UNSIGNED_INT,
  colorMix: [PicoGL.FLOAT, PicoGL.FLOAT],
  width: PicoGL.FLOAT,
  pickingColor: [PicoGL.UNSIGNED_INT, PicoGL.UNSIGNED_INT, PicoGL.UNSIGNED_INT, PicoGL.UNSIGNED_INT]
};
var CurvedPath = class extends Edges {
  constructor(context, points2, data, mappings2, pickingManager, segments = 16) {
    super(context, points2, data, mappings2, pickingManager, segments);
  }
  initialize(context, points2, data, mappings2, pickingManager, segments) {
    super.initialize(context, points2, data, mappings2, pickingManager);
    const segmentVertices = [];
    for (let i4 = 0; i4 <= segments; ++i4) {
      segmentVertices.push(
        -1,
        i4,
        1,
        i4
      );
    }
    this.pickingHandler = this.handlePickingEvent.bind(this);
    this.verticesVBO = context.createVertexBuffer(PicoGL.FLOAT, 2, new Float32Array(segmentVertices));
    this.edgesVAO = context.createVertexArray().vertexAttributeBuffer(0, this.verticesVBO);
    this.configureTargetVAO(this.edgesVAO);
    const shaders = this.getDrawShaders();
    this.program = context.createProgram(shaders.vs, shaders.fs);
    this.drawCall = context.createDrawCall(this.program, this.edgesVAO).primitive(PicoGL.TRIANGLE_STRIP);
    const pickingShaders = this.getPickingShaders();
    this.pickingProgram = context.createProgram(pickingShaders.vs, pickingShaders.fs);
    this.pickingDrawCall = context.createDrawCall(this.pickingProgram, this.edgesVAO).primitive(PicoGL.TRIANGLE_STRIP);
    this.compute(context, {
      uGraphPoints: this.dataTexture
    });
    this.pickingManager.on(PickingManager.events.hoverOn, this.pickingHandler);
    this.pickingManager.on(PickingManager.events.hoverOff, this.pickingHandler);
    this.pickingManager.on(PickingManager.events.click, this.pickingHandler);
    this.localUniforms.uSegments = segments;
  }
  destroy() {
  }
  ingestData(context, data, mappings2) {
    this.pickingColors = this.pickingManager.allocatePickingColors(data.length);
    super.ingestData(context, data, mappings2);
  }
  packDataCB() {
    return (index, entry) => {
      this.idArray.push(entry.id);
      const indexStart = 4 * index;
      entry.pickingColor = [
        this.pickingColors.colors[indexStart],
        this.pickingColors.colors[indexStart + 1],
        this.pickingColors.colors[indexStart + 2],
        this.pickingColors.colors[indexStart + 3]
      ];
    };
  }
  render(context, mode, uniforms) {
    setDrawCallUniforms(this.drawCall, uniforms);
    setDrawCallUniforms(this.drawCall, this.localUniforms);
    this.configureRenderContext(context, mode);
    switch (mode) {
      case 5 /* PICKING */:
        setDrawCallUniforms(this.pickingDrawCall, uniforms);
        setDrawCallUniforms(this.pickingDrawCall, this.localUniforms);
        this.pickingDrawCall.uniform("uPicking", true);
        this.pickingDrawCall.draw();
        break;
      default:
        this.drawCall.draw();
        break;
    }
  }
  getDrawShaders() {
    return {
      vs: CurvedPath_vs_default,
      fs: CurvedPath_fs_default
    };
  }
  getPickingShaders() {
    return {
      vs: CurvedPath_vs_default,
      fs: CurvedPath_picking_fs_default
    };
  }
  getGLSourceTypes() {
    return kCurvedPathEdgeDataTypes;
  }
  getGLTargetTypes() {
    return kGLCurvedPathEdgeTypes;
  }
  getDataShader() {
    return {
      vs: CurvedPath_data_vs_default,
      varyings: ["vSource", "vTarget", "vControl", "vSourceColor", "vTargetColor", "vColorMix", "vWidth", "vPickingColor"]
    };
  }
  computeMappings(mappings2) {
    const edgesMappings = Object.assign({}, kCurvedPathEdgeMappings, super.computeMappings(mappings2));
    edgesMappings.control[kDataMappingFlatten] = (entry, i4, l3) => {
      return [this.points.getPointIndex(entry.control[i4]), i4, l3];
    };
    edgesMappings.source[kDataMappingFlatten] = (entry, i4, l3) => {
      if (i4 === 0) {
        return entry.source;
      }
      return edgesMappings.control[kDataMappingFlatten](entry, i4 - 1, l3)[0];
    };
    edgesMappings.target[kDataMappingFlatten] = (entry, i4, l3) => {
      if (i4 === l3 - 1) {
        return entry.target;
      }
      return edgesMappings.control[kDataMappingFlatten](entry, i4 + 1, l3)[0];
    };
    return edgesMappings;
  }
  handlePickingEvent(event, colorID) {
    if (this.picking && this.pickingColors.map.has(colorID)) {
      const id = this.idArray[this.pickingColors.map.get(colorID)];
      this.emit(event, id);
    }
  }
};

// src/graph/edges/path/StraightPath.vs.glsl
var StraightPath_vs_default = "#version 300 es\n#define GLSLIFY 1\n\nlayout(location=0) in vec3 aVertex;\nlayout(location=1) in uint iPointA;\nlayout(location=2) in uint iPointB;\nlayout(location=3) in uint iColorA;\nlayout(location=4) in uint iColorB;\nlayout(location=5) in vec2 iColorMix;\nlayout(location=6) in float iWidth;\nlayout(location=7) in uvec4 iPickingColor;\n\nuniform bool uPicking;\n\nuniform mat4 uViewMatrix;\nuniform mat4 uSceneMatrix;\nuniform mat4 uProjectionMatrix;\nuniform vec2 uViewportSize;\nuniform float uPixelRatio;\nuniform float uPickingWidth;\nuniform sampler2D uGraphPoints;\nuniform sampler2D uColorPalette;\n\nuniform float uLineWidth;\n\nflat out float fLineWidth;\nflat out vec4 fPickingColor;\nout vec3 vColor;\nout vec2 vProjectedPosition;\nout float vProjectedW;\n\n// manual import from ../../../renderer/shaders/valueForIndex.glsl\n// to avoid uvec4 glslify error\nvec4 valueForIndex(sampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0);\n}\n\nvoid main() {\n    fPickingColor = uPicking ? vec4(iPickingColor) / 255.0 : vec4(0.0);\n\n    float multA = aVertex.y;\n    float multB = 1.0 - aVertex.y;\n\n    mat4 renderMatrix = uProjectionMatrix * uViewMatrix * uSceneMatrix;\n\n    vec3 offsetA = valueForIndex(uGraphPoints, int(iPointA)).xyz;\n    vec3 offsetB = valueForIndex(uGraphPoints, int(iPointB)).xyz;\n\n    vec4 aProjected = renderMatrix * vec4(offsetA, 1.0);\n    vec2 aScreen = aProjected.xy / aProjected.w * uViewportSize * 0.5;\n\n    vec4 bProjected = renderMatrix * vec4(offsetB, 1.0);\n    vec2 bScreen = bProjected.xy / bProjected.w * uViewportSize * 0.5;\n\n    vec2 direction = normalize(bScreen - aScreen);\n    vec2 perp = vec2(-direction.y, direction.x);\n\n    fLineWidth = (uPicking ? iWidth * uPickingWidth : iWidth) * uPixelRatio;\n    float offsetWidth = fLineWidth + 0.5;\n    vec4 position = aProjected * multA + bProjected * multB;\n    vec4 offset = vec4(((aVertex.x * perp * offsetWidth) / uViewportSize) * position.w, 0.0, 0.0);\n    gl_Position = position + offset;\n\n    vProjectedPosition = position.xy;\n    vProjectedW = position.w;\n\n    // calculate the color\n    vec4 colorA = valueForIndex(uColorPalette, int(iColorA));\n    vec4 colorB = valueForIndex(uColorPalette, int(iColorB));\n    vec3 mixColorA = mix(colorA.rgb, colorB.rgb, iColorMix[1]);\n    vec3 mixColorB = mix(colorA.rgb, colorB.rgb, iColorMix[0]);\n    vColor = mixColorA.rgb * multB + mixColorB.rgb * multA;\n}\n";

// src/graph/edges/path/StraightPath.fs.glsl
var StraightPath_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\n// from https://en.wikipedia.org/wiki/SRGB#The_reverse_transformation\nfloat luminance_x_1540259130(float x) {\n    return x <= 0.04045 ? x / 12.92 : pow((x + 0.055) / 1.055, 2.4);\n}\nfloat color_l_1540259130(float l) {\n    return min(1.0, max(0.0, l <= 0.0031308 ? l * 12.92 : pow(l * 1.055, 1.0 / 2.4) - 0.055));\n}\n\n// from https://en.wikipedia.org/wiki/Relative_luminance\nfloat rgb2luminance(vec3 color) {\n    // relative luminance\n    // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    float r = luminance_x_1540259130(color.r);\n    float g = luminance_x_1540259130(color.g);\n    float b = luminance_x_1540259130(color.b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n}\n\nvec3 setLuminance(vec3 color, float luminance) {\n    float r = luminance_x_1540259130(color.r) * 0.2126;\n    float g = luminance_x_1540259130(color.g) * 0.7152;\n    float b = luminance_x_1540259130(color.b) * 0.0722;\n    float colorLuminance = r + g + b;\n\n    float tr = luminance * (r / colorLuminance);\n    float tg = luminance * (g / colorLuminance);\n    float tb = luminance * (b / colorLuminance);\n\n    float rr = color_l_1540259130(tr / 0.2126);\n    float rg = color_l_1540259130(tg / 0.7152);\n    float rb = color_l_1540259130(tb / 0.0722);\n\n    return vec3(rr, rg, rb );\n}\n\n// https://www.w3.org/TR/WCAG20/#contrast-ratiodef\n// (L1 + 0.05) / (L2 + 0.05), where\n// - L1 is the relative luminance of the lighter of the colors, and\n// - L2 is the relative luminance of the darker of the colors.\nfloat findDarker(float luminance, float contrast) {\n    return (contrast * luminance) + (0.05 * contrast) - 0.05;\n}\nfloat findLighter(float luminance, float contrast) {\n    return (luminance + 0.05 - (0.05 * contrast)) / contrast;\n}\n\nvec3 contrastingColor(vec3 color, float contrast) {\n    float luminance = rgb2luminance(color);\n    float darker = findDarker(luminance, contrast);\n    float lighter = findLighter(luminance, contrast);\n\n    float targetLuminance;\n    if (darker < 0.0 || darker > 1.0) {\n        targetLuminance = lighter;\n    } else if (lighter < 0.0 || lighter > 1.0) {\n        targetLuminance = darker;\n    } else {\n        targetLuminance = abs(luminance - lighter) < abs(darker - luminance) ? lighter : darker;\n    }\n\n    return setLuminance(color, targetLuminance);\n}\n\nvec3 desaturateColor(vec3 color, float amount) {\n    float l = rgb2luminance(color);\n    vec3 gray = vec3(l, l, l);\n    return mix(color, gray, amount);\n}\n\nuniform vec4 uClearColor;\nuniform float uDesaturate;\nuniform float uBrightness;\nuniform float uFade;\nuniform float uAlpha;\n\nvec4 outputColor(vec4 color) {\n    // desaturate => fade => alpha\n    vec3 ret = mix(color.rgb, vec3(uBrightness + 1.0 / 2.0), abs(uBrightness));\n    ret = vec3(desaturateColor(ret, uDesaturate));\n    ret = mix(ret, uClearColor.rgb, uFade);\n    return vec4(ret, color.a * uAlpha);\n}\n\n#define MODE_DRAFT 0u\n#define MODE_MEDIUM 1u\n#define MODE_HIGH 2u\n#define MODE_HIGH_PASS_1 3u\n#define MODE_HIGH_PASS_2 4u\n#define MODE_PICKING 5u\n\n#define ONE_ALPHA 0.00392156862 // 1.0 / 255.0\n\nfloat lineAlpha(vec2 position, float w, vec2 viewportSize, float lineWidth) {\n    vec2 lineCenter = ((position / w) * 0.5 + 0.5) * viewportSize;\n    float distOffset = (lineWidth - 1.0) * 0.5;\n    float dist = smoothstep(lineWidth * 0.5 - 0.5, lineWidth * 0.5 + 0.5, distance(lineCenter, gl_FragCoord.xy));\n    return (1.0 - dist);\n}\n\nvec4 lineColor(vec3 color, vec2 position, float w, vec2 viewportSize, uint mode, float lineWidth) {\n    if (mode < MODE_HIGH_PASS_1) {\n        return outputColor(vec4(color, 1.0));\n    }\n\n    float a = lineAlpha(position, w, viewportSize, lineWidth);\n\n    if (mode == MODE_HIGH_PASS_1) {\n        if (a == 1.0) {\n            return outputColor(vec4(color, a));\n        } else {\n            discard;\n        }\n    }\n\n    // Possible optimization.\n    // Edges run into fill rate issues because too many of them overlap, discarging pixels below a certain alpha\n    // threshold might help speed things up a bit.\n    if (a < ONE_ALPHA) {\n        discard;\n    }\n\n    return outputColor(vec4(color, a));\n}\n\nuniform vec2 uViewportSize;\nuniform uint uRenderMode;\n\nflat in float fLineWidth;\nin vec3 vColor;\nin vec2 vProjectedPosition;\nin float vProjectedW;\n\nout vec4 fragColor;\n\nvoid main() {\n    fragColor = lineColor(vColor, vProjectedPosition, vProjectedW, uViewportSize, uRenderMode, fLineWidth);\n}\n";

// src/graph/edges/path/StraightPath.picking.fs.glsl
var StraightPath_picking_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\nflat in vec4 fPickingColor;\n\nout vec4 fragColor;\n\nvoid main() {\n    fragColor = fPickingColor;\n}\n";

// src/graph/edges/path/StraightPath.data.vs.glsl
var StraightPath_data_vs_default = "#version 300 es\n#define GLSLIFY 1\n\nlayout(location=0) in uint aSourceIndex;\nlayout(location=1) in uint aTargetIndex;\nlayout(location=2) in uvec2 aControl;\nlayout(location=3) in uint aSourceColor;\nlayout(location=4) in uint aTargetColor;\nlayout(location=5) in float aWidth;\nlayout(location=6) in uvec4 aPickingColor;\n\nuniform sampler2D uGraphPoints;\n\nflat out uint fSource;\nflat out uint fTarget;\nflat out uint fSourceColor;\nflat out uint fTargetColor;\nflat out vec2 fColorMix;\nflat out float fWidth;\nflat out uvec4 fPickingColor;\n\nvoid main() {\n    fSource = aSourceIndex;\n    fTarget = aTargetIndex;\n\n    fSourceColor = aSourceColor;\n    fTargetColor = aTargetColor;\n\n    fColorMix = vec2(float(aControl[0]) / float(aControl[1]), float(aControl[0] + 1u) / float(aControl[1]));\n\n    fWidth = aWidth;\n    fPickingColor = aPickingColor;\n}\n";

// src/graph/edges/path/StraightPath.ts
var kStraightPathEdgeDataTypes = {
  source: PicoGL.UNSIGNED_INT,
  target: PicoGL.UNSIGNED_INT,
  control: [PicoGL.UNSIGNED_INT, PicoGL.UNSIGNED_INT],
  sourceColor: PicoGL.UNSIGNED_INT,
  targetColor: PicoGL.UNSIGNED_INT,
  width: PicoGL.FLOAT,
  pickingColor: [PicoGL.UNSIGNED_INT, PicoGL.UNSIGNED_INT, PicoGL.UNSIGNED_INT, PicoGL.UNSIGNED_INT]
};
var kGLStraightPathEdgeTypes = {
  source: PicoGL.UNSIGNED_INT,
  target: PicoGL.UNSIGNED_INT,
  sourceColor: PicoGL.UNSIGNED_INT,
  targetColor: PicoGL.UNSIGNED_INT,
  colorMix: [PicoGL.FLOAT, PicoGL.FLOAT],
  width: PicoGL.FLOAT,
  pickingColor: [PicoGL.UNSIGNED_INT, PicoGL.UNSIGNED_INT, PicoGL.UNSIGNED_INT, PicoGL.UNSIGNED_INT]
};
var StraightPath = class extends Edges {
  initialize(context, points2, data, mappings2, pickingManager) {
    super.initialize(context, points2, data, mappings2, pickingManager);
    this.verticesVBO = context.createVertexBuffer(PicoGL.FLOAT, 2, new Float32Array([
      -1,
      0,
      1,
      0,
      -1,
      1,
      1,
      1
    ]));
    this.pickingHandler = this.handlePickingEvent.bind(this);
    this.edgesVAO = context.createVertexArray().vertexAttributeBuffer(0, this.verticesVBO);
    this.configureTargetVAO(this.edgesVAO);
    const shaders = this.getDrawShaders();
    this.program = context.createProgram(shaders.vs, shaders.fs);
    this.drawCall = context.createDrawCall(this.program, this.edgesVAO).primitive(PicoGL.TRIANGLE_STRIP);
    const pickingShaders = this.getPickingShaders();
    this.pickingProgram = context.createProgram(pickingShaders.vs, pickingShaders.fs);
    this.pickingDrawCall = context.createDrawCall(this.pickingProgram, this.edgesVAO).primitive(PicoGL.TRIANGLE_STRIP);
    this.compute(context, {
      uGraphPoints: this.dataTexture
    });
    this.pickingManager.on(PickingManager.events.hoverOn, this.pickingHandler);
    this.pickingManager.on(PickingManager.events.hoverOff, this.pickingHandler);
    this.pickingManager.on(PickingManager.events.click, this.pickingHandler);
  }
  destroy() {
  }
  ingestData(context, data, mappings2) {
    this.pickingColors = this.pickingManager.allocatePickingColors(data.length);
    super.ingestData(context, data, mappings2);
  }
  packDataCB() {
    return (index, entry) => {
      this.idArray.push(entry.id);
      const indexStart = 4 * index;
      entry.pickingColor = [
        this.pickingColors.colors[indexStart],
        this.pickingColors.colors[indexStart + 1],
        this.pickingColors.colors[indexStart + 2],
        this.pickingColors.colors[indexStart + 3]
      ];
    };
  }
  render(context, mode, uniforms) {
    this.configureRenderContext(context, mode);
    setDrawCallUniforms(this.drawCall, uniforms);
    setDrawCallUniforms(this.drawCall, this.localUniforms);
    switch (mode) {
      case 5 /* PICKING */:
        setDrawCallUniforms(this.pickingDrawCall, uniforms);
        setDrawCallUniforms(this.pickingDrawCall, this.localUniforms);
        this.pickingDrawCall.uniform("uPicking", true);
        this.pickingDrawCall.draw();
        break;
      default:
        this.drawCall.draw();
        break;
    }
  }
  getDrawShaders() {
    return {
      vs: StraightPath_vs_default,
      fs: StraightPath_fs_default
    };
  }
  getPickingShaders() {
    return {
      vs: StraightPath_vs_default,
      fs: StraightPath_picking_fs_default
    };
  }
  getGLSourceTypes() {
    return kStraightPathEdgeDataTypes;
  }
  getGLTargetTypes() {
    return kGLStraightPathEdgeTypes;
  }
  getDataShader() {
    return {
      vs: StraightPath_data_vs_default,
      varyings: ["fSource", "fTarget", "fSourceColor", "fTargetColor", "fColorMix", "fWidth", "fPickingColor"]
    };
  }
  computeMappings(mappings2) {
    const edgesMappings = Object.assign({}, kCurvedPathEdgeMappings, super.computeMappings(mappings2));
    const superControl = edgesMappings.control;
    edgesMappings.control = (entry, i4, l3) => {
      const control = superControl(entry, i4, l3);
      if (Array.isArray(control)) {
        control.push(null);
      }
      return control;
    };
    edgesMappings.control[kDataMappingFlatten] = (entry, i4, l3) => {
      return [i4, l3];
    };
    const getControl = (entry, i4) => this.points.getPointIndex(entry.control[i4]);
    edgesMappings.source[kDataMappingFlatten] = (entry, i4) => {
      if (i4 === 0) {
        return entry.source;
      }
      return getControl(entry, i4 - 1);
    };
    edgesMappings.target[kDataMappingFlatten] = (entry, i4, l3) => {
      if (i4 === l3 - 1) {
        return entry.target;
      }
      return getControl(entry, i4);
    };
    return edgesMappings;
  }
  handlePickingEvent(event, colorID) {
    if (this.picking && this.pickingColors.map.has(colorID)) {
      const id = this.idArray[this.pickingColors.map.get(colorID)];
      this.emit(event, id);
    }
  }
};

// src/graph/edges/bundle/ClusterBundle.vs.glsl
var ClusterBundle_vs_default = "#version 300 es\n#define GLSLIFY 1\n\nlayout(location=0) in vec3 aVertex;\nlayout(location=1) in vec3 iOffsetA;\nlayout(location=2) in vec3 iOffsetB;\nlayout(location=3) in vec3 iControl;\nlayout(location=4) in uint iColorA;\nlayout(location=5) in uint iColorB;\nlayout(location=6) in vec2 iColorMix;\nlayout(location=7) in float iWidth;\nlayout(location=8) in uvec4 iPickingColor;\n\nuniform bool uPicking;\n\nuniform mat4 uViewMatrix;\nuniform mat4 uSceneMatrix;\nuniform mat4 uProjectionMatrix;\nuniform vec2 uViewportSize;\nuniform float uPixelRatio;\nuniform float uPickingWidth;\nuniform sampler2D uColorPalette;\n\nuniform float uLineWidth;\nuniform float uSegments;\n\nflat out float fLineWidth;\nflat out vec4 fPickingColor;\nout vec3 vColor;\nout vec2 vProjectedPosition;\nout float vProjectedW;\n\nvec4 getColorByIndexFromTexture(sampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0);\n}\n\nvec3 bezier(vec3 p0, vec3 p1, vec3 p2, float t) {\n    return p1 + pow(1.0 - t, 2.0) * (p2 - p1) + pow(t, 2.0) * (p0 - p1);\n}\n\nvoid main() {\n    fPickingColor = uPicking ? vec4(iPickingColor) / 255.0 : vec4(0.0);\n\n    // bezier works fine with 0 > t > 1\n    float t0 = aVertex.y / uSegments;\n    float t1 = (aVertex.y + 1.0) / uSegments;\n\n    // calculate both bezier points\n    vec3 b0 = bezier(iOffsetA, iControl, iOffsetB, t0);\n    vec3 b1 = bezier(iOffsetA, iControl, iOffsetB, t1);\n\n    // project the points to the screen\n    mat4 renderMatrix = uProjectionMatrix * uViewMatrix * uSceneMatrix;\n    vec4 b0Projected = renderMatrix * vec4(b0, 1.0);\n    vec4 b1Projected = renderMatrix * vec4(b1, 1.0);\n\n    // get their screen coords\n    vec2 b0Screen = (b0Projected.xy / b0Projected.w) * uViewportSize * 0.5;\n    vec2 b1Screen = (b1Projected.xy / b1Projected.w) * uViewportSize * 0.5;\n\n    // get the direction and normal of the segment\n    vec2 direction = normalize(b1Screen - b0Screen);\n    vec2 normal = vec2(-direction.y, direction.x);\n\n    // calculate the pixel offset\n    fLineWidth = (uPicking ? iWidth * uPickingWidth : iWidth) * uPixelRatio;\n    float offsetWidth = fLineWidth + 0.5;\n    vec4 offset = vec4(((aVertex.x * normal * offsetWidth) / uViewportSize) * b0Projected.w, 0.0, 0.0);\n\n    // set the final vertex position\n    gl_Position = b0Projected + offset;\n    vProjectedPosition = b0Projected.xy;\n    vProjectedW = b0Projected.w;\n\n    // calculate the color\n    vec4 colorA = getColorByIndexFromTexture(uColorPalette, int(iColorA));\n    vec4 colorB = getColorByIndexFromTexture(uColorPalette, int(iColorB));\n    vec3 mixColorA = mix(colorA.rgb, colorB.rgb, iColorMix[1]);\n    vec3 mixColorB = mix(colorA.rgb, colorB.rgb, iColorMix[0]);\n    vColor = mix(mixColorA.rgb, mixColorB.rgb, t0);\n}\n\n";

// src/graph/edges/bundle/ClusterBundle.fs.glsl
var ClusterBundle_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\n// from https://en.wikipedia.org/wiki/SRGB#The_reverse_transformation\nfloat luminance_x_1540259130(float x) {\n    return x <= 0.04045 ? x / 12.92 : pow((x + 0.055) / 1.055, 2.4);\n}\nfloat color_l_1540259130(float l) {\n    return min(1.0, max(0.0, l <= 0.0031308 ? l * 12.92 : pow(l * 1.055, 1.0 / 2.4) - 0.055));\n}\n\n// from https://en.wikipedia.org/wiki/Relative_luminance\nfloat rgb2luminance(vec3 color) {\n    // relative luminance\n    // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    float r = luminance_x_1540259130(color.r);\n    float g = luminance_x_1540259130(color.g);\n    float b = luminance_x_1540259130(color.b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n}\n\nvec3 setLuminance(vec3 color, float luminance) {\n    float r = luminance_x_1540259130(color.r) * 0.2126;\n    float g = luminance_x_1540259130(color.g) * 0.7152;\n    float b = luminance_x_1540259130(color.b) * 0.0722;\n    float colorLuminance = r + g + b;\n\n    float tr = luminance * (r / colorLuminance);\n    float tg = luminance * (g / colorLuminance);\n    float tb = luminance * (b / colorLuminance);\n\n    float rr = color_l_1540259130(tr / 0.2126);\n    float rg = color_l_1540259130(tg / 0.7152);\n    float rb = color_l_1540259130(tb / 0.0722);\n\n    return vec3(rr, rg, rb );\n}\n\n// https://www.w3.org/TR/WCAG20/#contrast-ratiodef\n// (L1 + 0.05) / (L2 + 0.05), where\n// - L1 is the relative luminance of the lighter of the colors, and\n// - L2 is the relative luminance of the darker of the colors.\nfloat findDarker(float luminance, float contrast) {\n    return (contrast * luminance) + (0.05 * contrast) - 0.05;\n}\nfloat findLighter(float luminance, float contrast) {\n    return (luminance + 0.05 - (0.05 * contrast)) / contrast;\n}\n\nvec3 contrastingColor(vec3 color, float contrast) {\n    float luminance = rgb2luminance(color);\n    float darker = findDarker(luminance, contrast);\n    float lighter = findLighter(luminance, contrast);\n\n    float targetLuminance;\n    if (darker < 0.0 || darker > 1.0) {\n        targetLuminance = lighter;\n    } else if (lighter < 0.0 || lighter > 1.0) {\n        targetLuminance = darker;\n    } else {\n        targetLuminance = abs(luminance - lighter) < abs(darker - luminance) ? lighter : darker;\n    }\n\n    return setLuminance(color, targetLuminance);\n}\n\nvec3 desaturateColor(vec3 color, float amount) {\n    float l = rgb2luminance(color);\n    vec3 gray = vec3(l, l, l);\n    return mix(color, gray, amount);\n}\n\nuniform vec4 uClearColor;\nuniform float uDesaturate;\nuniform float uBrightness;\nuniform float uFade;\nuniform float uAlpha;\n\nvec4 outputColor(vec4 color) {\n    // desaturate => fade => alpha\n    vec3 ret = mix(color.rgb, vec3(uBrightness + 1.0 / 2.0), abs(uBrightness));\n    ret = vec3(desaturateColor(ret, uDesaturate));\n    ret = mix(ret, uClearColor.rgb, uFade);\n    return vec4(ret, color.a * uAlpha);\n}\n\n#define MODE_DRAFT 0u\n#define MODE_MEDIUM 1u\n#define MODE_HIGH 2u\n#define MODE_HIGH_PASS_1 3u\n#define MODE_HIGH_PASS_2 4u\n#define MODE_PICKING 5u\n\n#define ONE_ALPHA 0.00392156862 // 1.0 / 255.0\n\nfloat lineAlpha(vec2 position, float w, vec2 viewportSize, float lineWidth) {\n    vec2 lineCenter = ((position / w) * 0.5 + 0.5) * viewportSize;\n    float distOffset = (lineWidth - 1.0) * 0.5;\n    float dist = smoothstep(lineWidth * 0.5 - 0.5, lineWidth * 0.5 + 0.5, distance(lineCenter, gl_FragCoord.xy));\n    return (1.0 - dist);\n}\n\nvec4 lineColor(vec3 color, vec2 position, float w, vec2 viewportSize, uint mode, float lineWidth) {\n    if (mode < MODE_HIGH_PASS_1) {\n        return outputColor(vec4(color, 1.0));\n    }\n\n    float a = lineAlpha(position, w, viewportSize, lineWidth);\n\n    if (mode == MODE_HIGH_PASS_1) {\n        if (a == 1.0) {\n            return outputColor(vec4(color, a));\n        } else {\n            discard;\n        }\n    }\n\n    // Possible optimization.\n    // Edges run into fill rate issues because too many of them overlap, discarging pixels below a certain alpha\n    // threshold might help speed things up a bit.\n    if (a < ONE_ALPHA) {\n        discard;\n    }\n\n    return outputColor(vec4(color, a));\n}\n\nuniform vec2 uViewportSize;\nuniform uint uRenderMode;\n\nflat in float fLineWidth;\nin vec3 vColor;\nin vec2 vProjectedPosition;\nin float vProjectedW;\n\nout vec4 fragColor;\n\nvoid main() {\n    fragColor = lineColor(vColor, vProjectedPosition, vProjectedW, uViewportSize, uRenderMode, fLineWidth);\n}\n\n";

// src/graph/edges/bundle/ClusterBundle.picking.fs.glsl
var ClusterBundle_picking_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\nflat in vec4 fPickingColor;\n\nout vec4 fragColor;\n\nvoid main() {\n    fragColor = fPickingColor;\n}\n\n";

// src/graph/edges/bundle/ClusterBundle.data.vs.glsl
var ClusterBundle_data_vs_default = "#version 300 es\n#define GLSLIFY 1\n\nlayout(location=0) in uint aSourceIndex;\nlayout(location=1) in uint aTargetIndex;\nlayout(location=2) in uint aSourceClusterIndex;\nlayout(location=3) in uint aTargetClusterIndex;\nlayout(location=4) in uint aSourceColor;\nlayout(location=5) in uint aTargetColor;\nlayout(location=6) in float aWidth;\nlayout(location=7) in uvec2 aHyperEdgeStats;\nlayout(location=8) in uint aIndex;\nlayout(location=9) in uvec4 aPickingColor;\n\nuniform sampler2D uGraphPoints;\n\nout vec3 vSource;\nout vec3 vTarget;\nout vec3 vControl;\nflat out uint vSourceColor;\nflat out uint vTargetColor;\nout vec2 vColorMix;\nflat out float vWidth;\nflat out uvec4 vPickingColor;\n\n// manual import from ../../../renderer/shaders/valueForIndex.glsl\n// to avoid uvec4 glslify error\nvec4 valueForIndex(sampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0);\n}\n\nvoid main() {\n    vec4 source = valueForIndex(uGraphPoints, int(aSourceIndex));\n    vec4 target = valueForIndex(uGraphPoints, int(aTargetIndex));\n    vec4 sourceCluster = valueForIndex(uGraphPoints, int(aSourceClusterIndex));\n    vec4 targetCluster = valueForIndex(uGraphPoints, int(aTargetClusterIndex));\n\n    vec3 direction = normalize(vec3(targetCluster.xy, 0.0) - vec3(sourceCluster.xy, 0.0));\n    // assume 2D and ignore Z, future Dario, make this 3D!\n    vec3 perp = vec3(-direction.y, direction.x, direction.z);\n    float minClusterRadius = min(sourceCluster[3], targetCluster[3]);\n    float edgeWidth = minClusterRadius * 0.0005; // magic number\n    float maxOffset = minClusterRadius * 0.1; // magic number\n    float offsetLength = min(maxOffset, edgeWidth * float(aHyperEdgeStats[1]));\n    vec3 offset = (-perp * offsetLength * 0.5) + (perp * (offsetLength / float(aHyperEdgeStats[1])) * float(aHyperEdgeStats[0]));\n\n    vec3 sourceClusterEdge = sourceCluster.xyz + direction * sourceCluster[3] + offset;\n    vec3 targetClusterEdge = targetCluster.xyz - direction * targetCluster[3] + offset;\n\n    float edgeToEdge = length(targetClusterEdge - sourceClusterEdge);\n    vec3 bundlePoint = sourceClusterEdge + direction * (edgeToEdge * 0.5);\n\n    vec3 sourceEdgeToNode = sourceClusterEdge - source.xyz - direction * source[3];\n    float sourceNodeAdjacent = dot(normalize(sourceEdgeToNode), direction) * length(sourceEdgeToNode);\n    vec3 sourceClusterControl = sourceClusterEdge - direction * min(sourceNodeAdjacent * 0.75, sourceCluster[3]);\n    vec3 sourceControlDirection = normalize(sourceClusterControl - source.xyz);\n    vec3 sourcePoint = source.xyz + sourceControlDirection * source[3];\n\n    vec3 targetEdgeToNode = target.xyz - targetClusterEdge - direction * target[3];\n    float targetNodeAdjacent = dot(normalize(targetEdgeToNode), direction) * length(targetEdgeToNode);\n    vec3 targetClusterControl = targetClusterEdge + direction * min(targetNodeAdjacent * 0.75, targetCluster[3]);\n    vec3 targetControlDirection = normalize(targetClusterControl - target.xyz);\n    vec3 targetPoint = target.xyz + targetControlDirection * target[3];\n\n    // TODO: Optimize this to avoid branches. (If performance becomes a problem)\n    if (aIndex == 0u) {\n        if (aSourceIndex == aSourceClusterIndex) {\n            vSource = sourcePoint;\n            vControl = sourcePoint;\n            vTarget = sourcePoint;\n        } else {\n            vSource = sourcePoint;\n            vControl = sourceClusterControl;\n            vTarget = (sourceClusterControl + bundlePoint) / 2.0;\n        }\n    } else if (aIndex == 1u) {\n        if (aSourceIndex == aSourceClusterIndex) {\n            vSource = sourcePoint;\n        } else {\n            vSource = (sourceClusterControl + bundlePoint) / 2.0;\n        }\n\n        vControl = bundlePoint;\n\n        if (aTargetIndex == aTargetClusterIndex) {\n            vTarget = targetPoint;\n        } else {\n            vTarget = (bundlePoint + targetClusterControl) / 2.0;\n        }\n    } else {\n        if (aTargetIndex == aTargetClusterIndex) {\n            vSource = targetPoint;\n            vControl = targetPoint;\n            vTarget = targetPoint;\n        } else {\n            vSource = (bundlePoint + targetClusterControl) / 2.0;\n            vControl = targetClusterControl;\n            vTarget = targetPoint;\n        }\n    }\n\n    vSourceColor = aSourceColor;\n    vTargetColor = aTargetColor;\n\n    vColorMix = vec2(float(aIndex) * 0.25, float(aIndex + 1u) * 0.25);\n\n    vWidth = aWidth;\n    vPickingColor = aPickingColor;\n}\n";

// src/graph/edges/bundle/ClusterBundle.ts
var pickingColorNoOpMapping2 = () => null;
var kClusterBundleEdgeNoOpMapping = () => null;
var kClusterBundleEdgeMappings = {
  id: (entry, i4) => "id" in entry ? entry.id : i4,
  source: (entry) => entry.source,
  target: (entry) => entry.target,
  sourceCluster: (entry) => entry.sourceCluster,
  targetCluster: (entry) => entry.targetCluster,
  sourceColor: (entry) => "sourceColor" in entry ? entry.sourceColor : 0,
  targetColor: (entry) => "targetColor" in entry ? entry.targetColor : 0,
  width: (entry) => {
    var _a6;
    return (_a6 = entry.width) != null ? _a6 : 1.5;
  },
  hyperEdgeStats: kClusterBundleEdgeNoOpMapping,
  index: () => [0, 1, 2],
  pickingColor: pickingColorNoOpMapping2
};
var kClusterBundleEdgeDataTypes = {
  source: PicoGL.UNSIGNED_INT,
  target: PicoGL.UNSIGNED_INT,
  sourceCluster: PicoGL.UNSIGNED_INT,
  targetCluster: PicoGL.UNSIGNED_INT,
  sourceColor: PicoGL.UNSIGNED_INT,
  targetColor: PicoGL.UNSIGNED_INT,
  width: PicoGL.FLOAT,
  hyperEdgeStats: [PicoGL.UNSIGNED_INT, PicoGL.UNSIGNED_INT],
  index: PicoGL.UNSIGNED_INT,
  pickingColor: [PicoGL.UNSIGNED_INT, PicoGL.UNSIGNED_INT, PicoGL.UNSIGNED_INT, PicoGL.UNSIGNED_INT]
};
var kGLClusterBundleEdgeTypes = {
  source: [PicoGL.FLOAT, PicoGL.FLOAT, PicoGL.FLOAT],
  target: [PicoGL.FLOAT, PicoGL.FLOAT, PicoGL.FLOAT],
  control: [PicoGL.FLOAT, PicoGL.FLOAT, PicoGL.FLOAT],
  sourceColor: PicoGL.UNSIGNED_INT,
  targetColor: PicoGL.UNSIGNED_INT,
  colorMix: [PicoGL.FLOAT, PicoGL.FLOAT],
  width: PicoGL.FLOAT,
  pickingColor: [PicoGL.UNSIGNED_INT, PicoGL.UNSIGNED_INT, PicoGL.UNSIGNED_INT, PicoGL.UNSIGNED_INT]
};
var ClusterBundle = class extends Edges {
  constructor(context, points2, data, mappings2, pickingManager, segments = 16) {
    super(context, points2, data, mappings2, pickingManager, segments);
    this.hyperEdgeStats = null;
  }
  initialize(context, points2, data, mappings2, pickingManager, segments) {
    super.initialize(context, points2, data, mappings2, pickingManager);
    const segmentVertices = [];
    for (let i4 = 0; i4 <= segments; ++i4) {
      segmentVertices.push(
        -1,
        i4,
        1,
        i4
      );
    }
    this.pickingHandler = this.handlePickingEvent.bind(this);
    this.verticesVBO = context.createVertexBuffer(PicoGL.FLOAT, 2, new Float32Array(segmentVertices));
    this.edgesVAO = context.createVertexArray().vertexAttributeBuffer(0, this.verticesVBO);
    this.configureTargetVAO(this.edgesVAO);
    const shaders = this.getDrawShaders();
    this.program = context.createProgram(shaders.vs, shaders.fs);
    this.drawCall = context.createDrawCall(this.program, this.edgesVAO).primitive(PicoGL.TRIANGLE_STRIP);
    const pickingShaders = this.getPickingShaders();
    this.pickingProgram = context.createProgram(pickingShaders.vs, pickingShaders.fs);
    this.pickingDrawCall = context.createDrawCall(this.pickingProgram, this.edgesVAO).primitive(PicoGL.TRIANGLE_STRIP);
    this.compute(context, {
      uGraphPoints: this.dataTexture
    });
    this.pickingManager.on(PickingManager.events.hoverOn, this.pickingHandler);
    this.pickingManager.on(PickingManager.events.hoverOff, this.pickingHandler);
    this.pickingManager.on(PickingManager.events.click, this.pickingHandler);
    this.localUniforms.uSegments = segments;
  }
  destroy() {
  }
  ingestData(context, data, mappings2) {
    this.pickingColors = this.pickingManager.allocatePickingColors(data.length);
    super.ingestData(context, data, mappings2);
  }
  render(context, mode, uniforms) {
    setDrawCallUniforms(this.drawCall, uniforms);
    setDrawCallUniforms(this.drawCall, this.localUniforms);
    this.configureRenderContext(context, mode);
    switch (mode) {
      case 5 /* PICKING */:
        setDrawCallUniforms(this.pickingDrawCall, uniforms);
        setDrawCallUniforms(this.pickingDrawCall, this.localUniforms);
        this.pickingDrawCall.uniform("uPicking", true);
        this.pickingDrawCall.draw();
        break;
      default:
        this.drawCall.draw();
        break;
    }
  }
  getDrawShaders() {
    return {
      vs: ClusterBundle_vs_default,
      fs: ClusterBundle_fs_default
    };
  }
  getPickingShaders() {
    return {
      vs: ClusterBundle_vs_default,
      fs: ClusterBundle_picking_fs_default
    };
  }
  getGLSourceTypes() {
    return kClusterBundleEdgeDataTypes;
  }
  getGLTargetTypes() {
    return kGLClusterBundleEdgeTypes;
  }
  getDataShader() {
    return {
      vs: ClusterBundle_data_vs_default,
      varyings: ["vSource", "vTarget", "vControl", "vSourceColor", "vTargetColor", "vColorMix", "vWidth", "vPickingColor"]
    };
  }
  computeMappings(mappings2) {
    const edgesMappings = Object.assign({}, kClusterBundleEdgeMappings, super.computeMappings(mappings2));
    const sourceClusterMapping = edgesMappings.sourceCluster;
    edgesMappings.sourceCluster = (entry, i4) => {
      return this.points.getPointIndex(sourceClusterMapping(entry, i4));
    };
    const targetClusterMapping = edgesMappings.targetCluster;
    edgesMappings.targetCluster = (entry, i4) => {
      return this.points.getPointIndex(targetClusterMapping(entry, i4));
    };
    if (edgesMappings.hyperEdgeStats === kClusterBundleEdgeNoOpMapping) {
      this.hyperEdgeStats = /* @__PURE__ */ new Map();
      edgesMappings.hyperEdgeStats = (entry) => {
        if ("hyperEdgeStats" in entry) {
          return entry.hyperEdgeStats;
        }
        return [0, 0];
      };
    }
    return edgesMappings;
  }
  packDataCB() {
    if (!this.hyperEdgeStats) {
      return null;
    }
    const cb1 = (i4, entry) => {
      const key2 = `${entry.sourceCluster}=>${entry.targetCluster}`;
      let count = this.hyperEdgeStats.get(key2);
      if (count === null || count === void 0) {
        count = 0;
      }
      this.hyperEdgeStats.set(key2, count + 1);
      entry.hyperEdgeStats[0] = count;
      this.idArray.push(entry.id);
      const indexStart = 4 * i4;
      entry.pickingColor = [
        this.pickingColors.colors[indexStart],
        this.pickingColors.colors[indexStart + 1],
        this.pickingColors.colors[indexStart + 2],
        this.pickingColors.colors[indexStart + 3]
      ];
    };
    const cb2 = (i4, entry) => {
      const key2 = `${entry.sourceCluster}=>${entry.targetCluster}`;
      entry.hyperEdgeStats[1] = this.hyperEdgeStats.get(key2);
    };
    return [
      cb1,
      cb2
    ];
  }
  handlePickingEvent(event, colorID) {
    if (this.picking && this.pickingColors.map.has(colorID)) {
      const id = this.idArray[this.pickingColors.map.get(colorID)];
      this.emit(event, id);
    }
  }
};

// src/graph/edges/mod.ts
var types2 = {
  Straight,
  Dashed,
  Gravity,
  CurvedPath,
  StraightPath,
  ClusterBundle
};

// src/graph/labels/mod.ts
var mod_exports6 = {};
__export(mod_exports6, {
  CircularLabel: () => CircularLabel,
  CircularLabelPlacement: () => CircularLabelPlacement,
  LabelAtlas: () => LabelAtlas,
  PointLabel: () => PointLabel,
  PointLabelPlacement: () => PointLabelPlacement,
  RingLabel: () => RingLabel,
  kGLLabelNodeTypes: () => kGLLabelNodeTypes,
  kLabelMappings: () => kLabelMappings,
  kLabelNodeDataTypes: () => kLabelNodeDataTypes,
  kLabelNodeMappings: () => kLabelNodeMappings,
  kOffsetDataTypes: () => kOffsetDataTypes,
  types: () => types3
});

// src/graph/labels/point/PointLabel.fs.glsl
var PointLabel_fs_default = "#version 300 es\nprecision highp float;\nprecision lowp usampler2D;\n\nprecision lowp usampler2D;\n#define GLSLIFY 1\n\nvec4 valueForIndex(sampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0);\n}\n\nuvec4 uvalueForIndex(usampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0);\n}\n\nuint uivalueForIndex(usampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0)[0];\n}\n\n// from https://en.wikipedia.org/wiki/SRGB#The_reverse_transformation\nfloat luminance_x(float x) {\n    return x <= 0.04045 ? x / 12.92 : pow((x + 0.055) / 1.055, 2.4);\n}\nfloat color_l(float l) {\n    return min(1.0, max(0.0, l <= 0.0031308 ? l * 12.92 : pow(l * 1.055, 1.0 / 2.4) - 0.055));\n}\n\n// from https://en.wikipedia.org/wiki/Relative_luminance\nfloat rgb2luminance(vec3 color) {\n    // relative luminance\n    // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    float r = luminance_x(color.r);\n    float g = luminance_x(color.g);\n    float b = luminance_x(color.b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n}\n\nvec3 setLuminance(vec3 color, float luminance) {\n    float r = luminance_x(color.r) * 0.2126;\n    float g = luminance_x(color.g) * 0.7152;\n    float b = luminance_x(color.b) * 0.0722;\n    float colorLuminance = r + g + b;\n\n    float tr = luminance * (r / colorLuminance);\n    float tg = luminance * (g / colorLuminance);\n    float tb = luminance * (b / colorLuminance);\n\n    float rr = color_l(tr / 0.2126);\n    float rg = color_l(tg / 0.7152);\n    float rb = color_l(tb / 0.0722);\n\n    return vec3(rr, rg, rb );\n}\n\n// https://www.w3.org/TR/WCAG20/#contrast-ratiodef\n// (L1 + 0.05) / (L2 + 0.05), where\n// - L1 is the relative luminance of the lighter of the colors, and\n// - L2 is the relative luminance of the darker of the colors.\nfloat findDarker(float luminance, float contrast) {\n    return (contrast * luminance) + (0.05 * contrast) - 0.05;\n}\nfloat findLighter(float luminance, float contrast) {\n    return (luminance + 0.05 - (0.05 * contrast)) / contrast;\n}\n\nvec3 contrastingColor(vec3 color, float contrast) {\n    float luminance = rgb2luminance(color);\n    float darker = findDarker(luminance, contrast);\n    float lighter = findLighter(luminance, contrast);\n\n    float targetLuminance;\n    if (darker < 0.0 || darker > 1.0) {\n        targetLuminance = lighter;\n    } else if (lighter < 0.0 || lighter > 1.0) {\n        targetLuminance = darker;\n    } else {\n        targetLuminance = abs(luminance - lighter) < abs(darker - luminance) ? lighter : darker;\n    }\n\n    return setLuminance(color, targetLuminance);\n}\n\nvec3 desaturateColor(vec3 color, float amount) {\n    float l = rgb2luminance(color);\n    vec3 gray = vec3(l, l, l);\n    return mix(color, gray, amount);\n}\n\nuniform vec4 uClearColor;\nuniform float uDesaturate;\nuniform float uBrightness;\nuniform float uFade;\nuniform float uAlpha;\n\nvec4 outputColor(vec4 color) {\n    // desaturate => fade => alpha\n    vec3 ret = mix(color.rgb, vec3(uBrightness + 1.0 / 2.0), abs(uBrightness));\n    ret = vec3(desaturateColor(ret, uDesaturate));\n    ret = mix(ret, uClearColor.rgb, uFade);\n    return vec4(ret, color.a * uAlpha);\n}\n\n#define MODE_DRAFT 0u\n#define MODE_MEDIUM 1u\n#define MODE_HIGH 2u\n#define MODE_HIGH_PASS_1 3u\n#define MODE_HIGH_PASS_2 4u\n#define MODE_PICKING 5u\n\nvec4 renderChar(float charWidth, vec4 texPixel, vec4 backgroundColor, vec4 haloColor, vec4 textColor, float halo) {\n    float edgeThreshold = 0.49;\n    float haloThreshold = 0.18; // sets max halo threshold\n    float smoothing = 1.0 / charWidth;\n    float distance = texPixel.a;\n\n    vec4 finalColor = backgroundColor;\n    if (distance > edgeThreshold - smoothing) { // text fill\n        float textEdge = smoothstep(edgeThreshold - smoothing, edgeThreshold + smoothing, distance);\n        vec4 textEdgeBlendColor = mix(haloColor, backgroundColor, float(halo == 0.));\n        finalColor = mix(textEdgeBlendColor, textColor, textEdge);\n    }\n    else if (distance > edgeThreshold - haloThreshold * halo - smoothing) { // outline\n        float haloEdge = smoothstep(edgeThreshold - haloThreshold * halo - smoothing, edgeThreshold - haloThreshold * halo + smoothing, distance);\n        finalColor = mix(backgroundColor, haloColor, haloEdge);\n    }\n\n    return finalColor;\n}\n\nuniform usampler2D uLabelIndices;\nuniform usampler2D uLabelOffsets;\nuniform usampler2D uCharBoxes;\nuniform sampler2D uCharTexture;\nuniform float uPixelRatio;\nuniform uint uRenderMode;\nuniform float uPadding;\nuniform float uHalo;\n\nflat in vec4 fBackgroundColor;\nflat in vec4 fTextColor;\nflat in vec4 fHaloColor;\nflat in vec4 fLabelInfo;\nflat in float fPixelLength;\nflat in vec2 fCharTextureSize;\nin vec2 vFromCenter;\nin vec2 vStringCoords;\nin vec2 vPixelCoords;\n\nout vec4 fragColor;\n\nvoid main() {\n    float padding = uPadding * uPixelRatio;\n    vec4 finalColor;\n\n    if (vPixelCoords.x < padding || vPixelCoords.y < padding || vPixelCoords.x > fLabelInfo[2] + padding || vPixelCoords.y > fLabelInfo[3] + padding) {\n        finalColor = fBackgroundColor;\n    } else {\n        vec2 labelUV = (vPixelCoords - padding);\n\n        // make prediction of which char is likely to be rendered assuming all chars are equal width\n        int predictedChar = int(fLabelInfo[0] + fLabelInfo[1] * (labelUV.x / fLabelInfo[2]));\n        // get character start/end positions for prediction\n        float predictedXStart = float(uivalueForIndex(uLabelOffsets, predictedChar));\n        float predictedXEnd = float(uivalueForIndex(uLabelOffsets, predictedChar + 1));\n        predictedXEnd = predictedXEnd > 0. ? predictedXEnd : fLabelInfo[2];\n        // test and correct prediction against pre-computed char positions\n        while (labelUV.x < predictedXStart) {\n            predictedChar--;\n            predictedXEnd = predictedXStart;\n            predictedXStart = float(uivalueForIndex(uLabelOffsets, predictedChar));\n        }\n        while (labelUV.x > predictedXEnd) {\n            predictedChar++;\n            predictedXStart = predictedXEnd;\n            predictedXEnd = float(uivalueForIndex(uLabelOffsets, predictedChar + 1));\n            predictedXEnd = predictedXEnd > 0. ? predictedXEnd : fLabelInfo[2];\n        }\n\n        // float u = fLabelInfo[0] + fLabelInfo[1] * (labelUV.x / fLabelInfo.b);\n        float v = labelUV.y / fLabelInfo.a;\n\n        // int stringIndex = int(floor(u));\n        int stringIndex = predictedChar;\n        int charIndex = int(uivalueForIndex(uLabelIndices, stringIndex));\n        // coordinate and dimensions of character to be drawn in char map\n        vec4 charBox = vec4(uvalueForIndex(uCharBoxes, charIndex));\n        // float charMult = u - float(stringIndex);\n        float charMult = (labelUV.x - predictedXStart) / charBox[2];\n\n        vec4 charBoxUV = charBox / vec4(fCharTextureSize, fCharTextureSize);\n\n        vec2 uv = vec2(charBoxUV[0] + charBoxUV[2] * charMult, charBoxUV[1] + charBoxUV[3] * v);\n        vec4 texPixel = texture(uCharTexture, uv);\n\n        finalColor = renderChar(fLabelInfo[3], texPixel, fBackgroundColor, fHaloColor, fTextColor, uHalo);\n    }\n\n    float threshold = uRenderMode == MODE_HIGH_PASS_1 ? 0.75 : 0.5;\n\n    if (uRenderMode != MODE_HIGH_PASS_2) {\n        if (finalColor.a < threshold) {\n            discard;\n        }\n        fragColor = outputColor(vec4(finalColor.rgb, 1.0));\n    } else {\n        if (finalColor.a == 1.0) {\n            discard;\n        }\n        fragColor = outputColor(finalColor);\n    }\n\n//    if ((uRenderMode != MODE_HIGH_PASS_2 && texPixel.a < threshold) || (uRenderMode == MODE_HIGH_PASS_2 && texPixel.a == 1.0)) {\n//        discard;\n//    }\n//    float alpha = uRenderMode == MODE_HIGH_PASS_2 ? texPixel.a : 1.0;\n//    fragColor = vec4(texPixel.rgb * fColor.rgb, alpha);\n}\n";

// src/graph/labels/point/PointLabel.picking.fs.glsl
var PointLabel_picking_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\nuniform float uPixelRatio;\nuniform float uPadding;\nuniform bool uBackground;\n\nflat in vec4 fPickingColor;\nflat in vec4 fLabelInfo;\nin vec2 vPixelCoords;\n\nout vec4 fragColor;\n\nvoid main() {\n    float padding = uPadding * uPixelRatio;\n\n    if (!uBackground && (vPixelCoords.x < padding || vPixelCoords.y < padding || vPixelCoords.x > fLabelInfo[2] + padding || vPixelCoords.y > fLabelInfo[3] + padding)) {\n        discard;\n    } else {\n        fragColor = fPickingColor;\n    }\n}\n";

// src/graph/labels/point/PointLabel.vs.glsl
var PointLabel_vs_default = `#version 300 es

precision lowp usampler2D;

layout(location=0) in vec3 aVertex;
layout(location=1) in uint iPoint;
layout(location=2) in uint iColor;
layout(location=3) in uvec4 iLabel;
layout(location=4) in vec4 iPickingColor;

//layout(std140) uniform RenderUniforms {
    uniform mat4 uViewMatrix;
    uniform mat4 uSceneMatrix;
    uniform mat4 uProjectionMatrix;
    uniform vec2 uViewportSize;
    uniform float uPixelRatio;
    uniform sampler2D uGraphPoints;
    uniform sampler2D uColorPalette;
    uniform uint uCameraMode; // 0 = 2D; 1 = 3D;
//};
uniform usampler2D uLabelIndices;
uniform usampler2D uCharBoxes;
uniform sampler2D uCharTexture;
uniform float uVisibilityThreshold;
uniform vec2 uLabelPlacement;
uniform bool uBackground;
uniform bool uPicking;
uniform float uPadding;

flat out vec4 fBackgroundColor;
flat out vec4 fTextColor;
flat out vec4 fHaloColor;
flat out vec4 fPickingColor;
flat out vec4 fLabelInfo;
flat out float fPixelLength;
flat out vec2 fCharTextureSize;
out vec2 vFromCenter;
out vec2 vStringCoords;
out vec2 vPixelCoords;

precision lowp usampler2D;
#define GLSLIFY 1

vec4 valueForIndex(sampler2D tex, int index) {
    int texWidth = textureSize(tex, 0).x;
    int col = index % texWidth;
    int row = index / texWidth;
    return texelFetch(tex, ivec2(col, row), 0);
}

uvec4 uvalueForIndex(usampler2D tex, int index) {
    int texWidth = textureSize(tex, 0).x;
    int col = index % texWidth;
    int row = index / texWidth;
    return texelFetch(tex, ivec2(col, row), 0);
}

uint uivalueForIndex(usampler2D tex, int index) {
    int texWidth = textureSize(tex, 0).x;
    int col = index % texWidth;
    int row = index / texWidth;
    return texelFetch(tex, ivec2(col, row), 0)[0];
}

// from https://en.wikipedia.org/wiki/SRGB#The_reverse_transformation
float luminance_x(float x) {
    return x <= 0.04045 ? x / 12.92 : pow((x + 0.055) / 1.055, 2.4);
}
float color_l(float l) {
    return min(1.0, max(0.0, l <= 0.0031308 ? l * 12.92 : pow(l * 1.055, 1.0 / 2.4) - 0.055));
}

// from https://en.wikipedia.org/wiki/Relative_luminance
float rgb2luminance(vec3 color) {
    // relative luminance
    // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef
    float r = luminance_x(color.r);
    float g = luminance_x(color.g);
    float b = luminance_x(color.b);
    return 0.2126 * r + 0.7152 * g + 0.0722 * b;
}

vec3 setLuminance(vec3 color, float luminance) {
    float r = luminance_x(color.r) * 0.2126;
    float g = luminance_x(color.g) * 0.7152;
    float b = luminance_x(color.b) * 0.0722;
    float colorLuminance = r + g + b;

    float tr = luminance * (r / colorLuminance);
    float tg = luminance * (g / colorLuminance);
    float tb = luminance * (b / colorLuminance);

    float rr = color_l(tr / 0.2126);
    float rg = color_l(tg / 0.7152);
    float rb = color_l(tb / 0.0722);

    return vec3(rr, rg, rb );
}

// https://www.w3.org/TR/WCAG20/#contrast-ratiodef
// (L1 + 0.05) / (L2 + 0.05), where
// - L1 is the relative luminance of the lighter of the colors, and
// - L2 is the relative luminance of the darker of the colors.
float findDarker(float luminance, float contrast) {
    return (contrast * luminance) + (0.05 * contrast) - 0.05;
}
float findLighter(float luminance, float contrast) {
    return (luminance + 0.05 - (0.05 * contrast)) / contrast;
}

vec3 contrastingColor(vec3 color, float contrast) {
    float luminance = rgb2luminance(color);
    float darker = findDarker(luminance, contrast);
    float lighter = findLighter(luminance, contrast);

    float targetLuminance;
    if (darker < 0.0 || darker > 1.0) {
        targetLuminance = lighter;
    } else if (lighter < 0.0 || lighter > 1.0) {
        targetLuminance = darker;
    } else {
        targetLuminance = abs(luminance - lighter) < abs(darker - luminance) ? lighter : darker;
    }

    return setLuminance(color, targetLuminance);
}

vec3 desaturateColor(vec3 color, float amount) {
    float l = rgb2luminance(color);
    vec3 gray = vec3(l, l, l);
    return mix(color, gray, amount);
}

void main() {
    vec4 point = valueForIndex(uGraphPoints, int(iPoint));
    vec3 position = point.xyz;
    float radius = point.w;
    // claculate the offset matrix, done as a matrix to be able to compute "billboard" vertices in the shader
    mat4 offsetMatrix = mat4(1.0);
    offsetMatrix[3] = vec4(position, 1.0);

    // reset the rotation of the model-view matrix
    mat4 modelMatrix = uViewMatrix * uSceneMatrix * offsetMatrix;
    mat4 lookAtMatrix = mat4(modelMatrix);
    if (uCameraMode == 1u) {
        lookAtMatrix[0] = vec4(1.0, 0.0, 0.0, lookAtMatrix[0][3]);
        lookAtMatrix[1] = vec4(0.0, 1.0, 0.0, lookAtMatrix[1][3]);
        lookAtMatrix[2] = vec4(0.0, 0.0, 1.0, lookAtMatrix[2][3]);
    }

    // the on-screen center of this point
    vec4 quadCenter = uProjectionMatrix * lookAtMatrix * vec4(0.0, 0.0, 0.0, 1.0);
    vec2 screenQuadCenter = quadCenter.xy / quadCenter.w;

    // the on-screen position of a side of this quad
    vec4 quadSide = uProjectionMatrix * lookAtMatrix * vec4(radius, 0.0, 0.0, 1.0);
    vec2 screenQuadSide = quadSide.xy / quadSide.w;

    // compute the pixel radius of this point for a size of 1 in world coordinates
    float pixelRadius = length((screenQuadSide - screenQuadCenter) * uViewportSize * 0.5);

    // send the size of the char texture to the fragment shader
    fCharTextureSize = vec2(textureSize(uCharTexture, 0));

    // send the render color to the fragment shader
    vec4 color = valueForIndex(uColorPalette, int(iColor));
    if (uBackground) {
        fBackgroundColor = vec4(color.rgb, 1.0);
        fTextColor = vec4(contrastingColor(color.rgb, 7.0), 1.0);
    } else {
        fBackgroundColor = vec4(color.rgb, 0.0);
        fTextColor = vec4(color.rgb, 1.0);
    }
    fHaloColor = mix(vec4(1.), vec4(0., 0., 0., 1.), float(length(fTextColor.rgb) > 0.866));
    fPickingColor = uPicking ? iPickingColor / 255.0 : vec4(0.0);

    // send the normalized length of a single pixel to the fragment shader
    fPixelLength = 1.0 / max(1.0, pixelRadius);

    // send the normalized distance from the center to the fragment shader
    vFromCenter = aVertex.xy;

    // send the label size to the fragment shader
    fLabelInfo = vec4(iLabel);

    // compute the visibility multiplier
    float visibilityThreshold = uVisibilityThreshold * uPixelRatio;
    vec3 visibilityMultiplier = vec3(
        smoothstep(visibilityThreshold * 0.5, visibilityThreshold * 0.6, pixelRadius),
        smoothstep(visibilityThreshold * 0.5, visibilityThreshold * 0.525, pixelRadius),
        1.0
    );
//    float visibilityMultiplier = pixelRadius >= uVisibilityThreshold * 0.5 * uPixelRatio ? 1.0 : 0.0;

    // calculate the size of a pixel in worls coordinates with repsect to the point's position
    float pixelToWorld = radius / pixelRadius;

    // calculate the with and height of the label
    float padding = uPadding * uPixelRatio;
    vec3 labelSize = vec3((fLabelInfo[2] + padding * 2.0) * pixelToWorld, (fLabelInfo[3] + padding * 2.0) * pixelToWorld, 0.0);

    // compute the UV multiplier based on the vertices of the quad
    vec2 pixelMultiplier = vec2((aVertex.xy + 1.0) / 2.0);
    // send the pixel coords to the fragment shader
    vPixelCoords = vec2(fLabelInfo[2] + padding * 2.0, fLabelInfo[3] + padding * 2.0) * pixelMultiplier;

    // calculate the render matrix
    mat4 renderMatrix = uProjectionMatrix * lookAtMatrix;

    // claculate the label offset
    float labelMargin = 5.0 * pixelToWorld; // pixels
    vec3 labelOffset = vec3(
        (radius + labelSize.x * 0.5 + labelMargin) * uLabelPlacement.x,
        (radius + labelSize.y * 0.5 + labelMargin) * uLabelPlacement.y,
        uCameraMode == 1u ? 0.01 : 0.0
    );

    // compute the vertex position and its screen position
    vec4 worldVertex = renderMatrix * vec4(aVertex * labelSize * 0.5 * visibilityMultiplier + labelOffset, 1.0);

    // set the render vertex location
    gl_Position = worldVertex;
}
`;

// src/graph/labels/point/PointLabel.data.vs.glsl
var PointLabel_data_vs_default = "#version 300 es\n#define GLSLIFY 1\n\nlayout(location=0) in uint aPositionIndex;\nlayout(location=1) in uint aColor;\nlayout(location=2) in uvec4 aLabel;\n\nuniform sampler2D uGraphPoints;\n\nflat out uint fPoint;\nflat out uint fColor;\nflat out uvec4 fLabel;\n\nvoid main() {\n    fPoint = aPositionIndex;\n    fColor = aColor;\n    fLabel = aLabel;\n}\n";

// src/graph/labels/rtlText.js
var Module = {
  TOTAL_MEMORY: 8 * 1024 * 1024,
  TOTAL_STACK: 2 * 1024 * 1024,
  preRun: [],
  postRun: [],
  print: function(text) {
    console.log(text);
  },
  printErr: function(text) {
    text = Array.prototype.slice.call(arguments).join(" ");
    if (text.indexOf("pre-main prep time") >= 0) {
      return;
    }
    console.error(text);
  }
};
var Module = typeof Module !== "undefined" ? Module : {};
var moduleOverrides = {};
var key;
for (key in Module) {
  if (Module.hasOwnProperty(key)) {
    moduleOverrides[key] = Module[key];
  }
}
Module["arguments"] = [];
Module["thisProgram"] = "./this.program";
Module["quit"] = function(status, toThrow) {
  throw toThrow;
};
Module["preRun"] = [];
Module["postRun"] = [];
var ENVIRONMENT_IS_WEB = false;
var ENVIRONMENT_IS_WORKER = false;
var ENVIRONMENT_IS_NODE = false;
var ENVIRONMENT_IS_SHELL = false;
ENVIRONMENT_IS_WEB = typeof window === "object";
ENVIRONMENT_IS_WORKER = typeof importScripts === "function";
ENVIRONMENT_IS_NODE = typeof process === "object" && typeof __require === "function" && !ENVIRONMENT_IS_WEB && !ENVIRONMENT_IS_WORKER;
ENVIRONMENT_IS_SHELL = !ENVIRONMENT_IS_WEB && !ENVIRONMENT_IS_NODE && !ENVIRONMENT_IS_WORKER;
var scriptDirectory = "";
function locateFile(path) {
  if (Module["locateFile"]) {
    return Module["locateFile"](path, scriptDirectory);
  } else {
    return scriptDirectory + path;
  }
}
if (ENVIRONMENT_IS_WEB || ENVIRONMENT_IS_WORKER) {
  if (ENVIRONMENT_IS_WORKER) {
    scriptDirectory = self.location.href;
  } else if (document.currentScript) {
    scriptDirectory = document.currentScript.src;
  }
  if (scriptDirectory.indexOf("blob:") !== 0) {
    scriptDirectory = scriptDirectory.substr(0, scriptDirectory.lastIndexOf("/") + 1);
  } else {
    scriptDirectory = "";
  }
  Module["read"] = function shell_read(url) {
    try {
      var xhr = new XMLHttpRequest();
      xhr.open("GET", url, false);
      xhr.send(null);
      return xhr.responseText;
    } catch (err2) {
      var data = tryParseAsDataURI(url);
      if (data) {
        return intArrayToString(data);
      }
      throw err2;
    }
  };
  if (ENVIRONMENT_IS_WORKER) {
    Module["readBinary"] = function readBinary(url) {
      try {
        var xhr = new XMLHttpRequest();
        xhr.open("GET", url, false);
        xhr.responseType = "arraybuffer";
        xhr.send(null);
        return new Uint8Array(xhr.response);
      } catch (err2) {
        var data = tryParseAsDataURI(url);
        if (data) {
          return data;
        }
        throw err2;
      }
    };
  }
  Module["readAsync"] = function readAsync(url, onload, onerror) {
    var xhr = new XMLHttpRequest();
    xhr.open("GET", url, true);
    xhr.responseType = "arraybuffer";
    xhr.onload = function xhr_onload() {
      if (xhr.status == 200 || xhr.status == 0 && xhr.response) {
        onload(xhr.response);
        return;
      }
      var data = tryParseAsDataURI(url);
      if (data) {
        onload(data.buffer);
        return;
      }
      onerror();
    };
    xhr.onerror = onerror;
    xhr.send(null);
  };
  Module["setWindowTitle"] = function(title) {
    document.title = title;
  };
} else {
}
var out = Module["print"] || (typeof console !== "undefined" ? console.log.bind(console) : typeof print !== "undefined" ? print : null);
var err = Module["printErr"] || (typeof printErr !== "undefined" ? printErr : typeof console !== "undefined" && console.warn.bind(console) || out);
for (key in moduleOverrides) {
  if (moduleOverrides.hasOwnProperty(key)) {
    Module[key] = moduleOverrides[key];
  }
}
moduleOverrides = void 0;
function dynamicAlloc(size) {
  var ret = HEAP32[DYNAMICTOP_PTR >> 2];
  var end = ret + size + 15 & -16;
  if (end <= _emscripten_get_heap_size()) {
    HEAP32[DYNAMICTOP_PTR >> 2] = end;
  } else {
    var success = _emscripten_resize_heap(end);
    if (!success)
      return 0;
  }
  return ret;
}
var functionPointers = new Array(0);
var tempRet0 = 0;
var setTempRet0 = function(value) {
  tempRet0 = value;
};
var getTempRet0 = function() {
  return tempRet0;
};
var GLOBAL_BASE = 8;
var ABORT = false;
var EXITSTATUS = 0;
function getCFunc(ident) {
  var func = Module["_" + ident];
  return func;
}
function ccall(ident, returnType, argTypes, args, opts) {
  var toC = {
    "string": function(str6) {
      var ret2 = 0;
      if (str6 !== null && str6 !== void 0 && str6 !== 0) {
        var len5 = (str6.length << 2) + 1;
        ret2 = stackAlloc(len5);
        stringToUTF8(str6, ret2, len5);
      }
      return ret2;
    },
    "array": function(arr) {
      var ret2 = stackAlloc(arr.length);
      writeArrayToMemory(arr, ret2);
      return ret2;
    }
  };
  function convertReturnValue(ret2) {
    if (returnType === "string")
      return UTF8ToString(ret2);
    if (returnType === "boolean")
      return Boolean(ret2);
    return ret2;
  }
  var func = getCFunc(ident);
  var cArgs = [];
  var stack = 0;
  if (args) {
    for (var i4 = 0; i4 < args.length; i4++) {
      var converter = toC[argTypes[i4]];
      if (converter) {
        if (stack === 0)
          stack = stackSave();
        cArgs[i4] = converter(args[i4]);
      } else {
        cArgs[i4] = args[i4];
      }
    }
  }
  var ret = func.apply(null, cArgs);
  ret = convertReturnValue(ret);
  if (stack !== 0)
    stackRestore(stack);
  return ret;
}
function getMemory(size) {
  if (!runtimeInitialized)
    return dynamicAlloc(size);
  return _malloc(size);
}
var UTF8Decoder = typeof TextDecoder !== "undefined" ? new TextDecoder("utf8") : void 0;
function UTF8ArrayToString(u8Array, idx, maxBytesToRead) {
  var endIdx = idx + maxBytesToRead;
  var endPtr = idx;
  while (u8Array[endPtr] && !(endPtr >= endIdx))
    ++endPtr;
  if (endPtr - idx > 16 && u8Array.subarray && UTF8Decoder) {
    return UTF8Decoder.decode(u8Array.subarray(idx, endPtr));
  } else {
    var str6 = "";
    while (idx < endPtr) {
      var u0 = u8Array[idx++];
      if (!(u0 & 128)) {
        str6 += String.fromCharCode(u0);
        continue;
      }
      var u1 = u8Array[idx++] & 63;
      if ((u0 & 224) == 192) {
        str6 += String.fromCharCode((u0 & 31) << 6 | u1);
        continue;
      }
      var u22 = u8Array[idx++] & 63;
      if ((u0 & 240) == 224) {
        u0 = (u0 & 15) << 12 | u1 << 6 | u22;
      } else {
        u0 = (u0 & 7) << 18 | u1 << 12 | u22 << 6 | u8Array[idx++] & 63;
      }
      if (u0 < 65536) {
        str6 += String.fromCharCode(u0);
      } else {
        var ch = u0 - 65536;
        str6 += String.fromCharCode(55296 | ch >> 10, 56320 | ch & 1023);
      }
    }
  }
  return str6;
}
function UTF8ToString(ptr, maxBytesToRead) {
  return ptr ? UTF8ArrayToString(HEAPU8, ptr, maxBytesToRead) : "";
}
function stringToUTF8Array(str6, outU8Array, outIdx, maxBytesToWrite) {
  if (!(maxBytesToWrite > 0))
    return 0;
  var startIdx = outIdx;
  var endIdx = outIdx + maxBytesToWrite - 1;
  for (var i4 = 0; i4 < str6.length; ++i4) {
    var u3 = str6.charCodeAt(i4);
    if (u3 >= 55296 && u3 <= 57343) {
      var u1 = str6.charCodeAt(++i4);
      u3 = 65536 + ((u3 & 1023) << 10) | u1 & 1023;
    }
    if (u3 <= 127) {
      if (outIdx >= endIdx)
        break;
      outU8Array[outIdx++] = u3;
    } else if (u3 <= 2047) {
      if (outIdx + 1 >= endIdx)
        break;
      outU8Array[outIdx++] = 192 | u3 >> 6;
      outU8Array[outIdx++] = 128 | u3 & 63;
    } else if (u3 <= 65535) {
      if (outIdx + 2 >= endIdx)
        break;
      outU8Array[outIdx++] = 224 | u3 >> 12;
      outU8Array[outIdx++] = 128 | u3 >> 6 & 63;
      outU8Array[outIdx++] = 128 | u3 & 63;
    } else {
      if (outIdx + 3 >= endIdx)
        break;
      outU8Array[outIdx++] = 240 | u3 >> 18;
      outU8Array[outIdx++] = 128 | u3 >> 12 & 63;
      outU8Array[outIdx++] = 128 | u3 >> 6 & 63;
      outU8Array[outIdx++] = 128 | u3 & 63;
    }
  }
  outU8Array[outIdx] = 0;
  return outIdx - startIdx;
}
function stringToUTF8(str6, outPtr, maxBytesToWrite) {
  return stringToUTF8Array(str6, HEAPU8, outPtr, maxBytesToWrite);
}
var UTF16Decoder = typeof TextDecoder !== "undefined" ? new TextDecoder("utf-16le") : void 0;
function UTF16ToString(ptr) {
  var endPtr = ptr;
  var idx = endPtr >> 1;
  while (HEAP16[idx])
    ++idx;
  endPtr = idx << 1;
  if (endPtr - ptr > 32 && UTF16Decoder) {
    return UTF16Decoder.decode(HEAPU8.subarray(ptr, endPtr));
  } else {
    var i4 = 0;
    var str6 = "";
    while (1) {
      var codeUnit = HEAP16[ptr + i4 * 2 >> 1];
      if (codeUnit == 0)
        return str6;
      ++i4;
      str6 += String.fromCharCode(codeUnit);
    }
  }
}
function stringToUTF16(str6, outPtr, maxBytesToWrite) {
  if (maxBytesToWrite === void 0) {
    maxBytesToWrite = 2147483647;
  }
  if (maxBytesToWrite < 2)
    return 0;
  maxBytesToWrite -= 2;
  var startPtr = outPtr;
  var numCharsToWrite = maxBytesToWrite < str6.length * 2 ? maxBytesToWrite / 2 : str6.length;
  for (var i4 = 0; i4 < numCharsToWrite; ++i4) {
    var codeUnit = str6.charCodeAt(i4);
    HEAP16[outPtr >> 1] = codeUnit;
    outPtr += 2;
  }
  HEAP16[outPtr >> 1] = 0;
  return outPtr - startPtr;
}
function writeArrayToMemory(array, buffer2) {
  HEAP8.set(array, buffer2);
}
function writeAsciiToMemory(str6, buffer2, dontAddNull) {
  for (var i4 = 0; i4 < str6.length; ++i4) {
    HEAP8[buffer2++ >> 0] = str6.charCodeAt(i4);
  }
  if (!dontAddNull)
    HEAP8[buffer2 >> 0] = 0;
}
function alignUp(x2, multiple) {
  if (x2 % multiple > 0) {
    x2 += multiple - x2 % multiple;
  }
  return x2;
}
var buffer;
var HEAP8;
var HEAPU8;
var HEAP16;
var HEAPU16;
var HEAP32;
var HEAPU32;
var HEAPF32;
var HEAPF64;
function updateGlobalBufferViews() {
  Module["HEAP8"] = HEAP8 = new Int8Array(buffer);
  Module["HEAP16"] = HEAP16 = new Int16Array(buffer);
  Module["HEAP32"] = HEAP32 = new Int32Array(buffer);
  Module["HEAPU8"] = HEAPU8 = new Uint8Array(buffer);
  Module["HEAPU16"] = HEAPU16 = new Uint16Array(buffer);
  Module["HEAPU32"] = HEAPU32 = new Uint32Array(buffer);
  Module["HEAPF32"] = HEAPF32 = new Float32Array(buffer);
  Module["HEAPF64"] = HEAPF64 = new Float64Array(buffer);
}
var DYNAMIC_BASE = 5314e3;
var DYNAMICTOP_PTR = 71088;
var TOTAL_STACK = 5242880;
var INITIAL_TOTAL_MEMORY = Module["TOTAL_MEMORY"] || 16777216;
if (INITIAL_TOTAL_MEMORY < TOTAL_STACK)
  err("TOTAL_MEMORY should be larger than TOTAL_STACK, was " + INITIAL_TOTAL_MEMORY + "! (TOTAL_STACK=" + TOTAL_STACK + ")");
if (Module["buffer"]) {
  buffer = Module["buffer"];
} else {
  {
    buffer = new ArrayBuffer(INITIAL_TOTAL_MEMORY);
  }
}
updateGlobalBufferViews();
HEAP32[DYNAMICTOP_PTR >> 2] = DYNAMIC_BASE;
function callRuntimeCallbacks(callbacks) {
  while (callbacks.length > 0) {
    var callback = callbacks.shift();
    if (typeof callback == "function") {
      callback();
      continue;
    }
    var func = callback.func;
    if (typeof func === "number") {
      if (callback.arg === void 0) {
        Module["dynCall_v"](func);
      } else {
        Module["dynCall_vi"](func, callback.arg);
      }
    } else {
      func(callback.arg === void 0 ? null : callback.arg);
    }
  }
}
var __ATPRERUN__ = [];
var __ATINIT__ = [];
var __ATMAIN__ = [];
var __ATPOSTRUN__ = [];
var runtimeInitialized = false;
function preRun() {
  if (Module["preRun"]) {
    if (typeof Module["preRun"] == "function")
      Module["preRun"] = [Module["preRun"]];
    while (Module["preRun"].length) {
      addOnPreRun(Module["preRun"].shift());
    }
  }
  callRuntimeCallbacks(__ATPRERUN__);
}
function ensureInitRuntime() {
  if (runtimeInitialized)
    return;
  runtimeInitialized = true;
  callRuntimeCallbacks(__ATINIT__);
}
function preMain() {
  callRuntimeCallbacks(__ATMAIN__);
}
function postRun() {
  if (Module["postRun"]) {
    if (typeof Module["postRun"] == "function")
      Module["postRun"] = [Module["postRun"]];
    while (Module["postRun"].length) {
      addOnPostRun(Module["postRun"].shift());
    }
  }
  callRuntimeCallbacks(__ATPOSTRUN__);
}
function addOnPreRun(cb) {
  __ATPRERUN__.unshift(cb);
}
function addOnPostRun(cb) {
  __ATPOSTRUN__.unshift(cb);
}
var runDependencies = 0;
var runDependencyWatcher = null;
var dependenciesFulfilled = null;
function addRunDependency(id) {
  runDependencies++;
  if (Module["monitorRunDependencies"]) {
    Module["monitorRunDependencies"](runDependencies);
  }
}
function removeRunDependency(id) {
  runDependencies--;
  if (Module["monitorRunDependencies"]) {
    Module["monitorRunDependencies"](runDependencies);
  }
  if (runDependencies == 0) {
    if (runDependencyWatcher !== null) {
      clearInterval(runDependencyWatcher);
      runDependencyWatcher = null;
    }
    if (dependenciesFulfilled) {
      var callback = dependenciesFulfilled;
      dependenciesFulfilled = null;
      callback();
    }
  }
}
Module["preloadedImages"] = {};
Module["preloadedAudios"] = {};
var memoryInitializer = null;
var dataURIPrefix = "data:application/octet-stream;base64,";
function isDataURI(filename) {
  return String.prototype.startsWith ? filename.startsWith(dataURIPrefix) : filename.indexOf(dataURIPrefix) === 0;
}
__ATINIT__.push({
  func: function() {
    ___emscripten_environ_constructor();
  }
});
memoryInitializer = "data:application/octet-stream;base64,AAAAAAAAAAAAAQIHCAMJBgUEBAoKDAoKCgsKBAQEBA0OAAAAAAAAAAECBAUHDxEHCQcABwMSFQQBIiQlJy8xJyknAQEjMjUAIQIkJScvMScpJwICIzI1ASEiJiYoMDEoKCgDAwMyNQEhIgQlJy8xSgtKBAQjEhUCISIkBScvMScpTAUFIzI1AyEiBgYoMDEoKE0GBiMSFQMhIiQlBy8xB04HBwcjMjUEISImJggwMQgICAgIIzI1BCEiBCUHLzEHCQcJCSMSFQRhYgRlh29xh46HCodjEhUCISIEJScvMScLJwsLIxIVAmFiZAWHb3GHjocMh2NydQNhYgYGiHBxiIiIDYhjEhUDISKEJQcvMQcOBw4OI5KVBCEiJCUnDzEnKScPJyMyNQUhIiYmKBAxKCgoECgjMjUFISIkJScvEScpJxEnIzI1BiEiEiUnLzFTFFMSEiMSFQBhYhJlh29xh46HE4djEhUAISISJScvMScUJxQUIxIVACEiFSUnLzFWF1YVFSMSFQNhYhVlh29xh46HFodjEhUDISIVJScvMScXJxcXIxIVAwACEREAAAAAAEIBAQAAAAAAAgQEExMAAQAiNDQDAwAAAAIEBBMTAAIAAAAAAAAAAAEAAgIAAAAAAQABAhMTAAEBAAICAAAAASEwBgQDAzAAITAGBAUFMAMhMAYEBQUwAiEwBgQDAzABAAAAAAAAAAAAYgEBAAAAAABiAQEAMAAEAGJUVBMwAAMwQlRUAzAwAzBCBAQTMDAEAAAAAAAAAAATAAEBAAAAACMAAQECQAABIwABAQJAAAADAAM2FEAAAVNABTYEQEAAU0AFNgRAQAFTQAYGBEBAAwAAAAAAAAAAAAEAAgAAAAAAAQMDFBQAAQABAAIVFQACAAEDAxQUAAIAITMzBAQAAAAhADIFBQAAAGMAAQAAAAAAYwABEjAABCBjIAECMCADAGNVVhQwAAMwQ1VWBDAwAzBDBVYUMDAEMENVBhQwMAQAAAAAAAAAAAABAAAAAAAAAAEAABQUAAEAAQAAFRUAAgABAAAUFAACIAEgIAQEIAEgASAgBQUgAQEAAQEAAAAAAQABARQUAAEBAAEBAAAAAQEAAQEFBQABIQAhIQQEAAABAAEBBQUAAAADEREAAAAAIAMBAQIgIAIgAwEBAiAgAQADBQUUAAABIAMFBQQgIAEAAwUFFAAAAgIAAQEAAAAAAgABAQAAAAECABQUEwAAASIABAQDAAAAIgAEBAMAAAEAAAAAAAAAAAEAAgIAAAAAAQABAxQUAAEBAAICAAAAAQEAAQMFBQABIQAhAwQEAAABAAEDBQUAAHEGcQZ7BnsGewZ7Bn4GfgZ+Bn4GAAAAAAAAAAB6BnoGegZ6BgAAAAAAAAAAeQZ5BnkGeQYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIYGhgaGBoYGAAAAAAAAAACNBo0GjAaMBo4GjgaIBogGmAaYBpEGkQapBqkGqQapBq8GrwavBq8GAAAAAAAAAAAAAAAAAAAAALoGuga7BrsGuwa7BsAGwAbBBsEGwQbBBr4Gvga+Br4G0gbSBtMG0wYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMcGxwbGBsYGyAbIBgAAywbLBsUGxQbJBskG0AbQBtAG0AYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAzAbMBswGzAZLBksGTAZMBk0GTQZOBk4GTwZPBlAGUAZRBlEGUgZSBiEGIgYiBiMGIwYkBiQGJQYlBiYGJgYmBiYGJwYnBigGKAYoBigGKQYpBioGKgYqBioGKwYrBisGKwYsBiwGLAYsBi0GLQYtBi0GLgYuBi4GLgYvBi8GMAYwBjEGMQYyBjIGMwYzBjMGMwY0BjQGNAY0BjUGNQY1BjUGNgY2BjYGNgY3BjcGNwY3BjgGOAY4BjgGOQY5BjkGOQY6BjoGOgY6BkEGQQZBBkEGQgZCBkIGQgZDBkMGQwZDBkQGRAZEBkQGRQZFBkUGRQZGBkYGRgZGBkcGRwZHBkcGSAZIBkkGSQZKBkoGSgZKBlwGXAZdBl0GXgZeBl8GXwYAAAAAAAAAAAAAAAAAAAABAAMAAQABAAACAgAAAQIAAQECAAEBAwAAAAAAAAAAAAEAAwABAAMAAAECAAABAgABAQIAAQEDIREhEwEVIRcDGSEdAx8BIwMlAykDLQMxAzUBOQE7AT0BPwNBA0UDSQNNA1EDVQNZA10AAAAAAAAAAAAAAwADYQNlA2kTbQNxA3UDeQF9AX8DgQQBhAGEAYQBhAGEAUQDBAEEBwQIBAgEAQAAAAAAAAAAAAABhQGHAYkBiwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAYJACEAIQAAACEAAQABAAMACxYLDgsCAwADAAsGAwADAAMAAwADAAMAAwALKgMACTgBAAEAAQAJNAkyCTYBAAEACTwBAAEAAQABAAEAAQAJOgEAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMACz4DAAMAAwADAAMAC0IDAAMAAwADAAMAAwADAAMAAwADAAlOC1ADAAMAC1oDAAlUC1YBAAEAAQAJkAmJCYcJiwmSAQAJjgusAQADAAMAC5QDAAleCWAAAAAAAAAAAAAAAAAAAQAAAAAAAQIDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQIDAAAAAAAAAAAAAAAAAAEAAAABAgMAAQIDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAECAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAQEBAAAAAAAAAAAAAAAAAADAwMAAwADAwMDAwMDAwMDAAABAAEAAQABAAECAwABAAECAwABAAECAwABAgMAAQIDAAECAwABAgMAAQABAAEAAQABAgMAAQIDAAECAwABAgMAAQIDAAECAwABAgMAAQIDAAECAwABAgMAAQIDAAECAwABAgMAAQIDAAECAwABAAEAAQIDAAEAAQABAAEAAABdBGUEbQR1BI0ElQSdBKUErQS1BLsEwwTLBNME2wTjBOkE8QT5BAEFBAUMBRQFHAUkBSwFKAUwBTgFQAVFBU0FVQVdBWEFaQVxBXkFgQWJBYUFjQWSBZoFoAWoBbAFuAXABcgF0AXYBd0F5QXoBfAF+AUABgYGDgYNBhUGHQYlBjUGLQY9BkUGfQRVBl0GTQZtBm8GdwZlBocGjQaVBn8GpQarBrMGnQbDBskG0Qa7BuEG5wbvBtkG/wYHBw8H9wYfByUHLQcXBz0HQwdLBzUHWwdgB2gHUwd4B38HhwdwBwkGjweXB30EnwenB68HfQS3B78HxwfMB9QH2wfjB30EyAXrB/MH+wcDCFUFEwgLCMgFyAXIBcgFyAXIBcgFyAXIBcgFGwjIBSMIJwgvCMgFNQjIBTsIQwhLCFUFVQVTCFsIyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFYAhoCMgFyAVwCHgIgAiICJAIyAWYCKAIqAi4CMgFwAjCCMoIsAjIBc0I4QjVCN0I6QjIBfEI9wj/CAcJyAUXCR8JJwkPCX0EfQQ3CToJQgkvCVIJSgnIBVkJyAVoCWEJcAl4CXwJhAmMCf0ElAmXCZ0JpAmXCSQFrAmtBK0ErQStBLQJrQStBK0ExAnMCdQJ3AnkCegJ8Am8CQgKEAr4CQAKGAogCigKMApICjgKQApQClgKZwpsCl8KdAp0CnQKdAp0CnQKdAp0CnwKhAr/CIcKjwqWCpsKowr/CKoKqQq6Cr0K/wj/CLIK/wj/CP8I/wj/CMwK1ArECv8I/wj/CNkK/wj/CP8I/wj/CP8I/wjfCucK/wjvCvYK/wj/CP8I/wj/CP8I/wj/CHQKdAp0CnQK/gp0CgULDAt0CnQKdAp0CnQKdAp0CnQK/wgUCxsLHwslC/8IKwukClUFOwszC0MLrQStBK0ESwv9BFMLyAVZC2kLYQthCyQFcQt5C4ELfQSJC/8I/wiQC/8I/wj/CP8I/wj/CJgLnguuC6YLCQbIBbYLWwjIBb4LxgvKC8gFyAXPC9cL/wjfC6QK5wvtC/8I5wv1C/8IpAr/CP8I/wj/CP8I/wj/CP8I/QvIBcgFyAUFDMgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFCwzIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAUQDMgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXNCP8I/wgYDMgFGwzIBSMMKQwxDDkMPgzIBcgFQgzIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAVJDMgFUAxWDMgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAVeDMgFyAXIBWYMyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBWgMyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAVvDMgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFdgzIBcgFyAV9DIUMyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFigzIBcgFkgzIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFlgzIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAWZDMgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAWcDMgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFogzIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFqgzIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBa8MyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAW0DMgFyAXIBbkMyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcEMyAzMDMgFyAXIBdMMyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBdkM6QzIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgF4Qz/CPEMcAnIBcgFyAXIBcgFyAXIBcgF9gz+DK0EDg0GDcgFyAUWDR4NLg2tBDMNOw1BDX0EJg1JDVENyAVZDWkNbA1hDXQNHQZ8DYMNwQhtBpMNiw2bDcgFow2rDbMNyAW7DcMNyw3TDdsN3w3nDf0E/QTIBe8NyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAX3DQMO+w19BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0ECw4LDgsOCw4LDgsOCw4LDgsOCw4LDgsOCw4LDgsOCw4LDgsOCw4LDgsOCw4LDgsOCw4LDgsOCw4LDgsOCw4LDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw7IBcgFyAUbDsgF1AwiDicOyAXIBcgFLw7IBcgFzAh9BEUONQ49DsgFyAVNDlUOyAXIBcgFyAXIBcgFyAXIBcgFyAVaDmIOyAVmDsgFbA5wDngOgA6HDo8OyAXIBcgFlQ6tDm0EtQ69DsIO4QidDqUOCw4LDgsOCw4LDgsOCw4LDgsOCw4LDgsOCw4LDgsOCw4LDgsOCw4LDgsOCw4LDgsOCw4LDgsOCw4LDgsOCw4LDvQR9BE0EnQStBLsEiwTbBOkE+QTEBRQFJAUoBTgFBQVVBWEFcQVBBYUFkgWgBbAFgAXQBd0F6AX4BcYGDQYdBiACsAKAAtAC4ALQArAC0AK4gtACkAKQApACiIM2wHbAWIMogxACkAKQApACuIMAg1ACkAKQg2CDcINAg5CDoIOwg75DtsB2wEdD1EP2wF5D9sB2wHbAdsBpg/bAdsB2wHbAdsB2wHbAboP2wHyDzIQ2wE9ENsB2wHbAXMQQAqzEEAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAK8xBACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACgAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHMxEABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABzMRfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQTKDtEO2Q59BMgFyAXIBdcL6Q7hDgAP8Q74DggPhQsQD30EfQR9BH0EwQjIBRgPIA/IBSgPMA80DzwPyAVED30EVQVfBUwPyAVQD1gPaA9gD8gFcA/IBXcPfQR9BH0EfQTIBcgFyAXIBcgFyAXIBcgFyAVpC80IbA59BH0EfQR9BIcPfw+KD5IP4QiaD30Eog+qD7IPfQR9BMgFwg/KD7oP2g/hD9IP6Q/xD30EARD5D8gFBBAMEBQQHBAkEH0EfQTIBcgFLBB9BFUFNBD9BDwQyAVEEH0EfQR9BH0EfQR9BH0EfQR9BEwQfQR9BH0EfQRUEFwQYxB9BH0EfQR9BH0EcxD+BXsQaxBSCYMQixCREKkQmRChEK0QUgm9ELUQxRDVEM0QfQR9BNwQ5BAgBuwQ/BACEQoR9BB9BH0EfQR9BMgFEhEaEX0EyAUiESoRfQR9BH0EfQR9BMgFMhE6EX0EyAVCEUoRUhHIBWIRWhF9BDsIahF9BH0EfQR9BH0EfQTIBXIRfQR9BH0EVQX9BHoRfQR9BH0EfQR9BH0EfQR9BJIRghGKEcgFohGaEcgFwgh9BH0EfQR9BH0EfQR9BH0EuBG9EaoRshHNEcURfQR9BNwR4BHUEfAR6BFaEX0EfQR9BH0EfQR9BH0EfQR9BPQRfQR9BH0EfQR9BH0EfQR9BMgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFzAh9BH0EfQQEEgwSFBL8EcgFyAXIBcgFyAXIBRwSfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFJBJ9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFJhJ9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BMgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXCCOEILhJ9BH0EYg42EsgFPhJGEk4S2Qx9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQRVBf0EVhJ9BH0EfQTIBcgFXhJjEmsSfQR9BHMSyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFexLIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFgxJ9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BMgFyAXIBcgFyAXIBcgFyAXhCH0EfQRiDsgFyAXIBcgFyAXIBcgFyAXIBcgFyAX7DX0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EyAXIBcgFixKQEpgSfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BP8I/wj/CP8I/wj/CP8ImAv/CKAS/winEq8StRL/CLsS/wj/CMMSfQR9BH0EfQTLEv8I/wimCtMSfQR9BH0EfQTjEuoS7xL1Ev0SBRMNE+cSFRMdEyUTKhP8EuMS6hLmEvUSMhPkEjUT5xI9E0UTTRNUE0ATSBNQE1cTQxNfE9sS/wj/CP8I/wj/CP8I/wj/CP8I/wj/CP8I/wj/CP8I/wgkBW8TJAV2E30TZxN9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQSEE4wTfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BMgFyAXIBcgFyAXIBZQTfQRVBaQTnBN9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQSsE7wTtBN9BH0EfQR9BH0EfQR9BH0EfQR9BMwT1BPcE+QT7BP0E30ExBN9BH0EfQR9BH0EfQR9BH0E/wj8E/8I/wiQCwEUBRSYCw0U/wj/CPwT/wi6En0EFRQdFCEUKRQxFH0EfQR9BH0E/wj/CP8I/wj/CP8I/wg5FP8I/wj/CP8I/wj/CP8I/wj/CP8I/wj/CP8I/wj/CP8I/wj/CP8I/wj/CP8IQRRJFP8I/wj/CJAL/wj/CFEUfQT8E/8IWRT/CGEUmgt9BH0E/BOkCv8IZRT/CG0UHRT/CH0EfQR9BJoLfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BHUUyAXIBXwUyAXIBcgFhBTIBYwUyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFegzIBcgFlBTIBcgFyAXIBcgFyAXIBcgFyAXIBZwUpBTIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAW5DMgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAWrFMgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBbIUyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFuRTIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAVpC30EyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFvRTIBcgFyAXIBcgFyAVQD8gFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBX8SyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXIBcgFyAXCFH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQTIBcgFyAXIBcoUyAXIBcgFyAXIBcgFyAXIBcgFyAXIBVAPfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BNoU0hTSFNIUfQR9BH0EfQQkBSQFJAUkBSQFJAUkBeIUfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EfQR9BH0EEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMOEw4TDhMO6hRcBA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAMABcAFwAXABkAFwAXABcAFAAVABcAGAAXABMAFwAXAEkAiQDJAAkBSQGJAckBCQJJAokCFwAXABgAGAAYABcAFwABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAXABUAGgAWABoAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABQAGAAVABgADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAMABcAGQAZABkAGQAbABcAGgAbAAUAHAAYABAAGwAaABsAGABLA4sDGgACABcAFwAaAAsDBQAdAMs0SzTLPBcAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABgAAQABAAEAAQABAAEAAQACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAYAAIAAgACAAIAAgACAAIAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAgABAAIAAQACAAEAAgABAAIAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAQACAAEAAgABAAIAAgACAAEAAQACAAEAAgABAAEAAgABAAEAAQACAAIAAQABAAEAAQACAAEAAQACAAEAAQABAAIAAgACAAEAAQACAAEAAQACAAEAAgABAAIAAQABAAIAAQACAAIAAQACAAEAAQACAAEAAQABAAIAAQACAAEAAQACAAIABQABAAIAAgACAAUABQAFAAUAAQADAAIAAQADAAIAAQADAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAIAAQADAAIAAQACAAEAAQABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAIAAgACAAIAAgACAAEAAQACAAEAAQACAAIAAQACAAEAAQABAAEAAgABAAIAAQACAAEAAgABAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIABQACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAaABoAGgAaAAQABAAEAAQABAAEAAQABAAEAAQABAAEABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAEAAQABAAEAAQAGgAaABoAGgAaABoAGgAEABoABAAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgABAAIAAQACAAQAGgABAAIAAAAAAAQAAgACAAIAFwABAAAAAAAAAAAAGgAaAAEAFwABAAEAAQAAAAEAAAABAAEAAgABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAAABAAEAAQABAAEAAQABAAEAAQACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAQACAAIAAQABAAEAAgACAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAgACAAIAAgABAAIAGAABAAIAAQABAAIAAgABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgAbAAYABgAGAAYABgAHAAcAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgAAAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAABAAXABcAFwAXABcAFwACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAXABMAAAAAABsAGwAZAAAABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAEwAGABcABgAGABcABgAGABcABgAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAFAAUABQAFABcAFwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAGAAYABgAFwAXABkAFwAXABsAGwAGAAYABgAGAAYABgAGAAYABgAGAAYAFwAQAAAAFwAXAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEAAUABQAFAAUABQAFAAUABQAFAAUABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYASQCJAMkACQFJAYkByQEJAkkCiQIXABcAFwAXAAUABQAGAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAFwAFAAYABgAGAAYABgAGAAYAEAAbAAYABgAGAAYABgAGAAQABAAGAAYAGwAGAAYABgAGAAUABQBJAIkAyQAJAUkBiQHJAQkCSQKJAgUABQAFABsAGwAFABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAAABAABQAGAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAGAAYABgAGAAYABgAGAAYABgAGAAYABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASQCJAMkACQFJAYkByQEJAkkCiQIFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAGAAYABgAGAAYABgAGAAYABgAEAAQAGwAXABcAFwAEAAAAAAAGABkAGQAGAAYABgAGAAQABgAGAAYABAAGAAYABgAGAAYAAAAAABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAGAAYABgAGAAQABgAGAAYABgAGAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABgAGAAYAAAAAABcAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAGABAABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABQAFAAYABgAXABcASQCJAMkACQFJAYkByQEJAkkCiQIXAAQABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAYABgAGAAgABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABgAIAAYABQAIAAgACAAGAAYABgAGAAYABgAGAAYACAAIAAgACAAGAAgACAAFAAYABgAGAAYABgAGAAYABQAFAAUABQAFAAUABQAFAAUABQAGAAYAAAAAAEkAiQDJAAkBSQGJAckBCQJJAokCBQAFABkAGQDLN8s1yz/LNMs8SwkbABkABQAXAAYAAAAFAAYACAAIAAAABQAFAAUABQAFAAUABQAFAAAAAAAFAAUAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUAAAAFAAAAAAAAAAUABQAFAAUAAAAAAAYABQAIAAgACAAGAAYABgAGAAAAAAAIAAgAAAAAAAgACAAGAAUAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAEkAiQDJAAkBSQGJAckBCQJJAokCBgAGAAUABQAFAAYAFwAAAAAAAAAAAAAAAAAAAAAAAAAAAAYABgAIAAAABQAFAAUABQAFAAUAAAAAAAAAAAAFAAUAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUAAAAFAAUAAAAFAAUAAAAFAAUAAAAAAAYAAAAIAAgACAAGAAYAAAAAAAAAAAAGAAYAAAAAAAYABgAGAAAAAAAAAAYAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAABQAAAAUABQAGAAYAAAAAAEkAiQDJAAkBSQGJAckBCQJJAokCFwAZAAAAAAAAAAAAAAAAAAAABQAGAAYABgAGAAYABgAAAAYABgAIAAAABQAFAAUABQAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUAAAAFAAUAAAAFAAUABQAFAAUAAAAAAAYABQAIAAgACAAGAAYABgAGAAYAAAAGAAYACAAAAAgACAAGAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAGAAYAAAAAAEkAiQDJAAkBSQGJAckBCQJJAokCGwAFAMs0SzTLPMs3yzXLPwAAAAAAAAAAAAAAAAAAAAAAAAYACAAIAAAABQAFAAUABQAFAAUABQAFAAAAAAAFAAUAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUAAAAFAAUAAAAFAAUABQAFAAUAAAAAAAYABQAIAAYACAAGAAYABgAGAAAAAAAIAAgAAAAAAAgACAAGAAAAAAAAAAAAAAAAAAAAAAAGAAgAAAAAAAAAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAEkAiQDJAAkBSQGJAckBCQJJAokCywdLHkt4GwAbABsAGwAbABsAGQAbAAAAAAAAAAAAAAAAAAAABgAFAAAABQAFAAUABQAFAAUAAAAAAAAABQAFAAUAAAAFAAUABQAFAAAAAAAAAAUABQAAAAUAAAAFAAUAAAAAAAAABQAFAAAAAAAAAAUABQAFAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAACAAIAAYACAAIAAAAAAAAAAgACAAIAAAACAAIAAgABgAAAAAABQAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAFAAUABgAGAAAAAABJAIkAyQAJAUkBiQHJAQkCSQKJAgAAAAAAAAAAAAAAAAAAAABLBYsFywULBosFywULBhsABgAIAAgACAAGAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAUABgAGAAYACAAIAAgACAAAAAYABgAGAAAABgAGAAYABgAAAAAAAAAAAAAAAAAAAAYABgAAAAUABQAFAAAAAAAAAAAAAAAFAAUABgAGAAAAAABJAIkAyQAJAUkBiQHJAQkCSQKJAgAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAGAAgACAAXAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAGAAUACAAGAAgACAAIAAgACAAAAAYACAAIAAAACAAIAAYABgAAAAAAAAAAAAAAAAAAAAgACAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABgAGAAAAAABJAIkAyQAJAUkBiQHJAQkCSQKJAssHSx5LeMs0SzTLPMs3yzXLPxsABQAFAAUABQAFAAUABgAGAAgACAAAAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAYABgAFAAgACAAIAAYABgAGAAYAAAAIAAgACAAAAAgACAAIAAYABQAbAAAAAAAAAAAABQAFAAUACAALzAvKS8sLyUs2S8kLNQUAAAAAAAAAAAAAAAAASQCJAMkACQFJAYkByQEJAkkCiQIAAAAACAAIABcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAgAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAABgAAAAAAAAAAAAgACAAIAAYABgAGAAAABgAAAAgACAAIAAgACAAIAAgACAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABgAFAAUABgAGAAYABgAGAAYABgAAAAAAAAAAABkABQAFAAUABQAFAAUABAAGAAYABgAGAAYABgAGAAYAFwBJAIkAyQAJAUkBiQHJAQkCSQKJAhcAFwAAAAAAAAAAAAAABQAFAAAABQAAAAAABQAFAAAABQAAAAAABQAAAAAAAAAAAAAAAAAFAAUABQAFAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAAABQAAAAUAAAAAAAUABQAAAAUABQAFAAUABgAFAAUABgAGAAYABgAGAAYAAAAGAAYABQAAAAAABQAFAAUABQAFAAAABAAAAAYABgAGAAYABgAGAAAAAABJAIkAyQAJAUkBiQHJAQkCSQKJAgAAAAAFAAUABQAFAAUAGwAbABsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAGwAXABsAGwAbAAYABgAbABsAGwAbABsAGwBJAIkAyQAJAUkBiQHJAQkCSQKJAks0SzxLREtMS1RLXEtkS2xLdEssGwAGABsABgAbAAYAFAAVABQAFQAIAAgABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYACAAGAAYABgAGAAYAFwAGAAYABQAFAAUABQAFAAYABgAGAAYABgAGAAYABgAGAAYABgAAAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAAABsAGwAbABsAGwAbABsAGwAGABsAGwAbABsAGwAbAAAAGwAbABcAFwAXABcAFwAbABsAGwAbABcAFwAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAgACAAGAAYABgAGAAgABgAGAAYABgAGAAYACAAGAAYACAAIAAYABgAFAEkAiQDJAAkBSQGJAckBCQJJAokCFwAXABcAFwAXABcABQAFAAUABQAFAAUACAAIAAYABgAFAAUABQAFAAYABgAGAAUACAAIAAgABQAFAAgACAAIAAgACAAIAAgABQAFAAUABgAGAAYABgAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAYACAAIAAYABgAIAAgACAAIAAgACAAGAAUACABJAIkAyQAJAUkBiQHJAQkCSQKJAggACAAIAAYAGwAbAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABcABAACAAIAAgABAAEAAQABAAEAAQAAAAEAAAAAAAAAAAAAAAEAAAAAAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIABQAFAAUABQAFAAUABQAFAAUAAAAFAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAABQAAAAUABQAFAAUAAAAAAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUAAAAFAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAGAAYABgAXABcAFwAXABcAFwAXABcAFwALA0sDiwPLAwsESwSLBMsECwXLB0sKywxLD8sRSxTLFksZyxtLHot4AAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAbABsAGwAbABsAGwAbABsAGwAbAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAAAAAAIAAgACAAIAAgACAAAAAAATAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAXABcABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAwABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFABQAFQAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAFwAXABcAignKCQoKBQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABgAGAAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAYABgAGABcAFwAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAGAAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAAABgAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAGAAYACAAGAAYABgAGAAYABgAGAAgACAAIAAgACAAIAAgACAAGAAgACAAGAAYABgAGAAYABgAGAAYABgAGAAYAFwAXABcABAAXABcAFwAZAAUABgAAAAAASQCJAMkACQFJAYkByQEJAkkCiQIAAAAAAAAAAAAAAABLBYsFywULBksGiwbLBgsHSweLBwAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAYABQAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAXABcAFwAXABcAFwATABcAFwAXABcABgAGAAYAEAAAAEkAiQDJAAkBSQGJAckBCQJJAokCAAAAAAAAAAAAAAAABQAFAAUABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABgAGAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAGAAYACAAIAAgACAAGAAYACAAIAAgAAAAAAAAAAAAIAAgABgAIAAgACAAIAAgACAAGAAYABgAAAAAAAAAAABsAAAAAAAAAFwAXAEkAiQDJAAkBSQGJAckBCQJJAokCBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAEkAiQDJAAkBSQGJAckBCQJJAokCCwMAAAAAAAAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAGAAYACAAIAAYAAAAAABcAFwAXABcAFwAXABcAFwAXAAQAFwAXABcAFwAXABcAAAAAAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAHAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUACAAGAAgABgAGAAYABgAGAAYABgAAAAYACAAGAAgACAAGAAYABgAGAAYABgAGAAYACAAIAAgACAAIAAgABgAGAAYABgAGAAYABgAGAAYABgAAAAAABgBJAIkAyQAJAUkBiQHJAQkCSQKJAgAAAAAAAAAAAAAAAEkAiQDJAAkBSQGJAckBCQJJAokCAAAAAAAAAAAAAAAAFwAbABsAGwAbABsAGwAbABsAGwAbAAYABgAGAAYABgAGAAYABgAGABsAGwAbABsAGwAbABsAGwAbAAAAAAAAAAYABgAGAAYACAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAGAAgABgAGAAYABgAGAAgABgAIAAgACAAIAAgABgAIAAgABQAFAAUABQAFAAUABQAAAAAAAAAAAEkAiQDJAAkBSQGJAckBCQJJAokCFwAXABcAFwAXABcABQAIAAYABgAGAAYACAAIAAYABgAIAAYABgAGAAUABQBJAIkAyQAJAUkBiQHJAQkCSQKJAgUABQAFAAUABQAFAAYABgAIAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABgAIAAYABgAIAAgACAAGAAgABgAGAAYACAAIAAAAAAAAAAAAAAAAAAAAAAAXABcAFwAXAEkAiQDJAAkBSQGJAckBCQJJAokCAAAAAAAABQAFAAUASQCJAMkACQFJAYkByQEJAkkCiQIFAAUABQAFAAUABQAIAAgACAAIAAgACAAIAAgABgAGAAYABgAGAAYABgAGAAgACAAGAAYAAAAAAAAAFwAXABcAFwAXAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAQABAAEAAQABAAEABcAFwACAAIAAgACAAIAAgACAAIAAgAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAABAAEAAQAXABcAFwAXABcAFwAXABcAAAAAAAAAAAAAAAAAAAAAAAYABgAGABcABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAIAAYABgAGAAYABgAGAAYABQAFAAUABQAGAAUABQAFAAUACAAIAAYABQAFAAgABgAGAAAAAAAAAAAAAAAAAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAQAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIABAAEAAQABAAEAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAAAAYABgAGAAYABgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAIAAgACAAIAAgACAAIAAgABAAIAAgACAAIAAgACAAIAAgACAAEAAQABAAEAAQAaABoAGgAAAAAAAgACAAIAAAACAAIAAQABAAEAAQADABoAGgAAAAIAAgACAAIAAgACAAIAAgABAAEAAQABAAEAAQABAAEAAgACAAIAAgACAAIAAAAAAAEAAQABAAEAAQABAAAAAAACAAIAAgACAAIAAgACAAIAAQABAAEAAQABAAEAAQABAAIAAgACAAIAAgACAAIAAgABAAEAAQABAAEAAQABAAEAAgACAAIAAgACAAIAAAAAAAEAAQABAAEAAQABAAAAAAACAAIAAgACAAIAAgACAAIAAAABAAAAAQAAAAEAAAABAAIAAgACAAIAAgACAAIAAgABAAEAAQABAAEAAQABAAEAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAAAAAACAAIAAgACAAIAAgACAAIAAwADAAMAAwADAAMAAwADAAIAAgACAAIAAgACAAIAAgADAAMAAwADAAMAAwADAAMAAgACAAIAAgACAAAAAgACAAEAAQABAAEAAwAaAAIAGgAaABoAAgACAAIAAAACAAIAAQABAAEAAQADABoAGgAaAAIAAgACAAIAAAAAAAIAAgABAAEAAQABAAAAGgAaABoAFgAXABcAFwAYABQAFQAXABcAFwAXABcAFwAXABcAFwAXABcAGAAXABYAFwAXABcAFwAXABcAFwAXABcAFwAMABAAEAAQABAAEAAAABAAEAAQABAAEAAQABAAEAAQABAAywIEAAAAAADLAwsESwSLBMsECwUYABgAGAAUABUABAAMAAwADAAMAAwADAAMAAwADAAMAAwAEAAQABAAEAAQABMAEwATABMAEwATABcAFwAcAB0AFAAcABwAHQAUABwAFwAXABcAFwAXABcAFwAXAA0ADgAQABAAEAAQABAADAAXABcAFwAXABcAFwAXABcAFwAcAB0AFwAXABcAFwAWAMsCCwNLA4sDywMLBEsEiwTLBAsFGAAYABgAFAAVAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAGQAZABkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAcABwAHAAcABgAHAAcABwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAbABsAGwAbAAEAGwABABsAAQAbAAEAAQABAAEAGwACAAEAAQABAAEAAgAFAAUABQAFAAIAGwAbAAIAAgABAAEAGAAYABgAGAAYAAEAAgACAAIAAgAbABgAGwAbAAIAGwCLNQs2SzaLNIs4CzULOQs9C0FLNUtFyzXLPctFy02LBRsAGwABABsAGwAbABsAAQAbABsAAgABAAEAAQACAAIAAQABAAEAAgAbAAEAGwAbABgAAQABAAEAAQABABsAGwCKBcoFCgZKBooGygYKB0oHigfKBwoISgjKEUoeCphKeIoFygUKBkoGigbKBgoHSgeKB8oHCghKCMoRSh4KmEp4SnhKmIp4AQACAMoGyhGKmMp4SwUbABsAAAAAAAAAAAAYABgAGAAYABgAGwAbABsAGwAbABgAGAAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAbABsAGAAbABsAGAAbABsAGwAbABsAGwAbABgAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAYABgAGwAbABgAGwAYABsAGwAbABsAGwAbABsAGwAbABsAGwAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGwAbABsAGwAbABsAGwAbABQAFQAUABUAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABgAGAAbABsAGwAbABsAGwAbABQAFQAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGAAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABgAGAAYABgAGAAYABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGwAbABsAGwAbABsAGwAbABsAGwDLAgsISwiLCMsICwlLCYsJywkLCksKCwNLA4sDywMLBEsEiwTLBAsFywfLAgsDSwOLA8sDCwRLBIsEywQLBcsHCwhLCIsIywgLCUsJiwnLCQsKSwoLA0sDiwPLAwsESwSLBMsECwXLBwsISwiLCMsICwlLCYsJywkLCksKGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGAAYABgAGAAYABgAGAAYABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAYABsAGwAbABsAGwAbABsAGwAbABgAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGAAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABQAFQAUABUAFAAVABQAFQAUABUAFAAVABQAFQALA0sDiwPLAwsESwSLBMsECwXLBwsDSwOLA8sDCwRLBIsEywQLBcsHCwNLA4sDywMLBEsEiwTLBAsFywcbABsAGwAbABsAGwAbABsAGwAbABsAGwAYABgAGAAYABgAFAAVABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABQAFQAUABUAFAAVABQAFQAUABUAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAUABUAFAAVABQAFQAUABUAFAAVABQAFQAUABUAFAAVABQAFQAUABUAFAAVABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABQAFQAUABUAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAUABUAGAAYABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABsAGwAYABgAGAAYABgAGAAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAAAAAABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAAAAAAbABsAGwAbABsAGwAbABsAGwAAABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAAAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgABAAIAAQABAAEAAgACAAEAAgABAAIAAQACAAEAAQABAAEAAgABAAIAAgABAAIAAgACAAIAAgACAAQABAABAAEAAQACAAEAAgACABsAGwAbABsAGwAbAAEAAgABAAIABgAGAAYAAQACAAAAAAAAAAAAAAAXABcAFwAXAEs0FwAXAAIAAgACAAIAAgACAAAAAgAAAAAAAAAAAAAAAgAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAQAFwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAABcAFwAcAB0AHAAdABcAFwAXABwAHQAXABwAHQAXABcAFwAXABcAFwAXABcAFwATABcAFwATABcAHAAdABcAFwAcAB0AFAAVABQAFQAUABUAFAAVABcAFwAXABcAFwAEABcAFwAXABcAFwAXABcAFwAXABcAEwATABcAFwAXABcAEwAXABQAFwAXABcAFwAXABcAFwAXABcAFwAXABcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAAABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGwAbABsAGwAbABsAGwAbABsAGwAbABsAAAAAAAAAAAAbAIoFygUKBkoGigbKBgoHSgeKBwYABgAGAAYACAAIABMABAAEAAQABAAEABsAGwDKB0oKygwEAAUAFwAbABsADAAXABcAFwAbAAQABQBKBRQAFQAUABUAFAAVABQAFQAUABUAGwAbABQAFQAUABUAFAAVABQAFQATABQAFQAVAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABgAGABoAGgAEAAQABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAXAAQABAAEAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAbABsAiwXLBQsGSwYbABsAGwAbABsAGwAbABsAGwAbAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAbABsAGwAbAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAiwXLBQsGSwaLBssGCwdLB4sHywcbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAMsHSwrLDEsPyxFLFMsWSxkbAIsKywoLC0sLiwvLCwsMSwyLDMsMCw1LDYsNyw0LDhsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwBLDosOyw4LD0sPiw/LDwsQSxCLEMsQCxFLEYsRyxEFAAUABQAFAAUAhQYFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAxQUFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQCFBgUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQcFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQCFBQUABQAFBwUABQAFAIV4BQAFBgUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAhQcFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAxQUFAAUABQAFAAUABQAFAIUGBQBFBgUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQCFecUHBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUARXgFAAUABQAFAAUABQAFAAUABQYFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQCFBgUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAEUeBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAhXkFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAhXoFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAxQUFAEUHBQDFBgUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAxQcFAEV4RQrFDAUABQAFAAUABQAFAEUPBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUGBQYFBgUGBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUARQYFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAhQUFAAUABQAFAAUABQAFAIUFBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQCFBQUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAhQdFCgUABQAFAAUABQAFAAUABQAFAAUABQAFAIUFxQUFBgUAxQUFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQDFBwUABQAFAAUABQAFAAUABQAFAAUABQAFAAUARQcFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFBwUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAIUHBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQBFHgUABQAFAAUABQAFAAUARQYFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAIV4BQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAxQUFAAUABQAFAMUFBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQDFBQUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUARXgFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAxQYFAAUABQAFAAUARR4FAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQDFBgUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUARQUFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAFAAUABQAFAAUABQAFAAUABQAFABsAGwAbABsAGwAbABsAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEABcAFwAXAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUASQCJAMkACQFJAYkByQEJAkkCiQIFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIABAAEAAYABgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIABQAGAAcABwAHABcABgAGAAYABgAGAAYABgAGAAYABgAXAAQABQAFAAUABQAFAAUAigXKBQoGSgaKBsoGCgdKB4oHSgUGAAYAFwAXABcAFwAXABcAAAAAAAAAAAAAAAAAAAAAABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAEAAQAAgAFAAUABQAFAAUAGgAaAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgACAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAgABAAIABAACAAIAAgACAAIAAgACAAIAAQACAAEAAgABAAEAAgABAAIAAQACAAEAAgABAAIABAAaABoAAQACAAEAAgAFAAEAAgABAAIAAgACAAEAAgABAAIAAQACAAEAAgABAAIAAQACAAEAAQABAAEAAQACAAEAAQABAAEAAQACAAEAAgABAAIAAAAAAAAAAAAAAAAABQAFAAYABQAFAAUABgAFAAUABQAFAAYABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAgACAAGAAYACAAbABsAGwAbAAAAAAAAAAAAyzRLNMs8yzfLNcs/GwAbABkAGwAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAFwAXABcAFwAAAAAAAAAAAAAAAAAAAAAACAAIAAgACAAGAAYAAAAAAAAAAAAAAAAAAAAAABcAFwBJAIkAyQAJAUkBiQHJAQkCSQKJAgAAAAAAAAAAAAAAAAgACAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAIAAgACAAIAAgACAAIAAgACAAIAAgACAAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAFAAUABQAFAAUABQAXABcAFwAFABcABQAFAAYABQAFAAUABQAFAAUABgAGAAYABgAGAAYABgAGABcAFwAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAYABgAGAAYABgAGAAYABgAGAAYABgAIAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABcACAAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAAABABJAIkAyQAJAUkBiQHJAQkCSQKJAgAAAAAAAAAAFwAXAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABgAIAAgABgAGAAYABgAIAAgABgAIAAgACAAFAAUABQAFAAUABgAEAAUABQAFAAUABQAFAAUABQAFAEkAiQDJAAkBSQGJAckBCQJJAokCBQAFAAUABQAFAAAABQAFAAUABQAFAAUABQAFAAUABgAGAAYABgAGAAYACAAIAAYABgAIAAgABgAGAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAYABQAFAAUABQAFAAUABQAFAAYACAAAAAAASQCJAMkACQFJAYkByQEJAkkCiQIAAAAAFwAXABcAFwAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAQABQAFAAUABQAFAAUAGwAbABsABQAIAAYACAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAGAAUABgAGAAYABQAFAAYABgAFAAUABQAFAAUABgAGAAUABgAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAEABcAFwAFAAUABQAFAAUABQAFAAUABQAFAAUACAAGAAYACAAIABcAFwAFAAQABAAIAAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGgAEAAQABAAEAAIAAgACAAIAAgACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAFAAUABQAIAAgABgAIAAgABgAIAAgAFwAIAAYAAAAAAEkAiQDJAAkBSQGJAckBCQJJAokCAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFABIAEgASABIAEgASABIAEgASABIAEgASABIAEgASABIAEgASABIAEgASABIAEgASABIAEgASABIAEgASABIAEgARABEAEQARABEAEQARABEAEQARABEAEQARABEAEQARABEAEQARABEAEQARABEAEQARABEAEQARABEAEQARABEABQAFAAUABQAFAAUABQAFAAUABQAFAAUGBQAFAAUABQAFAAUABQDFBwUABQAFAAUAxQUFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAxQYFAMUGBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAMUHBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFABgABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAgACAAIAAgACAAIAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAIAAgACAAIAAAAAAAAAAAAAAAUABgAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAFQAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFABkAGwAAAAAABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAXABcAFwAXABcAFwAXABQAFQAXAAAAAAAAAAAAAAAAAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAFwATABMAFgAWABQAFQAUABUAFAAVABQAFQAUABUAFAAVABcAFwAUABUAFwAXABcAFwAWABYAFgAXABcAFwAAABcAFwAXABcAEwAUABUAFAAVABQAFQAXABcAFwAYABMAGAAYABgAAAAXABkAFwAXAAAAAAAAAAAABQAFAAUABQAFAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAEAAAAAAABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAFAAAAAAAFAAUABQAFAAUABQAAAAAABQAFAAUAAAAAAAAAGQAZABgAGgAbABkAGQAAABsAGAAYABgAGAAbABsAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAbABsAAAAAAAAAFwAXABcAGQAXABcAFwAUABUAFwAYABcAEwAXABcASQCJAMkACQFJAYkByQEJAkkCiQIXABcAGAAYABgAFwAaAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAUABgAFQAYABQAFQAXABQAFQAXABcABQAFAAUABQAFAAUABQAFAAUABQAEAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAC7ALuEt4S4BLiEuQS5hLoEuoS7BLuIt4i4CLiIuQi5iLoIuoi7CLuAAAAAAAABsAGwAbABsAGwAbABsAGwAbABcAFwAXAAAAAAAAAAAAiwXLBQsGSwaLBssGCwdLB4sHywdLCssMSw/LEUsUyxZLGcsbSx4LgAuIC5ALmAugC6jKB8oHygfKB8oHygzKEcoRyhHKEUoeCogKmAqYCpgKmAqYSnhKmIoGyhFLNEs0izjLPBsAGwAbABsAGwAbABsAGwAbABsAGwAbABsASwXLNBsAGwAbAAAAGwAbABsAGwAbABsAGwAbABsAGwAbABsAAAAAAAAAAADKNEo0igWKBsoRCphKmIqYigbKB8oRSh4KmEp4SpiKBsoHyhFKHgqYSniKeIqYygeKBYoFigXKBcoFygXKBYoGGwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAGAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgCLBcsFCwZLBosGywYLB0sHiwfLB0sKywxLD8sRSxTLFksZyxtLHguAC4gLkAuYC6ALqAuwC7gAAAAAAAAAAIsFiwbLB8sRAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAMobBQAFAAUABQAFAAUABQAFAAq4AAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABgAGAAYABgAGAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAABcABQAFAAUABQAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAXAIoFygXKB0oKSh4AAAAAAAAAAAAAAAAAAAAAAAAAAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAEkAiQDJAAkBSQGJAckBCQJJAokCAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAgACAAIAAgACAAIAAgACAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAFAAUAAAAAAAAABQAAAAAABQAFAAUABQAFAAUABQAAAAAABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAFwCLBcsFCwbLB0sKSx5LeIt4BQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFABsAGwCLBcsFCwZLBosGywdLCgAAAAAAAAAAAAAAAAAAiwXLBQsGSwZLBosGywdLCkseAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAAAAAAAAAAAAACLBYsGywdLCkseBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQCLBcsHSwpLHssFCwYAAAAAAAAXAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAFwBLoEuoS7BLuIt4i4CLiIuQi5iLoIuoi7CLuMt4y4DLiMuQy5jLoMuoy7DLuMs2SzXLNIs0y0ZLNMtOizjLPEtFBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAADLXks0BQAFAIsFywULBksGiwbLBgsHSweLB8sHSwrLDEsPyxFLFMsWAAAAAEseC4ALiAuQC5gLoAuoC7ALuEt4S4BLiEuQS5gLA0sDiwPLA8sHSwpLHkt4SzQAAAAAAAAAAAAAAAAAABcAFwAXABcAFwAXABcAFwAXAAAAAAAAAAAAAAAAAAAABQAGAAYABgAAAAYABgAAAAAAAAAAAAAABgAGAAYABgAFAAUABQAFAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAGAAYABgAAAAAAAAAAAAYABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAIsFyxEXAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQCLBcsHSwoFAAUABQAFAAUABgAGAAAAAAAAAAAAiwWLBssHSwpLHhcAFwAXABcAFwAXABcAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFABsABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAXABcAFwAXABcAFwAXAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAIsFywULBksGywdLCkseS3gFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAACLBcsFCwZLBssHSwpLHkt4BQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAXABcAFwAXAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIsFywULBksGywdLCkseAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAAAAAAAAAACLBYsGywfLEUseS3gFAAUABQAFAAYABgAGAAYAAAAAAAAAAAAAAAAAAAAAAEkAiQDJAAkBSQGJAckBCQJJAokCAAAAAAAAAAAAAAAACwNLA4sDywMLBEsEiwTLBAsFywdLCssMSw/LEUsUyxZLGcsbSx4LgAuIC5ALmAugC6gLsAu4SzTLNIs0izgAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQCLBcsFCwZLBosGywdLCssMSx5LNAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAYABgAGAAYABgAGAAYABgAGAAYABgCLBcsHSwpLHhcAFwAXABcAFwAAAAAAAAAAAAAAAABLFMsWSxnLG0seS3hJAIkAyQAJAUkBiQHJAQkCSQKJAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYACAAGAAgABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAYABgAGAAYABgAGAAYAFwAXABcAFwAXABcAFwAAAAAAAAAAAAsDSwOLA8sDCwRLBIsEywQLBcsHSwrLDEsPyxEFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAgACAAIAAYABgAGAAYACAAIAAYABgAXABcAEAAXABcAFwAXAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAABJAIkAyQAJAUkBiQHJAQkCSQKJAgAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABgAGAAYABgAGAAgABgAGAAYABgAGAAYABgAGAAAASQCJAMkACQFJAYkByQEJAkkCiQIXABcAFwAXAAUACAAIAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABgAGAAYABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAYAFwAXAAUAAAAAAAAAAAAAAAAAAAAAAAAACAAFAAUABQAFABcAFwAXABcABgAGAAYABgAXAAAAAABJAIkAyQAJAUkBiQHJAQkCSQKJAgUAFwAFABcAFwAXAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUACAAIAAgABgAGAAYABgAGAAYABgAGAAYACAAAAIsFywULBksGiwbLBgsHSweLB8sHSwrLDEsPyxFLFMsWSxnLG0seS3gAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUACAAIAAgABgAGAAYACAAIAAYACAAGAAYAFwAXABcAFwAXABcABgAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUABQAFAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFABcAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAIAAgACAAGAAYABgAGAAYABgAGAAYAAAAAAAAAAAAAAEkAiQDJAAkBSQGJAckBCQJJAokCAAAAAAAAAAAAAAAABQAFAAgACAAAAAAABgAGAAYABgAGAAYABgAAAAAAAAAGAAYABgAGAAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYABgAIAAgAAAAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAYABgAFAAgACAAGAAgACAAIAAgAAAAAAAgACAAAAAAACAAIAAgAAAAAAAUAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUACAAIAAgABgAGAAYABgAGAAYABgAGAAgACAAGAAYABgAIAAYABQAFAAUABQAXABcAFwAXABcASQCJAMkACQFJAYkByQEJAkkCiQIAABcAAAAXAAYAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAgACAAIAAYABgAGAAYABgAGAAgABgAIAAgACAAIAAYABgAIAAYABgAFAAUAFwAFAAAAAAAAAAAAAAAAAAAAAABJAIkAyQAJAUkBiQHJAQkCSQKJAgAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAgACAAIAAYABgAGAAYAAAAAAAgACAAIAAgABgAGAAgABgAGABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAFAAUABQAFAAYABgAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAIAAgACAAGAAYABgAGAAYABgAGAAYACAAIAAYACAAGAAYAFwAXABcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASQCJAMkACQFJAYkByQEJAkkCiQIAAAAAAAAAAAAAAAAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASQCJAMkACQFJAYkByQEJAkkCiQIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAGAAgABgAIAAgABgAGAAYABgAGAAYACAAGAAAAAAAAAAAAAAAAAAAAAAAIAAgABgAGAAYABgAIAAYABgAGAAYABgAAAAAAAAAAAEkAiQDJAAkBSQGJAckBCQJJAokCywdLChcAFwAXABsABQAFAAUABQAFAAUABQAFAAUABQAFAAUACAAIAAgABgAGAAYABgAGAAYABgAGAAYACAAGAAYAFwAAAAAAAAAAAEkAiQDJAAkBSQGJAckBCQJJAokCywdLCssMSw/LEUsUyxZLGcsbAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAYABgAGAAYABgAGAAgABQAGAAYABgAGABcAFwAXABcAFwAXABcAFwAGAAAAAAAAAAAAAAAAAAAAAAAFAAYABgAGAAYABgAGAAgACAAGAAYABgAFAAUABQAFAAUABgAGAAYABgAGAAYABgAGAAYABgAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAXABcAFwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAABQAFAAUABQAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAgABgAGABcAFwAXAAUAFwAXAAUAFwAXABcAFwAXAAAAAAAAAAAAAAAAAAAAAAAAAAAASQCJAMkACQFJAYkByQEJAkkCiQKLBcsFCwZLBosGywYLB0sHiwfLB0sKywxLD8sRSxTLFksZyxtLHgAAAAAAABcAFwAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUACAAGAAYABgAGAAYABgAGAAAABgAGAAYABgAGAAYACAAGAAYABgAGAAYABgAGAAYABgAAAAgABgAGAAYABgAGAAYABgAIAAYABgAIAAYABgAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAUABgAAAAAAAAAAAAAAAAAAAAAASQCJAMkACQFJAYkByQEJAkkCiQIAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAABQAFAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAGAAYABgAGAAYABgAAAAAAAAAGAAAABgAGAAAABgAFAAUABQAFAAUABQAFAAUABQAFAAgACAAIAAgACAAAAAYABgAAAAgACAAGAAgABgAFAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAYABgAIAAgAFwAXAAAAAAAAAAAAAAAAAAAAyjRKNco0yjRKNIo0ijhKD8oRSgaKBsoGCgdKB4oHAAAXABcAFwAXABcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMoFCgZKBooGygYKB0oHigcKBkoGigbKBgoHSgeKB0oGigbKBgoHSgeKB4oFygUKBkoGigbKBgoHSgeKB4oFygUKBkoGigbKBQoGCgZKBooGygYKB0oHigeKBcoFCgYKBkoGigaKwIrBigXKBQoGCgZKBooGCgYKBkoGSgZKBkoGygYKBwoHCgdKB0oHigeKB4oHigfKBQoGSgaKBsoGigXKBQoGSgZKBooGigbKBQoGigXKBYo0ijhKRYo0ijjKNQUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEkAiQDJAAkBSQGJAckBCQJJAokCAAAAAAAAAAAXABcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAYABgAGAAYABgAXAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAGAAYABgAGAAYABgAGABcAFwAXABcAFwAbABsAGwAbAAQABAAEAAQAFwAbAAAAAAAAAAAAAAAAAAAAAAAAAAAASQCJAMkACQFJAYkByQEJAkkCiQIAAMsHSx6LeAt5i3kLeot6AAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAABQAFAAUASwWLBcsFCwZLBosGywYLB0sHiwfLBwsISwiLCMsICwlLCYsJywkLCosFywULBhcAFwAXABcAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAGAAYABgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUAAAAAABsABgAGABcAEAAQABAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABsAGwAbABsAGwAbABsAAAAAABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAgACAAGAAYABgAbABsAGwAIAAgACAAIAAgACAAQABAAEAAQABAAEAAQABAABgAGAAYABgAGAAYABgAGABsAGwAGAAYABgAGAAYABgAGABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsABgAGAAYABgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAbABsABgAGAAYAGwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASwWLBcsFCwZLBosGywYLB0sHiwfLBwsISwiLCMsICwlLCYsJywkLCgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIsFywULBksGiwbLBgsHSweLB8sHSwrLDEsPyxFLFMsWSxnLG4sFywULBksGiwaLBYsGAAAAAAAAAAAAAAAAAABJAokCSQCJAMkACQFJAYkByQEJAkkCiQJJAIkAyQAJAUkBiQHJAQkCSQKJAkkAiQDJAAkBSQGJAckBCQJJAokCAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAIAAgACAAIAAgACAAIAAAACAAIAAgACAAIAAgACAAIAAgACAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAQAAAAEAAQAAAAAAAQAAAAAAAQABAAAAAAABAAEAAQABAAAAAQABAAEAAQABAAEAAQABAAIAAgACAAIAAAACAAAAAgACAAIAAgACAAIAAgAAAAIAAgACAAIAAgACAAIAAgACAAIAAgABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAIAAgACAAIAAQABAAAAAQABAAEAAQAAAAAAAQABAAEAAQABAAEAAQABAAAAAQABAAEAAQABAAEAAQAAAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgABAAEAAAABAAEAAQABAAAAAQABAAEAAQABAAAAAQAAAAAAAAABAAEAAQABAAEAAQABAAAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAgACAAIAAgACAAIAAAAAAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAGAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgAAgACAAIAAgACAAIAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAYAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgAAgACAAIAAgACAAIAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACAAIAAgAYAAIAAgACAAIAAgACAAEAAgAAAAAASQCJAMkACQFJAYkByQEJAkkCiQJJAIkAyQAJAUkBiQHJAQkCAAAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAbABsAGwAbAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAbABsAGwAbABsAGwAbABsABgAbABsAGwAbABsAGwAbABsAGwAbAAYAGwAbABcAFwAXABcAFwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGAAYABgAGAAYABgAGAAYAAAAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAAAAAAAYABgAGAAYABgAGAAYAAAAGAAYAAAAGAAYABgAGAAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAAAAACLBcsFCwZLBosGywYLB0sHiwcGAAYABgAGAAYABgAGAAAAAAAAAAAAAAAAAAAAAAAAAAIAAgACAAIABgAGAAYABgAGAAYABgAAAAAAAAAAAAAASQCJAMkACQFJAYkByQEJAkkCiQIAAAAAAAAAABcAFwABAAEAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIsFywULBksGiwbLBgsHSweLB8sHSwrLDEsPyxFLFMt4S3lLgYsFywULBksGiwbLBgsHSweLBxsAyzRLNMs8GQCLBcsFi3jLeAAAAAAAAAAAAAAAAAAAAAAAAAAAAADLFksZyxtLHguAC4gLkAuYC6ALqAuwC7hLeEuAS4hLkEuYS6BLqEuwS7iLeIuAi4iLkIuYi6CLqIuwi7jLeMuAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAAAAUAAAAAAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAAAAUAAAAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAAABQAAAAUAAAAFAAUABQAAAAUABQAAAAUAAAAAAAUAAAAFAAAABQAAAAUAAAAFAAAABQAFAAAABQAAAAAABQAFAAUABQAAAAUABQAFAAUABQAFAAUAAAAFAAUABQAFAAAABQAFAAUABQAAAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAFAAUABQAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAAAAAAAAAAAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAAAAAAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAAAAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwDLAssCCwNLA4sDywMLBEsEiwTLBAsFSwVLBQAAAAAAABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAAAAAAAAAAAAAAAAAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAAAAAAAAAAABsAGwAbABsAGwAbABsAGwAbAAAAAAAAAAAAAAAAAAAAGwAbAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAbABsAGwAbABsAGwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAaABoAGgAaABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAAAAAAAABsAGwAbABsAGwAbABsAGwAbABsAAAAAAAAAAAAAAAAAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAAAAAAAAAAAAAAAAAAABsAGwAbABsAGwAbABsAGwAAAAAAAAAAAAAAAAAAAAAAGwAbABsAGwAbABsAGwAbABsAGwAAAAAAAAAAAAAAAAAbABsAGwAbABsAGwAbABsAAAAAAAAAAAAAAAAAAAAAABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAAAAAAGwAbABsAGwAAAAAAAAAbAAAAGwAbABsAGwAbABsAGwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABsAGwAbABsAGwAbABsAGwAbABsAAAAAAAAAAAAAAAAABQAFBwUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAEUGBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAEUGBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAhQYFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQDFDAUABQAFAAUABQAFAAUABQBFDwUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAEUPBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQDFBgUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUGBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQYFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQYFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFBgUABQAFAAUABQAFAAUABQAFAAUABQAFAAUARQYFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAIUHBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQARABEAEQARABEAEQARABEAEQARABEAEQARABEAEQARABEAEQARABEAEQARABEAEQARABEAEQARABEAAAAAAAAAAAAAAAAAAAAAAAAAAACrACAAuwAAABUiIAQfIuAEICLgAyEioAMiIsADJCLABEMiIAJFIkABTCIgAZgiAASmIkAEqCKABKkiYASrIqAEuCKAA80iAAHyIuAC8yIAA/QiIAP2IkAD9yJgA/oiQAL7ImAC/CKAAv0ioAL+IsAC3CcAApspoACgKcAAoymAALgpYAH1KUAA3iqAAeMqwAHkKqAB5SrgAe4q4AD+K2AAbwN3A38DhwOfA6cDrwO3A48DlwOPA5cDjwOXA48DlwOPA5cDjwOXA70DxQPNA9UD3QPlA+ED6QPxA/kD9AP8A48DlwOPA5cDBAQMBI8DlwOPA5cDjwOXAxIEGgQiBCoEMgQ6BEIESgRQBFgEYARoBHAEeAR+BIYEjgSWBJ4EpgSyBK4EugTCBCQE0gTaBMoE4gTkBOwE9AT8BP0EBQUNBRUF/QQdBSIFFQX9BCoFMgX8BDoFQgX0BEcFjwNPBVMFWwVdBWUFbQX8BHUFfQX0BAYEgQUFBfQEjwOPA4kFjwOPA48FlwWPA48DmwWjBY8DpwWuBY8DtgW+BcUFRgWPA48DzQXVBd0F5QWPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwPtBY8D9QWPA48DjwP9BY8DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DBQaPA48DjwMNBg0GCQUJBY8DEwYbBvUFMQYjBiMGOQZABikGjwOPA48DSAZQBo8DjwOPA1IGWgZiBo8DaQZxBo8DeQaPA48DOQWBBkcFiQYGBJEGjwOYBo8DnQaPA48DjwOPA6MGqwaPA48DjwOPA48DjwPdA7MGjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwO7BsMGxwbfBuUGzwbXBu0G9Qb5BsgFAQcJBxEHjwMZB1oGWgZaBikHMQc5B0EHRgdOB1YHIQdeB2YHjwNsB3MHWgZaBloGWgZzBXkHWgaBB48DjwNXBloGWgZaBloGWgZaBloGWgZaBloGWgZaBloGiQdaBloGWgZaBloGjwdaBloGlwefB48DjwOPA48DjwOPA48DjwNaBloGWgZaBq8Htwe/B6cHzwfXB98H5gftB/UH+QfHB1oGWgZaBgEIBwhaBg0IEAiPA48DjwOPA48DjwOPAxgIjwOPA48DIAiPA48DjwPdAygIMAg1CI8DPQhaBloGXQZaBloGWgZaBloGWgZECEoIWghSCI8DjwNiCP0FjwO2A48DjwOPA48DjwOPA1oGHwjEA48DOQhqCI8Dcgh6CI8DjwOPA48DfgiPA48DUga1A48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwNaBloGjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPAzkIWgZzBY8DjwOPA48DjwOPA48DjwOPA4UIjwOPA4oIXQWPA48DqQVaBlEGjwOPA5IIjwOPA48DmgihCCMGqQiPA48DfwWxCI8DuQjACI8D4gTFCI8D+wSPA80I1Qj9BI8D2Qj8BOEIjwOPA48DjwOPA48DjwPoCI8DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwP8CPAI9AiOBI4EjgSOBI4EjgSOBI4EjgSOBI4EjgSOBI4EBAmOBI4EjgSOBAwJEAkYCSAJJAksCY4EjgSOBDAJOAl/A0AJSAmPA48DjwNQCY8DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwM8DjwOfA68DjwOPA48DjwOPA48DvQONA90D4QPxA/QDzwOPA4QEDwOPA48DkgQiBDIEAgRQBGAEcAR+BE4EngSQAqACsAK/wqgAaABoAGgAaABoAGgAaABoAE3C6ABoAGgAaABoAGgAaABoAGgAXQLoAGgAakL6QspDGkMqQzpDKABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABKQ2gAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgASkNoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEpDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABKQ2gAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgASkNoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEpDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABKQ2gAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgASkNoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEpDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABKQ2gAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgASkNoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEpDWkNeQ2gAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABKQ2gAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgASkNoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEpDY8DjwOPA48DjwOPA48DjwNYCY8DWgZaBmAJ/QWPA/UEjwOPA48DjwOPA48DjwNoCY8DjwOPA28JjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DJAQkBCQEJAQkBCQEJAQkBHcJJAQkBCQEJAQkBCQEJAR/CYMJJAQkBCQEJASTCYsJJASbCSQEJASjCakJJAQkBCQEJAQkBCQEJAQkBCQEJAS5CbEJJAQkBCQEJAQkBCQEJAQkBCQEwQkkBCQEJAQkBCQEyQnQCdYJJAQkBCQEJAT8BN4J5QnsCQYE7wmPA48D4gT2CY8D/AkGBAEKCQqPA48DDgqPA48DjwOPAyAIFgoGBIEFXAUdCo8DjwOPA48DjwPeCSUKjwOPAy0KNQqPA48DjwOPA48DjwM5CkEKjwOPA0kKXAVRCo8DVwqPA48D7QVfCo8DjwOPA48DjwOPA2QKjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA2wKcAp4Co8DfwqPA48DjwOPA48DjwOPA48DjwOPA48DjwOGCo8DjwOUCo4KjwOPA48DnAqkCo8DqAqPA48DjwOPA48DjwOPA48DjwOPA4MFjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA64KjwO0Co8DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DugqPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwMWBcIKjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA8kK0QrXCo8DjwNaBloG3wqPA48DjwOPA48DWgZaBjMIjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48D4QqPA+gKjwPkCo8D6wqPA/MK9wqPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA90D/wrdAwYLDQsVC48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPAx0LJQuPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DJAQkBCQEJAQkBCQELQskBDULNQs8CyQEJAQkBCQEJAQkBCQEJAQkBCQEJAQkBCQEJAQkBCQEJAQkBCQEJAQkBCQEJAQkBPQIjgSOBCQEJAQkBCQEJAQkBCQEJAQkBCQEjgSOBI4EjgSOBI4EjgRECyQEJAQkBCQEJAQkBCQEJARaBkwLWgZaBl0GUQtVC0QIXQuxA48DYwuPA48DjwOPA48DjwOPA2oHjwOPA48DjwNaBloGWgZaBloGWgZaBloGWgZaBloGWgZaBloGWgZaBloGWgZaBloGWgZaBloGWgZaBloGWgZaBloGWgZrC3MLWgZaBloGXQZaBloGewuPA0wLWgaDC1oGiwtGCI8DjwNMC48LWgaXC1oGnwunC1oGjwOPA48DRgiPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA68LjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48DjwOPA48Drwu/C7cLtwu3C8ALwAvAC8AL3QPdA90D3QPdA90D3QPIC8ALwAvAC8ALwAvAC8ALwAvAC8ALwAvAC8ALwAvAC8ALwAvAC8ALwAvAC8ALwAvAC8ALwAvAC8ALwAvAC8ALwAvAC8ALwAvAC8ALwAvAC8ALwAvAC8ALwAvAC8ALwAvAC8ALwAvAC8ALwAvAC8ALwAvAC8ALwAvAC8ALwAvAC8ALbgNuA24DEgASABIAEgASABIAEgASABIACAAHAAgACQAHABIAEgASABIAEgASABIAEgASABIAEgASABIAEgAHAAcABwAIAAkACgAKAAQABAAEAAoACgAKMQryCgADAAYAAwAGAAYAAgACAAIAAgACAAIAAgACAAIAAgAGAAoAClAKAArQCgAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKUQoACtIKAAoACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAClEKAArSCgASAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgASABIAEgASAAcAEgASABIAEgASABIAEgASABIAEgASABIAEgASABIAEgASABIAEgASABIAEgASABIAEgASAAYACgAEAAQABAAEAAoACgAKAAoAAAAKkAoAsgAKAAoABAAEAAIAAgAKAAAACgAKAAoAAgAAAAqQCgAKAAoACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAKAAAAAAAAAAAAAAAAAAAACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoAAAAAAAAAAAAAAAoACgAKAAoACgAKAAoACgAKAAAACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAAAAAAAAAAAAKAAoAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAAAAAAoACgAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAsQCxALEAsQCxALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAoACgAEAAEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAAQCxAAEAsQCxAAEAsQCxAAEAsQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEABQAFAAUABQAFAAUACgAKAA0ABAAEAA0ABgANAAoACgCxALEAsQCxALEAsQCxALEAsQCxALEADQCtCA0ADQANAE0ADQCNAI0AjQCNAE0AjQBNAI0ATQBNAE0ATQBNAI0AjQCNAI0ATQBNAE0ATQBNAE0ATQBNAE0ATQBNAE0ATQAtAE0ATQBNAE0ATQBNAE0AjQBNAE0AsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEABQAFAAUABQAFAAUABQAFAAUABQAEAAUABQANAE0ATQCxAI0AjQCNAA0AjQCNAI0ATQBNAE0ATQBNAE0ATQBNAI0AjQCNAI0AjQCNAI0AjQCNAI0AjQCNAI0AjQCNAI0AjQCNAE0ATQBNAE0ATQBNAE0ATQBNAE0ATQBNAE0ATQBNAE0ATQBNAE0ATQBNAE0ATQBNAE0ATQBNAE0ATQBNAE0ATQBNAE0ATQBNAE0ATQCNAE0ATQCNAI0AjQCNAI0AjQCNAI0AjQBNAI0ATQCNAE0ATQCNAI0ADQCNALEAsQCxALEAsQCxALEABQAKALEAsQCxALEAsQCxAA0ADQCxALEACgCxALEAsQCxAI0AjQACAAIAAgACAAIAAgACAAIAAgACAE0ATQBNAA0ADQBNAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAK0AjQCxAE0ATQBNAI0AjQCNAI0AjQBNAE0ATQBNAI0ATQBNAE0ATQBNAE0ATQBNAE0AjQBNAI0ATQCNAE0ATQCNALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEADQANAI0ATQBNAE0ATQBNAE0ATQBNAE0ATQBNAI0AjQCNAE0ATQBNAE0ATQBNAE0ATQBNAE0ATQBNAE0ATQBNAI0AjQBNAE0ATQBNAI0ATQCNAI0ATQBNAE0AjQCNAE0ATQBNAE0ATQBNAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQCxALEAsQCxALEAsQCxALEAsQCxALEADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0AAQABAAEAAQABAAEAAQABAAEAAQBBAEEAQQBBAEEAQQBBAEEAQQBBAEEAQQBBAEEAQQBBAEEAQQBBAEEAQQBBAEEAQQBBAEEAQQBBAEEAQQBBAEEAQQCxALEAsQCxALEAsQCxALEAsQABAAEACgAKAAoACgAhAAEAAQCxAAEAAQCxALEAsQCxAAEAsQCxALEAAQCxALEAsQCxALEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAsQCxALEAsQABALEAsQCxALEAsQCBAEEAQQBBAEEAQQCBAIEAQQCBAEEAQQBBAEEAQQBBAEEAQQBBAEEAgQBBAAEAAQABALEAsQCxAAEAAQABAAEATQANAE0ATQBNAE0ADQCNAE0AjQCNAA0ADQANAA0ADQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABALEAsQAFALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQBNAE0ATQBNAE0ATQBNAE0ATQBNAI0AjQCNAA0AjQBNAE0AjQCNAE0ATQANAE0ATQBNAI0ATQBNAE0ATQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsQAAALEAAAAAAAAAAACxALEAsQCxALEAsQCxALEAAAAAAAAAAACxAAAAAAAAALEAsQCxALEAsQCxALEAAAAAAAAAAAAAAAAAAAAAAAAAAACxALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsQAAAAAAAAAAALEAsQCxALEAAAAAAAAAAAAAAAAAAAAAALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAsQAAAAAAsQCxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAsQAAAAAAAAAAALEAsQAAAAAAsQCxALEAAAAAAAAAsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACxALEAAAAAAAAAsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsQCxALEAsQCxAAAAsQCxAAAAAAAAAAAAsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsQCxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAsQCxALEAsQCxALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACxAAAAAACxAAAAsQCxALEAsQAAAAAAAAAAAAAAAAAAAAAAsQAAAAAAAAAAAAAAAAAAAAAAsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoACgAKAAoACgAKAAQACgAAAAAAAAAAAAAAsQAAAAAAAACxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAsQCxAAAAAAAAAAAAAACxALEAsQAAALEAsQCxALEAAAAAAAAAAAAAAAAAAACxALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAKAAoACgAKAAoACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsQAAAAAAoAAAAAAAAAAAAAAAAACgAAAAAAAAAAAAAACxALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAAAAAAAAAAAAAAAAAAACxALEAsQAAALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsQAAAAAAsQCxALEAsQCxALEAsQAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAACxALEAsQCxALEAsQCxALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsQAAAAAAsQCxALEAsQCxALEAAACxALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAsQCxALEAsQCxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACxALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAAACxAAAAsQAKMQryCjEK8gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxAAAAsQCxALEAsQCxAAAAsQCxAAAAAAAAAAAAAACxALEAsQCxALEAsQCxALEAsQCxALEAAACxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACxALEAsQCxAAAAsQCxALEAsQCxALEAAACxALEAAAAAALEAsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAsQAAAAAAAAAAALEAsQCxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsQCxALEAsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAAAAAALEAsQAAAAAAAAAAAAAAAACxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACxALEAsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoACgAKAAoACgAKAAoACgAKAAoAAAAAAAAAAAAAAAAACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoxCvIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACxALEAsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsQCxAAAAsQCxALEAsQCxALEAsQAAAAAAAAAAAAAAAAAAAAAAsQAAAAAAsQCxALEAsQCxALEAsQCxALEAsQCxAAAAAAAAAAAAAAAAAAAABAAAALEAAAAAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAALEAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAoACgAKAAoACgAKAEoACgAKACoAsQCxALEAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAsQCxAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAsQCxALEAAAAAAAAAAACxALEAAAAAAAAAAAAAAAAAAAAAAAAAsQAAAAAAAAAAAAAAAACxALEAsQAAAAAAAAAAAAoAAAAAAAAACgAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACxALEAAAAAALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACxAAAAsQCxALEAsQCxALEAsQAAALEAAACxAAAAAACxALEAsQCxALEAsQCxALEAAAAAAAAAAAAAAAAAsQCxALEAsQCxALEAsQCxALEAsQAAAAAAsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAAACxALEAsQCxALEAAACxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACxALEAsQCxALEAsQCxALEAsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsQCxALEAsQAAAAAAsQCxAAAAsQCxALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAAACxALEAAAAAAAAAsQAAALEAsQCxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACxALEAsQCxALEAsQCxALEAAAAAALEAsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAsQCxAAAAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQAAALEAsQCxALEAsQCxALEAAAAAAAAAAACxAAAAAAAAAAAAAAAAALEAAAAAAAAAsQCxAAAAAAAAAAAAAAAAALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQAAALEAsQCxALEAsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAoACgAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAoACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoACgAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAKAAAACgAKAAoACgAGAAoxCvIKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAJALIAsgCyALIAsgASABQIFQgTCBYIsgCyALIAsgCyALIAAgAAAAAAAAACAAIAAgACAAIAAgADAAMACgAKMQryAAAJAAkACQAJAAkACQAJAAkACQAJAAkAsgASBDIEoAihCAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACQAHAKsIrgiwCKwIrwgGAAQABAAEAAQABAAKAAoACgAKAAowCvAKAAoACgAKAAoAAgACAAIAAgACAAIAAgACAAIAAgADAAMACgAKMQryAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABACxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxAAoACgAAAAoACgAKAAoAAAAKAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAACgAKAAoAAAAAAAAAAAAAAAoACgAKAAoACgAKAAAACgAAAAoAAAAKAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAKAAAAAAAAAAAAChAKAAoACgAKAAAAAAAAAAAAAAAKAAoACgAKAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAAAAAAAAAAAAAAAAAAAAAAAAAoACgAKAAAAAAAAAAAACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKMArwCjAK8AowCvAKMArwCjAK8AowCvAKMArwCgAKAAowCvAKkAqQCpAKEAqQCpAKEAoQCpAKkAqQCpAKkAoQCgAKEAoQChAKEAoACgAKAApwCnAKcAqwCrAKsAoACgAKAAoQAwAEAAoACpAKEAoACgAKAAoQChAKEAoQCgAKkAqQCpAKkAoACpAKAAoQCgAKAAoACgAKEAoQChAKEAoQChAKEAoQChAKAAoACgAKAAoAChAKAAoQCjAK8AoQChAKEAoQChAKkAoQCpAKEAoQChAKEAoQChAKkAoACgAKAAoACgAKMArwCjAK8AoACgAKAAoACgAKAAoACgAKAAoQChAKAAoQCgAKMArwCjAK8AowCvAKMArwCgAKAAowCvAKMArwCjAK8AowCvAKMArwCjAK8AowCvAKMArwCjAK8AoQCgAKAAowCvAKMArwCgAKAAoACgAKAAqQCgAKAAoACgAKAAoACgAKAAoACjAK8AoACgAKkAoQCpAKkAoQCpAKEAoQChAKEAowCvAKMArwCjAK8AowCvAKkAoACgAKAAoACgAKEAoQCgAKAAoACgAKAAoACgAKAAoACjAK8AowCvAKkAoACgAKMArwCgAKAAoACgAKMArwCjAK8AowCvAKMArwCjAK8AoACgAKAAoACgAKAAoACgAKMQryCjEK8goACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKEAoQCgAKAAoACgAKAAoACgAKMQryCgAKAAoACgAKAAoACgAKAAoACgAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAAACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAAAAAAAAAAACgAKAAoACgAKAAoACgAKAAoACgAKAAoAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoxCvIKMQryCjEK8goxCvIKMQryCjEK8goxCvIKAAoACgAKAAoACgAKAAoACgAKAAoQCgAKAAowCvAKMQryCgAKMArwCgAKUAoQCtAKAAoACgAKAAoAChAKEAowCvAKAAoACgAKAAoACpAKMArwCgAKAAoACjAK8AowCvAKMQryCjEK8goxCvIKMQryCjEK8goACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKEAoAChAKEAoQCgAKAAowCvAKAAoACgAKAAoACgAKAAoACgAKAAoQCpAKEAoQCjAK8AoACgAKMQryCgAKAAoACgAKAAoxCvIKMQryCjEK8goxCvIKMQryCnEKMgrxCrIKMQryCjEK8goxCvIKMQryCgAKAAqQChAKEAoQChAKkAoAChAKkAowCvAKEAoQCjAK8AowCvAKMArwCjAK8AoACgAKAAoACgAKAAoACgAKkAoACgAKAAoACgAKAAoACjAK8AoQChAKMArwCgAKAAoAChAKAAoACgAKAAoQCjAK8AowCvAKAAowCvAKAAoACjEK8goxCvIKEAoACgAKAAoACgAKEAqQCpAKkAoQCgAKAAoACgAKAAowCvAKkAoACgAKAAoAChAKAAoACgAKMArwCjAK8AoQCgAKEAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoQChAKEAoQChAKEAoQChAKEAoQChAKEAoQChAKEAoQChAKEAoQCgAKEAoQChAKEAoACgAKEAoAChAKAAoAChAKAAowCvAKMArwCgAKAAoACgAKAAowCvAKAAoACgAKAAoACgAKMArwChAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKEAoQCgAKAAoACgAKAAoACgAKMArwCgAKAAoACgAKEAoQChAKEAoAChAKEAoACgAKEAoQCgAKAAoACgAKMArwCjAK8AowCvAKMArwCjAK8AowCvAKMArwCjAK8AowCvAKMArwCjAK8AowCvAKMArwCjAK8AowCvAKMArwCjAK8AowCvAKMArwChAKAAoACjAK8AowCvAKMArwCjAK8AoACjAK8AowCvAKMArwCjAK8AowCvAKMArwCjAK8AowCvAKMArwCjAK8AowCvAKMArwCgAKAAoACgAKAAoQCgAKkAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAACgAKAAoACgAKAAoACgAKAAoAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACpAAAAAAAAAAAAAAAAAKAAoACgAKAAoACgAAAAAAAAAAALEAsQCxAAAAAAAAAAAAAAAAAAAACgAKAAoACgAKAAoACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEACgAKAAowCvAKMArwCgAKAAoACjAK8AoACjAK8AoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKMArwCgAKAAowCvAKMQryCjEK8goxCvIKMQryCgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAAACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAAAAAAAAAAACgAAAAAAAAAAAAAAAAAAAAAAAACxALEAsQCxAAAAAAAKAAAAAAAAAAAAAAAKAAoAAAAAAAAAAAAAAAoACgAKAAkACgAKAAoACgAAAAAAAAAKMQryCjEK8goxCvIKMQryCjEK8goACgAKMQryCjEK8goxCvIKMQryCgAKAAoACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAsQAKAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAoACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAoACgAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAoACgAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAoACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAsQCxALEACgCxALEAsQCxALEAsQCxALEAsQCxAAoACgAAAAAAAAAAAAAAAAAAAAAACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAAAAAAAAAsQAAAAAAAAAAALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsQCxAAAACgAKAAoACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAYAAAAAoACgAKAAoAAAAAAAAAAAAAAAAAAAAAALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsQAAAAAAAAAAAAAAAACxALEAsQCxALEAsQCxALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsQCxALEAsQCxALEAsQCxALEAsQCxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAAAAAALEAsQCxALEAAAAAALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsQCxALEAsQCxALEAAAAAALEAsQAAAAAAsQCxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAAAAAAAAAAAAAAAAAAAAAALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACxAAAAsQCxALEAAAAAALEAsQAAAAAAAAAAAAAAsQCxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAsQAAAAAAAAAAAAAAAAAAAAAAsQAAAAAAAAAAAAAAAAAAAAAAAAAAALEAAAAAALEAAAAAAAAAAACxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAMAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABALEAAQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQAKAAoADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQASABIAEgASABIAEgASABIAEgASABIAEgASABIAEgASAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ACgANAA0AsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQAKAAoACgAKAAoACgAKAAoACgAKAAAAAAAAAAAAAAAAALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAGAAoABgAAAAoABgAKAAoACgAKMQryCjEK8goxCvIEAAoACgADAAMACjAK8AoAAAAKAAQABAAKAAAAAAAAAAAADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQCyAAAACgAKAAQABAAEAAoACgAKMQryCgADAAYAAwAGAAYAAgACAAIAAgACAAIAAgACAAIAAgAGAAoAClAKAArQCgAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKUQoACtIKAAoxCvIKAAoxCvIKAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAKAAoACgAEAAQAAAAKAAoACgAKAAoACgAKAAAAEgASABIAEgASABIAEgASABIAqgCqAKoACgAKABIAEgAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAALEAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACxALEAsQCxALEAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACgABALEAsQCxAAEAsQCxAAEAAQABAAEAAQCxALEAsQCxAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABALEAsQCxAAEAAQABAAEAsQBBAIEAAQABAIEAsQCxAAEAAQABAAEAQQBBAEEAQQCBAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAQQBBAEEAQQBBAIEAAQCBAAEAgQCBAAEAAQBhAIEAgQCBAIEAgQBBAEEAQQBBAGEAQQBBAEEAQQBBAIEAQQBBAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACgAKAAoACgAKAAoACgBBAIEAQQCBAIEAgQBBAEEAQQCBAEEAQQCBAEEAgQCBAEEAgQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQCBAIEAgQCBAEEAQQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEATQBNAI0ATQCxALEAsQCxAA0ADQANAA0ADQANAA0ADQAFAAUABQAFAAUABQAFAAUABQAFAA0ADQANAA0ADQANAG0ATQBNAE0ATQBNAE0ATQBNAE0ATQBNAE0ATQBNAE0ATQBNAE0ATQBNAE0ATQBNAE0ATQBNAE0ATQBNAE0ATQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQBNAE0ATQCNAE0ATQBNAE0ATQBNAE0ATQBNAE0ATQBNAE0ADQCxALEAsQCxALEAsQCxALEAsQCxALEATQBNAE0AjQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsQCxALEAsQCxALEAsQCxALEAsQCxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsQCxALEAsQAAAAAAsQCxAAAAAAAAAAAAAAAAAAAAAACxALEAsQCxALEAAACxALEAsQCxALEAsQCxALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsQCxALEAsQCxALEAsQCxALEAAAAAAAAAAAAAAAAAAAAAAAAAAACxALEAsQCxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsQCxALEAAAAAALEAAACxALEAAAAAAAAAAAAAAAAAsQAAAAAAAAAAALEAsQCxALEAsQCxALEAsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsQCxALEAsQCxALEAsQAAAAAAAACxALEAsQCxALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACxALEAsQAAALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAsQCxALEAsQCxAAAAsQAAAAAAAAAAALEAsQAAALEAsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACxALEAsQCxAAAAAAAAAAAAAAAAALEAsQAAALEAsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACxALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsQCxALEAsQCxALEAsQCxAAAAAACxAAAAsQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsQAAALEAAAAAALEAsQCxALEAsQCxAAAAsQAAAAAAAAAAAAAAAAAAAAAAAAAAALEAsQCxALEAAACxALEAsQCxALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAsQCxALEAsQCxALEAsQCxAAAAsQCxAAAAAAAAAAAAAAAAALEAsQCxALEAsQCxAKAAoACxALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsQCxALEAsQCxALEAAAAAALEAsQCxALEAAAAAAAAAAAAAAAAAAAAAALEAAAAAAAAAAAAAAAAAAAAAAAAAsQCxALEAsQCxALEAAAAAALEAsQCxAAAAAAAAAAAAAAAAAAAAAAAAAAAAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQAAALEAsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACxALEAsQCxALEAsQCxAAAAsQCxALEAsQCxALEAAACgALEAsQCxALEAsQCxALEAsQAAAAAAsQCxALEAsQCxALEAsQAAALEAsQAAALEAsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsQCxALEAsQCxALEAAAAAAAAAsQAAALEAsQAAALEAsQCxALEAsQCxALEAAACxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAsQAAAAAAAACxAAAAsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAsQCxALEAsQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAsQCxALEAsQCxALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACxALEAsQCxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsgCyALIAsgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALEAsQCxAAAAAAAAAAAAAAAAAAAAAAAAALIAsgCyALIAsgCyALIAsgCxALEAsQCxALEAsQCxALEAAAAAALEAsQCxALEAsQCxALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACxALEAsQCxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoACgCxALEAsQAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKEAAAAAAAAAAAAAAAAAAAAAAAAAAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAAAAAAAAAAACxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAAAAAAAAAAAAAAAAAAAAAALEAAAAAAAAAAAAAAAAAAAAAAAAAAACxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsQCxALEAsQCxAAAAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACxALEAsQCxALEAsQCxAAAAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxAAAAAACxALEAsQCxALEAsQCxAAAAsQCxAAAAsQCxALEAsQCxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAsQCxALEAsQCxALEAsQABAAEAAQABAAEAAQABAAEAAQBBAEEAQQBBAEEAQQBBAEEAQQBBAEEAQQBBAEEAQQBBAEEAQQBBAEEAQQBBAEEAQQBBAEEAQQBBAEEAQQBBAEEAsQCxALEAsQCxALEAsQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAAoACgANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ACgAKAAoACgAKAAoACgAKAAoACgAKAAoAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAIAAgACAAIAAgACAAIAAgACAAIAAgAKAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAAAAAAAAAAAAAAAAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoAAAAAAAAAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoAAAAAAAAAAAAAAAAAAAAAAAoACgAKAAoACgAKAAoACgAKAAoAAAAAAAAAAAAAAAAACgAKAAoACgAKAAoACgAKAAAAAAAAAAAAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAAACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAAAAAAKAAoACgAKAAAAAAAAAAoAAAAKAAoACgAKAAoACgAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAAAAAAKAAoACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgASALIAsgCyALIAsgCyALIAsgCyALIAsgCyALIAsgCyALIAsgCyALIAsgCyALIAsgCyALIAsgCyALIAsgCyALIAsgASALIAEgASABIAEgASABIAEgASABIAEgASABIAEgASABIAEgASABIAEgASABIAEgASABIAEgASABIAEgASABIAEgASABIAEgCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxALEAsQCxABIAEgASABIAEgASABIAEgASABIAEgASABIAEgASABIAAAAAAAAAAAAAAAAAAAAAAMARAQBREgEAsBABAAAAAADAEQEA/hEBAMAQAQAAAAAAmBEBAB8SAQDAEQEALBIBAKAQAQAAAAAAwBEBAJcSAQCwEAEAAAAAAMARAQBzEgEA2BABAAAAAAABAAAAAgAAAJACAADAAwAA4BEBAOARAQCwAQAAwAMAAOARAQDgEQEAYAMAAJADAADgEQEA4BEBAAADAAAwAwAA4BEBAOARAQDAAgAAUAIAAOkRAQDwEQEAkAIAAOABAADgEQEA5REBACACAABQAgAA6REBAPARAQCwAQAA4AEAAOARAQDlEQEAABAAAACAAAAACAAAAEAAAAAAAACgEAEAAQAAAAIAAAADAAAABAAAAAEAAAABAAAAAQAAAAEAAAAAAAAAyBABAAEAAAAFAAAAAwAAAAQAAAABAAAAAgAAAAIAAAACAAAAAAECAwQAAQ0OAAECBQYHCAABCQoLDAACBAYICgwOTjEwX19jeHhhYml2MTE2X19zaGltX3R5cGVfaW5mb0UAU3Q5dHlwZV9pbmZvAE4xMF9fY3h4YWJpdjEyMF9fc2lfY2xhc3NfdHlwZV9pbmZvRQBOMTBfX2N4eGFiaXYxMTdfX2NsYXNzX3R5cGVfaW5mb0UATjEwX19jeHhhYml2MTE5X19wb2ludGVyX3R5cGVfaW5mb0UATjEwX19jeHhhYml2MTE3X19wYmFzZV90eXBlX2luZm9F";
var tempDoublePtr = 71104;
var ENV = {};
function ___buildEnvironment(environ) {
  var MAX_ENV_VALUES = 64;
  var TOTAL_ENV_SIZE = 1024;
  var poolPtr;
  var envPtr;
  if (!___buildEnvironment.called) {
    ___buildEnvironment.called = true;
    ENV["USER"] = ENV["LOGNAME"] = "web_user";
    ENV["PATH"] = "/";
    ENV["PWD"] = "/";
    ENV["HOME"] = "/home/web_user";
    ENV["LANG"] = "C.UTF-8";
    ENV["_"] = Module["thisProgram"];
    poolPtr = getMemory(TOTAL_ENV_SIZE);
    envPtr = getMemory(MAX_ENV_VALUES * 4);
    HEAP32[envPtr >> 2] = poolPtr;
    HEAP32[environ >> 2] = envPtr;
  } else {
    envPtr = HEAP32[environ >> 2];
    poolPtr = HEAP32[envPtr >> 2];
  }
  var strings = [];
  var totalSize = 0;
  for (var key2 in ENV) {
    if (typeof ENV[key2] === "string") {
      var line = key2 + "=" + ENV[key2];
      strings.push(line);
      totalSize += line.length;
    }
  }
  if (totalSize > TOTAL_ENV_SIZE) {
    throw new Error("Environment size exceeded TOTAL_ENV_SIZE!");
  }
  var ptrSize = 4;
  for (var i4 = 0; i4 < strings.length; i4++) {
    var line = strings[i4];
    writeAsciiToMemory(line, poolPtr);
    HEAP32[envPtr + i4 * ptrSize >> 2] = poolPtr;
    poolPtr += line.length + 1;
  }
  HEAP32[envPtr + strings.length * ptrSize >> 2] = 0;
}
function __ZSt18uncaught_exceptionv() {
  return !!__ZSt18uncaught_exceptionv.uncaught_exception;
}
function ___cxa_free_exception(ptr) {
  try {
    return _free(ptr);
  } catch (e5) {
  }
}
var EXCEPTIONS = {
  last: 0,
  caught: [],
  infos: {},
  deAdjust: function(adjusted) {
    if (!adjusted || EXCEPTIONS.infos[adjusted])
      return adjusted;
    for (var key2 in EXCEPTIONS.infos) {
      var ptr = +key2;
      var adj = EXCEPTIONS.infos[ptr].adjusted;
      var len5 = adj.length;
      for (var i4 = 0; i4 < len5; i4++) {
        if (adj[i4] === adjusted) {
          return ptr;
        }
      }
    }
    return adjusted;
  },
  addRef: function(ptr) {
    if (!ptr)
      return;
    var info = EXCEPTIONS.infos[ptr];
    info.refcount++;
  },
  decRef: function(ptr) {
    if (!ptr)
      return;
    var info = EXCEPTIONS.infos[ptr];
    info.refcount--;
    if (info.refcount === 0 && !info.rethrown) {
      if (info.destructor) {
        Module["dynCall_vi"](info.destructor, ptr);
      }
      delete EXCEPTIONS.infos[ptr];
      ___cxa_free_exception(ptr);
    }
  },
  clearRef: function(ptr) {
    if (!ptr)
      return;
    var info = EXCEPTIONS.infos[ptr];
    info.refcount = 0;
  }
};
function ___resumeException(ptr) {
  if (!EXCEPTIONS.last) {
    EXCEPTIONS.last = ptr;
  }
  throw ptr;
}
function ___cxa_find_matching_catch() {
  var thrown = EXCEPTIONS.last;
  if (!thrown) {
    return (setTempRet0(0), 0) | 0;
  }
  var info = EXCEPTIONS.infos[thrown];
  var throwntype = info.type;
  if (!throwntype) {
    return (setTempRet0(0), thrown) | 0;
  }
  var typeArray = Array.prototype.slice.call(arguments);
  var pointer = Module["___cxa_is_pointer_type"](throwntype);
  if (!___cxa_find_matching_catch.buffer)
    ___cxa_find_matching_catch.buffer = _malloc(4);
  HEAP32[___cxa_find_matching_catch.buffer >> 2] = thrown;
  thrown = ___cxa_find_matching_catch.buffer;
  for (var i4 = 0; i4 < typeArray.length; i4++) {
    if (typeArray[i4] && Module["___cxa_can_catch"](typeArray[i4], throwntype, thrown)) {
      thrown = HEAP32[thrown >> 2];
      info.adjusted.push(thrown);
      return (setTempRet0(typeArray[i4]), thrown) | 0;
    }
  }
  thrown = HEAP32[thrown >> 2];
  return (setTempRet0(throwntype), thrown) | 0;
}
function ___gxx_personality_v0() {
}
function _emscripten_get_heap_size() {
  return HEAP8.length;
}
function abortOnCannotGrowMemory(requestedSize) {
  abort("OOM");
}
function emscripten_realloc_buffer(size) {
  try {
    var newBuffer = new ArrayBuffer(size);
    if (newBuffer.byteLength != size)
      return false;
    new Int8Array(newBuffer).set(HEAP8);
  } catch (e5) {
    return false;
  }
  buffer = newBuffer;
  Module["_emscripten_replace_memory"](newBuffer);
  return true;
}
function _emscripten_resize_heap(requestedSize) {
  var oldSize = _emscripten_get_heap_size();
  var PAGE_MULTIPLE = 16777216;
  var LIMIT = 2147483648 - PAGE_MULTIPLE;
  if (requestedSize > LIMIT) {
    return false;
  }
  var MIN_TOTAL_MEMORY = 16777216;
  var newSize = Math.max(oldSize, MIN_TOTAL_MEMORY);
  while (newSize < requestedSize) {
    if (newSize <= 536870912) {
      newSize = alignUp(2 * newSize, PAGE_MULTIPLE);
    } else {
      newSize = Math.min(alignUp((3 * newSize + 2147483648) / 4, PAGE_MULTIPLE), LIMIT);
    }
  }
  if (!emscripten_realloc_buffer(newSize)) {
    return false;
  }
  updateGlobalBufferViews();
  return true;
}
function _emscripten_memcpy_big(dest, src, num) {
  HEAPU8.set(HEAPU8.subarray(src, src + num), dest);
}
function ___setErrNo(value) {
  if (Module["___errno_location"])
    HEAP32[Module["___errno_location"]() >> 2] = value;
  return value;
}
var ASSERTIONS = false;
function intArrayToString(array) {
  var ret = [];
  for (var i4 = 0; i4 < array.length; i4++) {
    var chr = array[i4];
    if (chr > 255) {
      if (ASSERTIONS) {
      }
      chr &= 255;
    }
    ret.push(String.fromCharCode(chr));
  }
  return ret.join("");
}
var decodeBase64 = typeof atob === "function" ? atob : function(input) {
  var keyStr = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
  var output = "";
  var chr1, chr2, chr3;
  var enc1, enc2, enc3, enc4;
  var i4 = 0;
  input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");
  do {
    enc1 = keyStr.indexOf(input.charAt(i4++));
    enc2 = keyStr.indexOf(input.charAt(i4++));
    enc3 = keyStr.indexOf(input.charAt(i4++));
    enc4 = keyStr.indexOf(input.charAt(i4++));
    chr1 = enc1 << 2 | enc2 >> 4;
    chr2 = (enc2 & 15) << 4 | enc3 >> 2;
    chr3 = (enc3 & 3) << 6 | enc4;
    output = output + String.fromCharCode(chr1);
    if (enc3 !== 64) {
      output = output + String.fromCharCode(chr2);
    }
    if (enc4 !== 64) {
      output = output + String.fromCharCode(chr3);
    }
  } while (i4 < input.length);
  return output;
};
function intArrayFromBase64(s4) {
  if (typeof ENVIRONMENT_IS_NODE === "boolean" && ENVIRONMENT_IS_NODE) {
    var buf;
    try {
      buf = Buffer.from(s4, "base64");
    } catch (_2) {
      buf = new Buffer(s4, "base64");
    }
    return new Uint8Array(buf.buffer, buf.byteOffset, buf.byteLength);
  }
  try {
    var decoded = decodeBase64(s4);
    var bytes = new Uint8Array(decoded.length);
    for (var i4 = 0; i4 < decoded.length; ++i4) {
      bytes[i4] = decoded.charCodeAt(i4);
    }
    return bytes;
  } catch (_2) {
    throw new Error("Converting base64 string to bytes failed.");
  }
}
function tryParseAsDataURI(filename) {
  if (!isDataURI(filename)) {
    return;
  }
  return intArrayFromBase64(filename.slice(dataURIPrefix.length));
}
var asmGlobalArg = {
  "Int8Array": Int8Array,
  "Int16Array": Int16Array,
  "Int32Array": Int32Array,
  "Uint8Array": Uint8Array,
  "Uint16Array": Uint16Array
};
var asmLibraryArg = {
  "a": abort,
  "b": setTempRet0,
  "c": getTempRet0,
  "d": __ZSt18uncaught_exceptionv,
  "e": ___buildEnvironment,
  "f": ___cxa_find_matching_catch,
  "g": ___cxa_free_exception,
  "h": ___gxx_personality_v0,
  "i": ___resumeException,
  "j": ___setErrNo,
  "k": _emscripten_get_heap_size,
  "l": _emscripten_memcpy_big,
  "m": _emscripten_resize_heap,
  "n": abortOnCannotGrowMemory,
  "o": emscripten_realloc_buffer,
  "p": tempDoublePtr,
  "q": DYNAMICTOP_PTR
};
var asm = function(global, env, buffer2) {
  "almost asm";
  var a3 = new global.Int8Array(buffer2), b3 = new global.Int16Array(buffer2), c4 = new global.Int32Array(buffer2), d3 = new global.Uint8Array(buffer2), e5 = new global.Uint16Array(buffer2), f3 = env.p | 0, g2 = env.q | 0, h3 = 0, i4 = 0, j2 = 0, k2 = 0, l3 = 0, m2 = 0, n5 = 0, o4 = 0, p3 = env.a, q = env.b, r5 = env.c, s4 = env.d, t4 = env.e, u3 = env.f, v2 = env.g, w2 = env.h, x2 = env.i, y3 = env.j, z = env.k, A2 = env.l, B = env.m, C2 = env.n, D = env.o, E2 = 71120, F = 5314e3, G = 0;
  function H2(newBuffer) {
    a3 = new Int8Array(newBuffer);
    d3 = new Uint8Array(newBuffer);
    b3 = new Int16Array(newBuffer);
    e5 = new Uint16Array(newBuffer);
    c4 = new Int32Array(newBuffer);
    buffer2 = newBuffer;
    return true;
  }
  function O(a4) {
    a4 = a4 | 0;
    var b4 = 0;
    b4 = E2;
    E2 = E2 + a4 | 0;
    E2 = E2 + 15 & -16;
    return b4 | 0;
  }
  function P2() {
    return E2 | 0;
  }
  function Q(a4) {
    a4 = a4 | 0;
    E2 = a4;
  }
  function R2(a4, b4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    E2 = a4;
    F = b4;
  }
  function S3(a4, d4) {
    a4 = a4 | 0;
    d4 = d4 | 0;
    var e6 = 0, f4 = 0, g3 = 0, h4 = 0, i5 = 0;
    g3 = E2;
    E2 = E2 + 16 | 0;
    h4 = g3;
    c4[h4 >> 2] = 0;
    f4 = Ya(a4, d4, 0, 0, h4) | 0;
    i5 = f4 + 1 | 0;
    c4[h4 >> 2] = 0;
    e6 = Ab(i5 << 1) | 0;
    Ya(a4, d4, e6, i5, h4) | 0;
    if ((c4[h4 >> 2] | 0) > 0) {
      Bb(e6);
      e6 = 0;
    } else
      b3[e6 + (f4 << 1) >> 1] = 0;
    E2 = g3;
    return e6 | 0;
  }
  function T2(a4, b4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    var d4 = 0, e6 = 0, f4 = 0;
    f4 = E2;
    E2 = E2 + 16 | 0;
    e6 = f4;
    d4 = c4[17592] | 0;
    if (!d4) {
      d4 = Z2() | 0;
      c4[17592] = d4;
    }
    c4[e6 >> 2] = 0;
    ea(d4, a4, b4, -2, e6);
    if ((c4[e6 >> 2] | 0) > 0)
      d4 = 0;
    else
      d4 = Ea(c4[17592] | 0) | 0;
    E2 = f4;
    return d4 | 0;
  }
  function U(a4) {
    a4 = a4 | 0;
    var b4 = 0, d4 = 0, e6 = 0;
    e6 = E2;
    E2 = E2 + 16 | 0;
    d4 = e6 + 4 | 0;
    b4 = e6;
    c4[d4 >> 2] = 0;
    c4[b4 >> 2] = 0;
    Fa(c4[17592] | 0, a4, b4, d4);
    E2 = e6;
    return ((c4[d4 >> 2] | 0) > 0 ? 0 : c4[b4 >> 2] | 0) | 0;
  }
  function V2(a4, b4, d4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    d4 = d4 | 0;
    return (Va(c4[17593] | 0, a4, b4, d4) | 0) == 1 | 0;
  }
  function W(a4, b4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    var d4 = 0, e6 = 0, f4 = 0;
    f4 = E2;
    E2 = E2 + 16 | 0;
    e6 = f4;
    c4[e6 >> 2] = 0;
    d4 = c4[17593] | 0;
    if (!d4) {
      d4 = Z2() | 0;
      c4[17593] = d4;
    }
    Ma(c4[17592] | 0, a4, b4, d4, e6);
    if ((c4[e6 >> 2] | 0) > 0)
      d4 = 0;
    else {
      c4[e6 >> 2] = 0;
      d4 = Qa(d4, e6) | 0;
      d4 = (c4[e6 >> 2] | 0) > 0 ? 0 : d4;
    }
    E2 = f4;
    return d4 | 0;
  }
  function X(a4, d4, e6) {
    a4 = a4 | 0;
    d4 = d4 | 0;
    e6 = e6 | 0;
    var f4 = 0, g3 = 0, h4 = 0;
    g3 = E2;
    E2 = E2 + 16 | 0;
    h4 = g3;
    c4[h4 >> 2] = 0;
    f4 = Ab((e6 << 1) + 2 | 0) | 0;
    a4 = Ha(a4 + (d4 << 1) | 0, e6, f4, e6, h4) | 0;
    if ((c4[h4 >> 2] | 0) > 0)
      f4 = 0;
    else
      b3[f4 + (a4 << 1) >> 1] = 0;
    E2 = g3;
    return f4 | 0;
  }
  function Y(a4, d4) {
    a4 = a4 | 0;
    d4 = d4 | 0;
    var e6 = 0, f4 = 0, g3 = 0, h4 = 0, i5 = 0;
    i5 = E2;
    E2 = E2 + 16 | 0;
    h4 = i5;
    c4[h4 >> 2] = 0;
    f4 = c4[17593] | 0;
    if (!f4) {
      f4 = Z2() | 0;
      c4[17593] = f4;
    }
    Ma(c4[17592] | 0, a4, d4, f4, h4);
    if ((c4[h4 >> 2] | 0) <= 0 ? (g3 = Da(f4) | 0, d4 = g3 + 1 | 0, e6 = Ab(d4 << 1) | 0, Ka(c4[17593] | 0, e6, d4, 10, h4) | 0, (c4[h4 >> 2] | 0) <= 0) : 0)
      b3[e6 + (g3 << 1) >> 1] = 0;
    else
      e6 = 0;
    E2 = i5;
    return e6 | 0;
  }
  function Z2() {
    var a4 = 0, b4 = 0;
    b4 = E2;
    E2 = E2 + 16 | 0;
    a4 = b4;
    c4[a4 >> 2] = 0;
    a4 = _2(a4) | 0;
    E2 = b4;
    return a4 | 0;
  }
  function _2(b4) {
    b4 = b4 | 0;
    var d4 = 0;
    if (!b4) {
      d4 = 0;
      return d4 | 0;
    }
    if (($2(c4[b4 >> 2] | 0) | 0) << 24 >> 24) {
      d4 = 0;
      return d4 | 0;
    }
    d4 = lb(360) | 0;
    if (!d4) {
      c4[b4 >> 2] = 7;
      d4 = 0;
      return d4 | 0;
    }
    fc(d4 | 0, 0, 360) | 0;
    a3[d4 + 68 >> 0] = 1;
    a3[d4 + 69 >> 0] = 1;
    if ((ba(c4[b4 >> 2] | 0) | 0) << 24 >> 24)
      return d4 | 0;
    ca(d4);
    d4 = 0;
    return d4 | 0;
  }
  function $2(a4) {
    a4 = a4 | 0;
    return (a4 | 0) > 0 | 0;
  }
  function aa(a4, b4, d4, e6) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    d4 = d4 | 0;
    e6 = e6 | 0;
    var f4 = 0, g3 = 0;
    g3 = c4[a4 >> 2] | 0;
    if (!g3)
      if (d4 << 24 >> 24 != 0 ? (g3 = lb(e6) | 0, c4[a4 >> 2] = g3, (g3 | 0) != 0) : 0) {
        c4[b4 >> 2] = e6;
        a4 = 1;
      } else
        a4 = 0;
    else if ((c4[b4 >> 2] | 0) < (e6 | 0))
      if (d4 << 24 >> 24 != 0 ? (f4 = mb(g3, e6) | 0, (f4 | 0) != 0) : 0) {
        c4[a4 >> 2] = f4;
        c4[b4 >> 2] = e6;
        a4 = 1;
      } else
        a4 = 0;
    else
      a4 = 1;
    return a4 | 0;
  }
  function ba(a4) {
    a4 = a4 | 0;
    return (a4 | 0) < 1 | 0;
  }
  function ca(a4) {
    a4 = a4 | 0;
    var b4 = 0;
    if (!a4)
      return;
    c4[a4 >> 2] = 0;
    b4 = c4[a4 + 44 >> 2] | 0;
    if (b4 | 0)
      nb(b4);
    b4 = c4[a4 + 48 >> 2] | 0;
    if (b4 | 0)
      nb(b4);
    b4 = c4[a4 + 52 >> 2] | 0;
    if (b4 | 0)
      nb(b4);
    b4 = c4[a4 + 56 >> 2] | 0;
    if (b4 | 0)
      nb(b4);
    b4 = c4[a4 + 60 >> 2] | 0;
    if (b4 | 0)
      nb(b4);
    b4 = c4[a4 + 64 >> 2] | 0;
    if (b4 | 0)
      nb(b4);
    b4 = c4[a4 + 344 >> 2] | 0;
    if (b4 | 0)
      nb(b4);
    nb(a4);
    return;
  }
  function da(a4, b4, d4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    d4 = d4 | 0;
    var e6 = 0, f4 = 0;
    e6 = 0;
    while (1) {
      if ((e6 | 0) >= (a4 | 0)) {
        f4 = 5;
        break;
      }
      if ((c4[b4 + (e6 << 3) >> 2] | 0) > (d4 | 0))
        break;
      e6 = e6 + 1 | 0;
    }
    if ((f4 | 0) == 5)
      e6 = a4 + -1 | 0;
    return c4[b4 + (e6 << 3) + 4 >> 2] & 255 | 0;
  }
  function ea(b4, e6, f4, g3, h4) {
    b4 = b4 | 0;
    e6 = e6 | 0;
    f4 = f4 | 0;
    g3 = g3 | 0;
    h4 = h4 | 0;
    var i5 = 0, j3 = 0, k3 = 0, l4 = 0, m3 = 0, n6 = 0, o5 = 0, p4 = 0, q2 = 0, r6 = 0, s5 = 0, t5 = 0, u4 = 0, v3 = 0, w3 = 0, x3 = 0, y4 = 0, z2 = 0;
    if (!h4)
      return;
    if (($2(c4[h4 >> 2] | 0) | 0) << 24 >> 24)
      return;
    if ((b4 | 0) == 0 | (e6 | 0) == 0 | (f4 | 0) < -1 | g3 + -126 << 24 >> 24 << 24 >> 24 > -1) {
      c4[h4 >> 2] = 1;
      return;
    }
    if ((f4 | 0) == -1)
      f4 = ob(e6) | 0;
    u4 = b4 + 84 | 0;
    if ((c4[u4 >> 2] | 0) == 3) {
      fa(b4, e6, f4, g3, h4);
      return;
    }
    c4[b4 >> 2] = 0;
    c4[b4 + 4 >> 2] = e6;
    z2 = b4 + 16 | 0;
    c4[z2 >> 2] = f4;
    c4[b4 + 8 >> 2] = f4;
    l4 = b4 + 12 | 0;
    c4[l4 >> 2] = f4;
    s5 = b4 + 93 | 0;
    a3[s5 >> 0] = g3;
    i5 = g3 & 1;
    j3 = i5 & 255;
    m3 = b4 + 116 | 0;
    c4[m3 >> 2] = j3;
    x3 = b4 + 132 | 0;
    c4[x3 >> 2] = 1;
    k3 = b4 + 72 | 0;
    c4[k3 >> 2] = 0;
    n6 = b4 + 76 | 0;
    c4[n6 >> 2] = 0;
    c4[b4 + 224 >> 2] = 0;
    y4 = b4 + 332 | 0;
    c4[y4 >> 2] = 0;
    c4[b4 + 336 >> 2] = 0;
    e6 = (g3 & 255) > 253;
    t5 = b4 + 94 | 0;
    a3[t5 >> 0] = e6 & 1;
    if (!f4) {
      if (e6) {
        a3[s5 >> 0] = i5;
        a3[t5 >> 0] = 0;
      }
      c4[b4 + 120 >> 2] = c4[69880 + (j3 << 2) >> 2];
      c4[b4 + 220 >> 2] = 0;
      c4[x3 >> 2] = 0;
      ga(b4);
      return;
    }
    c4[b4 + 220 >> 2] = -1;
    e6 = c4[b4 + 56 >> 2] | 0;
    w3 = b4 + 136 | 0;
    c4[w3 >> 2] = (e6 | 0) == 0 ? b4 + 140 | 0 : e6;
    e6 = b4 + 44 | 0;
    i5 = b4 + 68 | 0;
    if (!((aa(e6, b4 + 20 | 0, a3[i5 >> 0] | 0, f4) | 0) << 24 >> 24)) {
      c4[h4 >> 2] = 7;
      return;
    }
    c4[k3 >> 2] = c4[e6 >> 2];
    if (!((ha(b4) | 0) << 24 >> 24)) {
      c4[h4 >> 2] = 7;
      return;
    }
    v3 = c4[k3 >> 2] | 0;
    q2 = c4[l4 >> 2] | 0;
    k3 = b4 + 128 | 0;
    c4[k3 >> 2] = q2;
    f4 = b4 + 48 | 0;
    if (!((aa(f4, b4 + 24 | 0, a3[i5 >> 0] | 0, q2) | 0) << 24 >> 24)) {
      c4[h4 >> 2] = 7;
      return;
    }
    c4[n6 >> 2] = c4[f4 >> 2];
    j3 = ia(b4, h4) | 0;
    if (($2(c4[h4 >> 2] | 0) | 0) << 24 >> 24)
      return;
    g3 = b4 + 240 | 0;
    f4 = c4[g3 >> 2] | 0;
    do
      if ((f4 | 0) < 6)
        c4[b4 + 244 >> 2] = b4 + 248;
      else {
        f4 = f4 << 4;
        e6 = b4 + 40 | 0;
        i5 = b4 + 64 | 0;
        if ((f4 | 0) <= (c4[e6 >> 2] | 0)) {
          c4[b4 + 244 >> 2] = c4[i5 >> 2];
          break;
        }
        if ((aa(i5, e6, 1, f4) | 0) << 24 >> 24) {
          c4[b4 + 244 >> 2] = c4[i5 >> 2];
          break;
        }
        c4[h4 >> 2] = 7;
        return;
      }
    while (0);
    c4[g3 >> 2] = -1;
    c4[m3 >> 2] = j3;
    a:
      do
        switch (j3 | 0) {
          case 0: {
            c4[k3 >> 2] = 0;
            break;
          }
          case 1: {
            c4[k3 >> 2] = 0;
            break;
          }
          default: {
            b:
              do
                switch (c4[u4 >> 2] | 0) {
                  case 0: {
                    c4[b4 + 112 >> 2] = 69888;
                    break;
                  }
                  case 1: {
                    c4[b4 + 112 >> 2] = 69904;
                    break;
                  }
                  case 2: {
                    c4[b4 + 112 >> 2] = 69920;
                    break;
                  }
                  case 4: {
                    c4[b4 + 112 >> 2] = 69936;
                    break;
                  }
                  case 5: {
                    f4 = b4 + 112 | 0;
                    if (!(c4[b4 + 88 >> 2] & 1)) {
                      c4[f4 >> 2] = 69968;
                      break b;
                    } else {
                      c4[f4 >> 2] = 69952;
                      break b;
                    }
                  }
                  case 6: {
                    f4 = b4 + 112 | 0;
                    if (!(c4[b4 + 88 >> 2] & 1)) {
                      c4[f4 >> 2] = 7e4;
                      break b;
                    } else {
                      c4[f4 >> 2] = 69984;
                      break b;
                    }
                  }
                  default: {
                  }
                }
              while (0);
            j3 = c4[x3 >> 2] | 0;
            if ((j3 | 0) < 2 ? (c4[b4 + 120 >> 2] | 0) >= 0 : 0) {
              do
                if (a3[t5 >> 0] | 0) {
                  e6 = c4[w3 >> 2] | 0;
                  i5 = c4[e6 >> 2] | 0;
                  if ((i5 | 0) > 0)
                    f4 = a3[s5 >> 0] | 0;
                  else
                    f4 = da(j3, e6, 0) | 0;
                  f4 = f4 & 1;
                  if ((q2 | 0) > (i5 | 0)) {
                    e6 = da(j3, e6, q2 + -1 | 0) | 0;
                    break;
                  } else {
                    e6 = a3[s5 >> 0] | 0;
                    break;
                  }
                } else {
                  f4 = a3[s5 >> 0] | 0;
                  e6 = f4;
                  f4 = f4 & 1;
                }
              while (0);
              ja(b4, 0, q2, f4, e6 & 1);
            } else {
              o5 = c4[n6 >> 2] | 0;
              if ((a3[t5 >> 0] | 0) != 0 ? (p4 = c4[w3 >> 2] | 0, (c4[p4 >> 2] | 0) <= 0) : 0)
                f4 = da(j3, p4, 0) | 0;
              else
                f4 = a3[s5 >> 0] | 0;
              p4 = a3[o5 >> 0] | 0;
              n6 = q2 + -1 | 0;
              l4 = p4;
              m3 = 0;
              f4 = ((f4 & 255) < (p4 & 255) ? p4 : f4) & 1;
              while (1) {
                if ((m3 | 0) > 0 ? (a3[v3 + (m3 + -1) >> 0] | 0) == 7 : 0) {
                  do
                    if (!(a3[t5 >> 0] | 0))
                      r6 = 61;
                    else {
                      f4 = c4[w3 >> 2] | 0;
                      if ((m3 | 0) < (c4[f4 >> 2] | 0)) {
                        r6 = 61;
                        break;
                      }
                      f4 = da(c4[x3 >> 2] | 0, f4, m3) | 0;
                    }
                  while (0);
                  if ((r6 | 0) == 61) {
                    r6 = 0;
                    f4 = a3[s5 >> 0] | 0;
                  }
                  f4 = f4 & 1;
                }
                g3 = m3;
                while (1) {
                  k3 = g3 + 1 | 0;
                  if ((k3 | 0) >= (q2 | 0)) {
                    r6 = 69;
                    break;
                  }
                  e6 = a3[o5 + k3 >> 0] | 0;
                  if (e6 << 24 >> 24 != l4 << 24 >> 24 ? (1 << d3[v3 + k3 >> 0] & 382976 | 0) == 0 : 0) {
                    j3 = 1;
                    break;
                  }
                  g3 = k3;
                }
                c:
                  do
                    if ((r6 | 0) == 69) {
                      r6 = 0;
                      do
                        if (a3[t5 >> 0] | 0) {
                          e6 = c4[w3 >> 2] | 0;
                          if ((q2 | 0) <= (c4[e6 >> 2] | 0))
                            break;
                          e6 = da(c4[x3 >> 2] | 0, e6, n6) | 0;
                          j3 = 0;
                          break c;
                        }
                      while (0);
                      e6 = a3[s5 >> 0] | 0;
                      j3 = 0;
                    }
                  while (0);
                p4 = l4 & 255;
                i5 = e6 & 255;
                i5 = ((p4 & 127) >>> 0 < (i5 & 127) >>> 0 ? i5 : p4) & 1;
                if (!(p4 & 128))
                  ja(b4, m3, k3, f4, i5);
                else {
                  f4 = m3;
                  while (1) {
                    p4 = o5 + f4 | 0;
                    a3[p4 >> 0] = a3[p4 >> 0] & 127;
                    if ((f4 | 0) < (g3 | 0))
                      f4 = f4 + 1 | 0;
                    else
                      break;
                  }
                }
                if (j3) {
                  l4 = e6;
                  m3 = k3;
                  f4 = i5;
                } else
                  break;
              }
            }
            f4 = c4[b4 + 340 >> 2] | 0;
            if (!(($2(f4) | 0) << 24 >> 24)) {
              ka(b4);
              break a;
            }
            c4[h4 >> 2] = f4;
            return;
          }
        }
      while (0);
    k3 = b4 + 88 | 0;
    d:
      do
        if ((a3[t5 >> 0] | 0 ? c4[k3 >> 2] & 1 | 0 : 0) ? ((c4[u4 >> 2] | 0) + -5 | 0) >>> 0 < 2 : 0) {
          g3 = 0;
          while (1) {
            if ((g3 | 0) >= (c4[x3 >> 2] | 0))
              break d;
            e6 = c4[w3 >> 2] | 0;
            f4 = (c4[e6 + (g3 << 3) >> 2] | 0) + -1 | 0;
            e:
              do
                if (c4[e6 + (g3 << 3) + 4 >> 2] & 255 | 0) {
                  if (!g3)
                    i5 = 0;
                  else
                    i5 = c4[e6 + (g3 + -1 << 3) >> 2] | 0;
                  e6 = f4;
                  while (1) {
                    if ((e6 | 0) < (i5 | 0))
                      break e;
                    j3 = a3[v3 + e6 >> 0] | 0;
                    if (!(j3 << 24 >> 24))
                      break;
                    if (1 << (j3 & 255) & 8194 | 0)
                      break e;
                    e6 = e6 + -1 | 0;
                  }
                  if ((e6 | 0) < (f4 | 0))
                    while (1)
                      if ((a3[v3 + f4 >> 0] | 0) == 7)
                        f4 = f4 + -1 | 0;
                      else
                        break;
                  la(b4, f4, 4);
                }
              while (0);
            g3 = g3 + 1 | 0;
          }
        }
      while (0);
    if (!(c4[k3 >> 2] & 2))
      f4 = (c4[z2 >> 2] | 0) + (c4[y4 >> 2] | 0) | 0;
    else
      f4 = (c4[z2 >> 2] | 0) - (c4[b4 + 348 >> 2] | 0) | 0;
    c4[z2 >> 2] = f4;
    ga(b4);
    return;
  }
  function fa(b4, e6, f4, g3, h4) {
    b4 = b4 | 0;
    e6 = e6 | 0;
    f4 = f4 | 0;
    g3 = g3 | 0;
    h4 = h4 | 0;
    var i5 = 0, j3 = 0, k3 = 0, l4 = 0, m3 = 0, n6 = 0, o5 = 0, p4 = 0, q2 = 0, r6 = 0, s5 = 0, t5 = 0, u4 = 0, v3 = 0, w3 = 0, x3 = 0, y4 = 0, z2 = 0, A3 = 0, B2 = 0, C3 = 0, D2 = 0, E3 = 0;
    C3 = b4 + 84 | 0;
    c4[C3 >> 2] = 0;
    if (!f4) {
      ea(b4, e6, 0, g3, h4);
      D2 = 0;
      nb(D2);
      c4[C3 >> 2] = 3;
      return;
    }
    D2 = lb(f4 * 7 | 0) | 0;
    if (!D2) {
      c4[h4 >> 2] = 7;
      D2 = 0;
      nb(D2);
      c4[C3 >> 2] = 3;
      return;
    }
    j3 = D2 + (f4 << 2) | 0;
    B2 = j3 + (f4 << 1) | 0;
    k3 = b4 + 88 | 0;
    l4 = c4[k3 >> 2] | 0;
    if (l4 & 1 | 0)
      c4[k3 >> 2] = l4 & -4 | 2;
    g3 = g3 & 1;
    ea(b4, e6, f4, g3, h4);
    if (($2(c4[h4 >> 2] | 0) | 0) << 24 >> 24) {
      nb(D2);
      c4[C3 >> 2] = 3;
      return;
    }
    x3 = Pa(b4, h4) | 0;
    v3 = b4 + 12 | 0;
    w3 = c4[v3 >> 2] | 0;
    ec(B2 | 0, x3 | 0, w3 | 0) | 0;
    x3 = b4 + 128 | 0;
    y4 = c4[x3 >> 2] | 0;
    z2 = b4 + 116 | 0;
    A3 = c4[z2 >> 2] | 0;
    i5 = Ka(b4, j3, f4, 2, h4) | 0;
    Wa(b4, D2, h4);
    if (!(($2(c4[h4 >> 2] | 0) | 0) << 24 >> 24)) {
      c4[k3 >> 2] = l4;
      c4[C3 >> 2] = 5;
      u4 = b4 + 68 | 0;
      t5 = a3[u4 >> 0] | 0;
      a3[u4 >> 0] = 0;
      ea(b4, j3, i5, g3 ^ 1, h4);
      a3[u4 >> 0] = t5;
      Ra(b4, h4);
      a:
        do
          if (!(($2(c4[h4 >> 2] | 0) | 0) << 24 >> 24)) {
            n6 = b4 + 220 | 0;
            q2 = c4[n6 >> 2] | 0;
            o5 = b4 + 224 | 0;
            p4 = c4[o5 >> 2] | 0;
            j3 = 0;
            g3 = 0;
            h4 = 0;
            while (1) {
              if ((h4 | 0) >= (q2 | 0))
                break;
              m3 = c4[p4 + (h4 * 12 | 0) + 4 >> 2] | 0;
              g3 = m3 - g3 | 0;
              b:
                do
                  if ((g3 | 0) < 2)
                    g3 = j3;
                  else {
                    i5 = c4[p4 + (h4 * 12 | 0) >> 2] & 2147483647;
                    l4 = i5 + g3 | 0;
                    g3 = j3;
                    while (1) {
                      do {
                        j3 = i5;
                        i5 = i5 + 1 | 0;
                        if ((i5 | 0) >= (l4 | 0))
                          break b;
                        k3 = c4[D2 + (i5 << 2) >> 2] | 0;
                        j3 = c4[D2 + (j3 << 2) >> 2] | 0;
                        u4 = k3 - j3 | 0;
                        if ((((u4 | 0) > -1 ? u4 : 0 - u4 | 0) | 0) != 1)
                          break;
                      } while ((a3[B2 + k3 >> 0] | 0) == (a3[B2 + j3 >> 0] | 0));
                      g3 = g3 + 1 | 0;
                    }
                  }
                while (0);
              j3 = g3;
              g3 = m3;
              h4 = h4 + 1 | 0;
            }
            if (!j3)
              t5 = p4;
            else {
              g3 = b4 + 60 | 0;
              if (!((aa(g3, b4 + 36 | 0, a3[b4 + 69 >> 0] | 0, (j3 + q2 | 0) * 12 | 0) | 0) << 24 >> 24))
                break;
              if ((q2 | 0) == 1) {
                u4 = c4[g3 >> 2] | 0;
                c4[u4 >> 2] = c4[p4 >> 2];
                c4[u4 + 4 >> 2] = c4[p4 + 4 >> 2];
                c4[u4 + 8 >> 2] = c4[p4 + 8 >> 2];
              }
              t5 = c4[g3 >> 2] | 0;
              c4[o5 >> 2] = t5;
              c4[n6 >> 2] = (c4[n6 >> 2] | 0) + j3;
            }
            u4 = t5 + 4 | 0;
            g3 = q2;
            i5 = j3;
            while (1) {
              s5 = g3 + -1 | 0;
              if ((g3 | 0) <= 0)
                break a;
              if (!s5)
                g3 = c4[u4 >> 2] | 0;
              else
                g3 = (c4[t5 + (s5 * 12 | 0) + 4 >> 2] | 0) - (c4[t5 + ((g3 + -2 | 0) * 12 | 0) + 4 >> 2] | 0) | 0;
              q2 = t5 + (s5 * 12 | 0) | 0;
              j3 = c4[q2 >> 2] | 0;
              r6 = j3 >>> 31;
              j3 = j3 & 2147483647;
              if ((g3 | 0) < 2) {
                if (!i5)
                  g3 = s5;
                else {
                  g3 = s5 + i5 | 0;
                  p4 = t5 + (g3 * 12 | 0) | 0;
                  c4[p4 >> 2] = c4[q2 >> 2];
                  c4[p4 + 4 >> 2] = c4[q2 + 4 >> 2];
                  c4[p4 + 8 >> 2] = c4[q2 + 8 >> 2];
                }
                j3 = c4[D2 + (j3 << 2) >> 2] | 0;
              } else {
                l4 = (r6 | 0) == 0;
                h4 = g3 + -1 + j3 | 0;
                p4 = l4 ? j3 : h4;
                m3 = l4 ? -1 : 1;
                n6 = t5 + (s5 * 12 | 0) + 4 | 0;
                o5 = t5 + (s5 * 12 | 0) + 8 | 0;
                h4 = l4 ? h4 : j3;
                c:
                  while (1) {
                    g3 = h4;
                    while (1) {
                      if ((g3 | 0) == (p4 | 0))
                        break c;
                      j3 = c4[D2 + (g3 << 2) >> 2] | 0;
                      k3 = g3 + m3 | 0;
                      l4 = c4[D2 + (k3 << 2) >> 2] | 0;
                      E3 = j3 - l4 | 0;
                      if ((((E3 | 0) > -1 ? E3 : 0 - E3 | 0) | 0) != 1)
                        break;
                      if ((a3[B2 + j3 >> 0] | 0) == (a3[B2 + l4 >> 0] | 0))
                        g3 = k3;
                      else
                        break;
                    }
                    E3 = c4[D2 + (h4 << 2) >> 2] | 0;
                    E3 = (E3 | 0) < (j3 | 0) ? E3 : j3;
                    l4 = i5 + s5 | 0;
                    c4[t5 + (l4 * 12 | 0) >> 2] = (r6 ^ d3[B2 + E3 >> 0]) << 31 | E3;
                    c4[t5 + (l4 * 12 | 0) + 4 >> 2] = c4[n6 >> 2];
                    E3 = g3 - h4 | 0;
                    c4[n6 >> 2] = (c4[n6 >> 2] | 0) + ~((E3 | 0) > -1 ? E3 : 0 - E3 | 0);
                    E3 = c4[o5 >> 2] & 10;
                    c4[t5 + (l4 * 12 | 0) + 8 >> 2] = E3;
                    c4[o5 >> 2] = c4[o5 >> 2] & ~E3;
                    h4 = k3;
                    i5 = i5 + -1 | 0;
                  }
                if (!i5)
                  g3 = s5;
                else {
                  g3 = i5 + s5 | 0;
                  E3 = t5 + (g3 * 12 | 0) | 0;
                  c4[E3 >> 2] = c4[q2 >> 2];
                  c4[E3 + 4 >> 2] = c4[q2 + 4 >> 2];
                  c4[E3 + 8 >> 2] = c4[q2 + 8 >> 2];
                }
                E3 = c4[D2 + (h4 << 2) >> 2] | 0;
                j3 = c4[D2 + (p4 << 2) >> 2] | 0;
                j3 = (E3 | 0) < (j3 | 0) ? E3 : j3;
              }
              c4[t5 + (g3 * 12 | 0) >> 2] = (r6 ^ d3[B2 + j3 >> 0]) << 31 | j3;
              g3 = s5;
            }
          }
        while (0);
      E3 = b4 + 93 | 0;
      a3[E3 >> 0] = a3[E3 >> 0] ^ 1;
    }
    c4[b4 + 4 >> 2] = e6;
    c4[v3 >> 2] = w3;
    c4[b4 + 8 >> 2] = f4;
    c4[z2 >> 2] = A3;
    E3 = c4[b4 + 24 >> 2] | 0;
    ec(c4[b4 + 76 >> 2] | 0, B2 | 0, ((w3 | 0) > (E3 | 0) ? E3 : w3) | 0) | 0;
    c4[x3 >> 2] = y4;
    if ((c4[b4 + 220 >> 2] | 0) <= 1) {
      E3 = D2;
      nb(E3);
      c4[C3 >> 2] = 3;
      return;
    }
    c4[z2 >> 2] = 2;
    E3 = D2;
    nb(E3);
    c4[C3 >> 2] = 3;
    return;
  }
  function ga(a4) {
    a4 = a4 | 0;
    c4[a4 + 100 >> 2] = 0;
    c4[a4 + 108 >> 2] = 0;
    c4[a4 >> 2] = a4;
    return;
  }
  function ha(f4) {
    f4 = f4 | 0;
    var g3 = 0, h4 = 0, i5 = 0, j3 = 0, k3 = 0, l4 = 0, m3 = 0, n6 = 0, o5 = 0, p4 = 0, q2 = 0, r6 = 0, s5 = 0, t5 = 0, u4 = 0, v3 = 0, w3 = 0, x3 = 0, y4 = 0, z2 = 0, A3 = 0, B2 = 0, C3 = 0, D2 = 0, F2 = 0, G2 = 0, H3 = 0, I3 = 0, J2 = 0, K2 = 0, L3 = 0, M3 = 0, N3 = 0;
    N3 = E2;
    E2 = E2 + 1024 | 0;
    x3 = N3 + 512 | 0;
    G2 = N3;
    B2 = c4[f4 + 4 >> 2] | 0;
    D2 = c4[f4 + 44 >> 2] | 0;
    J2 = c4[f4 + 8 >> 2] | 0;
    K2 = f4 + 93 | 0;
    g3 = a3[K2 >> 0] | 0;
    H3 = (g3 & 255) > 253;
    if (H3)
      C3 = ((c4[f4 + 84 >> 2] | 0) + -5 | 0) >>> 0 < 2;
    else
      C3 = 0;
    I3 = f4 + 88 | 0;
    M3 = c4[I3 >> 2] | 0;
    j3 = M3 & 2;
    if (M3 & 4 | 0)
      c4[f4 + 12 >> 2] = 0;
    g3 = g3 & 255;
    v3 = g3 & 1;
    w3 = v3 & 255;
    M3 = f4 + 136 | 0;
    h4 = (c4[M3 >> 2] | 0) + 4 | 0;
    if (H3) {
      c4[h4 >> 2] = v3;
      if ((c4[f4 + 100 >> 2] | 0) > 0 ? (i5 = Ba(f4) | 0, i5 << 24 >> 24 != 10) : 0) {
        c4[(c4[M3 >> 2] | 0) + 4 >> 2] = i5 << 24 >> 24 != 0 & 1;
        i5 = w3;
        k3 = 0;
      } else {
        i5 = w3;
        k3 = 1;
      }
    } else {
      c4[h4 >> 2] = g3;
      i5 = 10;
      k3 = 0;
    }
    u4 = (j3 | 0) == 0;
    y4 = f4 + 132 | 0;
    z2 = f4 + 12 | 0;
    A3 = f4 + 348 | 0;
    h4 = -1;
    j3 = 0;
    l4 = 0;
    F2 = -1;
    g3 = 0;
    a:
      while (1) {
        b:
          while (1) {
            t5 = C3 & i5 << 24 >> 24 == 1;
            i5 = l4;
            c:
              while (1) {
                d:
                  while (1) {
                    s5 = (h4 | 0) < 126;
                    r6 = (k3 | 0) == 2 & s5;
                    q2 = (h4 | 0) > -1;
                    e:
                      while (1) {
                        p4 = i5;
                        f:
                          while (1) {
                            if ((j3 | 0) >= (J2 | 0))
                              break a;
                            i5 = j3 + 1 | 0;
                            l4 = e5[B2 + (j3 << 1) >> 1] | 0;
                            if (!((i5 | 0) == (J2 | 0) | (l4 & 64512 | 0) != 55296)) {
                              m3 = e5[B2 + (i5 << 1) >> 1] | 0;
                              o5 = (m3 & 64512 | 0) == 56320;
                              j3 = o5 ? j3 + 2 | 0 : i5;
                              if (o5)
                                l4 = (l4 << 10) + -56613888 + m3 | 0;
                            } else
                              j3 = i5;
                            o5 = pa(f4, l4) | 0;
                            i5 = o5 & 255;
                            o5 = o5 & 255;
                            g3 = 1 << o5 | g3;
                            n6 = j3 + -1 | 0;
                            m3 = D2 + n6 | 0;
                            a3[m3 >> 0] = i5;
                            if ((l4 | 0) > 65535) {
                              a3[D2 + (j3 + -2) >> 0] = 18;
                              g3 = g3 | 262144;
                            }
                            if (!u4)
                              p4 = p4 + (((l4 + -8294 | 0) >>> 0 < 4 | ((l4 & -4 | 0) == 8204 | (l4 + -8234 | 0) >>> 0 < 5)) & 1) | 0;
                            switch (i5 << 24 >> 24) {
                              case 13:
                              case 1:
                                break b;
                              case 0: {
                                L3 = 25;
                                break c;
                              }
                              default: {
                              }
                            }
                            if ((o5 + -19 | 0) >>> 0 < 3) {
                              L3 = 35;
                              break e;
                            }
                            switch (i5 << 24 >> 24) {
                              case 22:
                                break f;
                              case 7: {
                                i5 = (j3 | 0) < (J2 | 0);
                                if (!((l4 | 0) == 13 & i5))
                                  break d;
                                if ((b3[B2 + (j3 << 1) >> 1] | 0) != 10) {
                                  i5 = 1;
                                  break d;
                                }
                                break;
                              }
                              default: {
                              }
                            }
                          }
                        g3 = r6 ? g3 | 1048576 : g3;
                        if (q2) {
                          L3 = 43;
                          break;
                        } else
                          i5 = p4;
                      }
                    if ((L3 | 0) == 35) {
                      L3 = 0;
                      i5 = h4 + 1 | 0;
                      if ((h4 | 0) < 125) {
                        c4[x3 + (i5 << 2) >> 2] = n6;
                        c4[G2 + (i5 << 2) >> 2] = k3;
                      }
                      if ((o5 | 0) == 19) {
                        a3[m3 >> 0] = 20;
                        h4 = i5;
                        k3 = 2;
                      } else {
                        h4 = i5;
                        k3 = 3;
                      }
                    } else if ((L3 | 0) == 43) {
                      L3 = 0;
                      if (s5)
                        k3 = c4[G2 + (h4 << 2) >> 2] | 0;
                      h4 = h4 + -1 | 0;
                    }
                    i5 = p4;
                  }
                c4[(c4[M3 >> 2] | 0) + ((c4[y4 >> 2] | 0) + -1 << 3) >> 2] = j3;
                if (t5)
                  c4[(c4[M3 >> 2] | 0) + ((c4[y4 >> 2] | 0) + -1 << 3) + 4 >> 2] = 1;
                if (c4[I3 >> 2] & 4 | 0) {
                  c4[z2 >> 2] = j3;
                  c4[A3 >> 2] = p4;
                }
                if (i5) {
                  c4[y4 >> 2] = (c4[y4 >> 2] | 0) + 1;
                  if (!((Ca(f4) | 0) << 24 >> 24)) {
                    g3 = 0;
                    L3 = 76;
                    break a;
                  }
                  if (H3) {
                    L3 = 56;
                    break;
                  }
                  c4[(c4[M3 >> 2] | 0) + ((c4[y4 >> 2] | 0) + -1 << 3) + 4 >> 2] = d3[K2 >> 0];
                  h4 = -1;
                  k3 = 0;
                }
                i5 = p4;
              }
            g:
              do
                if ((L3 | 0) == 25) {
                  L3 = 0;
                  switch (k3 | 0) {
                    case 1: {
                      c4[(c4[M3 >> 2] | 0) + ((c4[y4 >> 2] | 0) + -1 << 3) + 4 >> 2] = 0;
                      i5 = 0;
                      k3 = 0;
                      break g;
                    }
                    case 2: {
                      g3 = s5 ? g3 | 1048576 : g3;
                      i5 = 0;
                      k3 = 3;
                      break g;
                    }
                    default: {
                      i5 = 0;
                      break g;
                    }
                  }
                } else if ((L3 | 0) == 56) {
                  L3 = 0;
                  c4[(c4[M3 >> 2] | 0) + ((c4[y4 >> 2] | 0) + -1 << 3) + 4 >> 2] = v3;
                  h4 = -1;
                  i5 = w3;
                  k3 = 1;
                }
              while (0);
            l4 = p4;
          }
        switch (k3 | 0) {
          case 1: {
            c4[(c4[M3 >> 2] | 0) + ((c4[y4 >> 2] | 0) + -1 << 3) + 4 >> 2] = 1;
            k3 = 0;
            break;
          }
          case 2: {
            if (s5) {
              a3[D2 + (c4[x3 + (h4 << 2) >> 2] | 0) >> 0] = 21;
              k3 = 3;
              g3 = g3 | 2097152;
            } else
              k3 = 3;
            break;
          }
          default: {
          }
        }
        l4 = p4;
        F2 = (o5 | 0) == 13 ? n6 : F2;
        i5 = 1;
      }
    if ((L3 | 0) == 76) {
      E2 = N3;
      return g3 | 0;
    }
    D2 = (h4 | 0) > 125;
    i5 = D2 ? 2 : k3;
    h4 = D2 ? 125 : h4;
    while (1) {
      if ((h4 | 0) <= -1)
        break;
      if ((i5 | 0) == 2) {
        L3 = 62;
        break;
      }
      i5 = c4[G2 + (h4 << 2) >> 2] | 0;
      h4 = h4 + -1 | 0;
    }
    if ((L3 | 0) == 62)
      g3 = g3 | 1048576;
    if (c4[I3 >> 2] & 4) {
      if ((c4[z2 >> 2] | 0) < (J2 | 0))
        c4[y4 >> 2] = (c4[y4 >> 2] | 0) + -1;
    } else {
      c4[(c4[M3 >> 2] | 0) + ((c4[y4 >> 2] | 0) + -1 << 3) >> 2] = J2;
      c4[A3 >> 2] = p4;
    }
    if (t5)
      c4[(c4[M3 >> 2] | 0) + ((c4[y4 >> 2] | 0) + -1 << 3) + 4 >> 2] = 1;
    if (H3)
      a3[K2 >> 0] = c4[(c4[M3 >> 2] | 0) + 4 >> 2];
    i5 = c4[y4 >> 2] | 0;
    h4 = 0;
    while (1) {
      if ((h4 | 0) >= (i5 | 0))
        break;
      L3 = c4[69880 + ((c4[(c4[M3 >> 2] | 0) + (h4 << 3) + 4 >> 2] & 1) << 2) >> 2] | g3;
      h4 = h4 + 1 | 0;
      g3 = L3;
    }
    c4[f4 + 120 >> 2] = g3 | (g3 & 128 | 0) != 0 & (a3[f4 + 92 >> 0] | 0) != 0 & 1;
    c4[f4 + 124 >> 2] = F2;
    f4 = 1;
    E2 = N3;
    return f4 | 0;
  }
  function ia(f4, g3) {
    f4 = f4 | 0;
    g3 = g3 | 0;
    var h4 = 0, i5 = 0, j3 = 0, k3 = 0, l4 = 0, m3 = 0, n6 = 0, o5 = 0, p4 = 0, q2 = 0, r6 = 0, s5 = 0, t5 = 0, u4 = 0, v3 = 0, w3 = 0, x3 = 0, y4 = 0, z2 = 0, A3 = 0, B2 = 0, C3 = 0, D2 = 0, F2 = 0, G2 = 0, H3 = 0, I3 = 0, J2 = 0, K2 = 0, L3 = 0;
    L3 = E2;
    E2 = E2 + 5328 | 0;
    o5 = L3 + 2788 | 0;
    B2 = L3;
    C3 = L3 + 256 | 0;
    I3 = c4[f4 + 72 >> 2] | 0;
    K2 = c4[f4 + 76 >> 2] | 0;
    G2 = c4[f4 + 4 >> 2] | 0;
    H3 = c4[f4 + 12 >> 2] | 0;
    D2 = f4 + 120 | 0;
    i5 = c4[D2 >> 2] | 0;
    y4 = f4 + 94 | 0;
    if ((a3[y4 >> 0] | 0) != 0 ? (h4 = c4[f4 + 136 >> 2] | 0, (c4[h4 >> 2] | 0) <= 0) : 0)
      j3 = da(c4[f4 + 132 >> 2] | 0, h4, 0) | 0;
    else
      j3 = a3[f4 + 93 >> 0] | 0;
    x3 = f4 + 240 | 0;
    c4[x3 >> 2] = 0;
    if (($2(c4[g3 >> 2] | 0) | 0) << 24 >> 24) {
      K2 = 0;
      E2 = L3;
      return K2 | 0;
    }
    h4 = ra(i5) | 0;
    if ((h4 | 0) != 2) {
      K2 = h4;
      E2 = L3;
      return K2 | 0;
    }
    if ((c4[f4 + 84 >> 2] | 0) > 1) {
      m3 = f4 + 132 | 0;
      k3 = f4 + 136 | 0;
      j3 = 0;
      while (1) {
        if ((j3 | 0) >= (c4[m3 >> 2] | 0)) {
          F2 = 2;
          break;
        }
        if (!j3) {
          h4 = 0;
          i5 = c4[k3 >> 2] | 0;
        } else {
          i5 = c4[k3 >> 2] | 0;
          h4 = c4[i5 + (j3 + -1 << 3) >> 2] | 0;
        }
        l4 = c4[i5 + (j3 << 3) >> 2] | 0;
        i5 = c4[i5 + (j3 << 3) + 4 >> 2] & 255;
        while (1) {
          if ((h4 | 0) >= (l4 | 0))
            break;
          a3[K2 + h4 >> 0] = i5;
          h4 = h4 + 1 | 0;
        }
        j3 = j3 + 1 | 0;
      }
      E2 = L3;
      return F2 | 0;
    }
    if (!(i5 & 7985152)) {
      sa(f4, o5);
      n6 = f4 + 132 | 0;
      l4 = f4 + 136 | 0;
      k3 = 0;
      a:
        while (1) {
          if ((k3 | 0) >= (c4[n6 >> 2] | 0)) {
            F2 = 2;
            J2 = 89;
            break;
          }
          if (!k3) {
            i5 = 0;
            h4 = c4[l4 >> 2] | 0;
          } else {
            h4 = c4[l4 >> 2] | 0;
            i5 = c4[h4 + (k3 + -1 << 3) >> 2] | 0;
          }
          m3 = c4[h4 + (k3 << 3) >> 2] | 0;
          j3 = c4[h4 + (k3 << 3) + 4 >> 2] & 255;
          while (1) {
            if ((i5 | 0) >= (m3 | 0))
              break;
            a3[K2 + i5 >> 0] = j3;
            b:
              do
                switch (a3[I3 + i5 >> 0] | 0) {
                  case 18:
                    break;
                  case 7: {
                    h4 = i5 + 1 | 0;
                    if ((h4 | 0) < (H3 | 0)) {
                      if ((b3[G2 + (i5 << 1) >> 1] | 0) == 13 ? (b3[G2 + (h4 << 1) >> 1] | 0) == 10 : 0)
                        break b;
                      ta(o5, j3);
                    }
                    break;
                  }
                  default:
                    if (!((ua(o5, i5) | 0) << 24 >> 24))
                      break a;
                }
              while (0);
            i5 = i5 + 1 | 0;
          }
          k3 = k3 + 1 | 0;
        }
      if ((J2 | 0) == 89) {
        E2 = L3;
        return F2 | 0;
      }
      c4[g3 >> 2] = 7;
      K2 = 0;
      E2 = L3;
      return K2 | 0;
    }
    sa(f4, C3);
    b3[B2 >> 1] = j3 & 255;
    v3 = f4 + 93 | 0;
    w3 = f4 + 136 | 0;
    u4 = f4 + 132 | 0;
    r6 = 0;
    p4 = 0;
    s5 = 0;
    i5 = 0;
    m3 = 0;
    g3 = j3;
    q2 = j3;
    h4 = 0;
    t5 = 0;
    c:
      while (1) {
        if ((t5 | 0) >= (H3 | 0))
          break;
        o5 = I3 + t5 | 0;
        l4 = a3[o5 >> 0] | 0;
        n6 = l4 & 255;
        d:
          do
            switch (l4 << 24 >> 24) {
              case 15:
              case 12:
              case 14:
              case 11: {
                h4 = h4 | 262144;
                a3[K2 + t5 >> 0] = g3;
                if ((l4 + -11 & 255) < 2)
                  j3 = q2 + 2 & 126;
                else
                  j3 = (q2 & 127) + 1 << 24 >> 24 | 1;
                if (!((p4 | s5 | 0) == 0 & (j3 & 255) < 126)) {
                  k3 = r6;
                  p4 = p4 + ((s5 | 0) == 0 & 1) | 0;
                  l4 = s5;
                  j3 = q2;
                  break d;
                }
                switch (l4 << 24 >> 24) {
                  case 15:
                  case 12: {
                    j3 = j3 | -128;
                    break;
                  }
                  default: {
                  }
                }
                i5 = i5 + 1 | 0;
                b3[B2 + (i5 << 1) >> 1] = j3 & 255;
                k3 = r6;
                l4 = s5;
                m3 = t5;
                break;
              }
              case 16: {
                h4 = h4 | 262144;
                a3[K2 + t5 >> 0] = g3;
                if (!s5) {
                  if (p4 | 0) {
                    k3 = r6;
                    p4 = p4 + -1 | 0;
                    l4 = 0;
                    j3 = q2;
                    break d;
                  }
                  if (i5) {
                    n6 = i5 + -1 | 0;
                    if ((e5[B2 + (i5 << 1) >> 1] | 0) < 256) {
                      k3 = r6;
                      p4 = 0;
                      l4 = 0;
                      m3 = t5;
                      j3 = b3[B2 + (n6 << 1) >> 1] & 255;
                      i5 = n6;
                    } else {
                      k3 = r6;
                      p4 = 0;
                      l4 = 0;
                      j3 = q2;
                    }
                  } else {
                    k3 = r6;
                    p4 = 0;
                    l4 = 0;
                    j3 = q2;
                    i5 = 0;
                  }
                } else {
                  k3 = r6;
                  l4 = s5;
                  j3 = q2;
                }
                break;
              }
              case 21:
              case 20: {
                k3 = q2 & 255;
                h4 = h4 | c4[69880 + ((k3 & 1) << 2) >> 2];
                j3 = k3 & 127;
                a3[K2 + t5 >> 0] = j3;
                if ((j3 | 0) == (g3 & 127 | 0))
                  h4 = h4 | 1024;
                else {
                  va(C3, m3, g3, q2);
                  h4 = h4 | -2147482624;
                }
                l4 = l4 << 24 >> 24 == 20 ? k3 + 2 & 382 : j3 + 1 | 1;
                j3 = l4 & 255;
                if (!((p4 | s5 | 0) == 0 & (l4 & 254) >>> 0 < 126)) {
                  a3[o5 >> 0] = 9;
                  g3 = q2;
                  k3 = r6;
                  l4 = s5 + 1 | 0;
                  j3 = q2;
                  break d;
                }
                k3 = r6 + 1 | 0;
                if ((r6 | 0) >= (c4[x3 >> 2] | 0))
                  c4[x3 >> 2] = k3;
                i5 = i5 + 1 | 0;
                b3[B2 + (i5 << 1) >> 1] = l4 | 256;
                wa(C3, j3);
                g3 = q2;
                l4 = s5;
                m3 = t5;
                h4 = h4 | 1 << n6;
                break;
              }
              case 22: {
                if ((g3 ^ q2) & 127) {
                  va(C3, m3, g3, q2);
                  h4 = h4 | -2147483648;
                }
                do
                  if (!s5) {
                    if (!r6) {
                      a3[o5 >> 0] = 9;
                      k3 = 0;
                      j3 = p4;
                      l4 = 0;
                      break;
                    }
                    do {
                      s5 = i5;
                      i5 = i5 + -1 | 0;
                    } while ((e5[B2 + (s5 << 1) >> 1] | 0) < 256);
                    xa(C3);
                    k3 = r6 + -1 | 0;
                    j3 = 0;
                    l4 = 0;
                    m3 = t5;
                    h4 = h4 | 4194304;
                  } else {
                    a3[o5 >> 0] = 9;
                    k3 = r6;
                    j3 = p4;
                    l4 = s5 + -1 | 0;
                  }
                while (0);
                g3 = b3[B2 + (i5 << 1) >> 1] | 0;
                s5 = g3 & 255;
                g3 = g3 & 255;
                h4 = h4 | c4[69880 + ((g3 & 1) << 2) >> 2] | 1024;
                a3[K2 + t5 >> 0] = g3 & 127;
                g3 = s5;
                p4 = j3;
                j3 = s5;
                break;
              }
              case 7: {
                h4 = h4 | 128;
                if ((a3[y4 >> 0] | 0) != 0 ? (z2 = c4[w3 >> 2] | 0, (t5 | 0) >= (c4[z2 >> 2] | 0)) : 0)
                  j3 = da(c4[u4 >> 2] | 0, z2, t5) | 0;
                else
                  j3 = a3[v3 >> 0] | 0;
                a3[K2 + t5 >> 0] = j3;
                j3 = t5 + 1 | 0;
                if ((j3 | 0) < (H3 | 0)) {
                  if ((b3[G2 + (t5 << 1) >> 1] | 0) == 13 ? (b3[G2 + (j3 << 1) >> 1] | 0) == 10 : 0) {
                    k3 = r6;
                    l4 = s5;
                    j3 = q2;
                    break d;
                  }
                  if ((a3[y4 >> 0] | 0) != 0 ? (A3 = c4[w3 >> 2] | 0, (j3 | 0) >= (c4[A3 >> 2] | 0)) : 0)
                    i5 = da(c4[u4 >> 2] | 0, A3, j3) | 0;
                  else
                    i5 = a3[v3 >> 0] | 0;
                  b3[B2 >> 1] = i5 & 255;
                  ta(C3, i5);
                  g3 = i5;
                  k3 = 0;
                  p4 = 0;
                  l4 = 0;
                  j3 = i5;
                  i5 = 0;
                } else {
                  k3 = r6;
                  l4 = s5;
                  j3 = q2;
                }
                break;
              }
              case 18: {
                a3[K2 + t5 >> 0] = g3;
                k3 = r6;
                l4 = s5;
                j3 = q2;
                h4 = h4 | 262144;
                break;
              }
              default: {
                j3 = q2 & 255;
                if ((j3 & 127 | 0) == (g3 & 127 | 0))
                  n6 = h4;
                else {
                  va(C3, m3, g3, q2);
                  n6 = c4[((j3 & 128 | 0) == 0 ? 70024 : 70016) + ((j3 & 1) << 2) >> 2] | (h4 | -2147483648);
                }
                a3[K2 + t5 >> 0] = q2;
                if (!((ua(C3, t5) | 0) << 24 >> 24)) {
                  F2 = -1;
                  J2 = 89;
                  break c;
                }
                g3 = q2;
                k3 = r6;
                l4 = s5;
                j3 = q2;
                h4 = 1 << d3[o5 >> 0] | n6;
              }
            }
          while (0);
        r6 = k3;
        s5 = l4;
        q2 = j3;
        t5 = t5 + 1 | 0;
      }
    if ((J2 | 0) == 89) {
      E2 = L3;
      return F2 | 0;
    }
    if (h4 & 8380376)
      h4 = c4[69880 + ((a3[v3 >> 0] & 1) << 2) >> 2] | h4;
    K2 = h4 | (h4 & 128 | 0) != 0 & (a3[f4 + 92 >> 0] | 0) != 0 & 1;
    c4[D2 >> 2] = K2;
    K2 = ra(K2) | 0;
    E2 = L3;
    return K2 | 0;
  }
  function ja(d4, e6, f4, g3, h4) {
    d4 = d4 | 0;
    e6 = e6 | 0;
    f4 = f4 | 0;
    g3 = g3 | 0;
    h4 = h4 | 0;
    var i5 = 0, j3 = 0, k3 = 0, l4 = 0, m3 = 0, n6 = 0, o5 = 0, p4 = 0, q2 = 0, r6 = 0, s5 = 0, t5 = 0, u4 = 0;
    u4 = E2;
    E2 = E2 + 32 | 0;
    s5 = u4;
    t5 = c4[d4 + 72 >> 2] | 0;
    if ((c4[d4 + 124 >> 2] | 0) > (e6 | 0)) {
      if ((a3[d4 + 94 >> 0] | 0) != 0 ? (i5 = c4[d4 + 136 >> 2] | 0, (c4[i5 >> 2] | 0) <= (e6 | 0)) : 0)
        i5 = da(c4[d4 + 132 >> 2] | 0, i5, e6) | 0;
      else
        i5 = a3[d4 + 93 >> 0] | 0;
      if (i5 & 1)
        q2 = ((c4[d4 + 84 >> 2] | 0) + -5 | 0) >>> 0 < 2;
      else
        q2 = 0;
    } else
      q2 = 0;
    c4[s5 + 12 >> 2] = -1;
    c4[s5 + 16 >> 2] = -1;
    c4[s5 + 24 >> 2] = e6;
    r6 = a3[(c4[d4 + 76 >> 2] | 0) + e6 >> 0] | 0;
    a3[s5 + 28 >> 0] = r6;
    p4 = c4[d4 + 112 >> 2] | 0;
    r6 = r6 & 1;
    c4[s5 >> 2] = c4[p4 + (r6 << 2) >> 2];
    c4[s5 + 4 >> 2] = c4[p4 + 8 + (r6 << 2) >> 2];
    if ((e6 | 0) == 0 ? (c4[d4 + 100 >> 2] | 0) > 0 : 0) {
      i5 = ma(d4) | 0;
      i5 = i5 << 24 >> 24 == 4 ? g3 : i5;
    } else
      i5 = g3;
    g3 = t5 + e6 | 0;
    r6 = d4 + 240 | 0;
    if ((a3[g3 >> 0] | 0) == 22 ? (j3 = c4[r6 >> 2] | 0, (j3 | 0) > -1) : 0) {
      o5 = c4[d4 + 244 >> 2] | 0;
      c4[s5 + 8 >> 2] = c4[o5 + (j3 << 4) >> 2];
      g3 = c4[o5 + (j3 << 4) + 4 >> 2] | 0;
      p4 = b3[o5 + (j3 << 4) + 12 >> 1] | 0;
      c4[s5 + 20 >> 2] = c4[o5 + (j3 << 4) + 8 >> 2];
      c4[r6 >> 2] = j3 + -1;
      j3 = p4;
    } else {
      c4[s5 + 8 >> 2] = -1;
      j3 = (a3[g3 >> 0] | 0) == 17 ? (i5 & 255) + 1 & 65535 : 0;
      c4[s5 + 20 >> 2] = 0;
      na(d4, s5, i5, e6, e6);
      g3 = e6;
    }
    i5 = -1;
    m3 = 1;
    n6 = e6;
    o5 = e6;
    p4 = g3;
    l4 = j3;
    while (1) {
      if ((n6 | 0) > (f4 | 0))
        break;
      if ((n6 | 0) >= (f4 | 0)) {
        g3 = f4;
        do {
          g3 = g3 + -1 | 0;
          j3 = a3[t5 + g3 >> 0] | 0;
          if ((g3 | 0) <= (e6 | 0))
            break;
        } while ((1 << (j3 & 255) & 382976 | 0) != 0);
        if ((j3 & -2) << 24 >> 24 == 20)
          break;
        else {
          k3 = h4;
          j3 = m3;
        }
      } else {
        g3 = a3[t5 + n6 >> 0] | 0;
        if (g3 << 24 >> 24 == 7)
          c4[r6 >> 2] = -1;
        a:
          do
            if (q2) {
              switch (g3 << 24 >> 24) {
                case 13: {
                  g3 = 1;
                  j3 = m3;
                  break a;
                }
                case 2:
                  break;
                default: {
                  j3 = m3;
                  break a;
                }
              }
              b:
                do
                  if ((i5 | 0) > (n6 | 0))
                    j3 = m3;
                  else {
                    i5 = n6;
                    while (1) {
                      i5 = i5 + 1 | 0;
                      if ((i5 | 0) >= (f4 | 0)) {
                        g3 = 2;
                        i5 = f4;
                        j3 = 1;
                        break a;
                      }
                      g3 = a3[t5 + i5 >> 0] | 0;
                      switch (g3 << 24 >> 24) {
                        case 13:
                        case 1:
                        case 0: {
                          j3 = g3;
                          break b;
                        }
                        default: {
                        }
                      }
                    }
                  }
                while (0);
              g3 = j3 << 24 >> 24 == 13 ? 5 : 2;
            } else
              j3 = m3;
          while (0);
        k3 = a3[16 + (g3 & 255) >> 0] | 0;
      }
      g3 = l4 & 65535;
      k3 = a3[(k3 & 255) + (48 + (g3 << 4)) >> 0] | 0;
      l4 = k3 & 31;
      k3 = (k3 & 255) >>> 5;
      k3 = (n6 | 0) == (f4 | 0) & k3 << 24 >> 24 == 0 ? 1 : k3 & 255;
      c:
        do
          if (!(k3 << 16 >> 16)) {
            k3 = o5;
            g3 = p4;
          } else {
            g3 = a3[48 + (g3 << 4) + 15 >> 0] | 0;
            switch (k3 & 7) {
              case 1: {
                na(d4, s5, g3, p4, n6);
                k3 = o5;
                g3 = n6;
                break c;
              }
              case 2: {
                k3 = n6;
                g3 = p4;
                break c;
              }
              case 3: {
                na(d4, s5, g3, p4, o5);
                na(d4, s5, 4, o5, n6);
                k3 = o5;
                g3 = n6;
                break c;
              }
              case 4: {
                na(d4, s5, g3, p4, o5);
                k3 = n6;
                g3 = o5;
                break c;
              }
              default: {
                k3 = o5;
                g3 = p4;
                break c;
              }
            }
          }
        while (0);
      m3 = j3;
      n6 = n6 + 1 | 0;
      o5 = k3;
      p4 = g3;
    }
    k3 = d4 + 12 | 0;
    if ((c4[k3 >> 2] | 0) == (f4 | 0) ? (c4[d4 + 108 >> 2] | 0) > 0 : 0) {
      i5 = oa(d4) | 0;
      i5 = i5 << 24 >> 24 == 4 ? h4 : i5;
    } else
      i5 = h4;
    g3 = f4;
    do {
      g3 = g3 + -1 | 0;
      j3 = a3[t5 + g3 >> 0] | 0;
      if ((g3 | 0) <= (e6 | 0))
        break;
    } while ((1 << (j3 & 255) & 382976 | 0) != 0);
    if ((j3 & -2) << 24 >> 24 == 20 ? (c4[k3 >> 2] | 0) > (f4 | 0) : 0) {
      f4 = (c4[r6 >> 2] | 0) + 1 | 0;
      c4[r6 >> 2] = f4;
      t5 = d4 + 244 | 0;
      b3[(c4[t5 >> 2] | 0) + (f4 << 4) + 12 >> 1] = l4;
      c4[(c4[t5 >> 2] | 0) + (c4[r6 >> 2] << 4) + 8 >> 2] = c4[s5 + 20 >> 2];
      c4[(c4[t5 >> 2] | 0) + (c4[r6 >> 2] << 4) + 4 >> 2] = p4;
      c4[(c4[t5 >> 2] | 0) + (c4[r6 >> 2] << 4) >> 2] = c4[s5 + 8 >> 2];
      E2 = u4;
      return;
    }
    na(d4, s5, i5, f4, f4);
    E2 = u4;
    return;
  }
  function ka(b4) {
    b4 = b4 | 0;
    var d4 = 0, e6 = 0, f4 = 0, g3 = 0, h4 = 0, i5 = 0, j3 = 0, k3 = 0, l4 = 0, m3 = 0, n6 = 0, o5 = 0, p4 = 0;
    l4 = c4[b4 + 72 >> 2] | 0;
    n6 = c4[b4 + 76 >> 2] | 0;
    if (!(c4[b4 + 120 >> 2] & 8248192))
      return;
    h4 = (a3[b4 + 92 >> 0] | 0) != 0;
    i5 = b4 + 94 | 0;
    j3 = b4 + 93 | 0;
    k3 = b4 + 136 | 0;
    g3 = b4 + 132 | 0;
    b4 = c4[b4 + 128 >> 2] | 0;
    while (1) {
      if ((b4 | 0) <= 0)
        break;
      while (1) {
        if ((b4 | 0) <= 0)
          break;
        e6 = b4 + -1 | 0;
        d4 = a3[l4 + e6 >> 0] | 0;
        if (!(1 << (d4 & 255) & 8248192)) {
          b4 = e6;
          break;
        }
        do
          if (h4 & d4 << 24 >> 24 == 7)
            b4 = 0;
          else {
            if (a3[i5 >> 0] | 0 ? (m3 = c4[k3 >> 2] | 0, (b4 | 0) > (c4[m3 >> 2] | 0)) : 0) {
              b4 = da(c4[g3 >> 2] | 0, m3, e6) | 0;
              break;
            }
            b4 = a3[j3 >> 0] | 0;
          }
        while (0);
        a3[n6 + e6 >> 0] = b4;
        b4 = e6;
      }
      while (1) {
        if ((b4 | 0) <= 0)
          break;
        f4 = b4 + -1 | 0;
        d4 = a3[l4 + f4 >> 0] | 0;
        e6 = 1 << (d4 & 255);
        if (!(e6 & 382976)) {
          if (h4 & d4 << 24 >> 24 == 7) {
            b4 = 0;
            p4 = 24;
            break;
          }
          if (e6 & 384 | 0) {
            p4 = 20;
            break;
          }
        } else
          a3[n6 + f4 >> 0] = a3[n6 + b4 >> 0] | 0;
        b4 = f4;
      }
      do
        if ((p4 | 0) == 20) {
          if (a3[i5 >> 0] | 0 ? (o5 = c4[k3 >> 2] | 0, (b4 | 0) > (c4[o5 >> 2] | 0)) : 0) {
            b4 = da(c4[g3 >> 2] | 0, o5, f4) | 0;
            p4 = 24;
            break;
          }
          b4 = a3[j3 >> 0] | 0;
          p4 = 24;
        }
      while (0);
      if ((p4 | 0) == 24) {
        p4 = 0;
        a3[n6 + f4 >> 0] = b4;
        b4 = f4;
      }
    }
    return;
  }
  function la(a4, b4, d4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    d4 = d4 | 0;
    var e6 = 0, f4 = 0, g3 = 0, h4 = 0, i5 = 0, j3 = 0, k3 = 0;
    k3 = a4 + 328 | 0;
    e6 = c4[k3 >> 2] | 0;
    do
      if (!e6) {
        g3 = lb(80) | 0;
        e6 = a4 + 344 | 0;
        c4[e6 >> 2] = g3;
        if (g3 | 0) {
          c4[k3 >> 2] = 10;
          i5 = e6;
          f4 = g3;
          h4 = 10;
          break;
        }
        c4[a4 + 340 >> 2] = 7;
        return;
      } else {
        i5 = a4 + 344 | 0;
        g3 = c4[i5 >> 2] | 0;
        f4 = g3;
        h4 = e6;
      }
    while (0);
    j3 = a4 + 332 | 0;
    e6 = c4[j3 >> 2] | 0;
    do
      if ((e6 | 0) >= (h4 | 0)) {
        f4 = mb(g3, h4 << 4) | 0;
        c4[i5 >> 2] = f4;
        if (f4 | 0) {
          c4[k3 >> 2] = c4[k3 >> 2] << 1;
          e6 = c4[j3 >> 2] | 0;
          break;
        }
        c4[i5 >> 2] = g3;
        c4[a4 + 340 >> 2] = 7;
        return;
      }
    while (0);
    c4[f4 + (e6 << 3) >> 2] = b4;
    c4[f4 + (e6 << 3) + 4 >> 2] = d4;
    c4[j3 >> 2] = (c4[j3 >> 2] | 0) + 1;
    return;
  }
  function ma(a4) {
    a4 = a4 | 0;
    var b4 = 0, d4 = 0, f4 = 0, g3 = 0, h4 = 0, i5 = 0;
    g3 = c4[a4 + 96 >> 2] | 0;
    b4 = c4[a4 + 100 >> 2] | 0;
    a:
      while (1) {
        if ((b4 | 0) <= 0) {
          b4 = 4;
          d4 = 8;
          break;
        }
        f4 = b4 + -1 | 0;
        d4 = e5[g3 + (f4 << 1) >> 1] | 0;
        if ((b4 | 0) != 1 & (d4 & 64512 | 0) == 56320) {
          b4 = b4 + -2 | 0;
          i5 = e5[g3 + (b4 << 1) >> 1] | 0;
          h4 = (i5 & 64512 | 0) == 55296;
          d4 = h4 ? d4 + -56613888 + (i5 << 10) | 0 : d4;
          b4 = h4 ? b4 : f4;
        } else
          b4 = f4;
        switch (((pa(a4, d4) | 0) & 255) << 24 >> 24) {
          case 13:
          case 1: {
            d4 = 6;
            break a;
          }
          case 7: {
            d4 = 7;
            break a;
          }
          case 0: {
            b4 = 0;
            d4 = 8;
            break a;
          }
          default: {
          }
        }
      }
    if ((d4 | 0) == 6) {
      i5 = 1;
      return i5 | 0;
    } else if ((d4 | 0) == 7) {
      i5 = 4;
      return i5 | 0;
    } else if ((d4 | 0) == 8)
      return b4 | 0;
    return 0;
  }
  function na(b4, e6, f4, g3, h4) {
    b4 = b4 | 0;
    e6 = e6 | 0;
    f4 = f4 | 0;
    g3 = g3 | 0;
    h4 = h4 | 0;
    var i5 = 0, j3 = 0, k3 = 0, l4 = 0, m3 = 0, n6 = 0, o5 = 0, p4 = 0, q2 = 0, r6 = 0, s5 = 0, t5 = 0;
    l4 = c4[e6 >> 2] | 0;
    p4 = c4[e6 + 4 >> 2] | 0;
    s5 = b4 + 76 | 0;
    t5 = c4[s5 >> 2] | 0;
    o5 = e6 + 20 | 0;
    k3 = c4[o5 >> 2] & 255;
    q2 = d3[(f4 & 255) + (l4 + (k3 << 3)) >> 0] | 0;
    r6 = q2 & 15;
    c4[o5 >> 2] = r6;
    r6 = a3[l4 + (r6 << 3) + 7 >> 0] | 0;
    a:
      do
        switch (a3[p4 + (q2 >>> 4) >> 0] | 0) {
          case 14: {
            l4 = e6 + 8 | 0;
            m3 = (a3[e6 + 28 >> 0] | 0) + 1 << 24 >> 24;
            i5 = g3;
            while (1) {
              k3 = i5 + -1 | 0;
              if ((i5 | 0) <= (c4[l4 >> 2] | 0)) {
                i5 = g3;
                break a;
              }
              i5 = t5 + k3 | 0;
              j3 = a3[i5 >> 0] | 0;
              if ((j3 & 255) > (m3 & 255))
                a3[i5 >> 0] = (j3 & 255) + 254;
              i5 = k3;
            }
          }
          case 1: {
            c4[e6 + 8 >> 2] = g3;
            i5 = g3;
            break;
          }
          case 2: {
            i5 = c4[e6 + 8 >> 2] | 0;
            break;
          }
          case 3: {
            qa(c4[b4 + 72 >> 2] | 0, c4[s5 >> 2] | 0, c4[e6 + 8 >> 2] | 0, g3, (d3[e6 + 28 >> 0] | 0) + 1 & 255);
            i5 = g3;
            break;
          }
          case 4: {
            qa(c4[b4 + 72 >> 2] | 0, c4[s5 >> 2] | 0, c4[e6 + 8 >> 2] | 0, g3, (d3[e6 + 28 >> 0] | 0) + 2 & 255);
            i5 = g3;
            break;
          }
          case 5: {
            i5 = e6 + 12 | 0;
            j3 = c4[i5 >> 2] | 0;
            if ((j3 | 0) > -1)
              la(b4, j3, 1);
            c4[i5 >> 2] = -1;
            if (c4[b4 + 328 >> 2] | 0 ? (m3 = b4 + 332 | 0, n6 = b4 + 336 | 0, (c4[m3 >> 2] | 0) > (c4[n6 >> 2] | 0)) : 0) {
              j3 = e6 + 16 | 0;
              i5 = c4[j3 >> 2] | 0;
              while (1) {
                i5 = i5 + 1 | 0;
                if ((i5 | 0) >= (g3 | 0))
                  break;
                q2 = t5 + i5 | 0;
                a3[q2 >> 0] = (a3[q2 >> 0] | 0) + -2 << 24 >> 24 & -2;
              }
              c4[n6 >> 2] = c4[m3 >> 2];
              c4[j3 >> 2] = -1;
              if (f4 << 24 >> 24 != 5) {
                i5 = g3;
                break a;
              }
              la(b4, g3, 1);
              c4[n6 >> 2] = c4[m3 >> 2];
              i5 = g3;
              break a;
            }
            c4[e6 + 16 >> 2] = -1;
            if (!(a3[l4 + (k3 << 3) + 7 >> 0] & 1))
              i5 = g3;
            else {
              i5 = c4[e6 + 8 >> 2] | 0;
              i5 = (i5 | 0) > 0 ? i5 : g3;
            }
            if (f4 << 24 >> 24 == 5) {
              la(b4, g3, 1);
              c4[b4 + 336 >> 2] = c4[b4 + 332 >> 2];
            }
            break;
          }
          case 6: {
            if ((c4[b4 + 328 >> 2] | 0) > 0)
              c4[b4 + 332 >> 2] = c4[b4 + 336 >> 2];
            c4[e6 + 8 >> 2] = -1;
            c4[e6 + 12 >> 2] = -1;
            c4[e6 + 16 >> 2] = h4 + -1;
            i5 = g3;
            break;
          }
          case 7: {
            if ((f4 << 24 >> 24 == 3 ? (a3[(c4[b4 + 72 >> 2] | 0) + g3 >> 0] | 0) == 5 : 0) ? (c4[b4 + 84 >> 2] | 0) != 6 : 0) {
              i5 = e6 + 12 | 0;
              j3 = c4[i5 >> 2] | 0;
              if ((j3 | 0) == -1) {
                c4[e6 + 16 >> 2] = h4 + -1;
                i5 = g3;
                break a;
              }
              if ((j3 | 0) > -1) {
                la(b4, j3, 1);
                c4[i5 >> 2] = -2;
              }
              la(b4, g3, 1);
              i5 = g3;
              break a;
            }
            i5 = e6 + 12 | 0;
            if ((c4[i5 >> 2] | 0) == -1) {
              c4[i5 >> 2] = g3;
              i5 = g3;
            } else
              i5 = g3;
            break;
          }
          case 8: {
            c4[e6 + 16 >> 2] = h4 + -1;
            c4[e6 + 8 >> 2] = -1;
            i5 = g3;
            break;
          }
          case 9: {
            i5 = g3;
            while (1) {
              q2 = i5;
              i5 = i5 + -1 | 0;
              if ((q2 | 0) <= 0)
                break;
              if (a3[t5 + i5 >> 0] & 1) {
                j3 = 36;
                break;
              }
            }
            if ((j3 | 0) == 36) {
              la(b4, i5, 4);
              c4[b4 + 336 >> 2] = c4[b4 + 332 >> 2];
            }
            c4[e6 + 8 >> 2] = g3;
            i5 = g3;
            break;
          }
          case 10: {
            la(b4, g3, 1);
            la(b4, g3, 2);
            i5 = g3;
            break;
          }
          case 11: {
            i5 = b4 + 336 | 0;
            j3 = b4 + 332 | 0;
            c4[j3 >> 2] = c4[i5 >> 2];
            if (f4 << 24 >> 24 == 5) {
              la(b4, g3, 4);
              c4[i5 >> 2] = c4[j3 >> 2];
              i5 = g3;
            } else
              i5 = g3;
            break;
          }
          case 12: {
            l4 = (d3[e6 + 28 >> 0] | 0) + (r6 & 255) | 0;
            j3 = l4 & 255;
            k3 = e6 + 8 | 0;
            l4 = l4 & 255;
            i5 = c4[k3 >> 2] | 0;
            while (1) {
              if ((i5 | 0) >= (g3 | 0))
                break;
              m3 = t5 + i5 | 0;
              if (l4 >>> 0 > (d3[m3 >> 0] | 0) >>> 0)
                a3[m3 >> 0] = j3;
              i5 = i5 + 1 | 0;
            }
            c4[b4 + 336 >> 2] = c4[b4 + 332 >> 2];
            c4[k3 >> 2] = g3;
            i5 = g3;
            break;
          }
          case 13: {
            n6 = a3[e6 + 28 >> 0] | 0;
            f4 = e6 + 8 | 0;
            q2 = n6 & 255;
            o5 = q2 + 3 | 0;
            p4 = q2 + 2 | 0;
            q2 = q2 + 1 & 255;
            i5 = g3;
            while (1) {
              k3 = i5 + -1 | 0;
              if ((i5 | 0) <= (c4[f4 >> 2] | 0)) {
                i5 = g3;
                break a;
              }
              j3 = t5 + k3 | 0;
              l4 = a3[j3 >> 0] | 0;
              m3 = l4 & 255;
              if ((o5 | 0) == (m3 | 0)) {
                i5 = k3;
                j3 = l4;
                while (1) {
                  if ((o5 | 0) != (j3 & 255 | 0))
                    break;
                  j3 = i5 + -1 | 0;
                  a3[t5 + i5 >> 0] = q2;
                  i5 = j3;
                  j3 = a3[t5 + j3 >> 0] | 0;
                }
                l4 = i5;
                while (1) {
                  i5 = l4 + -1 | 0;
                  if (j3 << 24 >> 24 != n6 << 24 >> 24)
                    break;
                  l4 = i5;
                  j3 = a3[t5 + i5 >> 0] | 0;
                }
                i5 = l4;
                k3 = j3 & 255;
                j3 = t5 + l4 | 0;
              } else {
                i5 = k3;
                k3 = m3;
              }
              a3[j3 >> 0] = (p4 | 0) == (k3 | 0) ? n6 : q2;
            }
          }
          default:
            i5 = g3;
        }
      while (0);
    if (!(r6 << 24 >> 24 != 0 | (i5 | 0) < (g3 | 0)))
      return;
    j3 = (d3[e6 + 28 >> 0] | 0) + (r6 & 255) & 255;
    if ((i5 | 0) < (c4[e6 + 24 >> 2] | 0)) {
      qa(c4[b4 + 72 >> 2] | 0, c4[s5 >> 2] | 0, i5, h4, j3);
      return;
    }
    while (1) {
      if ((i5 | 0) >= (h4 | 0))
        break;
      a3[t5 + i5 >> 0] = j3;
      i5 = i5 + 1 | 0;
    }
    return;
  }
  function oa(a4) {
    a4 = a4 | 0;
    var b4 = 0, d4 = 0, f4 = 0, g3 = 0, h4 = 0, i5 = 0, j3 = 0;
    g3 = c4[a4 + 104 >> 2] | 0;
    h4 = c4[a4 + 108 >> 2] | 0;
    b4 = 0;
    a:
      while (1) {
        if ((b4 | 0) >= (h4 | 0)) {
          b4 = 4;
          d4 = 7;
          break;
        }
        f4 = b4 + 1 | 0;
        d4 = e5[g3 + (b4 << 1) >> 1] | 0;
        if ((f4 | 0) == (h4 | 0) | (d4 & 64512 | 0) != 55296)
          b4 = f4;
        else {
          j3 = e5[g3 + (f4 << 1) >> 1] | 0;
          i5 = (j3 & 64512 | 0) == 56320;
          d4 = i5 ? (d4 << 10) + -56613888 + j3 | 0 : d4;
          b4 = i5 ? b4 + 2 | 0 : f4;
        }
        switch (((pa(a4, d4) | 0) & 255) << 24 >> 24) {
          case 0: {
            b4 = 0;
            d4 = 7;
            break a;
          }
          case 13:
          case 1: {
            d4 = 8;
            break a;
          }
          case 5: {
            d4 = 6;
            break a;
          }
          case 2: {
            b4 = 2;
            d4 = 9;
            break a;
          }
          default: {
          }
        }
      }
    if ((d4 | 0) == 6) {
      j3 = 3;
      return j3 | 0;
    } else if ((d4 | 0) == 7) {
      j3 = b4;
      return j3 | 0;
    } else if ((d4 | 0) == 8) {
      j3 = 1;
      return j3 | 0;
    } else if ((d4 | 0) == 9)
      return b4 | 0;
    return 0;
  }
  function pa(a4, b4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    var d4 = 0, e6 = 0;
    e6 = c4[a4 + 352 >> 2] | 0;
    if (!((e6 | 0) != 0 ? (d4 = I2[e6 & 0](c4[a4 + 356 >> 2] | 0, b4) | 0, (d4 | 0) != 23) : 0))
      d4 = tb(b4) | 0;
    return ((d4 | 0) > 22 ? 10 : d4) | 0;
  }
  function qa(b4, c5, d4, e6, f4) {
    b4 = b4 | 0;
    c5 = c5 | 0;
    d4 = d4 | 0;
    e6 = e6 | 0;
    f4 = f4 | 0;
    var g3 = 0, h4 = 0;
    g3 = 0;
    while (1) {
      if ((d4 | 0) >= (e6 | 0))
        break;
      h4 = a3[b4 + d4 >> 0] | 0;
      g3 = g3 + ((h4 << 24 >> 24 == 22) << 31 >> 31) | 0;
      if (!g3)
        a3[c5 + d4 >> 0] = f4;
      d4 = d4 + 1 | 0;
      g3 = g3 + ((h4 & -2) << 24 >> 24 == 20 & 1) | 0;
    }
    return;
  }
  function ra(a4) {
    a4 = a4 | 0;
    if ((a4 & 2154498 | 0) == 0 ? (a4 & 32 | 0) == 0 | (a4 & 8249304 | 0) == 0 : 0) {
      a4 = 0;
      return a4 | 0;
    }
    a4 = (a4 & 26220581 | 0) == 0 ? 1 : 2;
    return a4 | 0;
  }
  function sa(d4, e6) {
    d4 = d4 | 0;
    e6 = e6 | 0;
    var f4 = 0, g3 = 0, h4 = 0;
    c4[e6 >> 2] = d4;
    c4[e6 + 492 >> 2] = 0;
    b3[e6 + 500 >> 1] = 0;
    b3[e6 + 502 >> 1] = 0;
    h4 = d4 + 94 | 0;
    if ((a3[h4 >> 0] | 0) != 0 ? (f4 = c4[d4 + 136 >> 2] | 0, (c4[f4 >> 2] | 0) <= 0) : 0)
      f4 = da(c4[d4 + 132 >> 2] | 0, f4, 0) | 0;
    else
      f4 = a3[d4 + 93 >> 0] | 0;
    a3[e6 + 504 >> 0] = f4;
    if ((a3[h4 >> 0] | 0) != 0 ? (g3 = c4[d4 + 136 >> 2] | 0, (c4[g3 >> 2] | 0) <= 0) : 0)
      f4 = da(c4[d4 + 132 >> 2] | 0, g3, 0) | 0;
    else
      f4 = a3[d4 + 93 >> 0] | 0;
    f4 = f4 & 1;
    a3[e6 + 506 >> 0] = f4;
    a3[e6 + 505 >> 0] = f4;
    c4[e6 + 508 >> 2] = f4 & 255;
    c4[e6 + 496 >> 2] = 0;
    f4 = c4[d4 + 52 >> 2] | 0;
    if (!f4) {
      c4[e6 + 484 >> 2] = e6 + 4;
      g3 = 20;
      h4 = e6 + 488 | 0;
      c4[h4 >> 2] = g3;
      d4 = d4 + 84 | 0;
      d4 = c4[d4 >> 2] | 0;
      h4 = (d4 | 0) == 1;
      d4 = (d4 | 0) == 6;
      d4 = h4 | d4;
      d4 = d4 & 1;
      e6 = e6 + 2528 | 0;
      a3[e6 >> 0] = d4;
      return;
    } else {
      c4[e6 + 484 >> 2] = f4;
      g3 = ((c4[d4 + 28 >> 2] | 0) >>> 0) / 24 | 0;
      h4 = e6 + 488 | 0;
      c4[h4 >> 2] = g3;
      d4 = d4 + 84 | 0;
      d4 = c4[d4 >> 2] | 0;
      h4 = (d4 | 0) == 1;
      d4 = (d4 | 0) == 6;
      d4 = h4 | d4;
      d4 = d4 & 1;
      e6 = e6 + 2528 | 0;
      a3[e6 >> 0] = d4;
      return;
    }
  }
  function ta(d4, e6) {
    d4 = d4 | 0;
    e6 = e6 | 0;
    c4[d4 + 492 >> 2] = 0;
    b3[d4 + 502 >> 1] = 0;
    a3[d4 + 504 >> 0] = e6;
    e6 = e6 & 1;
    a3[d4 + 506 >> 0] = e6;
    a3[d4 + 505 >> 0] = e6;
    c4[d4 + 508 >> 2] = e6 & 255;
    c4[d4 + 496 >> 2] = 0;
    return;
  }
  function ua(f4, g3) {
    f4 = f4 | 0;
    g3 = g3 | 0;
    var h4 = 0, i5 = 0, j3 = 0, k3 = 0, l4 = 0, m3 = 0, n6 = 0, o5 = 0, p4 = 0, q2 = 0, r6 = 0, s5 = 0, t5 = 0;
    s5 = c4[f4 + 492 >> 2] | 0;
    p4 = f4 + 496 + (s5 << 4) | 0;
    h4 = c4[f4 >> 2] | 0;
    r6 = (c4[h4 + 72 >> 2] | 0) + g3 | 0;
    m3 = a3[r6 >> 0] | 0;
    do
      if (m3 << 24 >> 24 == 10) {
        h4 = b3[(c4[h4 + 4 >> 2] | 0) + (g3 << 1) >> 1] | 0;
        l4 = f4 + 496 + (s5 << 4) + 4 | 0;
        i5 = e5[l4 >> 1] | 0;
        o5 = f4 + 484 | 0;
        j3 = h4 & 65535;
        n6 = e5[f4 + 496 + (s5 << 4) + 6 >> 1] | 0;
        while (1) {
          t5 = n6;
          n6 = n6 + -1 | 0;
          if ((t5 | 0) <= (i5 | 0))
            break;
          if ((c4[(c4[o5 >> 2] | 0) + (n6 * 24 | 0) + 4 >> 2] | 0) == (j3 | 0)) {
            q2 = 5;
            break;
          }
        }
        if ((q2 | 0) == 5) {
          h4 = ya(f4, n6, g3) | 0;
          if (h4 << 24 >> 24 == 10)
            break;
          a3[f4 + 496 + (s5 << 4) + 10 >> 0] = 10;
          c4[f4 + 496 + (s5 << 4) + 12 >> 2] = h4 & 255;
          c4[p4 >> 2] = g3;
          h4 = c4[(c4[f4 >> 2] | 0) + 76 >> 2] | 0;
          i5 = d3[h4 + g3 >> 0] | 0;
          if (i5 & 128) {
            i5 = i5 & 1;
            a3[f4 + 496 + (s5 << 4) + 9 >> 0] = i5;
            i5 = 1 << i5;
            h4 = e5[l4 >> 1] | 0;
            while (1) {
              if ((h4 | 0) >= (n6 | 0))
                break;
              t5 = (c4[o5 >> 2] | 0) + (h4 * 24 | 0) + 12 | 0;
              b3[t5 >> 1] = i5 | e5[t5 >> 1];
              h4 = h4 + 1 | 0;
            }
            h4 = (c4[(c4[f4 >> 2] | 0) + 76 >> 2] | 0) + g3 | 0;
            a3[h4 >> 0] = a3[h4 >> 0] & 127;
            h4 = c4[(c4[f4 >> 2] | 0) + 76 >> 2] | 0;
          }
          t5 = h4 + (c4[(c4[o5 >> 2] | 0) + (n6 * 24 | 0) >> 2] | 0) | 0;
          a3[t5 >> 0] = a3[t5 >> 0] & 127;
          t5 = 1;
          return t5 | 0;
        }
        if ((h4 << 16 >> 16 ? (k3 = (zb(j3) | 0) & 65535, h4 << 16 >> 16 != k3 << 16 >> 16) : 0) ? (wb(j3) | 0) == 1 : 0) {
          a:
            do
              if (k3 << 16 >> 16 < 12297) {
                switch (k3 << 16 >> 16) {
                  case 9002:
                    break;
                  default:
                    break a;
                }
                if (!((za(f4, 12297, g3) | 0) << 24 >> 24)) {
                  t5 = 0;
                  return t5 | 0;
                }
              } else {
                switch (k3 << 16 >> 16) {
                  case 12297:
                    break;
                  default:
                    break a;
                }
                if (!((za(f4, 9002, g3) | 0) << 24 >> 24)) {
                  t5 = 0;
                  return t5 | 0;
                }
              }
            while (0);
          if (!((za(f4, k3, g3) | 0) << 24 >> 24)) {
            t5 = 0;
            return t5 | 0;
          }
        }
      }
    while (0);
    h4 = d3[(c4[(c4[f4 >> 2] | 0) + 76 >> 2] | 0) + g3 >> 0] | 0;
    b:
      do
        if (!(h4 & 128))
          switch (m3 << 24 >> 24) {
            case 0:
            case 1:
            case 13: {
              h4 = m3 << 24 >> 24 != 0;
              a3[f4 + 496 + (s5 << 4) + 10 >> 0] = m3;
              a3[f4 + 496 + (s5 << 4) + 9 >> 0] = m3;
              c4[f4 + 496 + (s5 << 4) + 12 >> 2] = h4 & 1;
              c4[p4 >> 2] = g3;
              h4 = h4 & 1;
              q2 = 35;
              break b;
            }
            case 2: {
              a3[f4 + 496 + (s5 << 4) + 10 >> 0] = 2;
              switch (a3[f4 + 496 + (s5 << 4) + 9 >> 0] | 0) {
                case 0: {
                  if (!(a3[f4 + 2528 >> 0] | 0))
                    a3[r6 >> 0] = 23;
                  c4[f4 + 496 + (s5 << 4) + 12 >> 2] = 0;
                  c4[p4 >> 2] = g3;
                  h4 = 0;
                  break b;
                }
                case 13: {
                  h4 = 5;
                  break;
                }
                default:
                  h4 = 24;
              }
              a3[r6 >> 0] = h4;
              c4[f4 + 496 + (s5 << 4) + 12 >> 2] = 1;
              c4[p4 >> 2] = g3;
              h4 = 1;
              break b;
            }
            case 5: {
              a3[f4 + 496 + (s5 << 4) + 10 >> 0] = 5;
              c4[f4 + 496 + (s5 << 4) + 12 >> 2] = 1;
              c4[p4 >> 2] = g3;
              h4 = 1;
              break b;
            }
            case 17: {
              h4 = a3[f4 + 496 + (s5 << 4) + 10 >> 0] | 0;
              if (h4 << 24 >> 24 != 10) {
                q2 = 35;
                break b;
              }
              a3[r6 >> 0] = 10;
              t5 = 1;
              return t5 | 0;
            }
            default: {
              a3[f4 + 496 + (s5 << 4) + 10 >> 0] = m3;
              h4 = m3;
              q2 = 35;
              break b;
            }
          }
        else {
          i5 = h4 & 1;
          h4 = i5 & 255;
          if ((m3 + -8 & 255) >= 3)
            a3[r6 >> 0] = h4;
          a3[f4 + 496 + (s5 << 4) + 10 >> 0] = h4;
          a3[f4 + 496 + (s5 << 4) + 9 >> 0] = h4;
          c4[f4 + 496 + (s5 << 4) + 12 >> 2] = i5;
          c4[p4 >> 2] = g3;
          q2 = 35;
        }
      while (0);
    c:
      do
        if ((q2 | 0) == 35) {
          switch (h4 << 24 >> 24) {
            case 0:
            case 1:
            case 13:
              break c;
            default:
              h4 = 1;
          }
          return h4 | 0;
        }
      while (0);
    j3 = 1 << (h4 << 24 >> 24 != 0 & 1);
    k3 = f4 + 496 + (s5 << 4) + 6 | 0;
    l4 = f4 + 484 | 0;
    h4 = e5[f4 + 496 + (s5 << 4) + 4 >> 1] | 0;
    while (1) {
      if (h4 >>> 0 >= (e5[k3 >> 1] | 0) >>> 0) {
        h4 = 1;
        break;
      }
      i5 = c4[l4 >> 2] | 0;
      if ((c4[i5 + (h4 * 24 | 0) >> 2] | 0) < (g3 | 0)) {
        t5 = i5 + (h4 * 24 | 0) + 12 | 0;
        b3[t5 >> 1] = j3 | e5[t5 >> 1];
      }
      h4 = h4 + 1 | 0;
    }
    return h4 | 0;
  }
  function va(e6, f4, g3, h4) {
    e6 = e6 | 0;
    f4 = f4 | 0;
    g3 = g3 | 0;
    h4 = h4 | 0;
    var i5 = 0;
    i5 = c4[e6 + 492 >> 2] | 0;
    if (1 << (d3[(c4[(c4[e6 >> 2] | 0) + 72 >> 2] | 0) + f4 >> 0] | 0) & 7864320 | 0)
      return;
    b3[e6 + 496 + (i5 << 4) + 6 >> 1] = b3[e6 + 496 + (i5 << 4) + 4 >> 1] | 0;
    a3[e6 + 496 + (i5 << 4) + 8 >> 0] = h4;
    h4 = ((h4 & 127) > (g3 & 127) ? h4 : g3) & 1;
    a3[e6 + 496 + (i5 << 4) + 10 >> 0] = h4;
    a3[e6 + 496 + (i5 << 4) + 9 >> 0] = h4;
    c4[e6 + 496 + (i5 << 4) + 12 >> 2] = h4 & 255;
    c4[e6 + 496 + (i5 << 4) >> 2] = f4;
    return;
  }
  function wa(d4, e6) {
    d4 = d4 | 0;
    e6 = e6 | 0;
    var f4 = 0, g3 = 0, h4 = 0;
    g3 = d4 + 492 | 0;
    h4 = c4[g3 >> 2] | 0;
    f4 = d4 + 496 + (h4 << 4) | 0;
    a3[d4 + 496 + (h4 << 4) + 10 >> 0] = 10;
    d4 = b3[d4 + 496 + (h4 << 4) + 6 >> 1] | 0;
    c4[g3 >> 2] = h4 + 1;
    b3[f4 + 22 >> 1] = d4;
    b3[f4 + 20 >> 1] = d4;
    a3[f4 + 24 >> 0] = e6;
    e6 = e6 & 1;
    a3[f4 + 26 >> 0] = e6;
    a3[f4 + 25 >> 0] = e6;
    c4[f4 + 28 >> 2] = e6 & 255;
    c4[f4 + 16 >> 2] = 0;
    return;
  }
  function xa(b4) {
    b4 = b4 | 0;
    var d4 = 0, e6 = 0;
    e6 = b4 + 492 | 0;
    d4 = (c4[e6 >> 2] | 0) + -1 | 0;
    c4[e6 >> 2] = d4;
    a3[b4 + 496 + (d4 << 4) + 10 >> 0] = 10;
    return;
  }
  function ya(d4, f4, g3) {
    d4 = d4 | 0;
    f4 = f4 | 0;
    g3 = g3 | 0;
    var h4 = 0, i5 = 0, j3 = 0, k3 = 0, l4 = 0, m3 = 0, n6 = 0, o5 = 0, p4 = 0, q2 = 0;
    o5 = c4[d4 + 492 >> 2] | 0;
    q2 = d4 + 484 | 0;
    m3 = c4[q2 >> 2] | 0;
    j3 = a3[d4 + 496 + (o5 << 4) + 8 >> 0] & 1;
    h4 = j3 & 255;
    i5 = b3[m3 + (f4 * 24 | 0) + 12 >> 1] | 0;
    if (!(j3 << 24 >> 24))
      if (!(i5 & 1))
        l4 = 4;
      else {
        p4 = 0;
        k3 = 0;
      }
    else if (!(i5 & 2))
      l4 = 4;
    else {
      p4 = 1;
      k3 = 0;
    }
    do
      if ((l4 | 0) == 4) {
        if (i5 & 3) {
          p4 = c4[m3 + (f4 * 24 | 0) + 16 >> 2] | 0;
          p4 = (p4 | 0) == (h4 | 0) ? j3 : p4 & 255;
          k3 = (e5[d4 + 496 + (o5 << 4) + 4 >> 1] | 0 | 0) != (f4 | 0);
          break;
        }
        b3[d4 + 496 + (o5 << 4) + 6 >> 1] = f4;
        q2 = 10;
        return q2 | 0;
      }
    while (0);
    n6 = m3 + (f4 * 24 | 0) | 0;
    a3[(c4[(c4[d4 >> 2] | 0) + 72 >> 2] | 0) + (c4[n6 >> 2] | 0) >> 0] = p4;
    a3[(c4[(c4[d4 >> 2] | 0) + 72 >> 2] | 0) + g3 >> 0] = p4;
    Aa(d4, f4, c4[n6 >> 2] | 0, p4);
    if (!k3) {
      i5 = d4 + 496 + (o5 << 4) + 6 | 0;
      h4 = b3[d4 + 496 + (o5 << 4) + 4 >> 1] | 0;
      j3 = f4 & 65535;
      while (1) {
        b3[i5 >> 1] = j3;
        if ((j3 & 65535) <= (h4 & 65535)) {
          h4 = p4;
          l4 = 21;
          break;
        }
        if ((c4[(c4[q2 >> 2] | 0) + (((j3 & 65535) + -1 | 0) * 24 | 0) >> 2] | 0) == (c4[n6 >> 2] | 0))
          j3 = j3 + -1 << 16 >> 16;
        else {
          h4 = p4;
          l4 = 21;
          break;
        }
      }
      if ((l4 | 0) == 21)
        return h4 | 0;
    }
    c4[m3 + (f4 * 24 | 0) + 4 >> 2] = 0 - g3;
    j3 = d4 + 496 + (o5 << 4) + 4 | 0;
    h4 = f4;
    while (1) {
      i5 = h4 + -1 | 0;
      if ((h4 | 0) <= (e5[j3 >> 1] | 0 | 0))
        break;
      h4 = c4[q2 >> 2] | 0;
      if ((c4[h4 + (i5 * 24 | 0) >> 2] | 0) != (c4[n6 >> 2] | 0))
        break;
      c4[h4 + (i5 * 24 | 0) + 4 >> 2] = 0;
      h4 = i5;
    }
    i5 = d4 + 496 + (o5 << 4) + 6 | 0;
    while (1) {
      f4 = f4 + 1 | 0;
      if ((f4 | 0) >= (e5[i5 >> 1] | 0 | 0)) {
        h4 = p4;
        l4 = 21;
        break;
      }
      h4 = c4[q2 >> 2] | 0;
      if ((c4[h4 + (f4 * 24 | 0) >> 2] | 0) >= (g3 | 0)) {
        h4 = p4;
        l4 = 21;
        break;
      }
      h4 = h4 + (f4 * 24 | 0) + 4 | 0;
      if ((c4[h4 >> 2] | 0) > 0)
        c4[h4 >> 2] = 0;
    }
    if ((l4 | 0) == 21)
      return h4 | 0;
    return 0;
  }
  function za(a4, d4, f4) {
    a4 = a4 | 0;
    d4 = d4 | 0;
    f4 = f4 | 0;
    var g3 = 0, h4 = 0, i5 = 0, j3 = 0, k3 = 0, l4 = 0, m3 = 0;
    l4 = c4[a4 + 492 >> 2] | 0;
    m3 = a4 + 496 + (l4 << 4) + 6 | 0;
    g3 = e5[m3 >> 1] | 0;
    k3 = a4 + 488 | 0;
    if ((c4[k3 >> 2] | 0) > (g3 | 0))
      h4 = c4[a4 + 484 >> 2] | 0;
    else {
      j3 = c4[a4 >> 2] | 0;
      i5 = j3 + 52 | 0;
      j3 = j3 + 28 | 0;
      if (!((aa(i5, j3, 1, g3 * 48 | 0) | 0) << 24 >> 24)) {
        m3 = 0;
        return m3 | 0;
      }
      g3 = a4 + 484 | 0;
      h4 = c4[g3 >> 2] | 0;
      if ((h4 | 0) == (a4 + 4 | 0))
        ec(c4[i5 >> 2] | 0, h4 | 0, 480) | 0;
      h4 = c4[i5 >> 2] | 0;
      c4[g3 >> 2] = h4;
      c4[k3 >> 2] = ((c4[j3 >> 2] | 0) >>> 0) / 24 | 0;
      g3 = e5[m3 >> 1] | 0;
    }
    c4[h4 + (g3 * 24 | 0) >> 2] = f4;
    c4[h4 + (g3 * 24 | 0) + 4 >> 2] = d4 & 65535;
    c4[h4 + (g3 * 24 | 0) + 16 >> 2] = c4[a4 + 496 + (l4 << 4) + 12 >> 2];
    c4[h4 + (g3 * 24 | 0) + 8 >> 2] = c4[a4 + 496 + (l4 << 4) >> 2];
    b3[h4 + (g3 * 24 | 0) + 12 >> 1] = 0;
    b3[m3 >> 1] = (b3[m3 >> 1] | 0) + 1 << 16 >> 16;
    m3 = 1;
    return m3 | 0;
  }
  function Aa(b4, d4, f4, g3) {
    b4 = b4 | 0;
    d4 = d4 | 0;
    f4 = f4 | 0;
    g3 = g3 | 0;
    var h4 = 0, i5 = 0, j3 = 0, k3 = 0, l4 = 0, m3 = 0, n6 = 0;
    m3 = c4[(c4[b4 >> 2] | 0) + 72 >> 2] | 0;
    h4 = d4 + 1 | 0;
    i5 = g3 & 255;
    j3 = b4 + 496 + (c4[b4 + 492 >> 2] << 4) + 6 | 0;
    d4 = (c4[b4 + 484 >> 2] | 0) + (h4 * 24 | 0) | 0;
    while (1) {
      if ((h4 | 0) >= (e5[j3 >> 1] | 0 | 0)) {
        d4 = 9;
        break;
      }
      k3 = d4 + 4 | 0;
      if ((c4[k3 >> 2] | 0) <= -1) {
        if ((c4[d4 + 8 >> 2] | 0) > (f4 | 0)) {
          d4 = 9;
          break;
        }
        l4 = c4[d4 >> 2] | 0;
        if ((l4 | 0) > (f4 | 0)) {
          if ((c4[d4 + 16 >> 2] | 0) == (i5 | 0)) {
            d4 = 9;
            break;
          }
          a3[m3 + l4 >> 0] = g3;
          n6 = 0 - (c4[k3 >> 2] | 0) | 0;
          a3[m3 + n6 >> 0] = g3;
          c4[k3 >> 2] = 0;
          Aa(b4, h4, l4, g3);
          Aa(b4, h4, n6, g3);
        }
      }
      d4 = d4 + 24 | 0;
      h4 = h4 + 1 | 0;
    }
    if ((d4 | 0) == 9)
      return;
  }
  function Ba(a4) {
    a4 = a4 | 0;
    var b4 = 0, d4 = 0, f4 = 0, g3 = 0, h4 = 0, i5 = 0, j3 = 0, k3 = 0;
    h4 = c4[a4 + 96 >> 2] | 0;
    i5 = c4[a4 + 100 >> 2] | 0;
    g3 = 0;
    b4 = 10;
    while (1) {
      if ((g3 | 0) >= (i5 | 0))
        break;
      f4 = g3 + 1 | 0;
      d4 = e5[h4 + (g3 << 1) >> 1] | 0;
      if ((f4 | 0) == (i5 | 0) | (d4 & 64512 | 0) != 55296)
        g3 = f4;
      else {
        k3 = e5[h4 + (f4 << 1) >> 1] | 0;
        j3 = (k3 & 64512 | 0) == 56320;
        d4 = j3 ? (d4 << 10) + -56613888 + k3 | 0 : d4;
        g3 = j3 ? g3 + 2 | 0 : f4;
      }
      d4 = pa(a4, d4) | 0;
      f4 = d4 & 255;
      a:
        do
          if (b4 << 24 >> 24 == 10) {
            switch (f4 << 24 >> 24) {
              case 13:
              case 1:
              case 0:
                break;
              default: {
                b4 = 10;
                break a;
              }
            }
            b4 = f4;
          } else
            b4 = (d4 & 255 | 0) == 7 ? 10 : b4;
        while (0);
    }
    return b4 | 0;
  }
  function Ca(a4) {
    a4 = a4 | 0;
    var b4 = 0, d4 = 0, e6 = 0;
    d4 = c4[a4 + 132 >> 2] | 0;
    e6 = a4 + 136 | 0;
    b4 = c4[e6 >> 2] | 0;
    if ((b4 | 0) != (a4 + 140 | 0)) {
      b4 = a4 + 56 | 0;
      if (!((aa(b4, a4 + 32 | 0, 1, d4 << 4) | 0) << 24 >> 24)) {
        e6 = 0;
        return e6 | 0;
      }
      c4[e6 >> 2] = c4[b4 >> 2];
      e6 = 1;
      return e6 | 0;
    }
    if ((d4 | 0) < 11) {
      e6 = 1;
      return e6 | 0;
    }
    d4 = a4 + 56 | 0;
    if (!((aa(d4, a4 + 32 | 0, 1, 160) | 0) << 24 >> 24)) {
      e6 = 0;
      return e6 | 0;
    }
    a4 = c4[d4 >> 2] | 0;
    c4[e6 >> 2] = a4;
    d4 = a4 + 80 | 0;
    do {
      c4[a4 >> 2] = c4[b4 >> 2];
      a4 = a4 + 4 | 0;
      b4 = b4 + 4 | 0;
    } while ((a4 | 0) < (d4 | 0));
    e6 = 1;
    return e6 | 0;
  }
  function Da(a4) {
    a4 = a4 | 0;
    var b4 = 0;
    do
      if (!a4)
        a4 = 0;
      else {
        b4 = c4[a4 >> 2] | 0;
        if ((b4 | 0) != (a4 | 0)) {
          if (!b4) {
            a4 = 0;
            break;
          }
          if ((c4[b4 >> 2] | 0) != (b4 | 0)) {
            a4 = 0;
            break;
          }
        }
        a4 = c4[a4 + 12 >> 2] | 0;
      }
    while (0);
    return a4 | 0;
  }
  function Ea(a4) {
    a4 = a4 | 0;
    var b4 = 0;
    do
      if (!a4)
        a4 = 0;
      else {
        b4 = c4[a4 >> 2] | 0;
        if ((b4 | 0) != (a4 | 0)) {
          if (!b4) {
            a4 = 0;
            break;
          }
          if ((c4[b4 >> 2] | 0) != (b4 | 0)) {
            a4 = 0;
            break;
          }
        }
        a4 = c4[a4 + 132 >> 2] | 0;
      }
    while (0);
    return a4 | 0;
  }
  function Fa(a4, b4, d4, e6) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    d4 = d4 | 0;
    e6 = e6 | 0;
    var f4 = 0;
    if (!e6)
      return;
    if (($2(c4[e6 >> 2] | 0) | 0) << 24 >> 24)
      return;
    do
      if (a4 | 0) {
        f4 = c4[a4 >> 2] | 0;
        if ((f4 | 0) != (a4 | 0)) {
          if (!f4)
            break;
          if ((c4[f4 >> 2] | 0) != (f4 | 0))
            break;
        }
        if ((b4 | 0) >= 0 ? (c4[a4 + 132 >> 2] | 0) > (b4 | 0) : 0) {
          if (!d4)
            return;
          c4[d4 >> 2] = c4[(c4[f4 + 136 >> 2] | 0) + (b4 << 3) >> 2];
          return;
        }
        c4[e6 >> 2] = 1;
        return;
      }
    while (0);
    c4[e6 >> 2] = 27;
    return;
  }
  function Ga(a4, b4, d4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    d4 = d4 | 0;
    var e6 = 0, f4 = 0;
    if (!d4) {
      f4 = -1;
      return f4 | 0;
    }
    if (($2(c4[d4 >> 2] | 0) | 0) << 24 >> 24) {
      f4 = -1;
      return f4 | 0;
    }
    do
      if (a4 | 0) {
        f4 = c4[a4 >> 2] | 0;
        if ((f4 | 0) != (a4 | 0)) {
          if (!f4)
            break;
          if ((c4[f4 >> 2] | 0) != (f4 | 0))
            break;
        }
        if ((b4 | 0) >= 0 ? (c4[f4 + 12 >> 2] | 0) > (b4 | 0) : 0) {
          e6 = c4[f4 + 136 >> 2] | 0;
          a4 = 0;
          while (1)
            if ((c4[e6 + (a4 << 3) >> 2] | 0) > (b4 | 0))
              break;
            else
              a4 = a4 + 1 | 0;
          Fa(f4, a4, 0, d4);
          f4 = a4;
          return f4 | 0;
        }
        c4[d4 >> 2] = 1;
        f4 = -1;
        return f4 | 0;
      }
    while (0);
    c4[d4 >> 2] = 27;
    f4 = -1;
    return f4 | 0;
  }
  function Ha(a4, b4, d4, e6, f4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    d4 = d4 | 0;
    e6 = e6 | 0;
    f4 = f4 | 0;
    var g3 = 0;
    if (!f4) {
      f4 = 0;
      return f4 | 0;
    }
    if ((Ia(c4[f4 >> 2] | 0) | 0) << 24 >> 24) {
      f4 = 0;
      return f4 | 0;
    }
    if (!((a4 | 0) == 0 | (b4 | 0) < -1 | (e6 | 0) < 0) ? (g3 = (d4 | 0) == 0, !(g3 & (e6 | 0) > 0)) : 0) {
      do
        if (!g3) {
          if (!(a4 >>> 0 >= d4 >>> 0 & (d4 + (e6 << 1) | 0) >>> 0 > a4 >>> 0) ? !(d4 >>> 0 >= a4 >>> 0 & (a4 + (b4 << 1) | 0) >>> 0 > d4 >>> 0) : 0)
            break;
          c4[f4 >> 2] = 1;
          f4 = 0;
          return f4 | 0;
        }
      while (0);
      if ((b4 | 0) == -1)
        b4 = ob(a4) | 0;
      if ((b4 | 0) > 0)
        b4 = Ja(a4, b4, d4, e6, 10, f4) | 0;
      else
        b4 = 0;
      f4 = qb(d4, e6, b4, f4) | 0;
      return f4 | 0;
    }
    c4[f4 >> 2] = 1;
    f4 = 0;
    return f4 | 0;
  }
  function Ia(a4) {
    a4 = a4 | 0;
    return (a4 | 0) > 0 | 0;
  }
  function Ja(a4, d4, f4, g3, h4, i5) {
    a4 = a4 | 0;
    d4 = d4 | 0;
    f4 = f4 | 0;
    g3 = g3 | 0;
    h4 = h4 | 0;
    i5 = i5 | 0;
    var j3 = 0, k3 = 0, l4 = 0, m3 = 0, n6 = 0, o5 = 0, p4 = 0;
    l4 = h4 & 65535;
    switch (l4 & 11) {
      case 0: {
        if ((g3 | 0) < (d4 | 0)) {
          c4[i5 >> 2] = 15;
          o5 = d4;
          return o5 | 0;
        }
        k3 = d4;
        h4 = f4;
        while (1) {
          j3 = k3 + -1 | 0;
          f4 = k3 + -2 | 0;
          if ((k3 | 0) > 1 ? (b3[a4 + (j3 << 1) >> 1] & -1024) << 16 >> 16 == -9216 : 0)
            j3 = (b3[a4 + (f4 << 1) >> 1] & -1024) << 16 >> 16 == -10240 ? f4 : j3;
          f4 = j3;
          do {
            n6 = f4;
            f4 = f4 + 1 | 0;
            o5 = h4;
            h4 = h4 + 2 | 0;
            b3[o5 >> 1] = b3[a4 + (n6 << 1) >> 1] | 0;
          } while ((f4 | 0) < (k3 | 0));
          if ((j3 | 0) > 0)
            k3 = j3;
          else {
            h4 = d4;
            break;
          }
        }
        return h4 | 0;
      }
      case 1: {
        if ((g3 | 0) < (d4 | 0)) {
          c4[i5 >> 2] = 15;
          o5 = d4;
          return o5 | 0;
        }
        i5 = d4;
        g3 = f4;
        while (1) {
          f4 = i5;
          while (1) {
            j3 = f4 + -1 | 0;
            h4 = e5[a4 + (j3 << 1) >> 1] | 0;
            if ((f4 | 0) > 1 & (h4 & 64512 | 0) == 56320) {
              f4 = f4 + -2 | 0;
              n6 = e5[a4 + (f4 << 1) >> 1] | 0;
              o5 = (n6 & 64512 | 0) == 55296;
              h4 = o5 ? h4 + -56613888 + (n6 << 10) | 0 : h4;
              f4 = o5 ? f4 : j3;
            } else
              f4 = j3;
            if ((f4 | 0) <= 0) {
              k3 = 0;
              break;
            }
            if (!(1 << ((sb(h4) | 0) << 24 >> 24) & 448)) {
              k3 = 1;
              break;
            }
          }
          j3 = f4;
          h4 = g3;
          do {
            n6 = j3;
            j3 = j3 + 1 | 0;
            o5 = h4;
            h4 = h4 + 2 | 0;
            b3[o5 >> 1] = b3[a4 + (n6 << 1) >> 1] | 0;
          } while ((j3 | 0) < (i5 | 0));
          if (k3) {
            i5 = f4;
            g3 = h4;
          } else {
            h4 = d4;
            break;
          }
        }
        return h4 | 0;
      }
      default: {
        n6 = (l4 & 8 | 0) != 0;
        if (n6) {
          j3 = a4;
          k3 = d4;
          h4 = 0;
          while (1) {
            m3 = j3;
            j3 = j3 + 2 | 0;
            m3 = e5[m3 >> 1] | 0;
            h4 = h4 + ((((m3 + -8294 | 0) >>> 0 < 4 | ((m3 & 65532 | 0) == 8204 | (m3 + -8234 | 0) >>> 0 < 5)) ^ 1) & 1) | 0;
            if ((k3 | 0) <= 1)
              break;
            else
              k3 = k3 + -1 | 0;
          }
          a4 = j3 + (0 - d4 << 1) | 0;
        } else
          h4 = d4;
        if ((h4 | 0) > (g3 | 0)) {
          c4[i5 >> 2] = 15;
          o5 = h4;
          return o5 | 0;
        }
        m3 = (l4 & 1 | 0) == 0;
        l4 = (l4 & 2 | 0) == 0;
        i5 = d4;
        while (1) {
          k3 = i5 + -1 | 0;
          j3 = e5[a4 + (k3 << 1) >> 1] | 0;
          if ((i5 | 0) > 1 & (j3 & 64512 | 0) == 56320) {
            d4 = i5 + -2 | 0;
            p4 = e5[a4 + (d4 << 1) >> 1] | 0;
            g3 = (p4 & 64512 | 0) == 55296;
            j3 = g3 ? j3 + -56613888 + (p4 << 10) | 0 : j3;
            k3 = g3 ? d4 : k3;
          }
          a:
            do
              if (!m3)
                while (1) {
                  if ((k3 | 0) <= 0)
                    break a;
                  if (!(1 << ((sb(j3) | 0) << 24 >> 24) & 448))
                    break a;
                  g3 = k3 + -1 | 0;
                  j3 = e5[a4 + (g3 << 1) >> 1] | 0;
                  if ((k3 | 0) > 1 & (j3 & 64512 | 0) == 56320) {
                    k3 = k3 + -2 | 0;
                    d4 = e5[a4 + (k3 << 1) >> 1] | 0;
                    p4 = (d4 & 64512 | 0) == 55296;
                    j3 = p4 ? j3 + -56613888 + (d4 << 10) | 0 : j3;
                    k3 = p4 ? k3 : g3;
                  } else
                    k3 = g3;
                }
            while (0);
          if (n6) {
            if ((j3 & -4 | 0) != 8204)
              switch (j3 | 0) {
                case 8234:
                case 8235:
                case 8236:
                case 8237:
                case 8238:
                case 8294:
                case 8295:
                case 8296:
                case 8297:
                  break;
                default:
                  o5 = 40;
              }
          } else
            o5 = 40;
          b:
            do
              if ((o5 | 0) == 40) {
                o5 = 0;
                if (l4)
                  g3 = k3;
                else {
                  j3 = yb(j3) | 0;
                  if (j3 >>> 0 < 65536) {
                    b3[f4 >> 1] = j3;
                    j3 = 1;
                  } else {
                    b3[f4 >> 1] = (j3 >>> 10) + 55232;
                    b3[f4 + 2 >> 1] = j3 & 1023 | 56320;
                    j3 = 2;
                  }
                  g3 = j3 + k3 | 0;
                  f4 = f4 + (j3 << 1) | 0;
                }
                j3 = g3;
                while (1) {
                  if ((j3 | 0) >= (i5 | 0))
                    break b;
                  b3[f4 >> 1] = b3[a4 + (j3 << 1) >> 1] | 0;
                  j3 = j3 + 1 | 0;
                  f4 = f4 + 2 | 0;
                }
              }
            while (0);
          if ((k3 | 0) > 0)
            i5 = k3;
          else
            break;
        }
        return h4 | 0;
      }
    }
    return 0;
  }
  function Ka(e6, f4, g3, h4, i5) {
    e6 = e6 | 0;
    f4 = f4 | 0;
    g3 = g3 | 0;
    h4 = h4 | 0;
    i5 = i5 | 0;
    var j3 = 0, k3 = 0, l4 = 0, m3 = 0, n6 = 0, o5 = 0, p4 = 0, q2 = 0, r6 = 0, s5 = 0, t5 = 0, u4 = 0, v3 = 0, w3 = 0, x3 = 0, y4 = 0, z2 = 0;
    y4 = E2;
    E2 = E2 + 16 | 0;
    w3 = y4 + 4 | 0;
    x3 = y4;
    if (!i5) {
      i5 = 0;
      E2 = y4;
      return i5 | 0;
    }
    if ((Ia(c4[i5 >> 2] | 0) | 0) << 24 >> 24) {
      i5 = 0;
      E2 = y4;
      return i5 | 0;
    }
    if (((e6 | 0 ? (v3 = c4[e6 + 4 >> 2] | 0, v3 | 0) : 0) ? (j3 = c4[e6 + 12 >> 2] | 0, (j3 | g3 | 0) >= 0) : 0) ? (k3 = (f4 | 0) == 0, !(k3 & (g3 | 0) > 0)) : 0) {
      do
        if (!k3) {
          if (!(v3 >>> 0 >= f4 >>> 0 & v3 >>> 0 < (f4 + (g3 << 1) | 0) >>> 0)) {
            if (v3 >>> 0 > f4 >>> 0)
              break;
            if ((v3 + (c4[e6 + 8 >> 2] << 1) | 0) >>> 0 <= f4 >>> 0)
              break;
          }
          c4[i5 >> 2] = 1;
          i5 = 0;
          E2 = y4;
          return i5 | 0;
        }
      while (0);
      if (!j3) {
        qb(f4, g3, 0, i5) | 0;
        i5 = 0;
        E2 = y4;
        return i5 | 0;
      }
      t5 = Qa(e6, i5) | 0;
      if ((Ia(c4[i5 >> 2] | 0) | 0) << 24 >> 24) {
        i5 = 0;
        E2 = y4;
        return i5 | 0;
      }
      k3 = c4[e6 + 88 >> 2] | 0;
      u4 = h4 & -13;
      u4 = (k3 & 2 | 0) == 0 ? (k3 & 1 | 0) == 0 ? h4 : u4 | 4 : u4 | 8;
      u4 = ((c4[e6 + 84 >> 2] | 0) + -3 | 0) >>> 0 < 4 ? u4 : u4 & -5;
      k3 = u4 & 65535;
      j3 = (k3 & 4 | 0) != 0;
      a:
        do
          if (!(k3 & 16)) {
            if (!j3) {
              n6 = k3 & 65533;
              l4 = f4;
              j3 = g3;
              m3 = 0;
              while (1) {
                if ((m3 | 0) >= (t5 | 0))
                  break a;
                s5 = (Va(e6, m3, w3, x3) | 0) == 0;
                k3 = v3 + (c4[w3 >> 2] << 1) | 0;
                h4 = c4[x3 >> 2] | 0;
                if (s5)
                  k3 = La(k3, h4, l4, j3, n6, i5) | 0;
                else
                  k3 = Ja(k3, h4, l4, j3, u4, i5) | 0;
                c4[x3 >> 2] = k3;
                l4 = (l4 | 0) == 0 ? 0 : l4 + (k3 << 1) | 0;
                j3 = j3 - k3 | 0;
                m3 = m3 + 1 | 0;
              }
            }
            q2 = c4[e6 + 72 >> 2] | 0;
            r6 = e6 + 224 | 0;
            s5 = e6 + 80 | 0;
            p4 = k3 & 65533;
            j3 = g3;
            o5 = 0;
            k3 = f4;
            while (1) {
              if ((o5 | 0) >= (t5 | 0))
                break a;
              z2 = Va(e6, o5, w3, x3) | 0;
              l4 = c4[w3 >> 2] | 0;
              n6 = v3 + (l4 << 1) | 0;
              h4 = c4[(c4[r6 >> 2] | 0) + (o5 * 12 | 0) + 8 >> 2] | 0;
              h4 = (h4 | 0) > 0 ? h4 : 0;
              m3 = (a3[s5 >> 0] | 0) != 0;
              do
                if (!z2) {
                  if (m3)
                    h4 = h4 | (a3[q2 + l4 >> 0] | 0) != 0;
                  l4 = 8207 - (h4 & 1) << 16 >> 16;
                  if (h4 & 5) {
                    if ((j3 | 0) > 0) {
                      b3[k3 >> 1] = l4;
                      k3 = k3 + 2 | 0;
                    }
                    j3 = j3 + -1 | 0;
                  }
                  l4 = La(n6, c4[x3 >> 2] | 0, k3, j3, p4, i5) | 0;
                  c4[x3 >> 2] = l4;
                  k3 = (k3 | 0) == 0 ? 0 : k3 + (l4 << 1) | 0;
                  j3 = j3 - l4 | 0;
                  if (a3[s5 >> 0] | 0)
                    h4 = (a3[q2 + (l4 + -1 + (c4[w3 >> 2] | 0)) >> 0] | 0) == 0 ? h4 : h4 | 2;
                  if (!(h4 & 10))
                    break;
                  if ((j3 | 0) > 0) {
                    b3[k3 >> 1] = 8207 - (h4 >>> 1 & 1) << 16 >> 16;
                    k3 = k3 + 2 | 0;
                  }
                  j3 = j3 + -1 | 0;
                } else {
                  if (m3)
                    h4 = (1 << d3[q2 + (l4 + -1 + (c4[x3 >> 2] | 0)) >> 0] & 8194 | 0) == 0 ? h4 | 4 : h4;
                  l4 = 8207 - (h4 & 1) << 16 >> 16;
                  if (h4 & 5) {
                    if ((j3 | 0) > 0) {
                      b3[k3 >> 1] = l4;
                      k3 = k3 + 2 | 0;
                    }
                    j3 = j3 + -1 | 0;
                  }
                  z2 = Ja(n6, c4[x3 >> 2] | 0, k3, j3, u4, i5) | 0;
                  c4[x3 >> 2] = z2;
                  k3 = (k3 | 0) == 0 ? 0 : k3 + (z2 << 1) | 0;
                  j3 = j3 - z2 | 0;
                  if (a3[s5 >> 0] | 0)
                    h4 = (1 << d3[q2 + (c4[w3 >> 2] | 0) >> 0] & 8194 | 0) == 0 ? h4 | 8 : h4;
                  if (!(h4 & 10))
                    break;
                  if ((j3 | 0) > 0) {
                    b3[k3 >> 1] = 8207 - (h4 >>> 1 & 1) << 16 >> 16;
                    k3 = k3 + 2 | 0;
                  }
                  j3 = j3 + -1 | 0;
                }
              while (0);
              o5 = o5 + 1 | 0;
            }
          } else {
            if (!j3) {
              n6 = k3 & 65533;
              m3 = f4;
              k3 = t5;
              j3 = g3;
              while (1) {
                l4 = k3 + -1 | 0;
                if ((k3 | 0) <= 0)
                  break a;
                z2 = (Va(e6, l4, w3, x3) | 0) == 0;
                k3 = v3 + (c4[w3 >> 2] << 1) | 0;
                h4 = c4[x3 >> 2] | 0;
                if (z2)
                  h4 = Ja(k3, h4, m3, j3, n6, i5) | 0;
                else
                  h4 = La(k3, h4, m3, j3, u4, i5) | 0;
                c4[x3 >> 2] = h4;
                m3 = (m3 | 0) == 0 ? 0 : m3 + (h4 << 1) | 0;
                k3 = l4;
                j3 = j3 - h4 | 0;
              }
            }
            p4 = c4[e6 + 72 >> 2] | 0;
            o5 = k3 & 65533;
            k3 = f4;
            h4 = t5;
            j3 = g3;
            while (1) {
              n6 = h4 + -1 | 0;
              if ((h4 | 0) <= 0)
                break a;
              z2 = Va(e6, n6, w3, x3) | 0;
              l4 = c4[w3 >> 2] | 0;
              m3 = v3 + (l4 << 1) | 0;
              if (!z2) {
                h4 = c4[x3 >> 2] | 0;
                if (a3[p4 + (l4 + -1 + h4) >> 0] | 0) {
                  if ((j3 | 0) > 0) {
                    b3[k3 >> 1] = 8206;
                    k3 = k3 + 2 | 0;
                    h4 = c4[x3 >> 2] | 0;
                  }
                  j3 = j3 + -1 | 0;
                }
                z2 = Ja(m3, h4, k3, j3, o5, i5) | 0;
                c4[x3 >> 2] = z2;
                k3 = (k3 | 0) == 0 ? 0 : k3 + (z2 << 1) | 0;
                j3 = j3 - z2 | 0;
                if (a3[p4 + (c4[w3 >> 2] | 0) >> 0] | 0) {
                  if ((j3 | 0) > 0) {
                    b3[k3 >> 1] = 8206;
                    k3 = k3 + 2 | 0;
                  }
                  j3 = j3 + -1 | 0;
                }
              } else {
                if (!(1 << d3[p4 + l4 >> 0] & 8194)) {
                  if ((j3 | 0) > 0) {
                    b3[k3 >> 1] = 8207;
                    k3 = k3 + 2 | 0;
                  }
                  j3 = j3 + -1 | 0;
                }
                z2 = La(m3, c4[x3 >> 2] | 0, k3, j3, u4, i5) | 0;
                c4[x3 >> 2] = z2;
                k3 = (k3 | 0) == 0 ? 0 : k3 + (z2 << 1) | 0;
                j3 = j3 - z2 | 0;
                if (!(1 << d3[p4 + (z2 + -1 + (c4[w3 >> 2] | 0)) >> 0] & 8194)) {
                  if ((j3 | 0) > 0) {
                    b3[k3 >> 1] = 8207;
                    k3 = k3 + 2 | 0;
                  }
                  j3 = j3 + -1 | 0;
                }
              }
              h4 = n6;
            }
          }
        while (0);
      z2 = qb(f4, g3, g3 - j3 | 0, i5) | 0;
      E2 = y4;
      return z2 | 0;
    }
    c4[i5 >> 2] = 1;
    z2 = 0;
    E2 = y4;
    return z2 | 0;
  }
  function La(a4, d4, f4, g3, h4, i5) {
    a4 = a4 | 0;
    d4 = d4 | 0;
    f4 = f4 | 0;
    g3 = g3 | 0;
    h4 = h4 | 0;
    i5 = i5 | 0;
    var j3 = 0, k3 = 0, l4 = 0, m3 = 0, n6 = 0;
    switch (h4 & 10) {
      case 0: {
        if ((g3 | 0) < (d4 | 0)) {
          c4[i5 >> 2] = 15;
          g3 = d4;
          return g3 | 0;
        }
        j3 = d4;
        h4 = f4;
        while (1) {
          b3[h4 >> 1] = b3[a4 >> 1] | 0;
          if ((j3 | 0) > 1) {
            a4 = a4 + 2 | 0;
            j3 = j3 + -1 | 0;
            h4 = h4 + 2 | 0;
          } else {
            h4 = d4;
            break;
          }
        }
        return h4 | 0;
      }
      case 2: {
        if ((g3 | 0) < (d4 | 0)) {
          c4[i5 >> 2] = 15;
          g3 = d4;
          return g3 | 0;
        }
        l4 = 0;
        j3 = 0;
        while (1) {
          k3 = j3 + 1 | 0;
          h4 = e5[a4 + (j3 << 1) >> 1] | 0;
          if ((k3 | 0) == (d4 | 0) | (h4 & 64512 | 0) != 55296)
            j3 = k3;
          else {
            m3 = e5[a4 + (k3 << 1) >> 1] | 0;
            g3 = (m3 & 64512 | 0) == 56320;
            h4 = g3 ? (h4 << 10) + -56613888 + m3 | 0 : h4;
            j3 = g3 ? j3 + 2 | 0 : k3;
          }
          h4 = yb(h4) | 0;
          if (h4 >>> 0 < 65536)
            k3 = l4 + 1 | 0;
          else {
            b3[f4 + (l4 + 1 << 1) >> 1] = h4 & 1023 | 56320;
            k3 = l4 + 2 | 0;
            h4 = (h4 >>> 10) + 55232 | 0;
          }
          b3[f4 + (l4 << 1) >> 1] = h4;
          if ((j3 | 0) < (d4 | 0))
            l4 = k3;
          else {
            h4 = d4;
            break;
          }
        }
        return h4 | 0;
      }
      case 8: {
        l4 = g3;
        h4 = a4;
        a4 = f4;
        a:
          while (1) {
            k3 = h4;
            h4 = h4 + 2 | 0;
            k3 = b3[k3 >> 1] | 0;
            b:
              do
                if ((k3 & -4) << 16 >> 16 == 8204)
                  j3 = l4;
                else {
                  switch (k3 << 16 >> 16) {
                    case 8234:
                    case 8235:
                    case 8236:
                    case 8237:
                    case 8238:
                    case 8294:
                    case 8295:
                    case 8296:
                    case 8297: {
                      j3 = l4;
                      break b;
                    }
                    default: {
                    }
                  }
                  j3 = l4 + -1 | 0;
                  if ((l4 | 0) < 1)
                    break a;
                  b3[a4 >> 1] = k3;
                  a4 = a4 + 2 | 0;
                }
              while (0);
            if ((d4 | 0) <= 1) {
              m3 = 26;
              break;
            } else {
              l4 = j3;
              d4 = d4 + -1 | 0;
            }
          }
        if ((m3 | 0) == 26) {
          g3 = g3 - j3 | 0;
          return g3 | 0;
        }
        c4[i5 >> 2] = 15;
        a4 = d4;
        while (1) {
          if ((a4 | 0) <= 1)
            break;
          f4 = e5[h4 >> 1] | 0;
          j3 = j3 + ((((f4 + -8294 | 0) >>> 0 < 4 | ((f4 & 65532 | 0) == 8204 | (f4 + -8234 | 0) >>> 0 < 5)) ^ 1) << 31 >> 31) | 0;
          a4 = a4 + -1 | 0;
          h4 = h4 + 2 | 0;
        }
        g3 = g3 - j3 | 0;
        return g3 | 0;
      }
      default: {
        h4 = 0;
        k3 = g3;
        j3 = d4;
        c:
          while (1) {
            l4 = e5[a4 >> 1] | 0;
            if ((j3 | 0) == 1 | (l4 & 64512 | 0) != 55296)
              d4 = 1;
            else {
              n6 = e5[a4 + 2 >> 1] | 0;
              d4 = (n6 & 64512 | 0) == 56320;
              l4 = d4 ? (l4 << 10) + -56613888 + n6 | 0 : l4;
              d4 = d4 ? 2 : 1;
            }
            a4 = a4 + (d4 << 1) | 0;
            j3 = j3 - d4 | 0;
            d:
              do
                if ((l4 & -4 | 0) != 8204) {
                  switch (l4 | 0) {
                    case 8234:
                    case 8235:
                    case 8236:
                    case 8237:
                    case 8238:
                    case 8294:
                    case 8295:
                    case 8296:
                    case 8297:
                      break d;
                    default: {
                    }
                  }
                  k3 = k3 - d4 | 0;
                  if ((k3 | 0) < 0)
                    break c;
                  l4 = yb(l4) | 0;
                  if (l4 >>> 0 < 65536) {
                    b3[f4 + (h4 << 1) >> 1] = l4;
                    h4 = h4 + 1 | 0;
                    break;
                  } else {
                    b3[f4 + (h4 << 1) >> 1] = (l4 >>> 10) + 55232;
                    b3[f4 + (h4 + 1 << 1) >> 1] = l4 & 1023 | 56320;
                    h4 = h4 + 2 | 0;
                    break;
                  }
                }
              while (0);
            if ((j3 | 0) <= 0) {
              m3 = 40;
              break;
            }
          }
        if ((m3 | 0) == 40)
          return h4 | 0;
        c4[i5 >> 2] = 15;
        h4 = a4;
        while (1) {
          if ((j3 | 0) <= 0)
            break;
          n6 = e5[h4 >> 1] | 0;
          k3 = k3 + ((((n6 + -8294 | 0) >>> 0 < 4 | ((n6 & 65532 | 0) == 8204 | (n6 + -8234 | 0) >>> 0 < 5)) ^ 1) << 31 >> 31) | 0;
          j3 = j3 + -1 | 0;
          h4 = h4 + 2 | 0;
        }
        n6 = g3 - k3 | 0;
        return n6 | 0;
      }
    }
    return 0;
  }
  function Ma(d4, e6, f4, g3, h4) {
    d4 = d4 | 0;
    e6 = e6 | 0;
    f4 = f4 | 0;
    g3 = g3 | 0;
    h4 = h4 | 0;
    var i5 = 0, j3 = 0, k3 = 0, l4 = 0, m3 = 0, n6 = 0, o5 = 0, p4 = 0;
    if (!h4)
      return;
    if ((Na(c4[h4 >> 2] | 0) | 0) << 24 >> 24)
      return;
    if (d4 | 0 ? (c4[d4 >> 2] | 0) == (d4 | 0) : 0) {
      if (!((e6 | 0) > -1 & (f4 | 0) > (e6 | 0))) {
        c4[h4 >> 2] = 1;
        return;
      }
      if ((f4 | 0) >= 0 ? (c4[d4 + 12 >> 2] | 0) >= (f4 | 0) : 0) {
        if (!g3) {
          c4[h4 >> 2] = 1;
          return;
        }
        p4 = Ga(d4, e6, h4) | 0;
        if ((p4 | 0) != (Ga(d4, f4 + -1 | 0, h4) | 0)) {
          c4[h4 >> 2] = 1;
          return;
        }
        c4[g3 >> 2] = 0;
        l4 = d4 + 4 | 0;
        c4[g3 + 4 >> 2] = (c4[l4 >> 2] | 0) + (e6 << 1);
        o5 = f4 - e6 | 0;
        c4[g3 + 12 >> 2] = o5;
        c4[g3 + 8 >> 2] = o5;
        m3 = g3 + 16 | 0;
        c4[m3 >> 2] = o5;
        if ((a3[d4 + 94 >> 0] | 0) != 0 ? (i5 = c4[d4 + 136 >> 2] | 0, (c4[i5 >> 2] | 0) <= (e6 | 0)) : 0) {
          h4 = d4 + 132 | 0;
          j3 = h4;
          h4 = da(c4[h4 >> 2] | 0, i5, e6) | 0;
        } else {
          j3 = d4 + 132 | 0;
          h4 = a3[d4 + 93 >> 0] | 0;
        }
        p4 = g3 + 93 | 0;
        a3[p4 >> 0] = h4;
        c4[g3 + 132 >> 2] = c4[j3 >> 2];
        c4[g3 + 224 >> 2] = 0;
        c4[g3 + 120 >> 2] = 0;
        c4[g3 + 84 >> 2] = c4[d4 + 84 >> 2];
        c4[g3 + 88 >> 2] = c4[d4 + 88 >> 2];
        k3 = g3 + 348 | 0;
        c4[k3 >> 2] = 0;
        if ((c4[d4 + 348 >> 2] | 0) > 0) {
          j3 = e6;
          h4 = 0;
          while (1) {
            if ((j3 | 0) >= (f4 | 0))
              break;
            i5 = b3[(c4[l4 >> 2] | 0) + (j3 << 1) >> 1] | 0;
            if ((i5 & -4) << 16 >> 16 == 8204)
              n6 = 24;
            else
              switch (i5 << 16 >> 16) {
                case 8234:
                case 8235:
                case 8236:
                case 8237:
                case 8238:
                case 8294:
                case 8295:
                case 8296:
                case 8297: {
                  n6 = 24;
                  break;
                }
                default: {
                }
              }
            if ((n6 | 0) == 24) {
              n6 = 0;
              h4 = h4 + 1 | 0;
              c4[k3 >> 2] = h4;
            }
            j3 = j3 + 1 | 0;
          }
          c4[m3 >> 2] = o5 - h4;
        }
        c4[g3 + 72 >> 2] = (c4[d4 + 72 >> 2] | 0) + e6;
        l4 = (c4[d4 + 76 >> 2] | 0) + e6 | 0;
        c4[g3 + 76 >> 2] = l4;
        c4[g3 + 220 >> 2] = -1;
        h4 = c4[d4 + 116 >> 2] | 0;
        a:
          do
            if ((h4 | 0) != 2) {
              c4[g3 + 116 >> 2] = h4;
              h4 = c4[d4 + 128 >> 2] | 0;
              if ((h4 | 0) <= (e6 | 0)) {
                c4[g3 + 128 >> 2] = 0;
                break;
              }
              if ((h4 | 0) < (f4 | 0)) {
                c4[g3 + 128 >> 2] = h4 - e6;
                break;
              } else {
                c4[g3 + 128 >> 2] = o5;
                break;
              }
            } else {
              Oa(g3);
              k3 = g3 + 128 | 0;
              j3 = c4[k3 >> 2] | 0;
              b:
                do
                  if (!j3)
                    h4 = a3[p4 >> 0] & 1;
                  else {
                    h4 = a3[l4 >> 0] & 1;
                    if ((j3 | 0) < (o5 | 0) ? (a3[p4 >> 0] & 1) != h4 << 24 >> 24 : 0) {
                      h4 = 2;
                      break;
                    }
                    i5 = 1;
                    while (1) {
                      if ((i5 | 0) == (j3 | 0))
                        break b;
                      if ((a3[l4 + i5 >> 0] & 1) == h4 << 24 >> 24)
                        i5 = i5 + 1 | 0;
                      else {
                        h4 = 2;
                        break;
                      }
                    }
                  }
                while (0);
              c4[g3 + 116 >> 2] = h4 & 255;
              switch (h4 & 3) {
                case 0: {
                  a3[p4 >> 0] = (a3[p4 >> 0] | 0) + 1 << 24 >> 24 & -2;
                  c4[k3 >> 2] = 0;
                  break a;
                }
                case 1: {
                  a3[p4 >> 0] = a3[p4 >> 0] | 1;
                  c4[k3 >> 2] = 0;
                  break a;
                }
                default:
                  break a;
              }
            }
          while (0);
        c4[g3 >> 2] = d4;
        return;
      }
      c4[h4 >> 2] = 1;
      return;
    }
    c4[h4 >> 2] = 27;
    return;
  }
  function Na(a4) {
    a4 = a4 | 0;
    return (a4 | 0) > 0 | 0;
  }
  function Oa(b4) {
    b4 = b4 | 0;
    var e6 = 0, f4 = 0, g3 = 0, h4 = 0, i5 = 0;
    g3 = c4[b4 + 72 >> 2] | 0;
    h4 = c4[b4 + 76 >> 2] | 0;
    e6 = c4[b4 + 12 >> 2] | 0;
    i5 = a3[b4 + 93 >> 0] | 0;
    if ((a3[g3 + (e6 + -1) >> 0] | 0) == 7) {
      i5 = e6;
      b4 = b4 + 128 | 0;
      c4[b4 >> 2] = i5;
      return;
    }
    while (1) {
      if ((e6 | 0) <= 0)
        break;
      f4 = e6 + -1 | 0;
      if (!(1 << d3[g3 + f4 >> 0] & 8248192))
        break;
      else
        e6 = f4;
    }
    while (1) {
      if ((e6 | 0) <= 0) {
        f4 = 8;
        break;
      }
      f4 = e6 + -1 | 0;
      if ((a3[h4 + f4 >> 0] | 0) == i5 << 24 >> 24)
        e6 = f4;
      else {
        f4 = 8;
        break;
      }
    }
    if ((f4 | 0) == 8) {
      b4 = b4 + 128 | 0;
      c4[b4 >> 2] = e6;
      return;
    }
  }
  function Pa(b4, d4) {
    b4 = b4 | 0;
    d4 = d4 | 0;
    var e6 = 0, f4 = 0, g3 = 0, h4 = 0, i5 = 0;
    if (!d4) {
      i5 = 0;
      return i5 | 0;
    }
    if ((Na(c4[d4 >> 2] | 0) | 0) << 24 >> 24) {
      i5 = 0;
      return i5 | 0;
    }
    do
      if (b4 | 0) {
        e6 = c4[b4 >> 2] | 0;
        if ((e6 | 0) != (b4 | 0)) {
          if (!e6)
            break;
          if ((c4[e6 >> 2] | 0) != (e6 | 0))
            break;
        }
        f4 = c4[b4 + 12 >> 2] | 0;
        if ((f4 | 0) < 1) {
          c4[d4 >> 2] = 1;
          i5 = 0;
          return i5 | 0;
        }
        g3 = b4 + 128 | 0;
        h4 = c4[g3 >> 2] | 0;
        if ((f4 | 0) == (h4 | 0)) {
          i5 = c4[b4 + 76 >> 2] | 0;
          return i5 | 0;
        }
        e6 = b4 + 48 | 0;
        if (!((aa(e6, b4 + 24 | 0, a3[b4 + 68 >> 0] | 0, f4) | 0) << 24 >> 24)) {
          c4[d4 >> 2] = 7;
          i5 = 0;
          return i5 | 0;
        }
        e6 = c4[e6 >> 2] | 0;
        d4 = b4 + 76 | 0;
        if ((h4 | 0) > 0 ? (i5 = c4[d4 >> 2] | 0, (e6 | 0) != (i5 | 0)) : 0)
          ec(e6 | 0, i5 | 0, h4 | 0) | 0;
        fc(e6 + h4 | 0, a3[b4 + 93 >> 0] | 0, f4 - h4 | 0) | 0;
        c4[g3 >> 2] = f4;
        c4[d4 >> 2] = e6;
        i5 = e6;
        return i5 | 0;
      }
    while (0);
    c4[d4 >> 2] = 27;
    i5 = 0;
    return i5 | 0;
  }
  function Qa(a4, b4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    var d4 = 0;
    if (!b4) {
      d4 = -1;
      return d4 | 0;
    }
    if ((Na(c4[b4 >> 2] | 0) | 0) << 24 >> 24) {
      d4 = -1;
      return d4 | 0;
    }
    do
      if (a4 | 0) {
        d4 = c4[a4 >> 2] | 0;
        if ((d4 | 0) != (a4 | 0)) {
          if (!d4)
            break;
          if ((c4[d4 >> 2] | 0) != (d4 | 0))
            break;
        }
        Ra(a4, b4);
        if ((Na(c4[b4 >> 2] | 0) | 0) << 24 >> 24) {
          d4 = -1;
          return d4 | 0;
        }
        d4 = c4[a4 + 220 >> 2] | 0;
        return d4 | 0;
      }
    while (0);
    c4[b4 >> 2] = 27;
    d4 = -1;
    return d4 | 0;
  }
  function Ra(e6, f4) {
    e6 = e6 | 0;
    f4 = f4 | 0;
    var g3 = 0, h4 = 0, i5 = 0, j3 = 0, k3 = 0, l4 = 0, m3 = 0, n6 = 0, o5 = 0, p4 = 0, q2 = 0, r6 = 0, s5 = 0, t5 = 0;
    s5 = e6 + 220 | 0;
    if ((c4[s5 >> 2] | 0) > -1)
      return;
    do
      if ((c4[e6 + 116 >> 2] | 0) == 2) {
        o5 = c4[e6 + 12 >> 2] | 0;
        r6 = c4[e6 + 76 >> 2] | 0;
        p4 = c4[e6 + 128 >> 2] | 0;
        g3 = 0;
        i5 = 0;
        h4 = -2;
        while (1) {
          if ((g3 | 0) >= (p4 | 0))
            break;
          q2 = a3[r6 + g3 >> 0] | 0;
          g3 = g3 + 1 | 0;
          i5 = i5 + (q2 << 24 >> 24 != h4 << 24 >> 24 & 1) | 0;
          h4 = q2;
        }
        if ((o5 | 0) == (p4 | 0) & (i5 | 0) == 1) {
          Sa(e6, a3[r6 >> 0] | 0);
          break;
        }
        l4 = (o5 | 0) > (p4 | 0);
        q2 = i5 + (l4 & 1) | 0;
        g3 = e6 + 60 | 0;
        if (!((aa(g3, e6 + 36 | 0, a3[e6 + 69 >> 0] | 0, q2 * 12 | 0) | 0) << 24 >> 24))
          return;
        n6 = c4[g3 >> 2] | 0;
        m3 = 0;
        g3 = 126;
        k3 = 0;
        i5 = 0;
        while (1) {
          h4 = a3[r6 + i5 >> 0] | 0;
          g3 = (h4 & 255) < (g3 & 255) ? h4 : g3;
          k3 = (h4 & 255) > (k3 & 255) ? h4 : k3;
          j3 = i5;
          while (1) {
            j3 = j3 + 1 | 0;
            if ((j3 | 0) >= (p4 | 0)) {
              h4 = 0;
              break;
            }
            if ((a3[r6 + j3 >> 0] | 0) != h4 << 24 >> 24) {
              h4 = 1;
              break;
            }
          }
          c4[n6 + (m3 * 12 | 0) >> 2] = i5;
          c4[n6 + (m3 * 12 | 0) + 4 >> 2] = j3 - i5;
          c4[n6 + (m3 * 12 | 0) + 8 >> 2] = 0;
          m3 = m3 + 1 | 0;
          if (!h4)
            break;
          else
            i5 = j3;
        }
        if (l4) {
          c4[n6 + (m3 * 12 | 0) >> 2] = p4;
          c4[n6 + (m3 * 12 | 0) + 4 >> 2] = o5 - p4;
          p4 = a3[e6 + 93 >> 0] | 0;
          g3 = (p4 & 255) < (g3 & 255) ? p4 : g3;
        }
        c4[e6 + 224 >> 2] = n6;
        c4[s5 >> 2] = q2;
        Ta(e6, g3, k3);
        g3 = 0;
        h4 = 0;
        while (1) {
          if ((h4 | 0) == (q2 | 0))
            break;
          o5 = n6 + (h4 * 12 | 0) | 0;
          p4 = c4[o5 >> 2] | 0;
          c4[o5 >> 2] = d3[r6 + p4 >> 0] << 31 | p4;
          o5 = n6 + (h4 * 12 | 0) + 4 | 0;
          p4 = (c4[o5 >> 2] | 0) + g3 | 0;
          c4[o5 >> 2] = p4;
          g3 = p4;
          h4 = h4 + 1 | 0;
        }
        if (m3 >>> 0 < q2 >>> 0) {
          q2 = d3[e6 + 93 >> 0] | 0;
          r6 = n6 + (((q2 & 1 | 0) == 0 ? m3 : 0) * 12 | 0) | 0;
          c4[r6 >> 2] = q2 << 31 | c4[r6 >> 2];
        }
      } else
        Sa(e6, a3[e6 + 93 >> 0] | 0);
    while (0);
    g3 = c4[e6 + 332 >> 2] | 0;
    a:
      do
        if ((g3 | 0) > 0) {
          r6 = c4[e6 + 344 >> 2] | 0;
          h4 = r6 + (g3 << 3) | 0;
          i5 = e6 + 224 | 0;
          g3 = r6;
          while (1) {
            if (g3 >>> 0 >= h4 >>> 0)
              break a;
            r6 = Ua(c4[s5 >> 2] | 0, c4[i5 >> 2] | 0, c4[g3 >> 2] | 0, f4) | 0;
            r6 = (c4[i5 >> 2] | 0) + (r6 * 12 | 0) + 8 | 0;
            c4[r6 >> 2] = c4[r6 >> 2] | c4[g3 + 4 >> 2];
            g3 = g3 + 8 | 0;
          }
        }
      while (0);
    if ((c4[e6 + 348 >> 2] | 0) <= 0)
      return;
    g3 = c4[e6 + 4 >> 2] | 0;
    j3 = g3 + (c4[e6 + 12 >> 2] << 1) | 0;
    k3 = g3;
    h4 = e6 + 224 | 0;
    while (1) {
      if (g3 >>> 0 >= j3 >>> 0)
        break;
      i5 = b3[g3 >> 1] | 0;
      if ((i5 & -4) << 16 >> 16 == 8204)
        t5 = 31;
      else
        switch (i5 << 16 >> 16) {
          case 8234:
          case 8235:
          case 8236:
          case 8237:
          case 8238:
          case 8294:
          case 8295:
          case 8296:
          case 8297: {
            t5 = 31;
            break;
          }
          default: {
          }
        }
      if ((t5 | 0) == 31) {
        t5 = 0;
        e6 = Ua(c4[s5 >> 2] | 0, c4[h4 >> 2] | 0, g3 - k3 >> 1, f4) | 0;
        e6 = (c4[h4 >> 2] | 0) + (e6 * 12 | 0) + 8 | 0;
        c4[e6 >> 2] = (c4[e6 >> 2] | 0) + -1;
      }
      g3 = g3 + 2 | 0;
    }
    return;
  }
  function Sa(a4, b4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    var d4 = 0;
    d4 = a4 + 228 | 0;
    c4[a4 + 224 >> 2] = d4;
    c4[a4 + 220 >> 2] = 1;
    c4[d4 >> 2] = (b4 & 255) << 31;
    c4[a4 + 232 >> 2] = c4[a4 + 12 >> 2];
    c4[a4 + 236 >> 2] = 0;
    return;
  }
  function Ta(a4, b4, e6) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    e6 = e6 | 0;
    var f4 = 0, g3 = 0, h4 = 0, i5 = 0, j3 = 0, k3 = 0, l4 = 0, m3 = 0, n6 = 0, o5 = 0, p4 = 0, q2 = 0;
    o5 = E2;
    E2 = E2 + 16 | 0;
    n6 = o5;
    if (((b4 | 1) & 255) >= (e6 & 255)) {
      E2 = o5;
      return;
    }
    l4 = b4 + 1 << 24 >> 24;
    m3 = c4[a4 + 224 >> 2] | 0;
    i5 = c4[a4 + 76 >> 2] | 0;
    j3 = a4 + 128 | 0;
    k3 = a4 + 12 | 0;
    h4 = (c4[a4 + 220 >> 2] | 0) + (((c4[j3 >> 2] | 0) < (c4[k3 >> 2] | 0)) << 31 >> 31) | 0;
    b4 = e6;
    while (1) {
      b4 = b4 + -1 << 24 >> 24;
      if ((b4 & 255) < (l4 & 255))
        break;
      a4 = 0;
      while (1) {
        if ((a4 | 0) >= (h4 | 0))
          break;
        if ((d3[i5 + (c4[m3 + (a4 * 12 | 0) >> 2] | 0) >> 0] | 0) >= (b4 & 255)) {
          e6 = a4;
          while (1) {
            g3 = e6 + 1 | 0;
            if ((g3 | 0) >= (h4 | 0))
              break;
            if ((d3[i5 + (c4[m3 + (g3 * 12 | 0) >> 2] | 0) >> 0] | 0) < (b4 & 255))
              break;
            else
              e6 = g3;
          }
          f4 = e6;
          while (1) {
            if ((a4 | 0) >= (f4 | 0))
              break;
            q2 = m3 + (a4 * 12 | 0) | 0;
            c4[n6 >> 2] = c4[q2 >> 2];
            c4[n6 + 4 >> 2] = c4[q2 + 4 >> 2];
            c4[n6 + 8 >> 2] = c4[q2 + 8 >> 2];
            p4 = m3 + (f4 * 12 | 0) | 0;
            c4[q2 >> 2] = c4[p4 >> 2];
            c4[q2 + 4 >> 2] = c4[p4 + 4 >> 2];
            c4[q2 + 8 >> 2] = c4[p4 + 8 >> 2];
            c4[p4 >> 2] = c4[n6 >> 2];
            c4[p4 + 4 >> 2] = c4[n6 + 4 >> 2];
            c4[p4 + 8 >> 2] = c4[n6 + 8 >> 2];
            f4 = f4 + -1 | 0;
            a4 = a4 + 1 | 0;
          }
          if ((g3 | 0) == (h4 | 0))
            break;
          else
            a4 = e6 + 2 | 0;
        } else
          a4 = a4 + 1 | 0;
      }
    }
    if (l4 & 1) {
      E2 = o5;
      return;
    }
    b4 = h4 + (((c4[j3 >> 2] | 0) == (c4[k3 >> 2] | 0)) << 31 >> 31) | 0;
    a4 = 0;
    while (1) {
      if ((a4 | 0) >= (b4 | 0))
        break;
      p4 = m3 + (a4 * 12 | 0) | 0;
      c4[n6 >> 2] = c4[p4 >> 2];
      c4[n6 + 4 >> 2] = c4[p4 + 4 >> 2];
      c4[n6 + 8 >> 2] = c4[p4 + 8 >> 2];
      q2 = m3 + (b4 * 12 | 0) | 0;
      c4[p4 >> 2] = c4[q2 >> 2];
      c4[p4 + 4 >> 2] = c4[q2 + 4 >> 2];
      c4[p4 + 8 >> 2] = c4[q2 + 8 >> 2];
      c4[q2 >> 2] = c4[n6 >> 2];
      c4[q2 + 4 >> 2] = c4[n6 + 4 >> 2];
      c4[q2 + 8 >> 2] = c4[n6 + 8 >> 2];
      b4 = b4 + -1 | 0;
      a4 = a4 + 1 | 0;
    }
    E2 = o5;
    return;
  }
  function Ua(a4, b4, d4, e6) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    d4 = d4 | 0;
    e6 = e6 | 0;
    var f4 = 0, g3 = 0, h4 = 0, i5 = 0, j3 = 0;
    g3 = 0;
    f4 = 0;
    while (1) {
      if ((f4 | 0) >= (a4 | 0))
        break;
      h4 = c4[b4 + (f4 * 12 | 0) + 4 >> 2] | 0;
      j3 = c4[b4 + (f4 * 12 | 0) >> 2] & 2147483647;
      if ((j3 | 0) <= (d4 | 0) ? (h4 - g3 + j3 | 0) > (d4 | 0) : 0) {
        i5 = 7;
        break;
      }
      g3 = h4;
      f4 = f4 + 1 | 0;
    }
    if ((i5 | 0) == 7)
      return f4 | 0;
    c4[e6 >> 2] = 27;
    j3 = 0;
    return j3 | 0;
  }
  function Va(a4, b4, d4, e6) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    d4 = d4 | 0;
    e6 = e6 | 0;
    var f4 = 0, g3 = 0, h4 = 0;
    h4 = E2;
    E2 = E2 + 16 | 0;
    f4 = h4;
    c4[f4 >> 2] = 0;
    do
      if (a4 | 0) {
        g3 = c4[a4 >> 2] | 0;
        if ((g3 | 0) != (a4 | 0)) {
          if (!g3)
            break;
          if ((c4[g3 >> 2] | 0) != (g3 | 0))
            break;
        }
        Ra(a4, f4);
        if ((Na(c4[f4 >> 2] | 0) | 0) << 24 >> 24) {
          e6 = 0;
          E2 = h4;
          return e6 | 0;
        }
        if ((b4 | 0) >= 0 ? (c4[a4 + 220 >> 2] | 0) > (b4 | 0) : 0) {
          a4 = a4 + 224 | 0;
          f4 = c4[(c4[a4 >> 2] | 0) + (b4 * 12 | 0) >> 2] | 0;
          if (d4 | 0)
            c4[d4 >> 2] = f4 & 2147483647;
          if (e6 | 0) {
            a4 = c4[a4 >> 2] | 0;
            if ((b4 | 0) > 0)
              a4 = (c4[a4 + (b4 * 12 | 0) + 4 >> 2] | 0) - (c4[a4 + ((b4 + -1 | 0) * 12 | 0) + 4 >> 2] | 0) | 0;
            else
              a4 = c4[a4 + 4 >> 2] | 0;
            c4[e6 >> 2] = a4;
          }
          e6 = f4 >>> 31;
          E2 = h4;
          return e6 | 0;
        }
        c4[f4 >> 2] = 1;
        e6 = 0;
        E2 = h4;
        return e6 | 0;
      }
    while (0);
    c4[f4 >> 2] = 27;
    e6 = 0;
    E2 = h4;
    return e6 | 0;
  }
  function Wa(a4, d4, e6) {
    a4 = a4 | 0;
    d4 = d4 | 0;
    e6 = e6 | 0;
    var f4 = 0, g3 = 0, h4 = 0, i5 = 0, j3 = 0, k3 = 0, l4 = 0, m3 = 0, n6 = 0, o5 = 0, p4 = 0;
    if (!e6)
      return;
    if ((Na(c4[e6 >> 2] | 0) | 0) << 24 >> 24)
      return;
    if (!d4) {
      c4[e6 >> 2] = 1;
      return;
    }
    Qa(a4, e6) | 0;
    if (!((Xa(c4[e6 >> 2] | 0) | 0) << 24 >> 24))
      return;
    m3 = a4 + 224 | 0;
    e6 = c4[m3 >> 2] | 0;
    k3 = a4 + 220 | 0;
    l4 = e6 + ((c4[k3 >> 2] | 0) * 12 | 0) | 0;
    n6 = a4 + 16 | 0;
    if ((c4[n6 >> 2] | 0) < 1)
      return;
    g3 = 0;
    f4 = d4;
    while (1) {
      if (e6 >>> 0 >= l4 >>> 0)
        break;
      h4 = c4[e6 >> 2] | 0;
      j3 = c4[e6 + 4 >> 2] | 0;
      if ((h4 | 0) > -1)
        while (1) {
          i5 = f4 + 4 | 0;
          c4[f4 >> 2] = h4;
          g3 = g3 + 1 | 0;
          if ((g3 | 0) < (j3 | 0)) {
            h4 = h4 + 1 | 0;
            f4 = i5;
          } else {
            f4 = i5;
            break;
          }
        }
      else {
        i5 = j3 - g3 + (h4 & 2147483647) | 0;
        while (1) {
          i5 = i5 + -1 | 0;
          h4 = f4 + 4 | 0;
          c4[f4 >> 2] = i5;
          g3 = g3 + 1 | 0;
          if ((g3 | 0) >= (j3 | 0)) {
            f4 = h4;
            break;
          } else
            f4 = h4;
        }
      }
      e6 = e6 + 12 | 0;
    }
    if ((c4[a4 + 332 >> 2] | 0) > 0) {
      g3 = c4[k3 >> 2] | 0;
      m3 = c4[m3 >> 2] | 0;
      f4 = 0;
      e6 = 0;
      while (1) {
        if ((e6 | 0) >= (g3 | 0))
          break;
        p4 = c4[m3 + (e6 * 12 | 0) + 8 >> 2] | 0;
        f4 = f4 + ((p4 & 5 | 0) != 0 & 1) + ((p4 & 10 | 0) != 0 & 1) | 0;
        e6 = e6 + 1 | 0;
      }
      e6 = c4[n6 >> 2] | 0;
      while (1) {
        l4 = g3 + -1 | 0;
        if (!((g3 | 0) > 0 & (f4 | 0) > 0))
          break;
        k3 = c4[m3 + (l4 * 12 | 0) + 8 >> 2] | 0;
        h4 = e6 + -1 | 0;
        if (k3 & 10) {
          c4[d4 + (h4 << 2) >> 2] = -1;
          e6 = h4;
          f4 = f4 + -1 | 0;
        }
        if ((g3 | 0) > 1)
          j3 = c4[m3 + ((g3 + -2 | 0) * 12 | 0) + 4 >> 2] | 0;
        else
          j3 = 0;
        i5 = (f4 | 0) > 0;
        h4 = c4[m3 + (l4 * 12 | 0) + 4 >> 2] | 0;
        while (1) {
          g3 = h4 + -1 | 0;
          if (!(i5 & (h4 | 0) > (j3 | 0)))
            break;
          p4 = e6 + -1 | 0;
          c4[d4 + (p4 << 2) >> 2] = c4[d4 + (g3 << 2) >> 2];
          h4 = g3;
          e6 = p4;
        }
        g3 = e6 + -1 | 0;
        if (k3 & 5) {
          c4[d4 + (g3 << 2) >> 2] = -1;
          e6 = g3;
          f4 = f4 + -1 | 0;
        }
        g3 = l4;
      }
      return;
    }
    if ((c4[a4 + 348 >> 2] | 0) <= 0)
      return;
    p4 = c4[k3 >> 2] | 0;
    o5 = c4[m3 >> 2] | 0;
    a4 = a4 + 4 | 0;
    e6 = 0;
    m3 = 0;
    f4 = 0;
    while (1) {
      if ((m3 | 0) >= (p4 | 0))
        break;
      n6 = c4[o5 + (m3 * 12 | 0) + 4 >> 2] | 0;
      l4 = n6 - f4 | 0;
      g3 = (c4[o5 + (m3 * 12 | 0) + 8 >> 2] | 0) == 0;
      a:
        do
          if ((e6 | 0) == (f4 | 0) & g3)
            e6 = l4 + e6 | 0;
          else {
            if (g3)
              while (1) {
                if ((f4 | 0) >= (n6 | 0))
                  break a;
                c4[d4 + (e6 << 2) >> 2] = c4[d4 + (f4 << 2) >> 2];
                f4 = f4 + 1 | 0;
                e6 = e6 + 1 | 0;
              }
            j3 = c4[o5 + (m3 * 12 | 0) >> 2] | 0;
            i5 = (j3 | 0) > -1;
            j3 = j3 & 2147483647;
            k3 = l4 + -1 + j3 | 0;
            h4 = 0;
            while (1) {
              if ((h4 | 0) >= (l4 | 0))
                break a;
              f4 = i5 ? h4 + j3 | 0 : k3 - h4 | 0;
              g3 = b3[(c4[a4 >> 2] | 0) + (f4 << 1) >> 1] | 0;
              b:
                do
                  if ((g3 & -4) << 16 >> 16 != 8204) {
                    switch (g3 << 16 >> 16) {
                      case 8234:
                      case 8235:
                      case 8236:
                      case 8237:
                      case 8238:
                      case 8294:
                      case 8295:
                      case 8296:
                      case 8297:
                        break b;
                      default: {
                      }
                    }
                    c4[d4 + (e6 << 2) >> 2] = f4;
                    e6 = e6 + 1 | 0;
                  }
                while (0);
              h4 = h4 + 1 | 0;
            }
          }
        while (0);
      m3 = m3 + 1 | 0;
      f4 = n6;
    }
    return;
  }
  function Xa(a4) {
    a4 = a4 | 0;
    return (a4 | 0) < 1 | 0;
  }
  function Ya(a4, d4, e6, f4, g3) {
    a4 = a4 | 0;
    d4 = d4 | 0;
    e6 = e6 | 0;
    f4 = f4 | 0;
    g3 = g3 | 0;
    var h4 = 0, i5 = 0, j3 = 0, k3 = 0, l4 = 0, m3 = 0, n6 = 0, o5 = 0;
    o5 = E2;
    E2 = E2 + 656 | 0;
    j3 = o5 + 632 | 0;
    l4 = o5;
    m3 = o5 + 628 | 0;
    n6 = o5 + 624 | 0;
    k3 = o5 + 600 | 0;
    if (!g3) {
      n6 = 0;
      E2 = o5;
      return n6 | 0;
    }
    if ((Za(c4[g3 >> 2] | 0) | 0) << 24 >> 24) {
      n6 = 0;
      E2 = o5;
      return n6 | 0;
    }
    if (!((a4 | 0) == 0 | (d4 | 0) < -1) ? (h4 = (e6 | 0) == 0, !((f4 | 0) < 0 | h4 & (f4 | 0) != 0)) : 0) {
      if ((d4 | 0) == -1)
        d4 = ob(a4) | 0;
      if ((d4 | 0) < 1) {
        qb(e6, f4, 0, g3) | 0;
        n6 = 0;
        E2 = o5;
        return n6 | 0;
      }
      do
        if (!h4) {
          if (!(a4 >>> 0 <= e6 >>> 0 & (a4 + (d4 << 1) | 0) >>> 0 > e6 >>> 0) ? !(e6 >>> 0 <= a4 >>> 0 & (e6 + (f4 << 1) | 0) >>> 0 > a4 >>> 0) : 0)
            break;
          c4[g3 >> 2] = 1;
          n6 = 0;
          E2 = o5;
          return n6 | 0;
        }
      while (0);
      c4[m3 >> 2] = 0;
      c4[n6 >> 2] = 0;
      h4 = $a(a4, d4) | 0;
      if ((h4 | 0) > (f4 | 0)) {
        c4[g3 >> 2] = 15;
        n6 = h4;
        E2 = o5;
        return n6 | 0;
      }
      h4 = (d4 | 0) > (h4 | 0) ? d4 : h4;
      if ((h4 | 0) >= 301) {
        i5 = lb(h4 << 1) | 0;
        if (!i5) {
          c4[g3 >> 2] = 7;
          n6 = 0;
          E2 = o5;
          return n6 | 0;
        }
      } else {
        i5 = l4;
        h4 = 300;
      }
      pb(i5, a4, d4) | 0;
      if ((h4 | 0) > (d4 | 0))
        fc(i5 + (d4 << 1) | 0, 0, h4 - d4 << 1 | 0) | 0;
      ab(i5, d4, m3, n6);
      bb(i5, d4, c4[m3 >> 2] | 0, c4[n6 >> 2] | 0);
      b3[k3 >> 1] = 8203;
      b3[k3 + 2 >> 1] = 0;
      c4[k3 + 4 >> 2] = 3;
      c4[k3 + 8 >> 2] = 2;
      c4[k3 + 12 >> 2] = 262144;
      c4[k3 + 16 >> 2] = 393216;
      c4[k3 + 20 >> 2] = 0;
      c4[j3 >> 2] = c4[k3 >> 2];
      c4[j3 + 4 >> 2] = c4[k3 + 4 >> 2];
      c4[j3 + 8 >> 2] = c4[k3 + 8 >> 2];
      c4[j3 + 12 >> 2] = c4[k3 + 12 >> 2];
      c4[j3 + 16 >> 2] = c4[k3 + 16 >> 2];
      c4[j3 + 20 >> 2] = c4[k3 + 20 >> 2];
      d4 = cb(i5, d4, g3, j3) | 0;
      ab(i5, d4, m3, n6);
      bb(i5, d4, c4[m3 >> 2] | 0, c4[n6 >> 2] | 0);
      pb(e6, i5, kb(d4, f4) | 0) | 0;
      if ((i5 | 0) != (l4 | 0))
        nb(i5);
      if ((d4 | 0) > (f4 | 0)) {
        c4[g3 >> 2] = 15;
        n6 = d4;
        E2 = o5;
        return n6 | 0;
      } else {
        n6 = qb(e6, f4, d4, g3) | 0;
        E2 = o5;
        return n6 | 0;
      }
    }
    c4[g3 >> 2] = 1;
    n6 = 0;
    E2 = o5;
    return n6 | 0;
  }
  function Za(a4) {
    a4 = a4 | 0;
    return (a4 | 0) > 0 | 0;
  }
  function _a6(a4) {
    a4 = a4 | 0;
    var c5 = 0;
    c5 = a4 & 65535;
    if ((a4 + -1570 & 65535) < 178) {
      c5 = b3[1712 + (c5 + -1570 << 1) >> 1] | 0;
      return c5 | 0;
    }
    if (a4 << 16 >> 16 == 8205) {
      c5 = 3;
      return c5 | 0;
    }
    if ((a4 + -8301 & 65535) < 3) {
      c5 = 4;
      return c5 | 0;
    }
    if ((a4 + 1200 & 65535) < 275) {
      c5 = d3[2080 + (c5 + -64336) >> 0] | 0;
      return c5 | 0;
    }
    if ((a4 + 400 & 65535) >= 141) {
      c5 = 0;
      return c5 | 0;
    }
    c5 = d3[2368 + (c5 + -65136) >> 0] | 0;
    return c5 | 0;
  }
  function $a(a4, c5) {
    a4 = a4 | 0;
    c5 = c5 | 0;
    var d4 = 0, e6 = 0, f4 = 0, g3 = 0, h4 = 0;
    g3 = c5 + -1 | 0;
    f4 = 0;
    d4 = c5;
    while (1) {
      if ((f4 | 0) >= (c5 | 0))
        break;
      e6 = b3[a4 + (f4 << 1) >> 1] | 0;
      if ((f4 | 0) < (g3 | 0) & e6 << 16 >> 16 == 1604 ? (ib(b3[a4 + (f4 + 1 << 1) >> 1] | 0) | 0) != 0 : 0)
        h4 = 6;
      else if (jb(e6) | 0)
        h4 = 6;
      if ((h4 | 0) == 6) {
        h4 = 0;
        d4 = d4 + -1 | 0;
      }
      f4 = f4 + 1 | 0;
    }
    return d4 | 0;
  }
  function ab(a4, d4, e6, f4) {
    a4 = a4 | 0;
    d4 = d4 | 0;
    e6 = e6 | 0;
    f4 = f4 | 0;
    var g3 = 0, h4 = 0;
    h4 = 0;
    while (1) {
      g3 = (h4 | 0) < (d4 | 0);
      if (g3 & (b3[a4 + (h4 << 1) >> 1] | 0) == 32)
        h4 = h4 + 1 | 0;
      else
        break;
    }
    if (!g3) {
      a4 = 0;
      c4[e6 >> 2] = h4;
      c4[f4 >> 2] = a4;
      return;
    }
    g3 = 0;
    while (1) {
      d4 = d4 + -1 | 0;
      if ((b3[a4 + (d4 << 1) >> 1] | 0) != 32)
        break;
      else
        g3 = g3 + 1 | 0;
    }
    c4[e6 >> 2] = h4;
    c4[f4 >> 2] = g3;
    return;
  }
  function bb(a4, c5, d4, e6) {
    a4 = a4 | 0;
    c5 = c5 | 0;
    d4 = d4 | 0;
    e6 = e6 | 0;
    var f4 = 0, g3 = 0;
    c5 = c5 - e6 | 0;
    while (1) {
      c5 = c5 + -1 | 0;
      if ((d4 | 0) >= (c5 | 0))
        break;
      g3 = a4 + (d4 << 1) | 0;
      f4 = b3[g3 >> 1] | 0;
      e6 = a4 + (c5 << 1) | 0;
      b3[g3 >> 1] = b3[e6 >> 1] | 0;
      b3[e6 >> 1] = f4;
      d4 = d4 + 1 | 0;
    }
    return;
  }
  function cb(a4, e6, f4, g3) {
    a4 = a4 | 0;
    e6 = e6 | 0;
    f4 = f4 | 0;
    g3 = g3 | 0;
    var h4 = 0, i5 = 0, j3 = 0, k3 = 0, l4 = 0, m3 = 0, n6 = 0, o5 = 0, p4 = 0, q2 = 0, r6 = 0, s5 = 0, t5 = 0, u4 = 0, v3 = 0, w3 = 0, x3 = 0, y4 = 0, z2 = 0;
    z2 = E2;
    E2 = E2 + 32 | 0;
    x3 = z2;
    j3 = 0;
    while (1) {
      if ((j3 | 0) >= (e6 | 0))
        break;
      k3 = a4 + (j3 << 1) | 0;
      h4 = b3[k3 >> 1] | 0;
      i5 = h4 & 65535;
      if ((h4 + 1200 & 65535) < 176) {
        h4 = b3[1008 + (i5 + -64336 << 1) >> 1] | 0;
        if (h4 << 16 >> 16)
          b3[k3 >> 1] = h4;
      } else if ((h4 + 400 & 65535) < 141)
        b3[k3 >> 1] = b3[1360 + (i5 + -65136 << 1) >> 1] | 0;
      j3 = j3 + 1 | 0;
    }
    l4 = e6 + -1 | 0;
    w3 = l4;
    j3 = 0;
    h4 = _a6(b3[a4 + (l4 << 1) >> 1] | 0) | 0;
    m3 = 0;
    v3 = 0;
    r6 = 0;
    s5 = 0;
    p4 = 0;
    k3 = -2;
    while (1) {
      if ((l4 | 0) == -1)
        break;
      o5 = h4 & 65535;
      if (!((o5 & 65280 | 0) == 0 ? ((_a6(b3[a4 + (l4 << 1) >> 1] | 0) | 0) & 4) == 0 : 0))
        y4 = 13;
      do
        if ((y4 | 0) == 13) {
          y4 = 0;
          n6 = l4 + -1 | 0;
          while (1) {
            if ((k3 | 0) >= 0)
              break;
            if ((n6 | 0) == -1) {
              i5 = -1;
              j3 = 0;
              k3 = 3e3;
            } else {
              j3 = _a6(b3[a4 + (n6 << 1) >> 1] | 0) | 0;
              u4 = (j3 & 4) == 0;
              i5 = n6 + ((u4 ^ 1) << 31 >> 31) | 0;
              k3 = u4 ? n6 : k3;
            }
            n6 = i5;
          }
          do
            if (!((m3 & 16) == 0 | (o5 & 32 | 0) == 0)) {
              h4 = a4 + (l4 << 1) | 0;
              i5 = eb(b3[h4 >> 1] | 0) | 0;
              if (!(i5 << 16 >> 16)) {
                h4 = _a6(0) | 0;
                t5 = v3;
                u4 = 1;
                break;
              } else {
                b3[h4 >> 1] = -1;
                b3[a4 + (w3 << 1) >> 1] = i5;
                h4 = _a6(i5) | 0;
                t5 = v3;
                u4 = 1;
                l4 = w3;
                break;
              }
            } else {
              t5 = m3;
              u4 = p4;
            }
          while (0);
          if ((l4 | 0) > 0) {
            if ((b3[a4 + (l4 + -1 << 1) >> 1] | 0) == 32) {
              p4 = b3[a4 + (l4 << 1) >> 1] | 0;
              q2 = (fb(p4) | 0) == 0;
              r6 = p4 << 16 >> 16 == 1574 & q2 ? 1 : r6;
              s5 = q2 ? s5 : 1;
            }
          } else if (!l4) {
            p4 = b3[a4 >> 1] | 0;
            q2 = (fb(p4) | 0) == 0;
            r6 = p4 << 16 >> 16 == 1574 & q2 ? 1 : r6;
            s5 = q2 ? s5 : 1;
          }
          n6 = j3 & 65535;
          o5 = t5 & 65535;
          q2 = h4 & 65535;
          m3 = q2 & 3;
          p4 = d3[1648 + ((n6 & 3) << 4) + ((o5 & 3) << 2) + m3 >> 0] | 0;
          if ((m3 | 0) != 1) {
            m3 = a4 + (l4 << 1) | 0;
            i5 = b3[m3 >> 1] | 0;
            if (gb(i5) | 0)
              if ((o5 & 2 | 0) == 0 | (n6 & 1 | 0) == 0 | (i5 & -2) << 16 >> 16 == 1612)
                p4 = 0;
              else
                p4 = o5 >>> 4 & 1 ^ 1 | n6 >>> 5 & 1 ^ 1;
          } else {
            i5 = a4 + (l4 << 1) | 0;
            p4 = p4 & 1;
            m3 = i5;
            i5 = b3[i5 >> 1] | 0;
          }
          if (((i5 ^ 1536) & 65535) < 256) {
            if (gb(i5) | 0) {
              b3[m3 >> 1] = p4 + 65136 + (d3[70134 + ((i5 & 65535) + -1611) >> 0] | 0);
              m3 = t5;
              p4 = u4;
              break;
            }
            i5 = q2 >>> 8;
            if (q2 & 8 | 0) {
              b3[m3 >> 1] = p4 + i5 + 64336;
              m3 = t5;
              p4 = u4;
              break;
            }
            if ((i5 | 0) != 0 & (q2 & 4 | 0) == 0) {
              b3[m3 >> 1] = p4 + i5 + 65136;
              m3 = t5;
              p4 = u4;
            } else {
              m3 = t5;
              p4 = u4;
            }
          } else {
            m3 = t5;
            p4 = u4;
          }
        }
      while (0);
      i5 = (h4 & 4) == 0;
      n6 = i5 ? m3 : v3;
      m3 = i5 ? h4 : m3;
      i5 = i5 ? l4 : w3;
      o5 = l4 + -1 | 0;
      if ((o5 | 0) != (k3 | 0)) {
        if (l4)
          h4 = _a6(b3[a4 + (o5 << 1) >> 1] | 0) | 0;
      } else {
        h4 = j3;
        k3 = -2;
      }
      w3 = i5;
      v3 = n6;
      l4 = o5;
    }
    if (p4) {
      c4[x3 >> 2] = c4[g3 >> 2];
      c4[x3 + 4 >> 2] = c4[g3 + 4 >> 2];
      c4[x3 + 8 >> 2] = c4[g3 + 8 >> 2];
      c4[x3 + 12 >> 2] = c4[g3 + 12 >> 2];
      c4[x3 + 16 >> 2] = c4[g3 + 16 >> 2];
      c4[x3 + 20 >> 2] = c4[g3 + 20 >> 2];
      e6 = hb(a4, e6, f4, x3) | 0;
    }
    if (!(r6 | s5)) {
      y4 = e6;
      E2 = z2;
      return y4 | 0;
    }
    y4 = db(e6) | 0;
    E2 = z2;
    return y4 | 0;
  }
  function db(a4) {
    a4 = a4 | 0;
    return a4 | 0;
  }
  function eb(a4) {
    a4 = a4 | 0;
    switch (a4 << 16 >> 16) {
      case 1570: {
        a4 = 1628;
        break;
      }
      case 1571: {
        a4 = 1629;
        break;
      }
      case 1573: {
        a4 = 1630;
        break;
      }
      case 1575: {
        a4 = 1631;
        break;
      }
      default:
        a4 = 0;
    }
    return a4 | 0;
  }
  function fb(a4) {
    a4 = a4 | 0;
    return (a4 + -1587 & 65535) < 4 | 0;
  }
  function gb(a4) {
    a4 = a4 | 0;
    return (a4 + -1611 & 65535) < 8 | 0;
  }
  function hb(a4, d4, e6, f4) {
    a4 = a4 | 0;
    d4 = d4 | 0;
    e6 = e6 | 0;
    f4 = f4 | 0;
    var g3 = 0, h4 = 0, i5 = 0, j3 = 0, k3 = 0, l4 = 0, m3 = 0, n6 = 0;
    m3 = (d4 << 1) + 2 | 0;
    n6 = lb(m3) | 0;
    if (!n6) {
      c4[e6 >> 2] = 7;
      n6 = 0;
      return n6 | 0;
    }
    fc(n6 | 0, 0, m3 | 0) | 0;
    e6 = 0;
    h4 = 0;
    g3 = 0;
    while (1) {
      if ((g3 | 0) >= (d4 | 0))
        break;
      i5 = b3[a4 + (g3 << 1) >> 1] | 0;
      if (i5 << 16 >> 16 == -1) {
        e6 = e6 + 1 | 0;
        h4 = h4 + -1 | 0;
      } else
        b3[n6 + (h4 << 1) >> 1] = i5;
      h4 = h4 + 1 | 0;
      g3 = g3 + 1 | 0;
    }
    while (1) {
      if ((e6 | 0) <= -1)
        break;
      b3[n6 + (g3 << 1) >> 1] = 0;
      g3 = g3 + -1 | 0;
      e6 = e6 + -1 | 0;
    }
    pb(a4, n6, d4) | 0;
    if (c4[f4 + 4 >> 2] | 0) {
      e6 = ob(a4) | 0;
      if (!(c4[f4 + 12 >> 2] | 0)) {
        j3 = 0;
        k3 = 1;
        l4 = 15;
      }
    } else {
      j3 = 1;
      k3 = (c4[f4 + 12 >> 2] | 0) == 0;
      l4 = 15;
    }
    if ((l4 | 0) == 15) {
      fc(n6 | 0, 0, m3 | 0) | 0;
      e6 = d4;
      g3 = 0;
      i5 = d4;
      while (1) {
        if ((i5 | 0) <= -1)
          break;
        h4 = b3[a4 + (i5 << 1) >> 1] | 0;
        if (j3 & h4 << 16 >> 16 == -1 | k3 & h4 << 16 >> 16 == -2) {
          e6 = e6 + 1 | 0;
          g3 = g3 + 1 | 0;
        } else
          b3[n6 + (e6 << 1) >> 1] = h4;
        e6 = e6 + -1 | 0;
        i5 = i5 + -1 | 0;
      }
      e6 = 0;
      while (1) {
        if ((e6 | 0) >= (g3 | 0))
          break;
        b3[n6 + (e6 << 1) >> 1] = 32;
        e6 = e6 + 1 | 0;
      }
      pb(a4, n6, d4) | 0;
      e6 = d4;
    }
    k3 = (c4[f4 + 8 >> 2] | 0) == 0;
    f4 = (c4[f4 + 16 >> 2] | 0) == 0;
    j3 = f4 | k3 ^ 1;
    if (k3 | f4) {
      fc(n6 | 0, 0, m3 | 0) | 0;
      h4 = 0;
      e6 = 0;
      g3 = 0;
      while (1) {
        if ((g3 | 0) >= (d4 | 0))
          break;
        i5 = b3[a4 + (g3 << 1) >> 1] | 0;
        if (k3 & i5 << 16 >> 16 == -1 | j3 & i5 << 16 >> 16 == -2) {
          h4 = h4 + -1 | 0;
          e6 = e6 + 1 | 0;
        } else
          b3[n6 + (h4 << 1) >> 1] = i5;
        h4 = h4 + 1 | 0;
        g3 = g3 + 1 | 0;
      }
      while (1) {
        if ((e6 | 0) <= -1)
          break;
        b3[n6 + (g3 << 1) >> 1] = 32;
        g3 = g3 + -1 | 0;
        e6 = e6 + -1 | 0;
      }
      pb(a4, n6, d4) | 0;
      e6 = d4;
    }
    nb(n6);
    n6 = e6;
    return n6 | 0;
  }
  function ib(a4) {
    a4 = a4 | 0;
    switch (a4 << 16 >> 16) {
      case 1573:
      case 1571:
      case 1570: {
        a4 = 1;
        break;
      }
      default:
        a4 = a4 << 16 >> 16 == 1575 & 1;
    }
    return a4 | 0;
  }
  function jb(a4) {
    a4 = a4 | 0;
    return (a4 & -16) << 16 >> 16 == -400 | 0;
  }
  function kb(a4, b4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    return ((a4 | 0) > (b4 | 0) ? b4 : a4) | 0;
  }
  function lb(a4) {
    a4 = a4 | 0;
    if (!a4)
      a4 = 70336;
    else
      a4 = Ab(a4) | 0;
    return a4 | 0;
  }
  function mb(a4, b4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    do
      if ((a4 | 0) != 70336)
        if (!b4) {
          Bb(a4);
          a4 = 70336;
          break;
        } else {
          a4 = Cb(a4, b4) | 0;
          break;
        }
      else
        a4 = lb(b4) | 0;
    while (0);
    return a4 | 0;
  }
  function nb(a4) {
    a4 = a4 | 0;
    if ((a4 | 0) == 70336)
      return;
    Bb(a4);
    return;
  }
  function ob(a4) {
    a4 = a4 | 0;
    var c5 = 0;
    c5 = a4;
    while (1)
      if (!(b3[c5 >> 1] | 0))
        break;
      else
        c5 = c5 + 2 | 0;
    return c5 - a4 >> 1 | 0;
  }
  function pb(a4, b4, c5) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    c5 = c5 | 0;
    if ((c5 | 0) <= 0)
      return a4 | 0;
    ec(a4 | 0, b4 | 0, c5 << 1 | 0) | 0;
    return a4 | 0;
  }
  function qb(a4, d4, e6, f4) {
    a4 = a4 | 0;
    d4 = d4 | 0;
    e6 = e6 | 0;
    f4 = f4 | 0;
    do
      if (f4 | 0 ? !((e6 | 0) < 0 | (rb(c4[f4 >> 2] | 0) | 0) << 24 >> 24 == 0) : 0) {
        if ((e6 | 0) < (d4 | 0)) {
          b3[a4 + (e6 << 1) >> 1] = 0;
          if ((c4[f4 >> 2] | 0) != -124)
            break;
          c4[f4 >> 2] = 0;
          break;
        }
        if ((e6 | 0) == (d4 | 0)) {
          c4[f4 >> 2] = -124;
          break;
        } else {
          c4[f4 >> 2] = 15;
          break;
        }
      }
    while (0);
    return e6 | 0;
  }
  function rb(a4) {
    a4 = a4 | 0;
    return (a4 | 0) < 1 | 0;
  }
  function sb(a4) {
    a4 = a4 | 0;
    var c5 = 0;
    do
      if (a4 >>> 0 >= 55296) {
        if (a4 >>> 0 < 65536) {
          c5 = ((a4 | 0) < 56320 ? 320 : 0) + (a4 >>> 5) | 0;
          break;
        }
        if (a4 >>> 0 > 1114111) {
          a4 = 4596;
          a4 = 2512 + (a4 << 1) | 0;
          a4 = b3[a4 >> 1] | 0;
          a4 = a4 & 255;
          a4 = a4 & 31;
          return a4 | 0;
        } else {
          c5 = (a4 >>> 5 & 63) + (e5[2512 + ((a4 >>> 11) + 2080 << 1) >> 1] | 0) | 0;
          break;
        }
      } else
        c5 = a4 >>> 5;
    while (0);
    a4 = ((e5[2512 + (c5 << 1) >> 1] | 0) << 2) + (a4 & 31) | 0;
    a4 = 2512 + (a4 << 1) | 0;
    a4 = b3[a4 >> 1] | 0;
    a4 = a4 & 255;
    a4 = a4 & 31;
    return a4 | 0;
  }
  function tb(a4) {
    a4 = a4 | 0;
    var c5 = 0;
    do
      if (a4 >>> 0 >= 55296) {
        if (a4 >>> 0 < 65536) {
          c5 = ((a4 | 0) < 56320 ? 320 : 0) + (a4 >>> 5) | 0;
          break;
        }
        if (a4 >>> 0 > 1114111) {
          a4 = 3644;
          a4 = 45584 + (a4 << 1) | 0;
          a4 = b3[a4 >> 1] | 0;
          a4 = a4 & 31;
          a4 = a4 & 65535;
          return a4 | 0;
        } else {
          c5 = (a4 >>> 5 & 63) + (e5[45584 + ((a4 >>> 11) + 2080 << 1) >> 1] | 0) | 0;
          break;
        }
      } else
        c5 = a4 >>> 5;
    while (0);
    a4 = ((e5[45584 + (c5 << 1) >> 1] | 0) << 2) + (a4 & 31) | 0;
    a4 = 45584 + (a4 << 1) | 0;
    a4 = b3[a4 >> 1] | 0;
    a4 = a4 & 31;
    a4 = a4 & 65535;
    return a4 | 0;
  }
  function ub(a4) {
    a4 = a4 | 0;
    var c5 = 0;
    do
      if (a4 >>> 0 >= 55296) {
        if (a4 >>> 0 < 65536) {
          c5 = ((a4 | 0) < 56320 ? 320 : 0) + (a4 >>> 5) | 0;
          break;
        }
        if (a4 >>> 0 > 1114111) {
          c5 = 3644;
          c5 = 45584 + (c5 << 1) | 0;
          c5 = b3[c5 >> 1] | 0;
          a4 = vb(a4, c5) | 0;
          return a4 | 0;
        } else {
          c5 = (a4 >>> 5 & 63) + (e5[45584 + ((a4 >>> 11) + 2080 << 1) >> 1] | 0) | 0;
          break;
        }
      } else
        c5 = a4 >>> 5;
    while (0);
    c5 = ((e5[45584 + (c5 << 1) >> 1] | 0) << 2) + (a4 & 31) | 0;
    c5 = 45584 + (c5 << 1) | 0;
    c5 = b3[c5 >> 1] | 0;
    a4 = vb(a4, c5) | 0;
    return a4 | 0;
  }
  function vb(a4, b4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    var d4 = 0, e6 = 0;
    b4 = b4 << 16 >> 16 >> 13;
    if ((b4 | 0) != -4) {
      e6 = b4 + a4 | 0;
      return e6 | 0;
    }
    b4 = 0;
    while (1) {
      if (b4 >>> 0 >= 40) {
        b4 = 8;
        break;
      }
      e6 = c4[45424 + (b4 << 2) >> 2] | 0;
      d4 = e6 & 2097151;
      if ((d4 | 0) == (a4 | 0)) {
        b4 = 6;
        break;
      }
      if ((d4 | 0) > (a4 | 0)) {
        b4 = 8;
        break;
      } else
        b4 = b4 + 1 | 0;
    }
    if ((b4 | 0) == 6) {
      e6 = c4[45424 + (e6 >>> 21 << 2) >> 2] & 2097151;
      return e6 | 0;
    } else if ((b4 | 0) == 8)
      return a4 | 0;
    return 0;
  }
  function wb(a4) {
    a4 = a4 | 0;
    var c5 = 0, d4 = 0;
    do
      if (a4 >>> 0 >= 55296) {
        if (a4 >>> 0 < 65536) {
          c5 = ((a4 | 0) < 56320 ? 320 : 0) + (a4 >>> 5) | 0;
          d4 = 7;
          break;
        }
        if (a4 >>> 0 > 1114111)
          c5 = 3644;
        else {
          c5 = (a4 >>> 5 & 63) + (e5[45584 + ((a4 >>> 11) + 2080 << 1) >> 1] | 0) | 0;
          d4 = 7;
        }
      } else {
        c5 = a4 >>> 5;
        d4 = 7;
      }
    while (0);
    if ((d4 | 0) == 7)
      c5 = ((e5[45584 + (c5 << 1) >> 1] | 0) << 2) + (a4 & 31) | 0;
    return (b3[45584 + (c5 << 1) >> 1] & 768) >>> 8 | 0;
  }
  function xb(a4) {
    a4 = a4 | 0;
    var c5 = 0, d4 = 0;
    do
      if (a4 >>> 0 >= 55296) {
        if (a4 >>> 0 < 65536) {
          c5 = ((a4 | 0) < 56320 ? 320 : 0) + (a4 >>> 5) | 0;
          d4 = 7;
          break;
        }
        if (a4 >>> 0 > 1114111)
          c5 = 3644;
        else {
          c5 = (a4 >>> 5 & 63) + (e5[45584 + ((a4 >>> 11) + 2080 << 1) >> 1] | 0) | 0;
          d4 = 7;
        }
      } else {
        c5 = a4 >>> 5;
        d4 = 7;
      }
    while (0);
    if ((d4 | 0) == 7)
      c5 = ((e5[45584 + (c5 << 1) >> 1] | 0) << 2) + (a4 & 31) | 0;
    c5 = b3[45584 + (c5 << 1) >> 1] | 0;
    if (!(c5 & 768))
      return a4 | 0;
    a4 = vb(a4, c5) | 0;
    return a4 | 0;
  }
  function yb(a4) {
    a4 = a4 | 0;
    return ub(a4) | 0;
  }
  function zb(a4) {
    a4 = a4 | 0;
    return xb(a4) | 0;
  }
  function Ab(a4) {
    a4 = a4 | 0;
    var b4 = 0, d4 = 0, e6 = 0, f4 = 0, g3 = 0, h4 = 0, i5 = 0, j3 = 0, k3 = 0, l4 = 0, m3 = 0, n6 = 0, o5 = 0, p4 = 0, q2 = 0, r6 = 0, s5 = 0, t5 = 0;
    t5 = E2;
    E2 = E2 + 16 | 0;
    n6 = t5;
    do
      if (a4 >>> 0 < 245) {
        k3 = a4 >>> 0 < 11 ? 16 : a4 + 11 & -8;
        a4 = k3 >>> 3;
        m3 = c4[17594] | 0;
        d4 = m3 >>> a4;
        if (d4 & 3 | 0) {
          b4 = (d4 & 1 ^ 1) + a4 | 0;
          a4 = 70416 + (b4 << 1 << 2) | 0;
          d4 = a4 + 8 | 0;
          e6 = c4[d4 >> 2] | 0;
          f4 = e6 + 8 | 0;
          g3 = c4[f4 >> 2] | 0;
          if ((g3 | 0) == (a4 | 0))
            c4[17594] = m3 & ~(1 << b4);
          else {
            c4[g3 + 12 >> 2] = a4;
            c4[d4 >> 2] = g3;
          }
          s5 = b4 << 3;
          c4[e6 + 4 >> 2] = s5 | 3;
          s5 = e6 + s5 + 4 | 0;
          c4[s5 >> 2] = c4[s5 >> 2] | 1;
          s5 = f4;
          E2 = t5;
          return s5 | 0;
        }
        l4 = c4[17596] | 0;
        if (k3 >>> 0 > l4 >>> 0) {
          if (d4 | 0) {
            b4 = 2 << a4;
            b4 = d4 << a4 & (b4 | 0 - b4);
            b4 = (b4 & 0 - b4) + -1 | 0;
            i5 = b4 >>> 12 & 16;
            b4 = b4 >>> i5;
            d4 = b4 >>> 5 & 8;
            b4 = b4 >>> d4;
            g3 = b4 >>> 2 & 4;
            b4 = b4 >>> g3;
            a4 = b4 >>> 1 & 2;
            b4 = b4 >>> a4;
            e6 = b4 >>> 1 & 1;
            e6 = (d4 | i5 | g3 | a4 | e6) + (b4 >>> e6) | 0;
            b4 = 70416 + (e6 << 1 << 2) | 0;
            a4 = b4 + 8 | 0;
            g3 = c4[a4 >> 2] | 0;
            i5 = g3 + 8 | 0;
            d4 = c4[i5 >> 2] | 0;
            if ((d4 | 0) == (b4 | 0)) {
              a4 = m3 & ~(1 << e6);
              c4[17594] = a4;
            } else {
              c4[d4 + 12 >> 2] = b4;
              c4[a4 >> 2] = d4;
              a4 = m3;
            }
            s5 = e6 << 3;
            h4 = s5 - k3 | 0;
            c4[g3 + 4 >> 2] = k3 | 3;
            f4 = g3 + k3 | 0;
            c4[f4 + 4 >> 2] = h4 | 1;
            c4[g3 + s5 >> 2] = h4;
            if (l4 | 0) {
              e6 = c4[17599] | 0;
              b4 = l4 >>> 3;
              d4 = 70416 + (b4 << 1 << 2) | 0;
              b4 = 1 << b4;
              if (!(a4 & b4)) {
                c4[17594] = a4 | b4;
                b4 = d4;
                a4 = d4 + 8 | 0;
              } else {
                a4 = d4 + 8 | 0;
                b4 = c4[a4 >> 2] | 0;
              }
              c4[a4 >> 2] = e6;
              c4[b4 + 12 >> 2] = e6;
              c4[e6 + 8 >> 2] = b4;
              c4[e6 + 12 >> 2] = d4;
            }
            c4[17596] = h4;
            c4[17599] = f4;
            s5 = i5;
            E2 = t5;
            return s5 | 0;
          }
          g3 = c4[17595] | 0;
          if (g3) {
            d4 = (g3 & 0 - g3) + -1 | 0;
            f4 = d4 >>> 12 & 16;
            d4 = d4 >>> f4;
            e6 = d4 >>> 5 & 8;
            d4 = d4 >>> e6;
            h4 = d4 >>> 2 & 4;
            d4 = d4 >>> h4;
            i5 = d4 >>> 1 & 2;
            d4 = d4 >>> i5;
            j3 = d4 >>> 1 & 1;
            j3 = c4[70680 + ((e6 | f4 | h4 | i5 | j3) + (d4 >>> j3) << 2) >> 2] | 0;
            d4 = j3;
            i5 = j3;
            j3 = (c4[j3 + 4 >> 2] & -8) - k3 | 0;
            while (1) {
              a4 = c4[d4 + 16 >> 2] | 0;
              if (!a4) {
                a4 = c4[d4 + 20 >> 2] | 0;
                if (!a4)
                  break;
              }
              h4 = (c4[a4 + 4 >> 2] & -8) - k3 | 0;
              f4 = h4 >>> 0 < j3 >>> 0;
              d4 = a4;
              i5 = f4 ? a4 : i5;
              j3 = f4 ? h4 : j3;
            }
            h4 = i5 + k3 | 0;
            if (h4 >>> 0 > i5 >>> 0) {
              f4 = c4[i5 + 24 >> 2] | 0;
              b4 = c4[i5 + 12 >> 2] | 0;
              do
                if ((b4 | 0) == (i5 | 0)) {
                  a4 = i5 + 20 | 0;
                  b4 = c4[a4 >> 2] | 0;
                  if (!b4) {
                    a4 = i5 + 16 | 0;
                    b4 = c4[a4 >> 2] | 0;
                    if (!b4) {
                      d4 = 0;
                      break;
                    }
                  }
                  while (1) {
                    e6 = b4 + 20 | 0;
                    d4 = c4[e6 >> 2] | 0;
                    if (!d4) {
                      e6 = b4 + 16 | 0;
                      d4 = c4[e6 >> 2] | 0;
                      if (!d4)
                        break;
                      else {
                        b4 = d4;
                        a4 = e6;
                      }
                    } else {
                      b4 = d4;
                      a4 = e6;
                    }
                  }
                  c4[a4 >> 2] = 0;
                  d4 = b4;
                } else {
                  d4 = c4[i5 + 8 >> 2] | 0;
                  c4[d4 + 12 >> 2] = b4;
                  c4[b4 + 8 >> 2] = d4;
                  d4 = b4;
                }
              while (0);
              do
                if (f4 | 0) {
                  b4 = c4[i5 + 28 >> 2] | 0;
                  a4 = 70680 + (b4 << 2) | 0;
                  if ((i5 | 0) == (c4[a4 >> 2] | 0)) {
                    c4[a4 >> 2] = d4;
                    if (!d4) {
                      c4[17595] = g3 & ~(1 << b4);
                      break;
                    }
                  } else {
                    s5 = f4 + 16 | 0;
                    c4[((c4[s5 >> 2] | 0) == (i5 | 0) ? s5 : f4 + 20 | 0) >> 2] = d4;
                    if (!d4)
                      break;
                  }
                  c4[d4 + 24 >> 2] = f4;
                  b4 = c4[i5 + 16 >> 2] | 0;
                  if (b4 | 0) {
                    c4[d4 + 16 >> 2] = b4;
                    c4[b4 + 24 >> 2] = d4;
                  }
                  b4 = c4[i5 + 20 >> 2] | 0;
                  if (b4 | 0) {
                    c4[d4 + 20 >> 2] = b4;
                    c4[b4 + 24 >> 2] = d4;
                  }
                }
              while (0);
              if (j3 >>> 0 < 16) {
                s5 = j3 + k3 | 0;
                c4[i5 + 4 >> 2] = s5 | 3;
                s5 = i5 + s5 + 4 | 0;
                c4[s5 >> 2] = c4[s5 >> 2] | 1;
              } else {
                c4[i5 + 4 >> 2] = k3 | 3;
                c4[h4 + 4 >> 2] = j3 | 1;
                c4[h4 + j3 >> 2] = j3;
                if (l4 | 0) {
                  e6 = c4[17599] | 0;
                  b4 = l4 >>> 3;
                  d4 = 70416 + (b4 << 1 << 2) | 0;
                  b4 = 1 << b4;
                  if (!(b4 & m3)) {
                    c4[17594] = b4 | m3;
                    b4 = d4;
                    a4 = d4 + 8 | 0;
                  } else {
                    a4 = d4 + 8 | 0;
                    b4 = c4[a4 >> 2] | 0;
                  }
                  c4[a4 >> 2] = e6;
                  c4[b4 + 12 >> 2] = e6;
                  c4[e6 + 8 >> 2] = b4;
                  c4[e6 + 12 >> 2] = d4;
                }
                c4[17596] = j3;
                c4[17599] = h4;
              }
              s5 = i5 + 8 | 0;
              E2 = t5;
              return s5 | 0;
            } else
              m3 = k3;
          } else
            m3 = k3;
        } else
          m3 = k3;
      } else if (a4 >>> 0 <= 4294967231) {
        a4 = a4 + 11 | 0;
        k3 = a4 & -8;
        e6 = c4[17595] | 0;
        if (e6) {
          f4 = 0 - k3 | 0;
          a4 = a4 >>> 8;
          if (a4)
            if (k3 >>> 0 > 16777215)
              j3 = 31;
            else {
              m3 = (a4 + 1048320 | 0) >>> 16 & 8;
              r6 = a4 << m3;
              i5 = (r6 + 520192 | 0) >>> 16 & 4;
              r6 = r6 << i5;
              j3 = (r6 + 245760 | 0) >>> 16 & 2;
              j3 = 14 - (i5 | m3 | j3) + (r6 << j3 >>> 15) | 0;
              j3 = k3 >>> (j3 + 7 | 0) & 1 | j3 << 1;
            }
          else
            j3 = 0;
          d4 = c4[70680 + (j3 << 2) >> 2] | 0;
          a:
            do
              if (!d4) {
                d4 = 0;
                a4 = 0;
                r6 = 61;
              } else {
                a4 = 0;
                i5 = k3 << ((j3 | 0) == 31 ? 0 : 25 - (j3 >>> 1) | 0);
                g3 = 0;
                while (1) {
                  h4 = (c4[d4 + 4 >> 2] & -8) - k3 | 0;
                  if (h4 >>> 0 < f4 >>> 0)
                    if (!h4) {
                      a4 = d4;
                      f4 = 0;
                      r6 = 65;
                      break a;
                    } else {
                      a4 = d4;
                      f4 = h4;
                    }
                  r6 = c4[d4 + 20 >> 2] | 0;
                  d4 = c4[d4 + 16 + (i5 >>> 31 << 2) >> 2] | 0;
                  g3 = (r6 | 0) == 0 | (r6 | 0) == (d4 | 0) ? g3 : r6;
                  if (!d4) {
                    d4 = g3;
                    r6 = 61;
                    break;
                  } else
                    i5 = i5 << 1;
                }
              }
            while (0);
          if ((r6 | 0) == 61) {
            if ((d4 | 0) == 0 & (a4 | 0) == 0) {
              a4 = 2 << j3;
              a4 = (a4 | 0 - a4) & e6;
              if (!a4) {
                m3 = k3;
                break;
              }
              m3 = (a4 & 0 - a4) + -1 | 0;
              h4 = m3 >>> 12 & 16;
              m3 = m3 >>> h4;
              g3 = m3 >>> 5 & 8;
              m3 = m3 >>> g3;
              i5 = m3 >>> 2 & 4;
              m3 = m3 >>> i5;
              j3 = m3 >>> 1 & 2;
              m3 = m3 >>> j3;
              d4 = m3 >>> 1 & 1;
              a4 = 0;
              d4 = c4[70680 + ((g3 | h4 | i5 | j3 | d4) + (m3 >>> d4) << 2) >> 2] | 0;
            }
            if (!d4) {
              i5 = a4;
              h4 = f4;
            } else
              r6 = 65;
          }
          if ((r6 | 0) == 65) {
            g3 = d4;
            while (1) {
              m3 = (c4[g3 + 4 >> 2] & -8) - k3 | 0;
              d4 = m3 >>> 0 < f4 >>> 0;
              f4 = d4 ? m3 : f4;
              a4 = d4 ? g3 : a4;
              d4 = c4[g3 + 16 >> 2] | 0;
              if (!d4)
                d4 = c4[g3 + 20 >> 2] | 0;
              if (!d4) {
                i5 = a4;
                h4 = f4;
                break;
              } else
                g3 = d4;
            }
          }
          if (((i5 | 0) != 0 ? h4 >>> 0 < ((c4[17596] | 0) - k3 | 0) >>> 0 : 0) ? (l4 = i5 + k3 | 0, l4 >>> 0 > i5 >>> 0) : 0) {
            g3 = c4[i5 + 24 >> 2] | 0;
            b4 = c4[i5 + 12 >> 2] | 0;
            do
              if ((b4 | 0) == (i5 | 0)) {
                a4 = i5 + 20 | 0;
                b4 = c4[a4 >> 2] | 0;
                if (!b4) {
                  a4 = i5 + 16 | 0;
                  b4 = c4[a4 >> 2] | 0;
                  if (!b4) {
                    b4 = 0;
                    break;
                  }
                }
                while (1) {
                  f4 = b4 + 20 | 0;
                  d4 = c4[f4 >> 2] | 0;
                  if (!d4) {
                    f4 = b4 + 16 | 0;
                    d4 = c4[f4 >> 2] | 0;
                    if (!d4)
                      break;
                    else {
                      b4 = d4;
                      a4 = f4;
                    }
                  } else {
                    b4 = d4;
                    a4 = f4;
                  }
                }
                c4[a4 >> 2] = 0;
              } else {
                s5 = c4[i5 + 8 >> 2] | 0;
                c4[s5 + 12 >> 2] = b4;
                c4[b4 + 8 >> 2] = s5;
              }
            while (0);
            do
              if (g3) {
                a4 = c4[i5 + 28 >> 2] | 0;
                d4 = 70680 + (a4 << 2) | 0;
                if ((i5 | 0) == (c4[d4 >> 2] | 0)) {
                  c4[d4 >> 2] = b4;
                  if (!b4) {
                    e6 = e6 & ~(1 << a4);
                    c4[17595] = e6;
                    break;
                  }
                } else {
                  s5 = g3 + 16 | 0;
                  c4[((c4[s5 >> 2] | 0) == (i5 | 0) ? s5 : g3 + 20 | 0) >> 2] = b4;
                  if (!b4)
                    break;
                }
                c4[b4 + 24 >> 2] = g3;
                a4 = c4[i5 + 16 >> 2] | 0;
                if (a4 | 0) {
                  c4[b4 + 16 >> 2] = a4;
                  c4[a4 + 24 >> 2] = b4;
                }
                a4 = c4[i5 + 20 >> 2] | 0;
                if (a4) {
                  c4[b4 + 20 >> 2] = a4;
                  c4[a4 + 24 >> 2] = b4;
                }
              }
            while (0);
            b:
              do
                if (h4 >>> 0 < 16) {
                  s5 = h4 + k3 | 0;
                  c4[i5 + 4 >> 2] = s5 | 3;
                  s5 = i5 + s5 + 4 | 0;
                  c4[s5 >> 2] = c4[s5 >> 2] | 1;
                } else {
                  c4[i5 + 4 >> 2] = k3 | 3;
                  c4[l4 + 4 >> 2] = h4 | 1;
                  c4[l4 + h4 >> 2] = h4;
                  b4 = h4 >>> 3;
                  if (h4 >>> 0 < 256) {
                    d4 = 70416 + (b4 << 1 << 2) | 0;
                    a4 = c4[17594] | 0;
                    b4 = 1 << b4;
                    if (!(a4 & b4)) {
                      c4[17594] = a4 | b4;
                      b4 = d4;
                      a4 = d4 + 8 | 0;
                    } else {
                      a4 = d4 + 8 | 0;
                      b4 = c4[a4 >> 2] | 0;
                    }
                    c4[a4 >> 2] = l4;
                    c4[b4 + 12 >> 2] = l4;
                    c4[l4 + 8 >> 2] = b4;
                    c4[l4 + 12 >> 2] = d4;
                    break;
                  }
                  b4 = h4 >>> 8;
                  if (b4)
                    if (h4 >>> 0 > 16777215)
                      d4 = 31;
                    else {
                      r6 = (b4 + 1048320 | 0) >>> 16 & 8;
                      s5 = b4 << r6;
                      q2 = (s5 + 520192 | 0) >>> 16 & 4;
                      s5 = s5 << q2;
                      d4 = (s5 + 245760 | 0) >>> 16 & 2;
                      d4 = 14 - (q2 | r6 | d4) + (s5 << d4 >>> 15) | 0;
                      d4 = h4 >>> (d4 + 7 | 0) & 1 | d4 << 1;
                    }
                  else
                    d4 = 0;
                  b4 = 70680 + (d4 << 2) | 0;
                  c4[l4 + 28 >> 2] = d4;
                  a4 = l4 + 16 | 0;
                  c4[a4 + 4 >> 2] = 0;
                  c4[a4 >> 2] = 0;
                  a4 = 1 << d4;
                  if (!(a4 & e6)) {
                    c4[17595] = a4 | e6;
                    c4[b4 >> 2] = l4;
                    c4[l4 + 24 >> 2] = b4;
                    c4[l4 + 12 >> 2] = l4;
                    c4[l4 + 8 >> 2] = l4;
                    break;
                  }
                  b4 = c4[b4 >> 2] | 0;
                  c:
                    do
                      if ((c4[b4 + 4 >> 2] & -8 | 0) != (h4 | 0)) {
                        e6 = h4 << ((d4 | 0) == 31 ? 0 : 25 - (d4 >>> 1) | 0);
                        while (1) {
                          d4 = b4 + 16 + (e6 >>> 31 << 2) | 0;
                          a4 = c4[d4 >> 2] | 0;
                          if (!a4)
                            break;
                          if ((c4[a4 + 4 >> 2] & -8 | 0) == (h4 | 0)) {
                            b4 = a4;
                            break c;
                          } else {
                            e6 = e6 << 1;
                            b4 = a4;
                          }
                        }
                        c4[d4 >> 2] = l4;
                        c4[l4 + 24 >> 2] = b4;
                        c4[l4 + 12 >> 2] = l4;
                        c4[l4 + 8 >> 2] = l4;
                        break b;
                      }
                    while (0);
                  r6 = b4 + 8 | 0;
                  s5 = c4[r6 >> 2] | 0;
                  c4[s5 + 12 >> 2] = l4;
                  c4[r6 >> 2] = l4;
                  c4[l4 + 8 >> 2] = s5;
                  c4[l4 + 12 >> 2] = b4;
                  c4[l4 + 24 >> 2] = 0;
                }
              while (0);
            s5 = i5 + 8 | 0;
            E2 = t5;
            return s5 | 0;
          } else
            m3 = k3;
        } else
          m3 = k3;
      } else
        m3 = -1;
    while (0);
    d4 = c4[17596] | 0;
    if (d4 >>> 0 >= m3 >>> 0) {
      b4 = d4 - m3 | 0;
      a4 = c4[17599] | 0;
      if (b4 >>> 0 > 15) {
        s5 = a4 + m3 | 0;
        c4[17599] = s5;
        c4[17596] = b4;
        c4[s5 + 4 >> 2] = b4 | 1;
        c4[a4 + d4 >> 2] = b4;
        c4[a4 + 4 >> 2] = m3 | 3;
      } else {
        c4[17596] = 0;
        c4[17599] = 0;
        c4[a4 + 4 >> 2] = d4 | 3;
        s5 = a4 + d4 + 4 | 0;
        c4[s5 >> 2] = c4[s5 >> 2] | 1;
      }
      s5 = a4 + 8 | 0;
      E2 = t5;
      return s5 | 0;
    }
    h4 = c4[17597] | 0;
    if (h4 >>> 0 > m3 >>> 0) {
      q2 = h4 - m3 | 0;
      c4[17597] = q2;
      s5 = c4[17600] | 0;
      r6 = s5 + m3 | 0;
      c4[17600] = r6;
      c4[r6 + 4 >> 2] = q2 | 1;
      c4[s5 + 4 >> 2] = m3 | 3;
      s5 = s5 + 8 | 0;
      E2 = t5;
      return s5 | 0;
    }
    if (!(c4[17712] | 0)) {
      c4[17714] = 4096;
      c4[17713] = 4096;
      c4[17715] = -1;
      c4[17716] = -1;
      c4[17717] = 0;
      c4[17705] = 0;
      c4[17712] = n6 & -16 ^ 1431655768;
      a4 = 4096;
    } else
      a4 = c4[17714] | 0;
    i5 = m3 + 48 | 0;
    j3 = m3 + 47 | 0;
    g3 = a4 + j3 | 0;
    f4 = 0 - a4 | 0;
    k3 = g3 & f4;
    if (k3 >>> 0 <= m3 >>> 0) {
      s5 = 0;
      E2 = t5;
      return s5 | 0;
    }
    a4 = c4[17704] | 0;
    if (a4 | 0 ? (l4 = c4[17702] | 0, n6 = l4 + k3 | 0, n6 >>> 0 <= l4 >>> 0 | n6 >>> 0 > a4 >>> 0) : 0) {
      s5 = 0;
      E2 = t5;
      return s5 | 0;
    }
    d:
      do
        if (!(c4[17705] & 4)) {
          e6 = c4[17600] | 0;
          e:
            do
              if (e6) {
                a4 = 70824;
                while (1) {
                  d4 = c4[a4 >> 2] | 0;
                  if (d4 >>> 0 <= e6 >>> 0 ? (q2 = a4 + 4 | 0, (d4 + (c4[q2 >> 2] | 0) | 0) >>> 0 > e6 >>> 0) : 0)
                    break;
                  a4 = c4[a4 + 8 >> 2] | 0;
                  if (!a4) {
                    r6 = 128;
                    break e;
                  }
                }
                b4 = g3 - h4 & f4;
                if (b4 >>> 0 < 2147483647) {
                  e6 = gc(b4 | 0) | 0;
                  if ((e6 | 0) == ((c4[a4 >> 2] | 0) + (c4[q2 >> 2] | 0) | 0)) {
                    if ((e6 | 0) != (-1 | 0))
                      break d;
                  } else
                    r6 = 136;
                } else
                  b4 = 0;
              } else
                r6 = 128;
            while (0);
          do
            if ((r6 | 0) == 128) {
              a4 = gc(0) | 0;
              if ((a4 | 0) != (-1 | 0) ? (b4 = a4, o5 = c4[17713] | 0, p4 = o5 + -1 | 0, b4 = ((p4 & b4 | 0) == 0 ? 0 : (p4 + b4 & 0 - o5) - b4 | 0) + k3 | 0, o5 = c4[17702] | 0, p4 = b4 + o5 | 0, b4 >>> 0 > m3 >>> 0 & b4 >>> 0 < 2147483647) : 0) {
                q2 = c4[17704] | 0;
                if (q2 | 0 ? p4 >>> 0 <= o5 >>> 0 | p4 >>> 0 > q2 >>> 0 : 0) {
                  b4 = 0;
                  break;
                }
                e6 = gc(b4 | 0) | 0;
                if ((e6 | 0) == (a4 | 0)) {
                  e6 = a4;
                  break d;
                } else
                  r6 = 136;
              } else
                b4 = 0;
            }
          while (0);
          do
            if ((r6 | 0) == 136) {
              d4 = 0 - b4 | 0;
              if (!(i5 >>> 0 > b4 >>> 0 & (b4 >>> 0 < 2147483647 & (e6 | 0) != (-1 | 0))))
                if ((e6 | 0) == (-1 | 0)) {
                  b4 = 0;
                  break;
                } else
                  break d;
              a4 = c4[17714] | 0;
              a4 = j3 - b4 + a4 & 0 - a4;
              if (a4 >>> 0 >= 2147483647)
                break d;
              if ((gc(a4 | 0) | 0) == (-1 | 0)) {
                gc(d4 | 0) | 0;
                b4 = 0;
                break;
              } else {
                b4 = a4 + b4 | 0;
                break d;
              }
            }
          while (0);
          c4[17705] = c4[17705] | 4;
          r6 = 143;
        } else {
          b4 = 0;
          r6 = 143;
        }
      while (0);
    if ((r6 | 0) == 143) {
      if (k3 >>> 0 >= 2147483647) {
        s5 = 0;
        E2 = t5;
        return s5 | 0;
      }
      e6 = gc(k3 | 0) | 0;
      q2 = gc(0) | 0;
      a4 = q2 - e6 | 0;
      d4 = a4 >>> 0 > (m3 + 40 | 0) >>> 0;
      if ((e6 | 0) == (-1 | 0) | d4 ^ 1 | e6 >>> 0 < q2 >>> 0 & ((e6 | 0) != (-1 | 0) & (q2 | 0) != (-1 | 0)) ^ 1) {
        s5 = 0;
        E2 = t5;
        return s5 | 0;
      } else
        b4 = d4 ? a4 : b4;
    }
    a4 = (c4[17702] | 0) + b4 | 0;
    c4[17702] = a4;
    if (a4 >>> 0 > (c4[17703] | 0) >>> 0)
      c4[17703] = a4;
    j3 = c4[17600] | 0;
    f:
      do
        if (j3) {
          a4 = 70824;
          while (1) {
            d4 = c4[a4 >> 2] | 0;
            f4 = a4 + 4 | 0;
            g3 = c4[f4 >> 2] | 0;
            if ((e6 | 0) == (d4 + g3 | 0)) {
              r6 = 154;
              break;
            }
            h4 = c4[a4 + 8 >> 2] | 0;
            if (!h4)
              break;
            else
              a4 = h4;
          }
          if (((r6 | 0) == 154 ? (c4[a4 + 12 >> 2] & 8 | 0) == 0 : 0) ? e6 >>> 0 > j3 >>> 0 & d4 >>> 0 <= j3 >>> 0 : 0) {
            c4[f4 >> 2] = g3 + b4;
            s5 = (c4[17597] | 0) + b4 | 0;
            q2 = j3 + 8 | 0;
            q2 = (q2 & 7 | 0) == 0 ? 0 : 0 - q2 & 7;
            r6 = j3 + q2 | 0;
            q2 = s5 - q2 | 0;
            c4[17600] = r6;
            c4[17597] = q2;
            c4[r6 + 4 >> 2] = q2 | 1;
            c4[j3 + s5 + 4 >> 2] = 40;
            c4[17601] = c4[17716];
            break;
          }
          if (e6 >>> 0 < (c4[17598] | 0) >>> 0)
            c4[17598] = e6;
          f4 = e6 + b4 | 0;
          a4 = 70824;
          while (1) {
            if ((c4[a4 >> 2] | 0) == (f4 | 0)) {
              r6 = 162;
              break;
            }
            d4 = c4[a4 + 8 >> 2] | 0;
            if (!d4)
              break;
            else
              a4 = d4;
          }
          if ((r6 | 0) == 162 ? (c4[a4 + 12 >> 2] & 8 | 0) == 0 : 0) {
            c4[a4 >> 2] = e6;
            l4 = a4 + 4 | 0;
            c4[l4 >> 2] = (c4[l4 >> 2] | 0) + b4;
            l4 = e6 + 8 | 0;
            l4 = e6 + ((l4 & 7 | 0) == 0 ? 0 : 0 - l4 & 7) | 0;
            b4 = f4 + 8 | 0;
            b4 = f4 + ((b4 & 7 | 0) == 0 ? 0 : 0 - b4 & 7) | 0;
            k3 = l4 + m3 | 0;
            i5 = b4 - l4 - m3 | 0;
            c4[l4 + 4 >> 2] = m3 | 3;
            g:
              do
                if ((j3 | 0) == (b4 | 0)) {
                  s5 = (c4[17597] | 0) + i5 | 0;
                  c4[17597] = s5;
                  c4[17600] = k3;
                  c4[k3 + 4 >> 2] = s5 | 1;
                } else {
                  if ((c4[17599] | 0) == (b4 | 0)) {
                    s5 = (c4[17596] | 0) + i5 | 0;
                    c4[17596] = s5;
                    c4[17599] = k3;
                    c4[k3 + 4 >> 2] = s5 | 1;
                    c4[k3 + s5 >> 2] = s5;
                    break;
                  }
                  a4 = c4[b4 + 4 >> 2] | 0;
                  if ((a4 & 3 | 0) == 1) {
                    h4 = a4 & -8;
                    e6 = a4 >>> 3;
                    h:
                      do
                        if (a4 >>> 0 < 256) {
                          a4 = c4[b4 + 8 >> 2] | 0;
                          d4 = c4[b4 + 12 >> 2] | 0;
                          if ((d4 | 0) == (a4 | 0)) {
                            c4[17594] = c4[17594] & ~(1 << e6);
                            break;
                          } else {
                            c4[a4 + 12 >> 2] = d4;
                            c4[d4 + 8 >> 2] = a4;
                            break;
                          }
                        } else {
                          g3 = c4[b4 + 24 >> 2] | 0;
                          a4 = c4[b4 + 12 >> 2] | 0;
                          do
                            if ((a4 | 0) == (b4 | 0)) {
                              d4 = b4 + 16 | 0;
                              e6 = d4 + 4 | 0;
                              a4 = c4[e6 >> 2] | 0;
                              if (!a4) {
                                a4 = c4[d4 >> 2] | 0;
                                if (!a4) {
                                  a4 = 0;
                                  break;
                                }
                              } else
                                d4 = e6;
                              while (1) {
                                f4 = a4 + 20 | 0;
                                e6 = c4[f4 >> 2] | 0;
                                if (!e6) {
                                  f4 = a4 + 16 | 0;
                                  e6 = c4[f4 >> 2] | 0;
                                  if (!e6)
                                    break;
                                  else {
                                    a4 = e6;
                                    d4 = f4;
                                  }
                                } else {
                                  a4 = e6;
                                  d4 = f4;
                                }
                              }
                              c4[d4 >> 2] = 0;
                            } else {
                              s5 = c4[b4 + 8 >> 2] | 0;
                              c4[s5 + 12 >> 2] = a4;
                              c4[a4 + 8 >> 2] = s5;
                            }
                          while (0);
                          if (!g3)
                            break;
                          d4 = c4[b4 + 28 >> 2] | 0;
                          e6 = 70680 + (d4 << 2) | 0;
                          do
                            if ((c4[e6 >> 2] | 0) != (b4 | 0)) {
                              s5 = g3 + 16 | 0;
                              c4[((c4[s5 >> 2] | 0) == (b4 | 0) ? s5 : g3 + 20 | 0) >> 2] = a4;
                              if (!a4)
                                break h;
                            } else {
                              c4[e6 >> 2] = a4;
                              if (a4 | 0)
                                break;
                              c4[17595] = c4[17595] & ~(1 << d4);
                              break h;
                            }
                          while (0);
                          c4[a4 + 24 >> 2] = g3;
                          d4 = b4 + 16 | 0;
                          e6 = c4[d4 >> 2] | 0;
                          if (e6 | 0) {
                            c4[a4 + 16 >> 2] = e6;
                            c4[e6 + 24 >> 2] = a4;
                          }
                          d4 = c4[d4 + 4 >> 2] | 0;
                          if (!d4)
                            break;
                          c4[a4 + 20 >> 2] = d4;
                          c4[d4 + 24 >> 2] = a4;
                        }
                      while (0);
                    b4 = b4 + h4 | 0;
                    f4 = h4 + i5 | 0;
                  } else
                    f4 = i5;
                  b4 = b4 + 4 | 0;
                  c4[b4 >> 2] = c4[b4 >> 2] & -2;
                  c4[k3 + 4 >> 2] = f4 | 1;
                  c4[k3 + f4 >> 2] = f4;
                  b4 = f4 >>> 3;
                  if (f4 >>> 0 < 256) {
                    d4 = 70416 + (b4 << 1 << 2) | 0;
                    a4 = c4[17594] | 0;
                    b4 = 1 << b4;
                    if (!(a4 & b4)) {
                      c4[17594] = a4 | b4;
                      b4 = d4;
                      a4 = d4 + 8 | 0;
                    } else {
                      a4 = d4 + 8 | 0;
                      b4 = c4[a4 >> 2] | 0;
                    }
                    c4[a4 >> 2] = k3;
                    c4[b4 + 12 >> 2] = k3;
                    c4[k3 + 8 >> 2] = b4;
                    c4[k3 + 12 >> 2] = d4;
                    break;
                  }
                  b4 = f4 >>> 8;
                  do
                    if (!b4)
                      e6 = 0;
                    else {
                      if (f4 >>> 0 > 16777215) {
                        e6 = 31;
                        break;
                      }
                      r6 = (b4 + 1048320 | 0) >>> 16 & 8;
                      s5 = b4 << r6;
                      q2 = (s5 + 520192 | 0) >>> 16 & 4;
                      s5 = s5 << q2;
                      e6 = (s5 + 245760 | 0) >>> 16 & 2;
                      e6 = 14 - (q2 | r6 | e6) + (s5 << e6 >>> 15) | 0;
                      e6 = f4 >>> (e6 + 7 | 0) & 1 | e6 << 1;
                    }
                  while (0);
                  b4 = 70680 + (e6 << 2) | 0;
                  c4[k3 + 28 >> 2] = e6;
                  a4 = k3 + 16 | 0;
                  c4[a4 + 4 >> 2] = 0;
                  c4[a4 >> 2] = 0;
                  a4 = c4[17595] | 0;
                  d4 = 1 << e6;
                  if (!(a4 & d4)) {
                    c4[17595] = a4 | d4;
                    c4[b4 >> 2] = k3;
                    c4[k3 + 24 >> 2] = b4;
                    c4[k3 + 12 >> 2] = k3;
                    c4[k3 + 8 >> 2] = k3;
                    break;
                  }
                  b4 = c4[b4 >> 2] | 0;
                  i:
                    do
                      if ((c4[b4 + 4 >> 2] & -8 | 0) != (f4 | 0)) {
                        e6 = f4 << ((e6 | 0) == 31 ? 0 : 25 - (e6 >>> 1) | 0);
                        while (1) {
                          d4 = b4 + 16 + (e6 >>> 31 << 2) | 0;
                          a4 = c4[d4 >> 2] | 0;
                          if (!a4)
                            break;
                          if ((c4[a4 + 4 >> 2] & -8 | 0) == (f4 | 0)) {
                            b4 = a4;
                            break i;
                          } else {
                            e6 = e6 << 1;
                            b4 = a4;
                          }
                        }
                        c4[d4 >> 2] = k3;
                        c4[k3 + 24 >> 2] = b4;
                        c4[k3 + 12 >> 2] = k3;
                        c4[k3 + 8 >> 2] = k3;
                        break g;
                      }
                    while (0);
                  r6 = b4 + 8 | 0;
                  s5 = c4[r6 >> 2] | 0;
                  c4[s5 + 12 >> 2] = k3;
                  c4[r6 >> 2] = k3;
                  c4[k3 + 8 >> 2] = s5;
                  c4[k3 + 12 >> 2] = b4;
                  c4[k3 + 24 >> 2] = 0;
                }
              while (0);
            s5 = l4 + 8 | 0;
            E2 = t5;
            return s5 | 0;
          }
          a4 = 70824;
          while (1) {
            d4 = c4[a4 >> 2] | 0;
            if (d4 >>> 0 <= j3 >>> 0 ? (s5 = d4 + (c4[a4 + 4 >> 2] | 0) | 0, s5 >>> 0 > j3 >>> 0) : 0)
              break;
            a4 = c4[a4 + 8 >> 2] | 0;
          }
          f4 = s5 + -47 | 0;
          a4 = f4 + 8 | 0;
          a4 = f4 + ((a4 & 7 | 0) == 0 ? 0 : 0 - a4 & 7) | 0;
          f4 = j3 + 16 | 0;
          a4 = a4 >>> 0 < f4 >>> 0 ? j3 : a4;
          r6 = a4 + 8 | 0;
          d4 = b4 + -40 | 0;
          p4 = e6 + 8 | 0;
          p4 = (p4 & 7 | 0) == 0 ? 0 : 0 - p4 & 7;
          q2 = e6 + p4 | 0;
          p4 = d4 - p4 | 0;
          c4[17600] = q2;
          c4[17597] = p4;
          c4[q2 + 4 >> 2] = p4 | 1;
          c4[e6 + d4 + 4 >> 2] = 40;
          c4[17601] = c4[17716];
          d4 = a4 + 4 | 0;
          c4[d4 >> 2] = 27;
          c4[r6 >> 2] = c4[17706];
          c4[r6 + 4 >> 2] = c4[17707];
          c4[r6 + 8 >> 2] = c4[17708];
          c4[r6 + 12 >> 2] = c4[17709];
          c4[17706] = e6;
          c4[17707] = b4;
          c4[17709] = 0;
          c4[17708] = r6;
          b4 = a4 + 24 | 0;
          do {
            r6 = b4;
            b4 = b4 + 4 | 0;
            c4[b4 >> 2] = 7;
          } while ((r6 + 8 | 0) >>> 0 < s5 >>> 0);
          if ((a4 | 0) != (j3 | 0)) {
            g3 = a4 - j3 | 0;
            c4[d4 >> 2] = c4[d4 >> 2] & -2;
            c4[j3 + 4 >> 2] = g3 | 1;
            c4[a4 >> 2] = g3;
            b4 = g3 >>> 3;
            if (g3 >>> 0 < 256) {
              d4 = 70416 + (b4 << 1 << 2) | 0;
              a4 = c4[17594] | 0;
              b4 = 1 << b4;
              if (!(a4 & b4)) {
                c4[17594] = a4 | b4;
                b4 = d4;
                a4 = d4 + 8 | 0;
              } else {
                a4 = d4 + 8 | 0;
                b4 = c4[a4 >> 2] | 0;
              }
              c4[a4 >> 2] = j3;
              c4[b4 + 12 >> 2] = j3;
              c4[j3 + 8 >> 2] = b4;
              c4[j3 + 12 >> 2] = d4;
              break;
            }
            b4 = g3 >>> 8;
            if (b4)
              if (g3 >>> 0 > 16777215)
                e6 = 31;
              else {
                r6 = (b4 + 1048320 | 0) >>> 16 & 8;
                s5 = b4 << r6;
                q2 = (s5 + 520192 | 0) >>> 16 & 4;
                s5 = s5 << q2;
                e6 = (s5 + 245760 | 0) >>> 16 & 2;
                e6 = 14 - (q2 | r6 | e6) + (s5 << e6 >>> 15) | 0;
                e6 = g3 >>> (e6 + 7 | 0) & 1 | e6 << 1;
              }
            else
              e6 = 0;
            d4 = 70680 + (e6 << 2) | 0;
            c4[j3 + 28 >> 2] = e6;
            c4[j3 + 20 >> 2] = 0;
            c4[f4 >> 2] = 0;
            b4 = c4[17595] | 0;
            a4 = 1 << e6;
            if (!(b4 & a4)) {
              c4[17595] = b4 | a4;
              c4[d4 >> 2] = j3;
              c4[j3 + 24 >> 2] = d4;
              c4[j3 + 12 >> 2] = j3;
              c4[j3 + 8 >> 2] = j3;
              break;
            }
            b4 = c4[d4 >> 2] | 0;
            j:
              do
                if ((c4[b4 + 4 >> 2] & -8 | 0) != (g3 | 0)) {
                  e6 = g3 << ((e6 | 0) == 31 ? 0 : 25 - (e6 >>> 1) | 0);
                  while (1) {
                    d4 = b4 + 16 + (e6 >>> 31 << 2) | 0;
                    a4 = c4[d4 >> 2] | 0;
                    if (!a4)
                      break;
                    if ((c4[a4 + 4 >> 2] & -8 | 0) == (g3 | 0)) {
                      b4 = a4;
                      break j;
                    } else {
                      e6 = e6 << 1;
                      b4 = a4;
                    }
                  }
                  c4[d4 >> 2] = j3;
                  c4[j3 + 24 >> 2] = b4;
                  c4[j3 + 12 >> 2] = j3;
                  c4[j3 + 8 >> 2] = j3;
                  break f;
                }
              while (0);
            r6 = b4 + 8 | 0;
            s5 = c4[r6 >> 2] | 0;
            c4[s5 + 12 >> 2] = j3;
            c4[r6 >> 2] = j3;
            c4[j3 + 8 >> 2] = s5;
            c4[j3 + 12 >> 2] = b4;
            c4[j3 + 24 >> 2] = 0;
          }
        } else {
          s5 = c4[17598] | 0;
          if ((s5 | 0) == 0 | e6 >>> 0 < s5 >>> 0)
            c4[17598] = e6;
          c4[17706] = e6;
          c4[17707] = b4;
          c4[17709] = 0;
          c4[17603] = c4[17712];
          c4[17602] = -1;
          c4[17607] = 70416;
          c4[17606] = 70416;
          c4[17609] = 70424;
          c4[17608] = 70424;
          c4[17611] = 70432;
          c4[17610] = 70432;
          c4[17613] = 70440;
          c4[17612] = 70440;
          c4[17615] = 70448;
          c4[17614] = 70448;
          c4[17617] = 70456;
          c4[17616] = 70456;
          c4[17619] = 70464;
          c4[17618] = 70464;
          c4[17621] = 70472;
          c4[17620] = 70472;
          c4[17623] = 70480;
          c4[17622] = 70480;
          c4[17625] = 70488;
          c4[17624] = 70488;
          c4[17627] = 70496;
          c4[17626] = 70496;
          c4[17629] = 70504;
          c4[17628] = 70504;
          c4[17631] = 70512;
          c4[17630] = 70512;
          c4[17633] = 70520;
          c4[17632] = 70520;
          c4[17635] = 70528;
          c4[17634] = 70528;
          c4[17637] = 70536;
          c4[17636] = 70536;
          c4[17639] = 70544;
          c4[17638] = 70544;
          c4[17641] = 70552;
          c4[17640] = 70552;
          c4[17643] = 70560;
          c4[17642] = 70560;
          c4[17645] = 70568;
          c4[17644] = 70568;
          c4[17647] = 70576;
          c4[17646] = 70576;
          c4[17649] = 70584;
          c4[17648] = 70584;
          c4[17651] = 70592;
          c4[17650] = 70592;
          c4[17653] = 70600;
          c4[17652] = 70600;
          c4[17655] = 70608;
          c4[17654] = 70608;
          c4[17657] = 70616;
          c4[17656] = 70616;
          c4[17659] = 70624;
          c4[17658] = 70624;
          c4[17661] = 70632;
          c4[17660] = 70632;
          c4[17663] = 70640;
          c4[17662] = 70640;
          c4[17665] = 70648;
          c4[17664] = 70648;
          c4[17667] = 70656;
          c4[17666] = 70656;
          c4[17669] = 70664;
          c4[17668] = 70664;
          s5 = b4 + -40 | 0;
          q2 = e6 + 8 | 0;
          q2 = (q2 & 7 | 0) == 0 ? 0 : 0 - q2 & 7;
          r6 = e6 + q2 | 0;
          q2 = s5 - q2 | 0;
          c4[17600] = r6;
          c4[17597] = q2;
          c4[r6 + 4 >> 2] = q2 | 1;
          c4[e6 + s5 + 4 >> 2] = 40;
          c4[17601] = c4[17716];
        }
      while (0);
    b4 = c4[17597] | 0;
    if (b4 >>> 0 <= m3 >>> 0) {
      s5 = 0;
      E2 = t5;
      return s5 | 0;
    }
    q2 = b4 - m3 | 0;
    c4[17597] = q2;
    s5 = c4[17600] | 0;
    r6 = s5 + m3 | 0;
    c4[17600] = r6;
    c4[r6 + 4 >> 2] = q2 | 1;
    c4[s5 + 4 >> 2] = m3 | 3;
    s5 = s5 + 8 | 0;
    E2 = t5;
    return s5 | 0;
  }
  function Bb(a4) {
    a4 = a4 | 0;
    var b4 = 0, d4 = 0, e6 = 0, f4 = 0, g3 = 0, h4 = 0, i5 = 0, j3 = 0;
    if (!a4)
      return;
    d4 = a4 + -8 | 0;
    f4 = c4[17598] | 0;
    a4 = c4[a4 + -4 >> 2] | 0;
    b4 = a4 & -8;
    j3 = d4 + b4 | 0;
    do
      if (!(a4 & 1)) {
        e6 = c4[d4 >> 2] | 0;
        if (!(a4 & 3))
          return;
        h4 = d4 + (0 - e6) | 0;
        g3 = e6 + b4 | 0;
        if (h4 >>> 0 < f4 >>> 0)
          return;
        if ((c4[17599] | 0) == (h4 | 0)) {
          a4 = j3 + 4 | 0;
          b4 = c4[a4 >> 2] | 0;
          if ((b4 & 3 | 0) != 3) {
            i5 = h4;
            b4 = g3;
            break;
          }
          c4[17596] = g3;
          c4[a4 >> 2] = b4 & -2;
          c4[h4 + 4 >> 2] = g3 | 1;
          c4[h4 + g3 >> 2] = g3;
          return;
        }
        d4 = e6 >>> 3;
        if (e6 >>> 0 < 256) {
          a4 = c4[h4 + 8 >> 2] | 0;
          b4 = c4[h4 + 12 >> 2] | 0;
          if ((b4 | 0) == (a4 | 0)) {
            c4[17594] = c4[17594] & ~(1 << d4);
            i5 = h4;
            b4 = g3;
            break;
          } else {
            c4[a4 + 12 >> 2] = b4;
            c4[b4 + 8 >> 2] = a4;
            i5 = h4;
            b4 = g3;
            break;
          }
        }
        f4 = c4[h4 + 24 >> 2] | 0;
        a4 = c4[h4 + 12 >> 2] | 0;
        do
          if ((a4 | 0) == (h4 | 0)) {
            b4 = h4 + 16 | 0;
            d4 = b4 + 4 | 0;
            a4 = c4[d4 >> 2] | 0;
            if (!a4) {
              a4 = c4[b4 >> 2] | 0;
              if (!a4) {
                a4 = 0;
                break;
              }
            } else
              b4 = d4;
            while (1) {
              e6 = a4 + 20 | 0;
              d4 = c4[e6 >> 2] | 0;
              if (!d4) {
                e6 = a4 + 16 | 0;
                d4 = c4[e6 >> 2] | 0;
                if (!d4)
                  break;
                else {
                  a4 = d4;
                  b4 = e6;
                }
              } else {
                a4 = d4;
                b4 = e6;
              }
            }
            c4[b4 >> 2] = 0;
          } else {
            i5 = c4[h4 + 8 >> 2] | 0;
            c4[i5 + 12 >> 2] = a4;
            c4[a4 + 8 >> 2] = i5;
          }
        while (0);
        if (f4) {
          b4 = c4[h4 + 28 >> 2] | 0;
          d4 = 70680 + (b4 << 2) | 0;
          if ((c4[d4 >> 2] | 0) == (h4 | 0)) {
            c4[d4 >> 2] = a4;
            if (!a4) {
              c4[17595] = c4[17595] & ~(1 << b4);
              i5 = h4;
              b4 = g3;
              break;
            }
          } else {
            i5 = f4 + 16 | 0;
            c4[((c4[i5 >> 2] | 0) == (h4 | 0) ? i5 : f4 + 20 | 0) >> 2] = a4;
            if (!a4) {
              i5 = h4;
              b4 = g3;
              break;
            }
          }
          c4[a4 + 24 >> 2] = f4;
          b4 = h4 + 16 | 0;
          d4 = c4[b4 >> 2] | 0;
          if (d4 | 0) {
            c4[a4 + 16 >> 2] = d4;
            c4[d4 + 24 >> 2] = a4;
          }
          b4 = c4[b4 + 4 >> 2] | 0;
          if (b4) {
            c4[a4 + 20 >> 2] = b4;
            c4[b4 + 24 >> 2] = a4;
            i5 = h4;
            b4 = g3;
          } else {
            i5 = h4;
            b4 = g3;
          }
        } else {
          i5 = h4;
          b4 = g3;
        }
      } else {
        i5 = d4;
        h4 = d4;
      }
    while (0);
    if (h4 >>> 0 >= j3 >>> 0)
      return;
    a4 = j3 + 4 | 0;
    e6 = c4[a4 >> 2] | 0;
    if (!(e6 & 1))
      return;
    if (!(e6 & 2)) {
      if ((c4[17600] | 0) == (j3 | 0)) {
        j3 = (c4[17597] | 0) + b4 | 0;
        c4[17597] = j3;
        c4[17600] = i5;
        c4[i5 + 4 >> 2] = j3 | 1;
        if ((i5 | 0) != (c4[17599] | 0))
          return;
        c4[17599] = 0;
        c4[17596] = 0;
        return;
      }
      if ((c4[17599] | 0) == (j3 | 0)) {
        j3 = (c4[17596] | 0) + b4 | 0;
        c4[17596] = j3;
        c4[17599] = h4;
        c4[i5 + 4 >> 2] = j3 | 1;
        c4[h4 + j3 >> 2] = j3;
        return;
      }
      f4 = (e6 & -8) + b4 | 0;
      d4 = e6 >>> 3;
      do
        if (e6 >>> 0 < 256) {
          b4 = c4[j3 + 8 >> 2] | 0;
          a4 = c4[j3 + 12 >> 2] | 0;
          if ((a4 | 0) == (b4 | 0)) {
            c4[17594] = c4[17594] & ~(1 << d4);
            break;
          } else {
            c4[b4 + 12 >> 2] = a4;
            c4[a4 + 8 >> 2] = b4;
            break;
          }
        } else {
          g3 = c4[j3 + 24 >> 2] | 0;
          a4 = c4[j3 + 12 >> 2] | 0;
          do
            if ((a4 | 0) == (j3 | 0)) {
              b4 = j3 + 16 | 0;
              d4 = b4 + 4 | 0;
              a4 = c4[d4 >> 2] | 0;
              if (!a4) {
                a4 = c4[b4 >> 2] | 0;
                if (!a4) {
                  d4 = 0;
                  break;
                }
              } else
                b4 = d4;
              while (1) {
                e6 = a4 + 20 | 0;
                d4 = c4[e6 >> 2] | 0;
                if (!d4) {
                  e6 = a4 + 16 | 0;
                  d4 = c4[e6 >> 2] | 0;
                  if (!d4)
                    break;
                  else {
                    a4 = d4;
                    b4 = e6;
                  }
                } else {
                  a4 = d4;
                  b4 = e6;
                }
              }
              c4[b4 >> 2] = 0;
              d4 = a4;
            } else {
              d4 = c4[j3 + 8 >> 2] | 0;
              c4[d4 + 12 >> 2] = a4;
              c4[a4 + 8 >> 2] = d4;
              d4 = a4;
            }
          while (0);
          if (g3 | 0) {
            a4 = c4[j3 + 28 >> 2] | 0;
            b4 = 70680 + (a4 << 2) | 0;
            if ((c4[b4 >> 2] | 0) == (j3 | 0)) {
              c4[b4 >> 2] = d4;
              if (!d4) {
                c4[17595] = c4[17595] & ~(1 << a4);
                break;
              }
            } else {
              e6 = g3 + 16 | 0;
              c4[((c4[e6 >> 2] | 0) == (j3 | 0) ? e6 : g3 + 20 | 0) >> 2] = d4;
              if (!d4)
                break;
            }
            c4[d4 + 24 >> 2] = g3;
            a4 = j3 + 16 | 0;
            b4 = c4[a4 >> 2] | 0;
            if (b4 | 0) {
              c4[d4 + 16 >> 2] = b4;
              c4[b4 + 24 >> 2] = d4;
            }
            a4 = c4[a4 + 4 >> 2] | 0;
            if (a4 | 0) {
              c4[d4 + 20 >> 2] = a4;
              c4[a4 + 24 >> 2] = d4;
            }
          }
        }
      while (0);
      c4[i5 + 4 >> 2] = f4 | 1;
      c4[h4 + f4 >> 2] = f4;
      if ((i5 | 0) == (c4[17599] | 0)) {
        c4[17596] = f4;
        return;
      }
    } else {
      c4[a4 >> 2] = e6 & -2;
      c4[i5 + 4 >> 2] = b4 | 1;
      c4[h4 + b4 >> 2] = b4;
      f4 = b4;
    }
    a4 = f4 >>> 3;
    if (f4 >>> 0 < 256) {
      d4 = 70416 + (a4 << 1 << 2) | 0;
      b4 = c4[17594] | 0;
      a4 = 1 << a4;
      if (!(b4 & a4)) {
        c4[17594] = b4 | a4;
        a4 = d4;
        b4 = d4 + 8 | 0;
      } else {
        b4 = d4 + 8 | 0;
        a4 = c4[b4 >> 2] | 0;
      }
      c4[b4 >> 2] = i5;
      c4[a4 + 12 >> 2] = i5;
      c4[i5 + 8 >> 2] = a4;
      c4[i5 + 12 >> 2] = d4;
      return;
    }
    a4 = f4 >>> 8;
    if (a4)
      if (f4 >>> 0 > 16777215)
        e6 = 31;
      else {
        h4 = (a4 + 1048320 | 0) >>> 16 & 8;
        j3 = a4 << h4;
        g3 = (j3 + 520192 | 0) >>> 16 & 4;
        j3 = j3 << g3;
        e6 = (j3 + 245760 | 0) >>> 16 & 2;
        e6 = 14 - (g3 | h4 | e6) + (j3 << e6 >>> 15) | 0;
        e6 = f4 >>> (e6 + 7 | 0) & 1 | e6 << 1;
      }
    else
      e6 = 0;
    a4 = 70680 + (e6 << 2) | 0;
    c4[i5 + 28 >> 2] = e6;
    c4[i5 + 20 >> 2] = 0;
    c4[i5 + 16 >> 2] = 0;
    b4 = c4[17595] | 0;
    d4 = 1 << e6;
    a:
      do
        if (!(b4 & d4)) {
          c4[17595] = b4 | d4;
          c4[a4 >> 2] = i5;
          c4[i5 + 24 >> 2] = a4;
          c4[i5 + 12 >> 2] = i5;
          c4[i5 + 8 >> 2] = i5;
        } else {
          a4 = c4[a4 >> 2] | 0;
          b:
            do
              if ((c4[a4 + 4 >> 2] & -8 | 0) != (f4 | 0)) {
                e6 = f4 << ((e6 | 0) == 31 ? 0 : 25 - (e6 >>> 1) | 0);
                while (1) {
                  d4 = a4 + 16 + (e6 >>> 31 << 2) | 0;
                  b4 = c4[d4 >> 2] | 0;
                  if (!b4)
                    break;
                  if ((c4[b4 + 4 >> 2] & -8 | 0) == (f4 | 0)) {
                    a4 = b4;
                    break b;
                  } else {
                    e6 = e6 << 1;
                    a4 = b4;
                  }
                }
                c4[d4 >> 2] = i5;
                c4[i5 + 24 >> 2] = a4;
                c4[i5 + 12 >> 2] = i5;
                c4[i5 + 8 >> 2] = i5;
                break a;
              }
            while (0);
          h4 = a4 + 8 | 0;
          j3 = c4[h4 >> 2] | 0;
          c4[j3 + 12 >> 2] = i5;
          c4[h4 >> 2] = i5;
          c4[i5 + 8 >> 2] = j3;
          c4[i5 + 12 >> 2] = a4;
          c4[i5 + 24 >> 2] = 0;
        }
      while (0);
    j3 = (c4[17602] | 0) + -1 | 0;
    c4[17602] = j3;
    if (j3 | 0)
      return;
    a4 = 70832;
    while (1) {
      a4 = c4[a4 >> 2] | 0;
      if (!a4)
        break;
      else
        a4 = a4 + 8 | 0;
    }
    c4[17602] = -1;
    return;
  }
  function Cb(a4, b4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    var d4 = 0, e6 = 0;
    if (!a4) {
      b4 = Ab(b4) | 0;
      return b4 | 0;
    }
    if (b4 >>> 0 > 4294967231) {
      b4 = 0;
      return b4 | 0;
    }
    d4 = Db(a4 + -8 | 0, b4 >>> 0 < 11 ? 16 : b4 + 11 & -8) | 0;
    if (d4 | 0) {
      b4 = d4 + 8 | 0;
      return b4 | 0;
    }
    d4 = Ab(b4) | 0;
    if (!d4) {
      b4 = 0;
      return b4 | 0;
    }
    e6 = c4[a4 + -4 >> 2] | 0;
    e6 = (e6 & -8) - ((e6 & 3 | 0) == 0 ? 8 : 4) | 0;
    ec(d4 | 0, a4 | 0, (e6 >>> 0 < b4 >>> 0 ? e6 : b4) | 0) | 0;
    Bb(a4);
    b4 = d4;
    return b4 | 0;
  }
  function Db(a4, b4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    var d4 = 0, e6 = 0, f4 = 0, g3 = 0, h4 = 0, i5 = 0, j3 = 0, k3 = 0, l4 = 0, m3 = 0;
    l4 = a4 + 4 | 0;
    m3 = c4[l4 >> 2] | 0;
    d4 = m3 & -8;
    i5 = a4 + d4 | 0;
    if (!(m3 & 3)) {
      if (b4 >>> 0 < 256) {
        a4 = 0;
        return a4 | 0;
      }
      if (d4 >>> 0 >= (b4 + 4 | 0) >>> 0 ? (d4 - b4 | 0) >>> 0 <= c4[17714] << 1 >>> 0 : 0)
        return a4 | 0;
      a4 = 0;
      return a4 | 0;
    }
    if (d4 >>> 0 >= b4 >>> 0) {
      d4 = d4 - b4 | 0;
      if (d4 >>> 0 <= 15)
        return a4 | 0;
      k3 = a4 + b4 | 0;
      c4[l4 >> 2] = m3 & 1 | b4 | 2;
      c4[k3 + 4 >> 2] = d4 | 3;
      m3 = i5 + 4 | 0;
      c4[m3 >> 2] = c4[m3 >> 2] | 1;
      Eb(k3, d4);
      return a4 | 0;
    }
    if ((c4[17600] | 0) == (i5 | 0)) {
      k3 = (c4[17597] | 0) + d4 | 0;
      d4 = k3 - b4 | 0;
      e6 = a4 + b4 | 0;
      if (k3 >>> 0 <= b4 >>> 0) {
        a4 = 0;
        return a4 | 0;
      }
      c4[l4 >> 2] = m3 & 1 | b4 | 2;
      c4[e6 + 4 >> 2] = d4 | 1;
      c4[17600] = e6;
      c4[17597] = d4;
      return a4 | 0;
    }
    if ((c4[17599] | 0) == (i5 | 0)) {
      e6 = (c4[17596] | 0) + d4 | 0;
      if (e6 >>> 0 < b4 >>> 0) {
        a4 = 0;
        return a4 | 0;
      }
      d4 = e6 - b4 | 0;
      if (d4 >>> 0 > 15) {
        k3 = a4 + b4 | 0;
        e6 = a4 + e6 | 0;
        c4[l4 >> 2] = m3 & 1 | b4 | 2;
        c4[k3 + 4 >> 2] = d4 | 1;
        c4[e6 >> 2] = d4;
        e6 = e6 + 4 | 0;
        c4[e6 >> 2] = c4[e6 >> 2] & -2;
        e6 = k3;
      } else {
        c4[l4 >> 2] = m3 & 1 | e6 | 2;
        e6 = a4 + e6 + 4 | 0;
        c4[e6 >> 2] = c4[e6 >> 2] | 1;
        e6 = 0;
        d4 = 0;
      }
      c4[17596] = d4;
      c4[17599] = e6;
      return a4 | 0;
    }
    e6 = c4[i5 + 4 >> 2] | 0;
    if (e6 & 2 | 0) {
      a4 = 0;
      return a4 | 0;
    }
    j3 = (e6 & -8) + d4 | 0;
    if (j3 >>> 0 < b4 >>> 0) {
      a4 = 0;
      return a4 | 0;
    }
    k3 = j3 - b4 | 0;
    f4 = e6 >>> 3;
    do
      if (e6 >>> 0 < 256) {
        e6 = c4[i5 + 8 >> 2] | 0;
        d4 = c4[i5 + 12 >> 2] | 0;
        if ((d4 | 0) == (e6 | 0)) {
          c4[17594] = c4[17594] & ~(1 << f4);
          break;
        } else {
          c4[e6 + 12 >> 2] = d4;
          c4[d4 + 8 >> 2] = e6;
          break;
        }
      } else {
        h4 = c4[i5 + 24 >> 2] | 0;
        d4 = c4[i5 + 12 >> 2] | 0;
        do
          if ((d4 | 0) == (i5 | 0)) {
            e6 = i5 + 16 | 0;
            f4 = e6 + 4 | 0;
            d4 = c4[f4 >> 2] | 0;
            if (!d4) {
              d4 = c4[e6 >> 2] | 0;
              if (!d4) {
                f4 = 0;
                break;
              }
            } else
              e6 = f4;
            while (1) {
              g3 = d4 + 20 | 0;
              f4 = c4[g3 >> 2] | 0;
              if (!f4) {
                g3 = d4 + 16 | 0;
                f4 = c4[g3 >> 2] | 0;
                if (!f4)
                  break;
                else {
                  d4 = f4;
                  e6 = g3;
                }
              } else {
                d4 = f4;
                e6 = g3;
              }
            }
            c4[e6 >> 2] = 0;
            f4 = d4;
          } else {
            f4 = c4[i5 + 8 >> 2] | 0;
            c4[f4 + 12 >> 2] = d4;
            c4[d4 + 8 >> 2] = f4;
            f4 = d4;
          }
        while (0);
        if (h4 | 0) {
          d4 = c4[i5 + 28 >> 2] | 0;
          e6 = 70680 + (d4 << 2) | 0;
          if ((c4[e6 >> 2] | 0) == (i5 | 0)) {
            c4[e6 >> 2] = f4;
            if (!f4) {
              c4[17595] = c4[17595] & ~(1 << d4);
              break;
            }
          } else {
            g3 = h4 + 16 | 0;
            c4[((c4[g3 >> 2] | 0) == (i5 | 0) ? g3 : h4 + 20 | 0) >> 2] = f4;
            if (!f4)
              break;
          }
          c4[f4 + 24 >> 2] = h4;
          d4 = i5 + 16 | 0;
          e6 = c4[d4 >> 2] | 0;
          if (e6 | 0) {
            c4[f4 + 16 >> 2] = e6;
            c4[e6 + 24 >> 2] = f4;
          }
          d4 = c4[d4 + 4 >> 2] | 0;
          if (d4 | 0) {
            c4[f4 + 20 >> 2] = d4;
            c4[d4 + 24 >> 2] = f4;
          }
        }
      }
    while (0);
    if (k3 >>> 0 < 16) {
      c4[l4 >> 2] = m3 & 1 | j3 | 2;
      m3 = a4 + j3 + 4 | 0;
      c4[m3 >> 2] = c4[m3 >> 2] | 1;
      return a4 | 0;
    } else {
      i5 = a4 + b4 | 0;
      c4[l4 >> 2] = m3 & 1 | b4 | 2;
      c4[i5 + 4 >> 2] = k3 | 3;
      m3 = a4 + j3 + 4 | 0;
      c4[m3 >> 2] = c4[m3 >> 2] | 1;
      Eb(i5, k3);
      return a4 | 0;
    }
    return 0;
  }
  function Eb(a4, b4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    var d4 = 0, e6 = 0, f4 = 0, g3 = 0, h4 = 0, i5 = 0;
    i5 = a4 + b4 | 0;
    d4 = c4[a4 + 4 >> 2] | 0;
    do
      if (!(d4 & 1)) {
        f4 = c4[a4 >> 2] | 0;
        if (!(d4 & 3))
          return;
        h4 = a4 + (0 - f4) | 0;
        b4 = f4 + b4 | 0;
        if ((c4[17599] | 0) == (h4 | 0)) {
          a4 = i5 + 4 | 0;
          d4 = c4[a4 >> 2] | 0;
          if ((d4 & 3 | 0) != 3)
            break;
          c4[17596] = b4;
          c4[a4 >> 2] = d4 & -2;
          c4[h4 + 4 >> 2] = b4 | 1;
          c4[i5 >> 2] = b4;
          return;
        }
        e6 = f4 >>> 3;
        if (f4 >>> 0 < 256) {
          a4 = c4[h4 + 8 >> 2] | 0;
          d4 = c4[h4 + 12 >> 2] | 0;
          if ((d4 | 0) == (a4 | 0)) {
            c4[17594] = c4[17594] & ~(1 << e6);
            break;
          } else {
            c4[a4 + 12 >> 2] = d4;
            c4[d4 + 8 >> 2] = a4;
            break;
          }
        }
        g3 = c4[h4 + 24 >> 2] | 0;
        a4 = c4[h4 + 12 >> 2] | 0;
        do
          if ((a4 | 0) == (h4 | 0)) {
            d4 = h4 + 16 | 0;
            e6 = d4 + 4 | 0;
            a4 = c4[e6 >> 2] | 0;
            if (!a4) {
              a4 = c4[d4 >> 2] | 0;
              if (!a4) {
                a4 = 0;
                break;
              }
            } else
              d4 = e6;
            while (1) {
              f4 = a4 + 20 | 0;
              e6 = c4[f4 >> 2] | 0;
              if (!e6) {
                f4 = a4 + 16 | 0;
                e6 = c4[f4 >> 2] | 0;
                if (!e6)
                  break;
                else {
                  a4 = e6;
                  d4 = f4;
                }
              } else {
                a4 = e6;
                d4 = f4;
              }
            }
            c4[d4 >> 2] = 0;
          } else {
            f4 = c4[h4 + 8 >> 2] | 0;
            c4[f4 + 12 >> 2] = a4;
            c4[a4 + 8 >> 2] = f4;
          }
        while (0);
        if (g3) {
          d4 = c4[h4 + 28 >> 2] | 0;
          e6 = 70680 + (d4 << 2) | 0;
          if ((c4[e6 >> 2] | 0) == (h4 | 0)) {
            c4[e6 >> 2] = a4;
            if (!a4) {
              c4[17595] = c4[17595] & ~(1 << d4);
              break;
            }
          } else {
            f4 = g3 + 16 | 0;
            c4[((c4[f4 >> 2] | 0) == (h4 | 0) ? f4 : g3 + 20 | 0) >> 2] = a4;
            if (!a4)
              break;
          }
          c4[a4 + 24 >> 2] = g3;
          d4 = h4 + 16 | 0;
          e6 = c4[d4 >> 2] | 0;
          if (e6 | 0) {
            c4[a4 + 16 >> 2] = e6;
            c4[e6 + 24 >> 2] = a4;
          }
          d4 = c4[d4 + 4 >> 2] | 0;
          if (d4) {
            c4[a4 + 20 >> 2] = d4;
            c4[d4 + 24 >> 2] = a4;
          }
        }
      } else
        h4 = a4;
    while (0);
    a4 = i5 + 4 | 0;
    e6 = c4[a4 >> 2] | 0;
    if (!(e6 & 2)) {
      if ((c4[17600] | 0) == (i5 | 0)) {
        i5 = (c4[17597] | 0) + b4 | 0;
        c4[17597] = i5;
        c4[17600] = h4;
        c4[h4 + 4 >> 2] = i5 | 1;
        if ((h4 | 0) != (c4[17599] | 0))
          return;
        c4[17599] = 0;
        c4[17596] = 0;
        return;
      }
      if ((c4[17599] | 0) == (i5 | 0)) {
        i5 = (c4[17596] | 0) + b4 | 0;
        c4[17596] = i5;
        c4[17599] = h4;
        c4[h4 + 4 >> 2] = i5 | 1;
        c4[h4 + i5 >> 2] = i5;
        return;
      }
      f4 = (e6 & -8) + b4 | 0;
      d4 = e6 >>> 3;
      do
        if (e6 >>> 0 < 256) {
          a4 = c4[i5 + 8 >> 2] | 0;
          b4 = c4[i5 + 12 >> 2] | 0;
          if ((b4 | 0) == (a4 | 0)) {
            c4[17594] = c4[17594] & ~(1 << d4);
            break;
          } else {
            c4[a4 + 12 >> 2] = b4;
            c4[b4 + 8 >> 2] = a4;
            break;
          }
        } else {
          g3 = c4[i5 + 24 >> 2] | 0;
          b4 = c4[i5 + 12 >> 2] | 0;
          do
            if ((b4 | 0) == (i5 | 0)) {
              a4 = i5 + 16 | 0;
              d4 = a4 + 4 | 0;
              b4 = c4[d4 >> 2] | 0;
              if (!b4) {
                b4 = c4[a4 >> 2] | 0;
                if (!b4) {
                  d4 = 0;
                  break;
                }
              } else
                a4 = d4;
              while (1) {
                e6 = b4 + 20 | 0;
                d4 = c4[e6 >> 2] | 0;
                if (!d4) {
                  e6 = b4 + 16 | 0;
                  d4 = c4[e6 >> 2] | 0;
                  if (!d4)
                    break;
                  else {
                    b4 = d4;
                    a4 = e6;
                  }
                } else {
                  b4 = d4;
                  a4 = e6;
                }
              }
              c4[a4 >> 2] = 0;
              d4 = b4;
            } else {
              d4 = c4[i5 + 8 >> 2] | 0;
              c4[d4 + 12 >> 2] = b4;
              c4[b4 + 8 >> 2] = d4;
              d4 = b4;
            }
          while (0);
          if (g3 | 0) {
            b4 = c4[i5 + 28 >> 2] | 0;
            a4 = 70680 + (b4 << 2) | 0;
            if ((c4[a4 >> 2] | 0) == (i5 | 0)) {
              c4[a4 >> 2] = d4;
              if (!d4) {
                c4[17595] = c4[17595] & ~(1 << b4);
                break;
              }
            } else {
              e6 = g3 + 16 | 0;
              c4[((c4[e6 >> 2] | 0) == (i5 | 0) ? e6 : g3 + 20 | 0) >> 2] = d4;
              if (!d4)
                break;
            }
            c4[d4 + 24 >> 2] = g3;
            b4 = i5 + 16 | 0;
            a4 = c4[b4 >> 2] | 0;
            if (a4 | 0) {
              c4[d4 + 16 >> 2] = a4;
              c4[a4 + 24 >> 2] = d4;
            }
            b4 = c4[b4 + 4 >> 2] | 0;
            if (b4 | 0) {
              c4[d4 + 20 >> 2] = b4;
              c4[b4 + 24 >> 2] = d4;
            }
          }
        }
      while (0);
      c4[h4 + 4 >> 2] = f4 | 1;
      c4[h4 + f4 >> 2] = f4;
      if ((h4 | 0) == (c4[17599] | 0)) {
        c4[17596] = f4;
        return;
      }
    } else {
      c4[a4 >> 2] = e6 & -2;
      c4[h4 + 4 >> 2] = b4 | 1;
      c4[h4 + b4 >> 2] = b4;
      f4 = b4;
    }
    b4 = f4 >>> 3;
    if (f4 >>> 0 < 256) {
      d4 = 70416 + (b4 << 1 << 2) | 0;
      a4 = c4[17594] | 0;
      b4 = 1 << b4;
      if (!(a4 & b4)) {
        c4[17594] = a4 | b4;
        b4 = d4;
        a4 = d4 + 8 | 0;
      } else {
        a4 = d4 + 8 | 0;
        b4 = c4[a4 >> 2] | 0;
      }
      c4[a4 >> 2] = h4;
      c4[b4 + 12 >> 2] = h4;
      c4[h4 + 8 >> 2] = b4;
      c4[h4 + 12 >> 2] = d4;
      return;
    }
    b4 = f4 >>> 8;
    if (b4)
      if (f4 >>> 0 > 16777215)
        e6 = 31;
      else {
        g3 = (b4 + 1048320 | 0) >>> 16 & 8;
        i5 = b4 << g3;
        d4 = (i5 + 520192 | 0) >>> 16 & 4;
        i5 = i5 << d4;
        e6 = (i5 + 245760 | 0) >>> 16 & 2;
        e6 = 14 - (d4 | g3 | e6) + (i5 << e6 >>> 15) | 0;
        e6 = f4 >>> (e6 + 7 | 0) & 1 | e6 << 1;
      }
    else
      e6 = 0;
    b4 = 70680 + (e6 << 2) | 0;
    c4[h4 + 28 >> 2] = e6;
    c4[h4 + 20 >> 2] = 0;
    c4[h4 + 16 >> 2] = 0;
    a4 = c4[17595] | 0;
    d4 = 1 << e6;
    if (!(a4 & d4)) {
      c4[17595] = a4 | d4;
      c4[b4 >> 2] = h4;
      c4[h4 + 24 >> 2] = b4;
      c4[h4 + 12 >> 2] = h4;
      c4[h4 + 8 >> 2] = h4;
      return;
    }
    b4 = c4[b4 >> 2] | 0;
    a:
      do
        if ((c4[b4 + 4 >> 2] & -8 | 0) != (f4 | 0)) {
          e6 = f4 << ((e6 | 0) == 31 ? 0 : 25 - (e6 >>> 1) | 0);
          while (1) {
            d4 = b4 + 16 + (e6 >>> 31 << 2) | 0;
            a4 = c4[d4 >> 2] | 0;
            if (!a4)
              break;
            if ((c4[a4 + 4 >> 2] & -8 | 0) == (f4 | 0)) {
              b4 = a4;
              break a;
            } else {
              e6 = e6 << 1;
              b4 = a4;
            }
          }
          c4[d4 >> 2] = h4;
          c4[h4 + 24 >> 2] = b4;
          c4[h4 + 12 >> 2] = h4;
          c4[h4 + 8 >> 2] = h4;
          return;
        }
      while (0);
    g3 = b4 + 8 | 0;
    i5 = c4[g3 >> 2] | 0;
    c4[i5 + 12 >> 2] = h4;
    c4[g3 >> 2] = h4;
    c4[h4 + 8 >> 2] = i5;
    c4[h4 + 12 >> 2] = b4;
    c4[h4 + 24 >> 2] = 0;
    return;
  }
  function Fb(a4, b4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    if (a4 >>> 0 < 9) {
      b4 = Ab(b4) | 0;
      return b4 | 0;
    } else {
      b4 = Gb(a4, b4) | 0;
      return b4 | 0;
    }
    return 0;
  }
  function Gb(a4, b4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    var d4 = 0, e6 = 0, f4 = 0, g3 = 0, h4 = 0, i5 = 0;
    d4 = a4 >>> 0 > 16 ? a4 : 16;
    if (!(d4 + -1 & d4))
      a4 = d4;
    else {
      a4 = 16;
      while (1)
        if (a4 >>> 0 < d4 >>> 0)
          a4 = a4 << 1;
        else
          break;
    }
    if ((-64 - a4 | 0) >>> 0 <= b4 >>> 0) {
      h4 = 0;
      return h4 | 0;
    }
    g3 = b4 >>> 0 < 11 ? 16 : b4 + 11 & -8;
    d4 = Ab(g3 + 12 + a4 | 0) | 0;
    if (!d4) {
      h4 = 0;
      return h4 | 0;
    }
    f4 = d4 + -8 | 0;
    do
      if (a4 + -1 & d4) {
        e6 = (d4 + a4 + -1 & 0 - a4) + -8 | 0;
        b4 = f4;
        e6 = (e6 - b4 | 0) >>> 0 > 15 ? e6 : e6 + a4 | 0;
        b4 = e6 - b4 | 0;
        a4 = d4 + -4 | 0;
        i5 = c4[a4 >> 2] | 0;
        d4 = (i5 & -8) - b4 | 0;
        if (!(i5 & 3)) {
          c4[e6 >> 2] = (c4[f4 >> 2] | 0) + b4;
          c4[e6 + 4 >> 2] = d4;
          a4 = e6;
          b4 = e6;
          break;
        } else {
          i5 = e6 + 4 | 0;
          c4[i5 >> 2] = d4 | c4[i5 >> 2] & 1 | 2;
          d4 = e6 + d4 + 4 | 0;
          c4[d4 >> 2] = c4[d4 >> 2] | 1;
          c4[a4 >> 2] = b4 | c4[a4 >> 2] & 1 | 2;
          c4[i5 >> 2] = c4[i5 >> 2] | 1;
          Eb(f4, b4);
          a4 = e6;
          b4 = e6;
          break;
        }
      } else {
        a4 = f4;
        b4 = f4;
      }
    while (0);
    a4 = a4 + 4 | 0;
    d4 = c4[a4 >> 2] | 0;
    if (d4 & 3 | 0 ? (h4 = d4 & -8, h4 >>> 0 > (g3 + 16 | 0) >>> 0) : 0) {
      i5 = h4 - g3 | 0;
      f4 = b4 + g3 | 0;
      c4[a4 >> 2] = g3 | d4 & 1 | 2;
      c4[f4 + 4 >> 2] = i5 | 3;
      h4 = b4 + h4 + 4 | 0;
      c4[h4 >> 2] = c4[h4 >> 2] | 1;
      Eb(f4, i5);
    }
    i5 = b4 + 8 | 0;
    return i5 | 0;
  }
  function Hb() {
    t4(70888);
    return;
  }
  function Ib() {
    return 70872;
  }
  function Jb() {
    return 70880;
  }
  function Kb() {
    return 70884;
  }
  function Lb() {
    return 70888;
  }
  function Mb(a4) {
    a4 = a4 | 0;
    return;
  }
  function Nb(a4) {
    a4 = a4 | 0;
    bc(a4);
    return;
  }
  function Ob(a4) {
    a4 = a4 | 0;
    return;
  }
  function Pb(a4) {
    a4 = a4 | 0;
    return;
  }
  function Qb(a4, b4, d4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    d4 = d4 | 0;
    var e6 = 0, f4 = 0, g3 = 0, h4 = 0;
    h4 = E2;
    E2 = E2 + 64 | 0;
    f4 = h4;
    if (!(Ub(a4, b4) | 0))
      if ((b4 | 0) != 0 ? (g3 = Yb(b4, 69792) | 0, (g3 | 0) != 0) : 0) {
        b4 = f4 + 4 | 0;
        e6 = b4 + 52 | 0;
        do {
          c4[b4 >> 2] = 0;
          b4 = b4 + 4 | 0;
        } while ((b4 | 0) < (e6 | 0));
        c4[f4 >> 2] = g3;
        c4[f4 + 8 >> 2] = a4;
        c4[f4 + 12 >> 2] = -1;
        c4[f4 + 48 >> 2] = 1;
        L2[c4[(c4[g3 >> 2] | 0) + 28 >> 2] & 3](g3, f4, c4[d4 >> 2] | 0, 1);
        if ((c4[f4 + 24 >> 2] | 0) == 1) {
          c4[d4 >> 2] = c4[f4 + 16 >> 2];
          b4 = 1;
        } else
          b4 = 0;
      } else
        b4 = 0;
    else
      b4 = 1;
    E2 = h4;
    return b4 | 0;
  }
  function Rb(a4, b4, d4, e6, f4, g3) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    d4 = d4 | 0;
    e6 = e6 | 0;
    f4 = f4 | 0;
    g3 = g3 | 0;
    if (Ub(a4, c4[b4 + 8 >> 2] | 0) | 0)
      Xb(b4, d4, e6, f4);
    return;
  }
  function Sb(b4, d4, e6, f4, g3) {
    b4 = b4 | 0;
    d4 = d4 | 0;
    e6 = e6 | 0;
    f4 = f4 | 0;
    g3 = g3 | 0;
    var h4 = 0;
    do
      if (!(Ub(b4, c4[d4 + 8 >> 2] | 0) | 0)) {
        if (Ub(b4, c4[d4 >> 2] | 0) | 0) {
          if ((c4[d4 + 16 >> 2] | 0) != (e6 | 0) ? (h4 = d4 + 20 | 0, (c4[h4 >> 2] | 0) != (e6 | 0)) : 0) {
            c4[d4 + 32 >> 2] = f4;
            c4[h4 >> 2] = e6;
            g3 = d4 + 40 | 0;
            c4[g3 >> 2] = (c4[g3 >> 2] | 0) + 1;
            if ((c4[d4 + 36 >> 2] | 0) == 1 ? (c4[d4 + 24 >> 2] | 0) == 2 : 0)
              a3[d4 + 54 >> 0] = 1;
            c4[d4 + 44 >> 2] = 4;
            break;
          }
          if ((f4 | 0) == 1)
            c4[d4 + 32 >> 2] = 1;
        }
      } else
        Wb(d4, e6, f4);
    while (0);
    return;
  }
  function Tb(a4, b4, d4, e6) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    d4 = d4 | 0;
    e6 = e6 | 0;
    if (Ub(a4, c4[b4 + 8 >> 2] | 0) | 0)
      Vb(b4, d4, e6);
    return;
  }
  function Ub(a4, b4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    return (a4 | 0) == (b4 | 0) | 0;
  }
  function Vb(b4, d4, e6) {
    b4 = b4 | 0;
    d4 = d4 | 0;
    e6 = e6 | 0;
    var f4 = 0, g3 = 0;
    f4 = b4 + 16 | 0;
    g3 = c4[f4 >> 2] | 0;
    do
      if (g3) {
        if ((g3 | 0) != (d4 | 0)) {
          e6 = b4 + 36 | 0;
          c4[e6 >> 2] = (c4[e6 >> 2] | 0) + 1;
          c4[b4 + 24 >> 2] = 2;
          a3[b4 + 54 >> 0] = 1;
          break;
        }
        b4 = b4 + 24 | 0;
        if ((c4[b4 >> 2] | 0) == 2)
          c4[b4 >> 2] = e6;
      } else {
        c4[f4 >> 2] = d4;
        c4[b4 + 24 >> 2] = e6;
        c4[b4 + 36 >> 2] = 1;
      }
    while (0);
    return;
  }
  function Wb(a4, b4, d4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    d4 = d4 | 0;
    var e6 = 0;
    if ((c4[a4 + 4 >> 2] | 0) == (b4 | 0) ? (e6 = a4 + 28 | 0, (c4[e6 >> 2] | 0) != 1) : 0)
      c4[e6 >> 2] = d4;
    return;
  }
  function Xb(b4, d4, e6, f4) {
    b4 = b4 | 0;
    d4 = d4 | 0;
    e6 = e6 | 0;
    f4 = f4 | 0;
    var g3 = 0;
    a3[b4 + 53 >> 0] = 1;
    do
      if ((c4[b4 + 4 >> 2] | 0) == (e6 | 0)) {
        a3[b4 + 52 >> 0] = 1;
        g3 = b4 + 16 | 0;
        e6 = c4[g3 >> 2] | 0;
        if (!e6) {
          c4[g3 >> 2] = d4;
          c4[b4 + 24 >> 2] = f4;
          c4[b4 + 36 >> 2] = 1;
          if (!((f4 | 0) == 1 ? (c4[b4 + 48 >> 2] | 0) == 1 : 0))
            break;
          a3[b4 + 54 >> 0] = 1;
          break;
        }
        if ((e6 | 0) != (d4 | 0)) {
          f4 = b4 + 36 | 0;
          c4[f4 >> 2] = (c4[f4 >> 2] | 0) + 1;
          a3[b4 + 54 >> 0] = 1;
          break;
        }
        g3 = b4 + 24 | 0;
        e6 = c4[g3 >> 2] | 0;
        if ((e6 | 0) == 2) {
          c4[g3 >> 2] = f4;
          e6 = f4;
        }
        if ((e6 | 0) == 1 ? (c4[b4 + 48 >> 2] | 0) == 1 : 0)
          a3[b4 + 54 >> 0] = 1;
      }
    while (0);
    return;
  }
  function Yb(d4, e6) {
    d4 = d4 | 0;
    e6 = e6 | 0;
    var f4 = 0, g3 = 0, h4 = 0, i5 = 0, j3 = 0, k3 = 0, l4 = 0, m3 = 0, n6 = 0, o5 = 0, p4 = 0, q2 = 0;
    q2 = E2;
    E2 = E2 + 64 | 0;
    n6 = q2;
    p4 = c4[d4 >> 2] | 0;
    o5 = d4 + (c4[p4 + -8 >> 2] | 0) | 0;
    p4 = c4[p4 + -4 >> 2] | 0;
    c4[n6 >> 2] = e6;
    c4[n6 + 4 >> 2] = d4;
    c4[n6 + 8 >> 2] = 69808;
    g3 = n6 + 12 | 0;
    h4 = n6 + 16 | 0;
    i5 = n6 + 20 | 0;
    j3 = n6 + 24 | 0;
    k3 = n6 + 28 | 0;
    l4 = n6 + 32 | 0;
    m3 = n6 + 40 | 0;
    d4 = Ub(p4, e6) | 0;
    e6 = g3;
    f4 = e6 + 40 | 0;
    do {
      c4[e6 >> 2] = 0;
      e6 = e6 + 4 | 0;
    } while ((e6 | 0) < (f4 | 0));
    b3[g3 + 40 >> 1] = 0;
    a3[g3 + 42 >> 0] = 0;
    a:
      do
        if (d4) {
          c4[n6 + 48 >> 2] = 1;
          N2[c4[(c4[p4 >> 2] | 0) + 20 >> 2] & 3](p4, n6, o5, o5, 1, 0);
          d4 = (c4[j3 >> 2] | 0) == 1 ? o5 : 0;
        } else {
          M2[c4[(c4[p4 >> 2] | 0) + 24 >> 2] & 3](p4, n6, o5, 1, 0);
          switch (c4[n6 + 36 >> 2] | 0) {
            case 0: {
              d4 = (c4[m3 >> 2] | 0) == 1 & (c4[k3 >> 2] | 0) == 1 & (c4[l4 >> 2] | 0) == 1 ? c4[i5 >> 2] | 0 : 0;
              break a;
            }
            case 1:
              break;
            default: {
              d4 = 0;
              break a;
            }
          }
          if ((c4[j3 >> 2] | 0) != 1 ? !((c4[m3 >> 2] | 0) == 0 & (c4[k3 >> 2] | 0) == 1 & (c4[l4 >> 2] | 0) == 1) : 0) {
            d4 = 0;
            break;
          }
          d4 = c4[h4 >> 2] | 0;
        }
      while (0);
    E2 = q2;
    return d4 | 0;
  }
  function Zb(a4) {
    a4 = a4 | 0;
    bc(a4);
    return;
  }
  function _b2(a4, b4, d4, e6, f4, g3) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    d4 = d4 | 0;
    e6 = e6 | 0;
    f4 = f4 | 0;
    g3 = g3 | 0;
    if (Ub(a4, c4[b4 + 8 >> 2] | 0) | 0)
      Xb(b4, d4, e6, f4);
    else {
      a4 = c4[a4 + 8 >> 2] | 0;
      N2[c4[(c4[a4 >> 2] | 0) + 20 >> 2] & 3](a4, b4, d4, e6, f4, g3);
    }
    return;
  }
  function $b(b4, d4, e6, f4, g3) {
    b4 = b4 | 0;
    d4 = d4 | 0;
    e6 = e6 | 0;
    f4 = f4 | 0;
    g3 = g3 | 0;
    var h4 = 0, i5 = 0, j3 = 0;
    do
      if (!(Ub(b4, c4[d4 + 8 >> 2] | 0) | 0)) {
        if (!(Ub(b4, c4[d4 >> 2] | 0) | 0)) {
          i5 = c4[b4 + 8 >> 2] | 0;
          M2[c4[(c4[i5 >> 2] | 0) + 24 >> 2] & 3](i5, d4, e6, f4, g3);
          break;
        }
        if ((c4[d4 + 16 >> 2] | 0) != (e6 | 0) ? (h4 = d4 + 20 | 0, (c4[h4 >> 2] | 0) != (e6 | 0)) : 0) {
          c4[d4 + 32 >> 2] = f4;
          i5 = d4 + 44 | 0;
          if ((c4[i5 >> 2] | 0) == 4)
            break;
          f4 = d4 + 52 | 0;
          a3[f4 >> 0] = 0;
          j3 = d4 + 53 | 0;
          a3[j3 >> 0] = 0;
          b4 = c4[b4 + 8 >> 2] | 0;
          N2[c4[(c4[b4 >> 2] | 0) + 20 >> 2] & 3](b4, d4, e6, e6, 1, g3);
          if (a3[j3 >> 0] | 0)
            if (!(a3[f4 >> 0] | 0)) {
              f4 = 1;
              b4 = 11;
            } else
              b4 = 15;
          else {
            f4 = 0;
            b4 = 11;
          }
          do
            if ((b4 | 0) == 11) {
              c4[h4 >> 2] = e6;
              j3 = d4 + 40 | 0;
              c4[j3 >> 2] = (c4[j3 >> 2] | 0) + 1;
              if ((c4[d4 + 36 >> 2] | 0) == 1 ? (c4[d4 + 24 >> 2] | 0) == 2 : 0) {
                a3[d4 + 54 >> 0] = 1;
                if (f4) {
                  b4 = 15;
                  break;
                } else {
                  f4 = 4;
                  break;
                }
              }
              if (f4)
                b4 = 15;
              else
                f4 = 4;
            }
          while (0);
          if ((b4 | 0) == 15)
            f4 = 3;
          c4[i5 >> 2] = f4;
          break;
        }
        if ((f4 | 0) == 1)
          c4[d4 + 32 >> 2] = 1;
      } else
        Wb(d4, e6, f4);
    while (0);
    return;
  }
  function ac(a4, b4, d4, e6) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    d4 = d4 | 0;
    e6 = e6 | 0;
    if (Ub(a4, c4[b4 + 8 >> 2] | 0) | 0)
      Vb(b4, d4, e6);
    else {
      a4 = c4[a4 + 8 >> 2] | 0;
      L2[c4[(c4[a4 >> 2] | 0) + 28 >> 2] & 3](a4, b4, d4, e6);
    }
    return;
  }
  function bc(a4) {
    a4 = a4 | 0;
    Bb(a4);
    return;
  }
  function cc(a4, b4, d4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    d4 = d4 | 0;
    var e6 = 0, f4 = 0;
    f4 = E2;
    E2 = E2 + 16 | 0;
    e6 = f4;
    c4[e6 >> 2] = c4[d4 >> 2];
    a4 = J[c4[(c4[a4 >> 2] | 0) + 16 >> 2] & 1](a4, b4, e6) | 0;
    if (a4)
      c4[d4 >> 2] = c4[e6 >> 2];
    E2 = f4;
    return a4 & 1 | 0;
  }
  function dc(a4) {
    a4 = a4 | 0;
    if (!a4)
      a4 = 0;
    else
      a4 = (Yb(a4, 69864) | 0) != 0 & 1;
    return a4 | 0;
  }
  function ec(b4, d4, e6) {
    b4 = b4 | 0;
    d4 = d4 | 0;
    e6 = e6 | 0;
    var f4 = 0, g3 = 0, h4 = 0;
    if ((e6 | 0) >= 8192) {
      A2(b4 | 0, d4 | 0, e6 | 0) | 0;
      return b4 | 0;
    }
    h4 = b4 | 0;
    g3 = b4 + e6 | 0;
    if ((b4 & 3) == (d4 & 3)) {
      while (b4 & 3) {
        if (!e6)
          return h4 | 0;
        a3[b4 >> 0] = a3[d4 >> 0] | 0;
        b4 = b4 + 1 | 0;
        d4 = d4 + 1 | 0;
        e6 = e6 - 1 | 0;
      }
      e6 = g3 & -4 | 0;
      f4 = e6 - 64 | 0;
      while ((b4 | 0) <= (f4 | 0)) {
        c4[b4 >> 2] = c4[d4 >> 2];
        c4[b4 + 4 >> 2] = c4[d4 + 4 >> 2];
        c4[b4 + 8 >> 2] = c4[d4 + 8 >> 2];
        c4[b4 + 12 >> 2] = c4[d4 + 12 >> 2];
        c4[b4 + 16 >> 2] = c4[d4 + 16 >> 2];
        c4[b4 + 20 >> 2] = c4[d4 + 20 >> 2];
        c4[b4 + 24 >> 2] = c4[d4 + 24 >> 2];
        c4[b4 + 28 >> 2] = c4[d4 + 28 >> 2];
        c4[b4 + 32 >> 2] = c4[d4 + 32 >> 2];
        c4[b4 + 36 >> 2] = c4[d4 + 36 >> 2];
        c4[b4 + 40 >> 2] = c4[d4 + 40 >> 2];
        c4[b4 + 44 >> 2] = c4[d4 + 44 >> 2];
        c4[b4 + 48 >> 2] = c4[d4 + 48 >> 2];
        c4[b4 + 52 >> 2] = c4[d4 + 52 >> 2];
        c4[b4 + 56 >> 2] = c4[d4 + 56 >> 2];
        c4[b4 + 60 >> 2] = c4[d4 + 60 >> 2];
        b4 = b4 + 64 | 0;
        d4 = d4 + 64 | 0;
      }
      while ((b4 | 0) < (e6 | 0)) {
        c4[b4 >> 2] = c4[d4 >> 2];
        b4 = b4 + 4 | 0;
        d4 = d4 + 4 | 0;
      }
    } else {
      e6 = g3 - 4 | 0;
      while ((b4 | 0) < (e6 | 0)) {
        a3[b4 >> 0] = a3[d4 >> 0] | 0;
        a3[b4 + 1 >> 0] = a3[d4 + 1 >> 0] | 0;
        a3[b4 + 2 >> 0] = a3[d4 + 2 >> 0] | 0;
        a3[b4 + 3 >> 0] = a3[d4 + 3 >> 0] | 0;
        b4 = b4 + 4 | 0;
        d4 = d4 + 4 | 0;
      }
    }
    while ((b4 | 0) < (g3 | 0)) {
      a3[b4 >> 0] = a3[d4 >> 0] | 0;
      b4 = b4 + 1 | 0;
      d4 = d4 + 1 | 0;
    }
    return h4 | 0;
  }
  function fc(b4, d4, e6) {
    b4 = b4 | 0;
    d4 = d4 | 0;
    e6 = e6 | 0;
    var f4 = 0, g3 = 0, h4 = 0, i5 = 0;
    h4 = b4 + e6 | 0;
    d4 = d4 & 255;
    if ((e6 | 0) >= 67) {
      while (b4 & 3) {
        a3[b4 >> 0] = d4;
        b4 = b4 + 1 | 0;
      }
      f4 = h4 & -4 | 0;
      i5 = d4 | d4 << 8 | d4 << 16 | d4 << 24;
      g3 = f4 - 64 | 0;
      while ((b4 | 0) <= (g3 | 0)) {
        c4[b4 >> 2] = i5;
        c4[b4 + 4 >> 2] = i5;
        c4[b4 + 8 >> 2] = i5;
        c4[b4 + 12 >> 2] = i5;
        c4[b4 + 16 >> 2] = i5;
        c4[b4 + 20 >> 2] = i5;
        c4[b4 + 24 >> 2] = i5;
        c4[b4 + 28 >> 2] = i5;
        c4[b4 + 32 >> 2] = i5;
        c4[b4 + 36 >> 2] = i5;
        c4[b4 + 40 >> 2] = i5;
        c4[b4 + 44 >> 2] = i5;
        c4[b4 + 48 >> 2] = i5;
        c4[b4 + 52 >> 2] = i5;
        c4[b4 + 56 >> 2] = i5;
        c4[b4 + 60 >> 2] = i5;
        b4 = b4 + 64 | 0;
      }
      while ((b4 | 0) < (f4 | 0)) {
        c4[b4 >> 2] = i5;
        b4 = b4 + 4 | 0;
      }
    }
    while ((b4 | 0) < (h4 | 0)) {
      a3[b4 >> 0] = d4;
      b4 = b4 + 1 | 0;
    }
    return h4 - e6 | 0;
  }
  function gc(a4) {
    a4 = a4 | 0;
    var b4 = 0, d4 = 0, e6 = 0;
    e6 = z() | 0;
    d4 = c4[g2 >> 2] | 0;
    b4 = d4 + a4 | 0;
    if ((a4 | 0) > 0 & (b4 | 0) < (d4 | 0) | (b4 | 0) < 0) {
      C2(b4 | 0) | 0;
      y3(12);
      return -1;
    }
    if ((b4 | 0) > (e6 | 0)) {
      if (!(B(b4 | 0) | 0)) {
        y3(12);
        return -1;
      }
    }
    c4[g2 >> 2] = b4;
    return d4 | 0;
  }
  function hc(a4, b4, c5) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    c5 = c5 | 0;
    return I2[a4 & 0](b4 | 0, c5 | 0) | 0;
  }
  function ic(a4, b4, c5, d4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    c5 = c5 | 0;
    d4 = d4 | 0;
    return J[a4 & 1](b4 | 0, c5 | 0, d4 | 0) | 0;
  }
  function jc(a4, b4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    K[a4 & 7](b4 | 0);
  }
  function kc(a4, b4, c5, d4, e6) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    c5 = c5 | 0;
    d4 = d4 | 0;
    e6 = e6 | 0;
    L2[a4 & 3](b4 | 0, c5 | 0, d4 | 0, e6 | 0);
  }
  function lc(a4, b4, c5, d4, e6, f4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    c5 = c5 | 0;
    d4 = d4 | 0;
    e6 = e6 | 0;
    f4 = f4 | 0;
    M2[a4 & 3](b4 | 0, c5 | 0, d4 | 0, e6 | 0, f4 | 0);
  }
  function mc(a4, b4, c5, d4, e6, f4, g3) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    c5 = c5 | 0;
    d4 = d4 | 0;
    e6 = e6 | 0;
    f4 = f4 | 0;
    g3 = g3 | 0;
    N2[a4 & 3](b4 | 0, c5 | 0, d4 | 0, e6 | 0, f4 | 0, g3 | 0);
  }
  function nc(a4, b4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    p3(0);
    return 0;
  }
  function oc(a4, b4, c5) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    c5 = c5 | 0;
    p3(1);
    return 0;
  }
  function pc(a4) {
    a4 = a4 | 0;
    p3(2);
  }
  function qc(a4, b4, c5, d4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    c5 = c5 | 0;
    d4 = d4 | 0;
    p3(3);
  }
  function rc(a4, b4, c5, d4, e6) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    c5 = c5 | 0;
    d4 = d4 | 0;
    e6 = e6 | 0;
    p3(4);
  }
  function sc(a4, b4, c5, d4, e6, f4) {
    a4 = a4 | 0;
    b4 = b4 | 0;
    c5 = c5 | 0;
    d4 = d4 | 0;
    e6 = e6 | 0;
    f4 = f4 | 0;
    p3(5);
  }
  var I2 = [nc];
  var J = [
    oc,
    Qb
  ];
  var K = [
    pc,
    Mb,
    Nb,
    Ob,
    Pb,
    Zb,
    pc,
    pc
  ];
  var L2 = [
    qc,
    Tb,
    ac,
    qc
  ];
  var M2 = [
    rc,
    Sb,
    $b,
    rc
  ];
  var N2 = [
    sc,
    Rb,
    _b2,
    sc
  ];
  return {
    ___cxa_can_catch: cc,
    ___cxa_is_pointer_type: dc,
    ___emscripten_environ_constructor: Hb,
    __get_daylight: Jb,
    __get_environ: Lb,
    __get_timezone: Kb,
    __get_tzname: Ib,
    _bidi_getLine: Y,
    _bidi_getParagraphEndIndex: U,
    _bidi_getVisualRun: V2,
    _bidi_processText: T2,
    _bidi_setLine: W,
    _bidi_writeReverse: X,
    _emscripten_replace_memory: H2,
    _free: Bb,
    _malloc: Ab,
    _memalign: Fb,
    _memcpy: ec,
    _memset: fc,
    _sbrk: gc,
    _ushape_arabic: S3,
    dynCall_iii: hc,
    dynCall_iiii: ic,
    dynCall_vi: jc,
    dynCall_viiii: kc,
    dynCall_viiiii: lc,
    dynCall_viiiiii: mc,
    establishStackSpace: R2,
    stackAlloc: O,
    stackRestore: Q,
    stackSave: P2
  };
}(asmGlobalArg, asmLibraryArg, buffer);
var ___cxa_can_catch = Module["___cxa_can_catch"] = asm["___cxa_can_catch"];
var ___cxa_is_pointer_type = Module["___cxa_is_pointer_type"] = asm["___cxa_is_pointer_type"];
var ___emscripten_environ_constructor = Module["___emscripten_environ_constructor"] = asm["___emscripten_environ_constructor"];
var __get_daylight = Module["__get_daylight"] = asm["__get_daylight"];
var __get_environ = Module["__get_environ"] = asm["__get_environ"];
var __get_timezone = Module["__get_timezone"] = asm["__get_timezone"];
var __get_tzname = Module["__get_tzname"] = asm["__get_tzname"];
var _bidi_getLine = Module["_bidi_getLine"] = asm["_bidi_getLine"];
var _bidi_getParagraphEndIndex = Module["_bidi_getParagraphEndIndex"] = asm["_bidi_getParagraphEndIndex"];
var _bidi_getVisualRun = Module["_bidi_getVisualRun"] = asm["_bidi_getVisualRun"];
var _bidi_processText = Module["_bidi_processText"] = asm["_bidi_processText"];
var _bidi_setLine = Module["_bidi_setLine"] = asm["_bidi_setLine"];
var _bidi_writeReverse = Module["_bidi_writeReverse"] = asm["_bidi_writeReverse"];
var _emscripten_replace_memory = Module["_emscripten_replace_memory"] = asm["_emscripten_replace_memory"];
var _free = Module["_free"] = asm["_free"];
var _malloc = Module["_malloc"] = asm["_malloc"];
var _memalign = Module["_memalign"] = asm["_memalign"];
var _memcpy = Module["_memcpy"] = asm["_memcpy"];
var _memset = Module["_memset"] = asm["_memset"];
var _sbrk = Module["_sbrk"] = asm["_sbrk"];
var _ushape_arabic = Module["_ushape_arabic"] = asm["_ushape_arabic"];
var establishStackSpace = Module["establishStackSpace"] = asm["establishStackSpace"];
var stackAlloc = Module["stackAlloc"] = asm["stackAlloc"];
var stackRestore = Module["stackRestore"] = asm["stackRestore"];
var stackSave = Module["stackSave"] = asm["stackSave"];
var dynCall_iii = Module["dynCall_iii"] = asm["dynCall_iii"];
var dynCall_iiii = Module["dynCall_iiii"] = asm["dynCall_iiii"];
var dynCall_vi = Module["dynCall_vi"] = asm["dynCall_vi"];
var dynCall_viiii = Module["dynCall_viiii"] = asm["dynCall_viiii"];
var dynCall_viiiii = Module["dynCall_viiiii"] = asm["dynCall_viiiii"];
var dynCall_viiiiii = Module["dynCall_viiiiii"] = asm["dynCall_viiiiii"];
Module["asm"] = asm;
Module["ccall"] = ccall;
Module["UTF16ToString"] = UTF16ToString;
Module["stringToUTF16"] = stringToUTF16;
if (memoryInitializer) {
  if (!isDataURI(memoryInitializer)) {
    memoryInitializer = locateFile(memoryInitializer);
  }
  if (ENVIRONMENT_IS_NODE || ENVIRONMENT_IS_SHELL) {
    data = Module["readBinary"](memoryInitializer);
    HEAPU8.set(data, GLOBAL_BASE);
  } else {
    addRunDependency("memory initializer");
    applyMemoryInitializer = function(data) {
      if (data.byteLength)
        data = new Uint8Array(data);
      HEAPU8.set(data, GLOBAL_BASE);
      if (Module["memoryInitializerRequest"])
        delete Module["memoryInitializerRequest"].response;
      removeRunDependency("memory initializer");
    };
    doBrowserLoad = function() {
      Module["readAsync"](memoryInitializer, applyMemoryInitializer, function() {
        throw "could not load memory initializer " + memoryInitializer;
      });
    };
    memoryInitializerBytes = tryParseAsDataURI(memoryInitializer);
    if (memoryInitializerBytes) {
      applyMemoryInitializer(memoryInitializerBytes.buffer);
    } else if (Module["memoryInitializerRequest"]) {
      useRequest = function() {
        var request = Module["memoryInitializerRequest"];
        var response = request.response;
        if (request.status !== 200 && request.status !== 0) {
          var data = tryParseAsDataURI(Module["memoryInitializerRequestURL"]);
          if (data) {
            response = data.buffer;
          } else {
            console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: " + request.status + ", retrying " + memoryInitializer);
            doBrowserLoad();
            return;
          }
        }
        applyMemoryInitializer(response);
      };
      if (Module["memoryInitializerRequest"].response) {
        setTimeout(useRequest, 0);
      } else {
        Module["memoryInitializerRequest"].addEventListener("load", useRequest);
      }
    } else {
      doBrowserLoad();
    }
  }
}
var data;
var applyMemoryInitializer;
var doBrowserLoad;
var memoryInitializerBytes;
var useRequest;
function ExitStatus(status) {
  this.name = "ExitStatus";
  this.message = "Program terminated with exit(" + status + ")";
  this.status = status;
}
ExitStatus.prototype = new Error();
ExitStatus.prototype.constructor = ExitStatus;
dependenciesFulfilled = function runCaller() {
  if (!Module["calledRun"])
    run();
  if (!Module["calledRun"])
    dependenciesFulfilled = runCaller;
};
function run(args) {
  args = args || Module["arguments"];
  if (runDependencies > 0) {
    return;
  }
  preRun();
  if (runDependencies > 0)
    return;
  if (Module["calledRun"])
    return;
  function doRun() {
    if (Module["calledRun"])
      return;
    Module["calledRun"] = true;
    if (ABORT)
      return;
    ensureInitRuntime();
    preMain();
    if (Module["onRuntimeInitialized"])
      Module["onRuntimeInitialized"]();
    postRun();
  }
  if (Module["setStatus"]) {
    Module["setStatus"]("Running...");
    setTimeout(function() {
      setTimeout(function() {
        Module["setStatus"]("");
      }, 1);
      doRun();
    }, 1);
  } else {
    doRun();
  }
}
Module["run"] = run;
function abort(what) {
  if (Module["onAbort"]) {
    Module["onAbort"](what);
  }
  if (what !== void 0) {
    out(what);
    err(what);
    what = JSON.stringify(what);
  } else {
    what = "";
  }
  ABORT = true;
  EXITSTATUS = 1;
  throw "abort(" + what + "). Build with -s ASSERTIONS=1 for more info.";
}
Module["abort"] = abort;
if (Module["preInit"]) {
  if (typeof Module["preInit"] == "function")
    Module["preInit"] = [Module["preInit"]];
  while (Module["preInit"].length > 0) {
    Module["preInit"].pop()();
  }
}
Module["noExitRuntime"] = true;
run();
function applyArabicShaping(input) {
  if (!input) {
    return input;
  }
  var nDataBytes = (input.length + 1) * 2;
  var stringInputPtr = Module._malloc(nDataBytes);
  Module.stringToUTF16(input, stringInputPtr, nDataBytes);
  var returnStringPtr = Module.ccall("ushape_arabic", "number", ["number", "number"], [stringInputPtr, input.length]);
  Module._free(stringInputPtr);
  if (returnStringPtr === 0) {
    return input;
  }
  var result = Module.UTF16ToString(returnStringPtr);
  Module._free(returnStringPtr);
  return result;
}
function mergeParagraphLineBreakPoints(lineBreakPoints, paragraphCount) {
  var mergedParagraphLineBreakPoints = [];
  for (var i4 = 0; i4 < paragraphCount; i4++) {
    var paragraphEndIndex = Module.ccall("bidi_getParagraphEndIndex", "number", ["number"], [i4]);
    for (var i$1 = 0, list = lineBreakPoints; i$1 < list.length; i$1 += 1) {
      var lineBreakPoint = list[i$1];
      if (lineBreakPoint < paragraphEndIndex && (!mergedParagraphLineBreakPoints[mergedParagraphLineBreakPoints.length - 1] || lineBreakPoint > mergedParagraphLineBreakPoints[mergedParagraphLineBreakPoints.length - 1])) {
        mergedParagraphLineBreakPoints.push(lineBreakPoint);
      }
    }
    mergedParagraphLineBreakPoints.push(paragraphEndIndex);
  }
  for (var i$2 = 0, list$1 = lineBreakPoints; i$2 < list$1.length; i$2 += 1) {
    var lineBreakPoint$1 = list$1[i$2];
    if (lineBreakPoint$1 > mergedParagraphLineBreakPoints[mergedParagraphLineBreakPoints.length - 1]) {
      mergedParagraphLineBreakPoints.push(lineBreakPoint$1);
    }
  }
  return mergedParagraphLineBreakPoints;
}
function setParagraph(input, stringInputPtr, nDataBytes) {
  if (!input) {
    return null;
  }
  Module.stringToUTF16(input, stringInputPtr, nDataBytes);
  var paragraphCount = Module.ccall("bidi_processText", "number", ["number", "number"], [stringInputPtr, input.length]);
  if (paragraphCount === 0) {
    Module._free(stringInputPtr);
    return null;
  }
  return paragraphCount;
}
function processBidirectionalText(input, lineBreakPoints) {
  var nDataBytes = (input.length + 1) * 2;
  var stringInputPtr = Module._malloc(nDataBytes);
  var paragraphCount = setParagraph(input, stringInputPtr, nDataBytes);
  if (!paragraphCount) {
    return [input];
  }
  var mergedParagraphLineBreakPoints = mergeParagraphLineBreakPoints(lineBreakPoints, paragraphCount);
  var lineStartIndex = 0;
  var lines = [];
  for (var i4 = 0, list = mergedParagraphLineBreakPoints; i4 < list.length; i4 += 1) {
    var lineBreakPoint = list[i4];
    var returnStringPtr = Module.ccall("bidi_getLine", "number", ["number", "number"], [lineStartIndex, lineBreakPoint]);
    if (returnStringPtr === 0) {
      Module._free(stringInputPtr);
      return [];
    }
    lines.push(Module.UTF16ToString(returnStringPtr));
    Module._free(returnStringPtr);
    lineStartIndex = lineBreakPoint;
  }
  Module._free(stringInputPtr);
  return lines;
}

// src/graph/labels/LabelAtlas.ts
var kLabelMappings = {
  id: (entry, i4) => "id" in entry ? entry.id : i4,
  label: (entry, i4) => "label" in entry ? entry.label : `${i4}`,
  fontSize: (entry) => "fontSize" in entry ? entry.fontSize : 18,
  padding: (entry) => "padding" in entry ? entry.padding : [8, 5]
};
var kOffsetDataTypes = {
  offset: picogl_default.UNSIGNED_SHORT
};
var LabelAtlas = class extends TextureAtlas {
  constructor(context, data, mappings2, font, bold = false, charSpacing = 0) {
    super(context);
    this.labelPixelRatio = window.devicePixelRatio;
    this.letterSpacing = 2;
    this.fontSizeStep = 25;
    this.spaceSizeMap = /* @__PURE__ */ new Map();
    this.labelMap = /* @__PURE__ */ new Map();
    if (data.length) {
      this.processData(context, data, Object.assign({}, kLabelMappings, mappings2), font, bold, charSpacing);
    }
  }
  get offsetsTexture() {
    return this._offsetsTexture;
  }
  processRtlText(str6) {
    return processBidirectionalText(
      applyArabicShaping(str6),
      []
    ).join(" ");
  }
  async processData(context, data, mappings2, font, bold, charSpacing) {
    const canvas = document.createElement("canvas");
    canvas.setAttribute("style", "font-smooth: never;-webkit-font-smoothing : none;");
    const ctx = canvas.getContext("2d", { willReadFrequently: true });
    const boxMap = /* @__PURE__ */ new Map();
    const labels = [];
    const offsets = [];
    const charNegMargin = (1 - charSpacing * this.labelPixelRatio) * this.letterSpacing;
    for (const [, entry] of dataIterator(data, mappings2)) {
      if (typeof entry.label === "string") {
        const renderSize = Math.max(entry.fontSize, Math.floor(entry.fontSize / this.fontSizeStep) * this.fontSizeStep);
        const renderScale = entry.fontSize / renderSize;
        const labelInfo = {
          index: labels.length,
          length: 0,
          width: 0,
          height: 0
        };
        this.labelMap.set(entry.id, labelInfo);
        let rtlProcessed = false;
        let labelString = entry.label;
        for (let i4 = 0, n5 = labelString.length; i4 < n5; ++i4) {
          let char;
          const charCode = labelString.charCodeAt(i4);
          if (charCode >= 1425 && !rtlProcessed) {
            labelString = this.processRtlText(entry.label);
            rtlProcessed = true;
          }
          if (charCode >= 55296 && charCode <= 56319) {
            char = labelString.charAt(i4++) + labelString.charAt(i4);
          } else if (charCode >= 65136 && charCode <= 65151) {
            continue;
          } else {
            char = labelString.charAt(i4);
          }
          const charKey = `${char}-${renderSize}`;
          if (!this.textureKeyMap.has(charKey)) {
            const image = TextureAtlas.computeDistanceField(
              this.renderCharTexture(char, renderSize, ctx, canvas, font, bold),
              renderSize * this.labelPixelRatio
            );
            const box3 = { id: charKey, w: image.width, h: image.height, image };
            boxMap.set(charKey, box3);
            this.addTexture(charKey, box3);
          }
          const box2 = boxMap.get(charKey);
          offsets.push(labelInfo.width);
          const margin = kImageMargin * 2 + charNegMargin * 2;
          labelInfo.width += (box2.w - margin) * renderScale;
          labelInfo.height = Math.max(labelInfo.height, (box2.h - margin) * renderScale);
          labelInfo.length++;
          labels.push(charKey);
        }
      }
    }
    this.exportTextures(labels, charNegMargin, charNegMargin);
    const offsetDataMappings = {
      offset: (offset) => offset
    };
    const offsetBuffer = packData(offsets, offsetDataMappings, kOffsetDataTypes, true);
    this._offsetsTexture = this.createTextureForBuffer(context, new Uint16Array(offsetBuffer), offsets.length, picogl_default.R16UI);
  }
  renderCharTexture(char, size, context, canvas, font, bold) {
    const pixelRatio = this.labelPixelRatio;
    const fontString = `${bold ? "bold " : ""}${size * pixelRatio}px ${font}`;
    if (!this.spaceSizeMap.has(size + char)) {
      context.font = fontString;
      context.imageSmoothingEnabled = false;
      context.fillStyle = "white";
      context.textAlign = "center";
      context.textBaseline = "middle";
      const spaceMetrics = context.measureText(char);
      this.spaceSizeMap.set(String(size) + char, Math.abs(spaceMetrics.actualBoundingBoxLeft) + Math.abs(spaceMetrics.actualBoundingBoxRight));
    }
    const textWidth = this.spaceSizeMap.get(size + char);
    const textHeight = size * pixelRatio;
    const textPadding = Math.min(textWidth, textHeight) * 0.15;
    canvas.width = Math.ceil(textWidth + textPadding + this.letterSpacing * 2 + kImageMargin * 2);
    canvas.height = size * pixelRatio + textPadding + this.letterSpacing * 2 + kImageMargin * 2;
    context.font = fontString;
    context.imageSmoothingEnabled = false;
    context.fillStyle = "white";
    context.textAlign = "center";
    context.textBaseline = "middle";
    context.fillText(char, canvas.width * 0.5, canvas.height * 0.5);
    return context.getImageData(0, 0, canvas.width, canvas.height);
  }
};

// src/graph/labels/point/PointLabel.ts
var kLabelNodeMappings = Object.assign({}, kLabelMappings, {
  point: (entry, i4) => "point" in entry ? entry.point : i4,
  color: (entry) => "color" in entry ? entry.color : 0
});
var kLabelNodeDataTypes = {
  point: picogl_default.UNSIGNED_INT,
  color: picogl_default.UNSIGNED_INT,
  label: [picogl_default.UNSIGNED_INT, picogl_default.UNSIGNED_INT, picogl_default.UNSIGNED_INT, picogl_default.UNSIGNED_INT]
};
var kGLLabelNodeTypes = {
  point: picogl_default.UNSIGNED_INT,
  color: picogl_default.UNSIGNED_INT,
  label: [picogl_default.UNSIGNED_INT, picogl_default.UNSIGNED_INT, picogl_default.UNSIGNED_INT, picogl_default.UNSIGNED_INT]
};
var PointLabelPlacement = /* @__PURE__ */ ((PointLabelPlacement2) => {
  PointLabelPlacement2[PointLabelPlacement2["CENTER"] = 0] = "CENTER";
  PointLabelPlacement2[PointLabelPlacement2["TOP"] = 1] = "TOP";
  PointLabelPlacement2[PointLabelPlacement2["BOTTOM"] = 2] = "BOTTOM";
  PointLabelPlacement2[PointLabelPlacement2["LEFT"] = 3] = "LEFT";
  PointLabelPlacement2[PointLabelPlacement2["RIGHT"] = 4] = "RIGHT";
  return PointLabelPlacement2;
})(PointLabelPlacement || {});
var PointLabel = class extends Nodes {
  constructor(...args) {
    super(...args);
    this._labelPlacement = 0 /* CENTER */;
  }
  get labelPlacement() {
    return this._labelPlacement;
  }
  set labelPlacement(value) {
    this._labelPlacement = value;
    switch (this._labelPlacement) {
      case 0 /* CENTER */:
        this.localUniforms.uLabelPlacement = [0, 0];
        break;
      case 2 /* BOTTOM */:
        this.localUniforms.uLabelPlacement = [0, -1];
        break;
      case 1 /* TOP */:
        this.localUniforms.uLabelPlacement = [0, 1];
        break;
      case 3 /* LEFT */:
        this.localUniforms.uLabelPlacement = [-1, 0];
        break;
      case 4 /* RIGHT */:
        this.localUniforms.uLabelPlacement = [1, 0];
        break;
    }
  }
  get renderBackground() {
    return this.localUniforms.uBackground;
  }
  set renderBackground(value) {
    this.localUniforms.uBackground = value;
  }
  get visibilityThreshold() {
    return this.localUniforms.uVisibilityThreshold;
  }
  set visibilityThreshold(value) {
    this.localUniforms.uVisibilityThreshold = value;
  }
  get padding() {
    return this.localUniforms.uPadding;
  }
  set padding(value) {
    this.localUniforms.uPadding = value;
  }
  get halo() {
    return this.localUniforms.uHalo;
  }
  set halo(value) {
    this.localUniforms.uHalo = Math.min(1, Math.max(0, value));
  }
  initialize(context, points2, data, mappings2, pickingManager, font = "monospace", bold = false, charSpacing = 0, labelAtlas) {
    if (labelAtlas) {
      this.labelAtlas = labelAtlas;
    } else {
      this.labelAtlas = new LabelAtlas(context, data, mappings2, font, bold, charSpacing);
      new PixelRatioObserver(() => {
        this.labelAtlas = new LabelAtlas(context, data, mappings2, font, bold, charSpacing);
        super.initialize(context, points2, data, mappings2, pickingManager);
        this.nodesVAO = context.createVertexArray().vertexAttributeBuffer(0, this.verticesVBO);
        this.configureTargetVAO(this.nodesVAO);
        this.drawCall = context.createDrawCall(this.program, this.nodesVAO).primitive(picogl_default.TRIANGLE_STRIP);
        this.compute(context, {
          uGraphPoints: this.dataTexture
        });
        this.localUniforms.uLabelIndices = this.labelAtlas.indicesTexture;
        this.localUniforms.uCharBoxes = this.labelAtlas.boxesTexture;
        this.localUniforms.uCharTexture = this.labelAtlas.atlasTexture;
        this.localUniforms.uLabelOffsets = this.labelAtlas.offsetsTexture;
      });
    }
    super.initialize(context, points2, data, mappings2, pickingManager);
    this.verticesVBO = context.createVertexBuffer(picogl_default.FLOAT, 2, new Float32Array([
      -1,
      -1,
      1,
      -1,
      -1,
      1,
      1,
      1
    ]));
    this.pickingHandler = this.handlePickingEvent.bind(this);
    this.pickingColors = this.pickingManager.allocatePickingColors(data.length);
    this.pickingVBO = context.createVertexBuffer(picogl_default.FLOAT, 4, new Float32Array(this.pickingColors.colors));
    this.nodesVAO = context.createVertexArray().vertexAttributeBuffer(0, this.verticesVBO);
    this.configureTargetVAO(this.nodesVAO);
    this.nodesVAO.instanceAttributeBuffer(4, this.pickingVBO);
    const shaders = this.getDrawShaders();
    this.program = context.createProgram(shaders.vs, shaders.fs);
    this.drawCall = context.createDrawCall(this.program, this.nodesVAO).primitive(picogl_default.TRIANGLE_STRIP);
    const pickingShaders = this.getPickingShaders();
    this.pickingProgram = context.createProgram(pickingShaders.vs, pickingShaders.fs);
    this.pickingDrawCall = context.createDrawCall(this.pickingProgram, this.nodesVAO).primitive(picogl_default.TRIANGLE_STRIP);
    this.compute(context, {
      uGraphPoints: this.dataTexture
    });
    this.pickingManager.on(PickingManager.events.hoverOn, this.pickingHandler);
    this.pickingManager.on(PickingManager.events.hoverOff, this.pickingHandler);
    this.pickingManager.on(PickingManager.events.click, this.pickingHandler);
    this.localUniforms.uBackground = false;
    this.localUniforms.uLabelIndices = this.labelAtlas.indicesTexture;
    this.localUniforms.uCharBoxes = this.labelAtlas.boxesTexture;
    this.localUniforms.uCharTexture = this.labelAtlas.atlasTexture;
    this.localUniforms.uLabelOffsets = this.labelAtlas.offsetsTexture;
    this.localUniforms.uVisibilityThreshold = 15;
    this.localUniforms.uLabelPlacement = [0, 0];
    this.localUniforms.uPadding = 4;
  }
  destroy() {
  }
  render(context, mode, uniforms) {
    this.configureRenderContext(context, mode);
    switch (mode) {
      case 5 /* PICKING */:
        if (this.picking) {
          setDrawCallUniforms(this.pickingDrawCall, uniforms);
          setDrawCallUniforms(this.pickingDrawCall, this.localUniforms);
          this.pickingDrawCall.uniform("uPicking", true);
          this.pickingDrawCall.draw();
        }
        break;
      case 0 /* DRAFT */:
      case 1 /* MEDIUM */:
      case 3 /* HIGH_PASS_1 */:
        setDrawCallUniforms(this.drawCall, uniforms);
        setDrawCallUniforms(this.drawCall, this.localUniforms);
        this.drawCall.uniform("uPicking", false);
        this.drawCall.draw();
        break;
      case 4 /* HIGH_PASS_2 */:
        setDrawCallUniforms(this.drawCall, uniforms);
        setDrawCallUniforms(this.drawCall, this.localUniforms);
        this.drawCall.uniform("uPicking", false);
        this.drawCall.draw();
        break;
      default:
        break;
    }
  }
  getDrawShaders() {
    return {
      vs: PointLabel_vs_default,
      fs: PointLabel_fs_default
    };
  }
  getPickingShaders() {
    return {
      vs: PointLabel_vs_default,
      fs: PointLabel_picking_fs_default
    };
  }
  getGLSourceTypes() {
    return kLabelNodeDataTypes;
  }
  getGLTargetTypes() {
    return kGLLabelNodeTypes;
  }
  getDataShader() {
    return {
      vs: PointLabel_data_vs_default,
      varyings: ["fPoint", "fColor", "fLabel"]
    };
  }
  computeMappings(mappings2) {
    const dataMappings = Object.assign({}, kLabelNodeMappings, super.computeMappings(mappings2));
    const idMapping = dataMappings.id;
    dataMappings.label = (entry, i4) => {
      const labelInfo = this.labelAtlas.labelMap.get(idMapping(entry, i4));
      return [
        labelInfo.index,
        labelInfo.length,
        labelInfo.width,
        labelInfo.height
      ];
    };
    return dataMappings;
  }
  handlePickingEvent(event, colorID) {
    if (this.picking && this.pickingColors.map.has(colorID)) {
      const id = this.idArray[this.pickingColors.map.get(colorID)];
      this.emit(event, id);
    }
  }
};

// src/graph/labels/circular/CircularLabel.vs.glsl
var CircularLabel_vs_default = `#version 300 es

precision lowp usampler2D;

#define M_PI 3.14159265359
#define M_2PI 6.28318530718

layout(location=0) in vec3 aVertex;
layout(location=1) in uint iPoint;
layout(location=2) in uint iColor;
layout(location=3) in uvec4 iLabel;
layout(location=4) in vec4 iPickingColor;

//layout(std140) uniform RenderUniforms {
    uniform mat4 uViewMatrix;
    uniform mat4 uSceneMatrix;
    uniform mat4 uProjectionMatrix;
    uniform vec2 uViewportSize;
    uniform float uPixelRatio;
    uniform sampler2D uGraphPoints;
    uniform sampler2D uColorPalette;
    uniform uint uCameraMode; // 0 = 2D; 1 = 3D;
//};
uniform sampler2D uCharTexture;
uniform float uVisibilityThreshold;
uniform vec2 uLabelPositioning;
uniform int uRepeatLabel;
uniform float uRepeatGap;
uniform float uPlacementMargin;
uniform float uLabelPlacement;
uniform vec2 uLabelDirection;
uniform bool uBackground;
uniform bool uPicking;
uniform float uPadding;

flat out vec4 fBackgroundColor;
flat out vec4 fTextColor;
flat out vec4 fHaloColor;
flat out vec4 fPickingColor;
flat out float fPixelRadius;
flat out float fLabelStep;
flat out vec2 fCharTextureSize;
flat out vec4 fLabelInfo;
flat out float fPixelLength;
out vec2 vFromCenter;

precision lowp usampler2D;
#define GLSLIFY 1

vec4 valueForIndex(sampler2D tex, int index) {
    int texWidth = textureSize(tex, 0).x;
    int col = index % texWidth;
    int row = index / texWidth;
    return texelFetch(tex, ivec2(col, row), 0);
}

uvec4 uvalueForIndex(usampler2D tex, int index) {
    int texWidth = textureSize(tex, 0).x;
    int col = index % texWidth;
    int row = index / texWidth;
    return texelFetch(tex, ivec2(col, row), 0);
}

uint uivalueForIndex(usampler2D tex, int index) {
    int texWidth = textureSize(tex, 0).x;
    int col = index % texWidth;
    int row = index / texWidth;
    return texelFetch(tex, ivec2(col, row), 0)[0];
}

// from https://en.wikipedia.org/wiki/SRGB#The_reverse_transformation
float luminance_x(float x) {
    return x <= 0.04045 ? x / 12.92 : pow((x + 0.055) / 1.055, 2.4);
}
float color_l(float l) {
    return min(1.0, max(0.0, l <= 0.0031308 ? l * 12.92 : pow(l * 1.055, 1.0 / 2.4) - 0.055));
}

// from https://en.wikipedia.org/wiki/Relative_luminance
float rgb2luminance(vec3 color) {
    // relative luminance
    // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef
    float r = luminance_x(color.r);
    float g = luminance_x(color.g);
    float b = luminance_x(color.b);
    return 0.2126 * r + 0.7152 * g + 0.0722 * b;
}

vec3 setLuminance(vec3 color, float luminance) {
    float r = luminance_x(color.r) * 0.2126;
    float g = luminance_x(color.g) * 0.7152;
    float b = luminance_x(color.b) * 0.0722;
    float colorLuminance = r + g + b;

    float tr = luminance * (r / colorLuminance);
    float tg = luminance * (g / colorLuminance);
    float tb = luminance * (b / colorLuminance);

    float rr = color_l(tr / 0.2126);
    float rg = color_l(tg / 0.7152);
    float rb = color_l(tb / 0.0722);

    return vec3(rr, rg, rb );
}

// https://www.w3.org/TR/WCAG20/#contrast-ratiodef
// (L1 + 0.05) / (L2 + 0.05), where
// - L1 is the relative luminance of the lighter of the colors, and
// - L2 is the relative luminance of the darker of the colors.
float findDarker(float luminance, float contrast) {
    return (contrast * luminance) + (0.05 * contrast) - 0.05;
}
float findLighter(float luminance, float contrast) {
    return (luminance + 0.05 - (0.05 * contrast)) / contrast;
}

vec3 contrastingColor(vec3 color, float contrast) {
    float luminance = rgb2luminance(color);
    float darker = findDarker(luminance, contrast);
    float lighter = findLighter(luminance, contrast);

    float targetLuminance;
    if (darker < 0.0 || darker > 1.0) {
        targetLuminance = lighter;
    } else if (lighter < 0.0 || lighter > 1.0) {
        targetLuminance = darker;
    } else {
        targetLuminance = abs(luminance - lighter) < abs(darker - luminance) ? lighter : darker;
    }

    return setLuminance(color, targetLuminance);
}

vec3 desaturateColor(vec3 color, float amount) {
    float l = rgb2luminance(color);
    vec3 gray = vec3(l, l, l);
    return mix(color, gray, amount);
}

void main() {
    vec4 point = valueForIndex(uGraphPoints, int(iPoint));
    vec3 position = point.xyz;
    float radius = point.w;
    // claculate the offset matrix, done as a matrix to be able to compute "billboard" vertices in the shader
    mat4 offsetMatrix = mat4(1.0);
    offsetMatrix[3] = vec4(position, 1.0);

    // reset the rotation of the model-view matrix
    mat4 modelMatrix = uViewMatrix * uSceneMatrix * offsetMatrix;
    mat4 lookAtMatrix = mat4(modelMatrix);
    if (uCameraMode == 1u) {
        lookAtMatrix[0] = vec4(1.0, 0.0, 0.0, lookAtMatrix[0][3]);
        lookAtMatrix[1] = vec4(0.0, 1.0, 0.0, lookAtMatrix[1][3]);
        lookAtMatrix[2] = vec4(0.0, 0.0, 1.0, lookAtMatrix[2][3]);
    }

    // the on-screen center of this point
    vec4 quadCenter = uProjectionMatrix * lookAtMatrix * vec4(0.0, 0.0, 0.0, 1.0);
    vec2 screenQuadCenter = quadCenter.xy / quadCenter.w;

    // the on-screen position of a side of this quad
    vec4 quadSide = uProjectionMatrix * lookAtMatrix * vec4(radius, 0.0, 0.0, 1.0);
    vec2 screenQuadSide = quadSide.xy / quadSide.w;

    // compute the pixel radius of this point for a size of 1 in world coordinates
    float pixelRadius = length((screenQuadSide - screenQuadCenter) * uViewportSize * 0.5);

    // send the size of the char texture to the fragment shader
    fCharTextureSize = vec2(textureSize(uCharTexture, 0));

    // send the render color to the fragment shader
    vec4 color = valueForIndex(uColorPalette, int(iColor));
    if (uBackground) {
        fBackgroundColor = vec4(color.rgb, 1.0);
        fTextColor = vec4(contrastingColor(color.rgb, 7.0), 1.0);
    } else {
        fBackgroundColor = vec4(color.rgb, 0.0);
        fTextColor = vec4(color.rgb, 1.0);
    }
    fHaloColor = mix(vec4(1.), vec4(0., 0., 0., 1.), float(length(fTextColor.rgb) > 0.866));
    fPickingColor = uPicking ? iPickingColor / 255.0 : vec4(0.0);

    // send thelabel info to the fragment shader
    fLabelInfo = vec4(iLabel);

    // send the pixel radius of this label to the fragment shader
    float padding = uPadding * uPixelRatio;
    float placementOffset = (fLabelInfo[3] + padding * 2.0) * uLabelPlacement + uPlacementMargin * (-1.0 + 2.0 * uLabelPlacement) * uPixelRatio;
    fPixelRadius = pixelRadius + placementOffset;

    // calculate the render matrix
    mat4 renderMatrix = uProjectionMatrix * lookAtMatrix;

    // compute the visibility multiplier
    float visibilityMultiplier = pixelRadius >= uVisibilityThreshold * 0.5 * uPixelRatio ? 1.0 : 0.0;

    // send the normalized length of a single pixel
    fPixelLength = 1.0 / fPixelRadius;

    // send the normalized distance from the center to the fragment shader
    vFromCenter = aVertex.xy;

    // compute the vertex position and its screen position
    float pixelLength = radius / pixelRadius;
    float textRadius = radius + pixelLength * placementOffset;
    vec3 labelOffset = vec3(0.0, 0.0, uCameraMode == 1u ? 0.01 : 0.0); // offset the label forward a tiny bit so it's always in front in 3D
    vec4 worldVertex = renderMatrix * vec4(aVertex * textRadius * visibilityMultiplier + labelOffset, 1.0);

    // find the number of label repetitions
    float repeatLabels = float(uint(uRepeatLabel));
    float repeatGap = uRepeatGap * uPixelRatio;
    float diameter = fPixelRadius * M_2PI;
    float maxLabels = min(repeatLabels, floor(diameter / (fLabelInfo[2] + repeatGap + padding * 2.0)));
    float maxLabelsLength = (fLabelInfo[2] + padding * 2.0) * maxLabels;
    float labelGap = (diameter - maxLabelsLength) / maxLabels;
    fLabelStep = fLabelInfo[2] + labelGap + padding * 2.0;

    // set the render vertex location
    gl_Position = worldVertex;
}
`;

// src/graph/labels/circular/CircularLabel.fs.glsl
var CircularLabel_fs_default = "#version 300 es\nprecision highp float;\nprecision lowp usampler2D;\n\n#define M_PI 3.14159265359\n#define M_2PI 6.28318530718\n\nprecision lowp usampler2D;\n#define GLSLIFY 1\n\nvec4 valueForIndex(sampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0);\n}\n\nuvec4 uvalueForIndex(usampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0);\n}\n\nuint uivalueForIndex(usampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0)[0];\n}\n\n// from https://en.wikipedia.org/wiki/SRGB#The_reverse_transformation\nfloat luminance_x(float x) {\n    return x <= 0.04045 ? x / 12.92 : pow((x + 0.055) / 1.055, 2.4);\n}\nfloat color_l(float l) {\n    return min(1.0, max(0.0, l <= 0.0031308 ? l * 12.92 : pow(l * 1.055, 1.0 / 2.4) - 0.055));\n}\n\n// from https://en.wikipedia.org/wiki/Relative_luminance\nfloat rgb2luminance(vec3 color) {\n    // relative luminance\n    // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    float r = luminance_x(color.r);\n    float g = luminance_x(color.g);\n    float b = luminance_x(color.b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n}\n\nvec3 setLuminance(vec3 color, float luminance) {\n    float r = luminance_x(color.r) * 0.2126;\n    float g = luminance_x(color.g) * 0.7152;\n    float b = luminance_x(color.b) * 0.0722;\n    float colorLuminance = r + g + b;\n\n    float tr = luminance * (r / colorLuminance);\n    float tg = luminance * (g / colorLuminance);\n    float tb = luminance * (b / colorLuminance);\n\n    float rr = color_l(tr / 0.2126);\n    float rg = color_l(tg / 0.7152);\n    float rb = color_l(tb / 0.0722);\n\n    return vec3(rr, rg, rb );\n}\n\n// https://www.w3.org/TR/WCAG20/#contrast-ratiodef\n// (L1 + 0.05) / (L2 + 0.05), where\n// - L1 is the relative luminance of the lighter of the colors, and\n// - L2 is the relative luminance of the darker of the colors.\nfloat findDarker(float luminance, float contrast) {\n    return (contrast * luminance) + (0.05 * contrast) - 0.05;\n}\nfloat findLighter(float luminance, float contrast) {\n    return (luminance + 0.05 - (0.05 * contrast)) / contrast;\n}\n\nvec3 contrastingColor(vec3 color, float contrast) {\n    float luminance = rgb2luminance(color);\n    float darker = findDarker(luminance, contrast);\n    float lighter = findLighter(luminance, contrast);\n\n    float targetLuminance;\n    if (darker < 0.0 || darker > 1.0) {\n        targetLuminance = lighter;\n    } else if (lighter < 0.0 || lighter > 1.0) {\n        targetLuminance = darker;\n    } else {\n        targetLuminance = abs(luminance - lighter) < abs(darker - luminance) ? lighter : darker;\n    }\n\n    return setLuminance(color, targetLuminance);\n}\n\nvec3 desaturateColor(vec3 color, float amount) {\n    float l = rgb2luminance(color);\n    vec3 gray = vec3(l, l, l);\n    return mix(color, gray, amount);\n}\n\nuniform vec4 uClearColor;\nuniform float uDesaturate;\nuniform float uBrightness;\nuniform float uFade;\nuniform float uAlpha;\n\nvec4 outputColor(vec4 color) {\n    // desaturate => fade => alpha\n    vec3 ret = mix(color.rgb, vec3(uBrightness + 1.0 / 2.0), abs(uBrightness));\n    ret = vec3(desaturateColor(ret, uDesaturate));\n    ret = mix(ret, uClearColor.rgb, uFade);\n    return vec4(ret, color.a * uAlpha);\n}\n\n#define MODE_DRAFT 0u\n#define MODE_MEDIUM 1u\n#define MODE_HIGH 2u\n#define MODE_HIGH_PASS_1 3u\n#define MODE_HIGH_PASS_2 4u\n#define MODE_PICKING 5u\n\n// most of these come from this excellent post:\n// https://iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n\nfloat opRound(in float d, in float r) {\n    return d - r;\n}\n\nfloat opOnion(in float d, in float r) {\n    return abs(d) - r;\n}\n\nfloat sdCircle(in vec2 p, in float r ) {\n    return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(in vec2 p, in float r) {\n    const float k = sqrt(3.0);\n    p.x = abs(p.x) - r;\n    p.y = p.y + (r) / k;\n    if (p.x + k * p.y > 0.0) {\n        p = vec2(p.x-k*p.y,-k*p.x-p.y) / 2.0;\n    }\n    p.x -= clamp(p.x, -2.0 * r, 0.0);\n    return -length(p) * sign(p.y);\n}\n\nfloat sdPentagon(in vec2 p, in float r) {\n    const vec3 k = vec3(0.809016994, 0.587785252, 0.726542528);\n    p.y = -(p.y) * 1.25;\n    p.x = abs(p.x) * 1.25;\n    p -= 2.0 * min(dot(vec2(-k.x, k.y), p), 0.0) * vec2(-k.x, k.y);\n    p -= 2.0 * min(dot(vec2(k.x, k.y), p), 0.0) * vec2(k.x, k.y);\n    p -= vec2(clamp(p.x, -r*k.z, r*k.z), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdOctagon(in vec2 p, in float r) {\n    // pi/8: cos, sin, tan.\n    const vec3 k = vec3(\n        -0.9238795325,   // sqrt(2+sqrt(2))/2\n        0.3826834323,   // sqrt(2-sqrt(2))/2\n        0.4142135623\n    ); // sqrt(2)-1\n    // reflections\n    p = abs(p) * 1.1;\n    p -= 2.0 * min(dot(vec2(k.x,k.y), p), 0.0) * vec2(k.x,k.y);\n    p -= 2.0 * min(dot(vec2(-k.x,k.y), p), 0.0) * vec2(-k.x,k.y);\n    // Polygon side.\n    p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdStar(in vec2 p, in float r, in uint n, in float m) { // m=[2,n]\n    // these 4 lines can be precomputed for a given shape\n    float an = 3.141593 / float(n);\n    float en = 3.141593 / m;\n    vec2  acs = vec2(cos(an), sin(an));\n    vec2  ecs = vec2(cos(en), sin(en)); // ecs=vec2(0,1) and simplify, for regular polygon,\n\n    // reduce to first sector\n    float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n    p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n    // line sdf\n    p -= r * acs;\n    p += ecs * clamp(-dot(p, ecs), 0.0, r * acs.y / ecs.y);\n    return length(p) * sign(p.x);\n}\n\nfloat sdCross(in vec2 p, in float w, in float r) {\n    p = abs(p);\n    return length(p - min(p.x + p.y, w) * 0.5) - r;\n}\n\n// TODO: Precompute this, we always pass the same parameters tot his function (v, vec2(1.0, 0.3), 0.0)\nfloat sdPlus( in vec2 p, in vec2 b, float r ) {\n    p = abs(p);\n    p = (p.y > p.x) ? p.yx : p.xy;\n\n    vec2  q = p - b;\n    float k = max(q.y, q.x);\n    vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);\n\n    return sign(k)*length(max(w, 0.0)) + r;\n}\n\nfloat sdBox( in vec2 p, in vec2 b ) {\n    vec2 d = abs(p) - b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nvec4 renderChar(float charWidth, vec4 texPixel, vec4 backgroundColor, vec4 haloColor, vec4 textColor, float halo) {\n    float edgeThreshold = 0.49;\n    float haloThreshold = 0.18; // sets max halo threshold\n    float smoothing = 1.0 / charWidth;\n    float distance = texPixel.a;\n\n    vec4 finalColor = backgroundColor;\n    if (distance > edgeThreshold - smoothing) { // text fill\n        float textEdge = smoothstep(edgeThreshold - smoothing, edgeThreshold + smoothing, distance);\n        vec4 textEdgeBlendColor = mix(haloColor, backgroundColor, float(halo == 0.));\n        finalColor = mix(textEdgeBlendColor, textColor, textEdge);\n    }\n    else if (distance > edgeThreshold - haloThreshold * halo - smoothing) { // outline\n        float haloEdge = smoothstep(edgeThreshold - haloThreshold * halo - smoothing, edgeThreshold - haloThreshold * halo + smoothing, distance);\n        finalColor = mix(backgroundColor, haloColor, haloEdge);\n    }\n\n    return finalColor;\n}\n\nuniform usampler2D uLabelIndices;\nuniform usampler2D uCharBoxes;\nuniform sampler2D uCharTexture;\nuniform float uPixelRatio;\nuniform uint uRenderMode;\nuniform vec2 uLabelDirection;\nuniform bool uMirror;\nuniform float uPadding;\nuniform float uHalo;\n\nflat in vec4 fBackgroundColor;\nflat in vec4 fTextColor;\nflat in vec4 fHaloColor;\nflat in float fPixelRadius;\nflat in float fLabelStep;\nflat in vec2 fCharTextureSize;\nflat in vec4 fLabelInfo;\nflat in float fPixelLength;\nin vec2 vFromCenter;\n\nout vec4 fragColor;\n\nfloat cross_ish(vec2 a, vec2 b)\n{\n    return a.x * b.y - a.y * b.x;\n}\n\nvoid main() {\n    float padding = uPadding * uPixelRatio;\n    float fromCenter = length(vFromCenter);\n    float halfLabelWidth = fLabelInfo[2] * 0.5;\n    float halfLabelHeight = fLabelInfo[3] * 0.5;\n    float normalizedHeight = (halfLabelHeight + padding) / fPixelRadius;\n    float circle = fromCenter - (1.0 - normalizedHeight);\n    float ring = opOnion(circle, normalizedHeight);\n\n    vec2 positionVector = uLabelDirection;\n    float angle = atan(cross_ish(vFromCenter, positionVector), dot(vFromCenter, positionVector));\n    float angleDistance = angle * fPixelRadius;\n    float paddedLabelWidth = fLabelInfo[2] + padding * 2.0;\n    float offsetAngleDistance = angleDistance + halfLabelWidth + padding;\n\n    if (ring > 0.0 || fract(offsetAngleDistance / fLabelStep) >= paddedLabelWidth / fLabelStep) {\n        discard;\n    }\n\n    float width = fract(offsetAngleDistance / fLabelStep) * fLabelStep;\n    float height = (1.0 - fromCenter) * fPixelRadius - padding;\n    vec4 finalColor;\n\n    if (height < 0.0 || height > fLabelInfo[3] || width < padding || width > fLabelInfo[2] + padding) {\n        finalColor = fBackgroundColor;\n    } else {\n        float uProgress = (width - padding) / fLabelInfo[2];\n        if (uMirror) {\n            uProgress = 1.0 - uProgress;\n        }\n        float stringProgress = fLabelInfo[0] + fLabelInfo[1] * uProgress;\n        float stringIndex = floor(stringProgress);\n        int charIndex = int(uivalueForIndex(uLabelIndices, int(stringIndex)));\n        vec4 charBox = vec4(uvalueForIndex(uCharBoxes, charIndex));\n        float charMult = stringProgress - stringIndex;\n\n        vec4 charBoxUV = charBox / vec4(fCharTextureSize, fCharTextureSize);\n\n        vec2 uv = vec2(charBoxUV[0] + charBoxUV[2] * charMult, charBoxUV[1] + charBoxUV[3] * fLabelInfo[1]);\n        if (uMirror) {\n            uv = vec2(charBoxUV[0] + charBoxUV[2] * charMult, charBoxUV[1] + charBoxUV[3] * (height / fLabelInfo[3]));\n        } else {\n            uv = vec2(charBoxUV[0] + charBoxUV[2] * charMult, charBoxUV[1] + charBoxUV[3] * (1.0 - height / fLabelInfo[3]));\n        }\n\n        vec4 texPixel = texture(uCharTexture, uv);\n\n        finalColor = renderChar(fLabelInfo[3], texPixel, fBackgroundColor, fHaloColor, fTextColor, uHalo);\n    }\n\n    finalColor.a *= smoothstep(0.0, fPixelLength * 1.5, abs(ring));\n\n    float threshold = uRenderMode == MODE_HIGH_PASS_1 ? 0.75 : 0.5;\n\n    if (uRenderMode != MODE_HIGH_PASS_2) {\n        if (finalColor.a < threshold) {\n            discard;\n        }\n        fragColor = outputColor(vec4(finalColor.rgb, 1.0));\n    } else {\n        if (finalColor.a == 1.0) {\n            discard;\n        }\n        fragColor = outputColor(finalColor);\n    }\n}\n";

// src/graph/labels/circular/CircularLabel.picking.fs.glsl
var CircularLabel_picking_fs_default = "#version 300 es\nprecision highp float;\n#define GLSLIFY 1\n\n// most of these come from this excellent post:\n// https://iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n\nfloat opRound(in float d, in float r) {\n    return d - r;\n}\n\nfloat opOnion(in float d, in float r) {\n    return abs(d) - r;\n}\n\nfloat sdCircle(in vec2 p, in float r ) {\n    return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(in vec2 p, in float r) {\n    const float k = sqrt(3.0);\n    p.x = abs(p.x) - r;\n    p.y = p.y + (r) / k;\n    if (p.x + k * p.y > 0.0) {\n        p = vec2(p.x-k*p.y,-k*p.x-p.y) / 2.0;\n    }\n    p.x -= clamp(p.x, -2.0 * r, 0.0);\n    return -length(p) * sign(p.y);\n}\n\nfloat sdPentagon(in vec2 p, in float r) {\n    const vec3 k = vec3(0.809016994, 0.587785252, 0.726542528);\n    p.y = -(p.y) * 1.25;\n    p.x = abs(p.x) * 1.25;\n    p -= 2.0 * min(dot(vec2(-k.x, k.y), p), 0.0) * vec2(-k.x, k.y);\n    p -= 2.0 * min(dot(vec2(k.x, k.y), p), 0.0) * vec2(k.x, k.y);\n    p -= vec2(clamp(p.x, -r*k.z, r*k.z), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdOctagon(in vec2 p, in float r) {\n    // pi/8: cos, sin, tan.\n    const vec3 k = vec3(\n        -0.9238795325,   // sqrt(2+sqrt(2))/2\n        0.3826834323,   // sqrt(2-sqrt(2))/2\n        0.4142135623\n    ); // sqrt(2)-1\n    // reflections\n    p = abs(p) * 1.1;\n    p -= 2.0 * min(dot(vec2(k.x,k.y), p), 0.0) * vec2(k.x,k.y);\n    p -= 2.0 * min(dot(vec2(-k.x,k.y), p), 0.0) * vec2(-k.x,k.y);\n    // Polygon side.\n    p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdStar(in vec2 p, in float r, in uint n, in float m) { // m=[2,n]\n    // these 4 lines can be precomputed for a given shape\n    float an = 3.141593 / float(n);\n    float en = 3.141593 / m;\n    vec2  acs = vec2(cos(an), sin(an));\n    vec2  ecs = vec2(cos(en), sin(en)); // ecs=vec2(0,1) and simplify, for regular polygon,\n\n    // reduce to first sector\n    float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n    p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n    // line sdf\n    p -= r * acs;\n    p += ecs * clamp(-dot(p, ecs), 0.0, r * acs.y / ecs.y);\n    return length(p) * sign(p.x);\n}\n\nfloat sdCross(in vec2 p, in float w, in float r) {\n    p = abs(p);\n    return length(p - min(p.x + p.y, w) * 0.5) - r;\n}\n\n// TODO: Precompute this, we always pass the same parameters tot his function (v, vec2(1.0, 0.3), 0.0)\nfloat sdPlus( in vec2 p, in vec2 b, float r ) {\n    p = abs(p);\n    p = (p.y > p.x) ? p.yx : p.xy;\n\n    vec2  q = p - b;\n    float k = max(q.y, q.x);\n    vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);\n\n    return sign(k)*length(max(w, 0.0)) + r;\n}\n\nfloat sdBox( in vec2 p, in vec2 b ) {\n    vec2 d = abs(p) - b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nuniform float uPixelRatio;\nuniform vec2 uLabelDirection;\nuniform float uPadding;\nuniform bool uBackground;\n\nflat in vec4 fPickingColor;\nflat in float fPixelRadius;\nflat in float fLabelStep;\nflat in vec4 fLabelInfo;\nin vec2 vFromCenter;\n\nout vec4 fragColor;\n\nfloat cross_ish(vec2 a, vec2 b)\n{\n    return a.x * b.y - a.y * b.x;\n}\n\nvoid main() {\n    float padding = uPadding * uPixelRatio;\n    float fromCenter = length(vFromCenter);\n    float halfLabelWidth = fLabelInfo[2] * 0.5;\n    float halfLabelHeight = fLabelInfo[3] * 0.5;\n    float normalizedHeight = (halfLabelHeight + padding) / fPixelRadius;\n    float circle = fromCenter - (1.0 - normalizedHeight);\n    float ring = opOnion(circle, normalizedHeight);\n\n    vec2 positionVector = uLabelDirection;\n    float angle = atan(cross_ish(vFromCenter, positionVector), dot(vFromCenter, positionVector));\n    float angleDistance = angle * fPixelRadius;\n    float paddedLabelWidth = fLabelInfo[2] + padding * 2.0;\n    float offsetAngleDistance = angleDistance + halfLabelWidth + padding;\n\n    if (ring > 0.0 || fract(offsetAngleDistance / fLabelStep) >= paddedLabelWidth / fLabelStep) {\n        discard;\n    }\n\n    float width = fract(offsetAngleDistance / fLabelStep) * fLabelStep;\n    float height = (1.0 - fromCenter) * fPixelRadius - padding;\n\n    if (!uBackground && (height < 0.0 || height > fLabelInfo[3] || width < padding || width > fLabelInfo[2] + padding)) {\n            discard;\n    } else {\n        fragColor = fPickingColor;\n    }\n}\n";

// src/graph/labels/circular/CircularLabel.ts
var CircularLabelPlacement = /* @__PURE__ */ ((CircularLabelPlacement2) => {
  CircularLabelPlacement2[CircularLabelPlacement2["INSIDE"] = 0] = "INSIDE";
  CircularLabelPlacement2[CircularLabelPlacement2["OUTSIDE"] = 1] = "OUTSIDE";
  return CircularLabelPlacement2;
})(CircularLabelPlacement || {});
var CircularLabel = class extends PointLabel {
  get repeatLabel() {
    return this.localUniforms.uRepeatLabel;
  }
  set repeatLabel(value) {
    this.localUniforms.uRepeatLabel = value;
  }
  get repeatGap() {
    return this.localUniforms.uRepeatGap;
  }
  set repeatGap(value) {
    this.localUniforms.uRepeatGap = value;
  }
  get placementMargin() {
    return this.localUniforms.uPlacementMargin;
  }
  set placementMargin(value) {
    this.localUniforms.uPlacementMargin = value;
  }
  get mirror() {
    return this.localUniforms.uMirror;
  }
  set mirror(value) {
    this.localUniforms.uMirror = value;
  }
  get labelPlacement() {
    return this.localUniforms.uLabelPlacement;
  }
  set labelPlacement(value) {
    this.localUniforms.uLabelPlacement = value;
  }
  get labelDirection() {
    return this._labelDirection;
  }
  set labelDirection(value) {
    const rad = value * 0.0174533;
    this.localUniforms.uLabelDirection = [Math.cos(rad), Math.sin(rad)];
  }
  initialize(context, points2, data, mappings2, pickingManager, font = "monospace", bold = false, charSpacing = 0, labelAtlas) {
    super.initialize(context, points2, data, mappings2, pickingManager, font, bold, charSpacing, labelAtlas);
    this.localUniforms.uRepeatLabel = -1;
    this.localUniforms.uRepeatGap = 5;
    this.localUniforms.uPlacementMargin = 0;
    this.localUniforms.uMirror = false;
    this.localUniforms.uLabelPlacement = 1 /* OUTSIDE */;
    this.labelDirection = 90;
  }
  getDrawShaders() {
    return {
      vs: CircularLabel_vs_default,
      fs: CircularLabel_fs_default
    };
  }
  getPickingShaders() {
    return {
      vs: CircularLabel_vs_default,
      fs: CircularLabel_picking_fs_default
    };
  }
};

// src/graph/labels/ring/RingLabel.vs.glsl
var RingLabel_vs_default = '#version 300 es\n\nprecision lowp usampler2D;\n\n#define M_PI 3.14159265359\n#define M_2PI 6.28318530718\n\nlayout(location=0) in vec3 aVertex;\nlayout(location=1) in uint iPoint;\nlayout(location=2) in uint iColor;\nlayout(location=3) in uvec4 iLabel;\nlayout(location=4) in vec4 iPickingColor;\n\n//layout(std140) uniform RenderUniforms {\n    uniform mat4 uViewMatrix;\n    uniform mat4 uSceneMatrix;\n    uniform mat4 uProjectionMatrix;\n    uniform vec2 uViewportSize;\n    uniform float uPixelRatio;\n    uniform sampler2D uGraphPoints;\n    uniform sampler2D uColorPalette;\n    uniform uint uCameraMode; // 0 = 2D; 1 = 3D;\n//};\nuniform sampler2D uCharTexture;\nuniform float uVisibilityThreshold;\nuniform vec2 uLabelPositioning;\nuniform int uRepeatLabel;\nuniform float uRepeatGap;\nuniform float uPlacementMargin;\nuniform float uLabelPlacement;\nuniform vec2 uLabelDirection;\nuniform bool uBackground;\nuniform bool uPicking;\nuniform float uPadding;\n\nflat out vec4 fBackgroundColor;\nflat out vec4 fTextColor;\nflat out vec4 fHaloColor;\nflat out vec4 fPickingColor;\nflat out vec4 fLabelInfo;\nflat out float fPixelRadius;\nflat out float fPixelLength;\nflat out float fThickness;\nflat out float fLabelStep;\nflat out vec2 fCharTextureSize;\n\nout vec2 vFromCenter;\n\nprecision lowp usampler2D;\n#define GLSLIFY 1\n\nvec4 valueForIndex(sampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0);\n}\n\nuvec4 uvalueForIndex(usampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0);\n}\n\nuint uivalueForIndex(usampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0)[0];\n}\n\n// from https://en.wikipedia.org/wiki/SRGB#The_reverse_transformation\nfloat luminance_x(float x) {\n    return x <= 0.04045 ? x / 12.92 : pow((x + 0.055) / 1.055, 2.4);\n}\nfloat color_l(float l) {\n    return min(1.0, max(0.0, l <= 0.0031308 ? l * 12.92 : pow(l * 1.055, 1.0 / 2.4) - 0.055));\n}\n\n// from https://en.wikipedia.org/wiki/Relative_luminance\nfloat rgb2luminance(vec3 color) {\n    // relative luminance\n    // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    float r = luminance_x(color.r);\n    float g = luminance_x(color.g);\n    float b = luminance_x(color.b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n}\n\nvec3 setLuminance(vec3 color, float luminance) {\n    float r = luminance_x(color.r) * 0.2126;\n    float g = luminance_x(color.g) * 0.7152;\n    float b = luminance_x(color.b) * 0.0722;\n    float colorLuminance = r + g + b;\n\n    float tr = luminance * (r / colorLuminance);\n    float tg = luminance * (g / colorLuminance);\n    float tb = luminance * (b / colorLuminance);\n\n    float rr = color_l(tr / 0.2126);\n    float rg = color_l(tg / 0.7152);\n    float rb = color_l(tb / 0.0722);\n\n    return vec3(rr, rg, rb );\n}\n\n// https://www.w3.org/TR/WCAG20/#contrast-ratiodef\n// (L1 + 0.05) / (L2 + 0.05), where\n// - L1 is the relative luminance of the lighter of the colors, and\n// - L2 is the relative luminance of the darker of the colors.\nfloat findDarker(float luminance, float contrast) {\n    return (contrast * luminance) + (0.05 * contrast) - 0.05;\n}\nfloat findLighter(float luminance, float contrast) {\n    return (luminance + 0.05 - (0.05 * contrast)) / contrast;\n}\n\nvec3 contrastingColor(vec3 color, float contrast) {\n    float luminance = rgb2luminance(color);\n    float darker = findDarker(luminance, contrast);\n    float lighter = findLighter(luminance, contrast);\n\n    float targetLuminance;\n    if (darker < 0.0 || darker > 1.0) {\n        targetLuminance = lighter;\n    } else if (lighter < 0.0 || lighter > 1.0) {\n        targetLuminance = darker;\n    } else {\n        targetLuminance = abs(luminance - lighter) < abs(darker - luminance) ? lighter : darker;\n    }\n\n    return setLuminance(color, targetLuminance);\n}\n\nvec3 desaturateColor(vec3 color, float amount) {\n    float l = rgb2luminance(color);\n    vec3 gray = vec3(l, l, l);\n    return mix(color, gray, amount);\n}\n\nvoid main() {\n    vec4 point = valueForIndex(uGraphPoints, int(iPoint));\n    vec3 position = point.xyz;\n    float radius = point.w;\n    // claculate the offset matrix, done as a matrix to be able to compute "billboard" vertices in the shader\n    mat4 offsetMatrix = mat4(1.0);\n    offsetMatrix[3] = vec4(position, 1.0);\n\n    // reset the rotation of the model-view matrix\n    mat4 modelMatrix = uViewMatrix * uSceneMatrix * offsetMatrix;\n    mat4 lookAtMatrix = mat4(modelMatrix);\n    if (uCameraMode == 1u) {\n        lookAtMatrix[0] = vec4(1.0, 0.0, 0.0, lookAtMatrix[0][3]);\n        lookAtMatrix[1] = vec4(0.0, 1.0, 0.0, lookAtMatrix[1][3]);\n        lookAtMatrix[2] = vec4(0.0, 0.0, 1.0, lookAtMatrix[2][3]);\n    }\n\n    // the on-screen center of this point\n    vec4 quadCenter = uProjectionMatrix * lookAtMatrix * vec4(0.0, 0.0, 0.0, 1.0);\n    vec2 screenQuadCenter = quadCenter.xy / quadCenter.w;\n\n    // the on-screen position of a side of this quad\n    vec4 quadSide = uProjectionMatrix * lookAtMatrix * vec4(radius, 0.0, 0.0, 1.0);\n    vec2 screenQuadSide = quadSide.xy / quadSide.w;\n\n    // compute the pixel radius of this point for a size of 1 in world coordinates\n    float pixelRadius = length((screenQuadSide - screenQuadCenter) * uViewportSize * 0.5);\n\n    // send the size of the char texture to the fragment shader\n    fCharTextureSize = vec2(textureSize(uCharTexture, 0));\n\n    // send the render color to the fragment shader\n    vec4 color = valueForIndex(uColorPalette, int(iColor));\n    fBackgroundColor = vec4(color.rgb, 1.0);\n    fTextColor = vec4(contrastingColor(color.rgb, 7.0), 1.0);\n    fHaloColor = mix(vec4(1.), vec4(0., 0., 0., 1.), float(length(fTextColor.rgb) > 0.866));\n    fPickingColor = uPicking ? iPickingColor / 255.0 : vec4(0.0);\n\n    // send thelabel info to the fragment shader\n    fLabelInfo = vec4(iLabel);\n\n    // calculate the label visibility\n    float visibilityThreshold = uVisibilityThreshold * uPixelRatio;\n    float visibilityMultiplier = smoothstep(visibilityThreshold * 0.5 - fLabelInfo[3], visibilityThreshold * 0.5, pixelRadius * 0.5);\n\n    // send the pixel radius of this label to the fragment shader\n    float padding = uPadding * uPixelRatio;\n    float minThickness = max(2.0, min(pixelRadius * 0.1, 3.0 * uPixelRatio));\n    fThickness = (minThickness + (fLabelInfo[3] + padding * 2.0 - minThickness) * visibilityMultiplier) * 0.5;\n    fPixelRadius = pixelRadius + fThickness;\n\n    // send the normalized length of a single pixel\n    fPixelLength = 1.0 / fPixelRadius;\n\n    // calculate the render matrix\n    mat4 renderMatrix = uProjectionMatrix * lookAtMatrix;\n\n    // send the normalized distance from the center to the fragment shader\n    vFromCenter = aVertex.xy;\n\n    // compute the vertex position and its screen position\n    float pixelLength = radius / pixelRadius;\n    float textRadius = radius + pixelLength * fThickness;\n    vec4 worldVertex = renderMatrix * vec4(aVertex * textRadius, 1.0);\n\n    // find the number of label repetitions\n    float repeatLabels = float(uint(uRepeatLabel));\n    float repeatGap = uRepeatGap * uPixelRatio;\n    float circumference = fPixelRadius * M_2PI;\n    float maxLabels = min(repeatLabels, floor(circumference / (fLabelInfo[2] + repeatGap + padding * 2.0)));\n    float maxLabelsLength = (fLabelInfo[2] + padding * 2.0) * maxLabels;\n    float labelGap = (circumference - maxLabelsLength) / maxLabels;\n    fLabelStep = fLabelInfo[2] + labelGap + padding * 2.0;\n\n    // set the render vertex location\n    gl_Position = worldVertex;\n}\n';

// src/graph/labels/ring/RingLabel.fs.glsl
var RingLabel_fs_default = "#version 300 es\nprecision highp float;\nprecision lowp usampler2D;\n\n#define M_PI 3.14159265359\n#define M_2PI 6.28318530718\n\nprecision lowp usampler2D;\n#define GLSLIFY 1\n\nvec4 valueForIndex(sampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0);\n}\n\nuvec4 uvalueForIndex(usampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0);\n}\n\nuint uivalueForIndex(usampler2D tex, int index) {\n    int texWidth = textureSize(tex, 0).x;\n    int col = index % texWidth;\n    int row = index / texWidth;\n    return texelFetch(tex, ivec2(col, row), 0)[0];\n}\n\n// from https://en.wikipedia.org/wiki/SRGB#The_reverse_transformation\nfloat luminance_x(float x) {\n    return x <= 0.04045 ? x / 12.92 : pow((x + 0.055) / 1.055, 2.4);\n}\nfloat color_l(float l) {\n    return min(1.0, max(0.0, l <= 0.0031308 ? l * 12.92 : pow(l * 1.055, 1.0 / 2.4) - 0.055));\n}\n\n// from https://en.wikipedia.org/wiki/Relative_luminance\nfloat rgb2luminance(vec3 color) {\n    // relative luminance\n    // see http://www.w3.org/TR/2008/REC-WCAG20-20081211/#relativeluminancedef\n    float r = luminance_x(color.r);\n    float g = luminance_x(color.g);\n    float b = luminance_x(color.b);\n    return 0.2126 * r + 0.7152 * g + 0.0722 * b;\n}\n\nvec3 setLuminance(vec3 color, float luminance) {\n    float r = luminance_x(color.r) * 0.2126;\n    float g = luminance_x(color.g) * 0.7152;\n    float b = luminance_x(color.b) * 0.0722;\n    float colorLuminance = r + g + b;\n\n    float tr = luminance * (r / colorLuminance);\n    float tg = luminance * (g / colorLuminance);\n    float tb = luminance * (b / colorLuminance);\n\n    float rr = color_l(tr / 0.2126);\n    float rg = color_l(tg / 0.7152);\n    float rb = color_l(tb / 0.0722);\n\n    return vec3(rr, rg, rb );\n}\n\n// https://www.w3.org/TR/WCAG20/#contrast-ratiodef\n// (L1 + 0.05) / (L2 + 0.05), where\n// - L1 is the relative luminance of the lighter of the colors, and\n// - L2 is the relative luminance of the darker of the colors.\nfloat findDarker(float luminance, float contrast) {\n    return (contrast * luminance) + (0.05 * contrast) - 0.05;\n}\nfloat findLighter(float luminance, float contrast) {\n    return (luminance + 0.05 - (0.05 * contrast)) / contrast;\n}\n\nvec3 contrastingColor(vec3 color, float contrast) {\n    float luminance = rgb2luminance(color);\n    float darker = findDarker(luminance, contrast);\n    float lighter = findLighter(luminance, contrast);\n\n    float targetLuminance;\n    if (darker < 0.0 || darker > 1.0) {\n        targetLuminance = lighter;\n    } else if (lighter < 0.0 || lighter > 1.0) {\n        targetLuminance = darker;\n    } else {\n        targetLuminance = abs(luminance - lighter) < abs(darker - luminance) ? lighter : darker;\n    }\n\n    return setLuminance(color, targetLuminance);\n}\n\nvec3 desaturateColor(vec3 color, float amount) {\n    float l = rgb2luminance(color);\n    vec3 gray = vec3(l, l, l);\n    return mix(color, gray, amount);\n}\n\nuniform vec4 uClearColor;\nuniform float uDesaturate;\nuniform float uBrightness;\nuniform float uFade;\nuniform float uAlpha;\n\nvec4 outputColor(vec4 color) {\n    // desaturate => fade => alpha\n    vec3 ret = mix(color.rgb, vec3(uBrightness + 1.0 / 2.0), abs(uBrightness));\n    ret = vec3(desaturateColor(ret, uDesaturate));\n    ret = mix(ret, uClearColor.rgb, uFade);\n    return vec4(ret, color.a * uAlpha);\n}\n\n#define MODE_DRAFT 0u\n#define MODE_MEDIUM 1u\n#define MODE_HIGH 2u\n#define MODE_HIGH_PASS_1 3u\n#define MODE_HIGH_PASS_2 4u\n#define MODE_PICKING 5u\n\n// most of these come from this excellent post:\n// https://iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n\nfloat opRound(in float d, in float r) {\n    return d - r;\n}\n\nfloat opOnion(in float d, in float r) {\n    return abs(d) - r;\n}\n\nfloat sdCircle(in vec2 p, in float r ) {\n    return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(in vec2 p, in float r) {\n    const float k = sqrt(3.0);\n    p.x = abs(p.x) - r;\n    p.y = p.y + (r) / k;\n    if (p.x + k * p.y > 0.0) {\n        p = vec2(p.x-k*p.y,-k*p.x-p.y) / 2.0;\n    }\n    p.x -= clamp(p.x, -2.0 * r, 0.0);\n    return -length(p) * sign(p.y);\n}\n\nfloat sdPentagon(in vec2 p, in float r) {\n    const vec3 k = vec3(0.809016994, 0.587785252, 0.726542528);\n    p.y = -(p.y) * 1.25;\n    p.x = abs(p.x) * 1.25;\n    p -= 2.0 * min(dot(vec2(-k.x, k.y), p), 0.0) * vec2(-k.x, k.y);\n    p -= 2.0 * min(dot(vec2(k.x, k.y), p), 0.0) * vec2(k.x, k.y);\n    p -= vec2(clamp(p.x, -r*k.z, r*k.z), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdOctagon(in vec2 p, in float r) {\n    // pi/8: cos, sin, tan.\n    const vec3 k = vec3(\n        -0.9238795325,   // sqrt(2+sqrt(2))/2\n        0.3826834323,   // sqrt(2-sqrt(2))/2\n        0.4142135623\n    ); // sqrt(2)-1\n    // reflections\n    p = abs(p) * 1.1;\n    p -= 2.0 * min(dot(vec2(k.x,k.y), p), 0.0) * vec2(k.x,k.y);\n    p -= 2.0 * min(dot(vec2(-k.x,k.y), p), 0.0) * vec2(-k.x,k.y);\n    // Polygon side.\n    p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdStar(in vec2 p, in float r, in uint n, in float m) { // m=[2,n]\n    // these 4 lines can be precomputed for a given shape\n    float an = 3.141593 / float(n);\n    float en = 3.141593 / m;\n    vec2  acs = vec2(cos(an), sin(an));\n    vec2  ecs = vec2(cos(en), sin(en)); // ecs=vec2(0,1) and simplify, for regular polygon,\n\n    // reduce to first sector\n    float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n    p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n    // line sdf\n    p -= r * acs;\n    p += ecs * clamp(-dot(p, ecs), 0.0, r * acs.y / ecs.y);\n    return length(p) * sign(p.x);\n}\n\nfloat sdCross(in vec2 p, in float w, in float r) {\n    p = abs(p);\n    return length(p - min(p.x + p.y, w) * 0.5) - r;\n}\n\n// TODO: Precompute this, we always pass the same parameters tot his function (v, vec2(1.0, 0.3), 0.0)\nfloat sdPlus( in vec2 p, in vec2 b, float r ) {\n    p = abs(p);\n    p = (p.y > p.x) ? p.yx : p.xy;\n\n    vec2  q = p - b;\n    float k = max(q.y, q.x);\n    vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);\n\n    return sign(k)*length(max(w, 0.0)) + r;\n}\n\nfloat sdBox( in vec2 p, in vec2 b ) {\n    vec2 d = abs(p) - b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nvec4 renderChar(float charWidth, vec4 texPixel, vec4 backgroundColor, vec4 haloColor, vec4 textColor, float halo) {\n    float edgeThreshold = 0.49;\n    float haloThreshold = 0.18; // sets max halo threshold\n    float smoothing = 1.0 / charWidth;\n    float distance = texPixel.a;\n\n    vec4 finalColor = backgroundColor;\n    if (distance > edgeThreshold - smoothing) { // text fill\n        float textEdge = smoothstep(edgeThreshold - smoothing, edgeThreshold + smoothing, distance);\n        vec4 textEdgeBlendColor = mix(haloColor, backgroundColor, float(halo == 0.));\n        finalColor = mix(textEdgeBlendColor, textColor, textEdge);\n    }\n    else if (distance > edgeThreshold - haloThreshold * halo - smoothing) { // outline\n        float haloEdge = smoothstep(edgeThreshold - haloThreshold * halo - smoothing, edgeThreshold - haloThreshold * halo + smoothing, distance);\n        finalColor = mix(backgroundColor, haloColor, haloEdge);\n    }\n\n    return finalColor;\n}\n\nuniform usampler2D uLabelIndices;\nuniform usampler2D uCharBoxes;\nuniform sampler2D uCharTexture;\nuniform float uPixelRatio;\nuniform uint uRenderMode;\nuniform vec2 uLabelDirection;\nuniform bool uMirror;\nuniform float uPadding;\nuniform float uHalo;\n\nflat in vec4 fBackgroundColor;\nflat in vec4 fTextColor;\nflat in vec4 fHaloColor;\nflat in float fPixelRadius;\nflat in float fLabelStep;\nflat in vec2 fCharTextureSize;\nflat in vec4 fLabelInfo;\nflat in float fPixelLength;\nflat in float fThickness;\nin vec2 vFromCenter;\n\nout vec4 fragColor;\n\nfloat cross_ish(vec2 a, vec2 b)\n{\n    return a.x * b.y - a.y * b.x;\n}\n\nvoid main() {\n    float padding = uPadding * uPixelRatio;\n    float fromCenter = length(vFromCenter);\n    float thickness = fThickness * fPixelLength;\n    float antialias = min(thickness, fPixelLength * 1.5);\n    float radius = 1.0 - thickness;\n    float circle = fromCenter - (1.0 - thickness);\n    float ring = opOnion(circle, thickness);\n    float modeDistance = uRenderMode == MODE_HIGH_PASS_1 ? -antialias : -antialias * 0.5;\n    float ringThreshold = uRenderMode == MODE_HIGH_PASS_2 ? 0.0 : modeDistance;\n\n    if (ring > ringThreshold) {\n        discard;\n    }\n\n    float halfLabelWidth = fLabelInfo[2] * 0.5;\n    float halfLabelHeight = fLabelInfo[3] * 0.5;\n    float normalizedHeight = (halfLabelHeight + padding) / fPixelRadius;\n\n    vec2 positionVector = uLabelDirection;\n    float angle = atan(cross_ish(vFromCenter, positionVector), dot(vFromCenter, positionVector));\n    float angleDistance = angle * fPixelRadius;\n    float paddedLabelWidth = fLabelInfo[2] + padding * 2.0;\n    float offsetAngleDistance = angleDistance + halfLabelWidth + padding;\n\n    float width = fract(offsetAngleDistance / fLabelStep) * fLabelStep;\n    float height = (1.0 - fromCenter) * fPixelRadius - padding;\n    vec4 finalColor;\n\n    if (height < 0.0 || height > fLabelInfo[3] || width < padding || width > fLabelInfo[2] + padding) {\n        finalColor = fBackgroundColor;\n    } else {\n        float uProgress = (width - padding) / fLabelInfo[2];\n        if (uMirror) {\n            uProgress = 1.0 - uProgress;\n        }\n        float stringProgress = fLabelInfo[0] + fLabelInfo[1] * uProgress;\n        float stringIndex = floor(stringProgress);\n        int charIndex = int(uivalueForIndex(uLabelIndices, int(stringIndex)));\n        vec4 charBox = vec4(uvalueForIndex(uCharBoxes, charIndex));\n        float charMult = stringProgress - stringIndex;\n\n        vec4 charBoxUV = charBox / vec4(fCharTextureSize, fCharTextureSize);\n\n        vec2 uv = vec2(charBoxUV[0] + charBoxUV[2] * charMult, charBoxUV[1] + charBoxUV[3] * fLabelInfo[1]);\n        if (uMirror) {\n            uv = vec2(charBoxUV[0] + charBoxUV[2] * charMult, charBoxUV[1] + charBoxUV[3] * (height / fLabelInfo[3]));\n        } else {\n            uv = vec2(charBoxUV[0] + charBoxUV[2] * charMult, charBoxUV[1] + charBoxUV[3] * (1.0 - height / fLabelInfo[3]));\n        }\n\n        vec4 texPixel = texture(uCharTexture, uv);\n\n        finalColor = renderChar(fLabelInfo[3], texPixel, fBackgroundColor, fHaloColor, fTextColor, uHalo);\n    }\n\n    if (uRenderMode == MODE_HIGH_PASS_2) {\n        if (ring < -antialias) {\n            discard;\n        }\n        fragColor = outputColor(vec4(finalColor.rgb, smoothstep(0.0, antialias, abs(ring))));\n    } else {\n        fragColor = outputColor(vec4(finalColor.rgb, 1.0));\n    }\n\n//    fragColor = vec4(1.0,0.0,1.0,1.0);\n}\n";

// src/graph/labels/ring/RingLabel.picking.fs.glsl
var RingLabel_picking_fs_default = "#version 300 es\nprecision highp float;\nprecision lowp usampler2D;\n#define GLSLIFY 1\n\n// most of these come from this excellent post:\n// https://iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n\nfloat opRound(in float d, in float r) {\n    return d - r;\n}\n\nfloat opOnion(in float d, in float r) {\n    return abs(d) - r;\n}\n\nfloat sdCircle(in vec2 p, in float r ) {\n    return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(in vec2 p, in float r) {\n    const float k = sqrt(3.0);\n    p.x = abs(p.x) - r;\n    p.y = p.y + (r) / k;\n    if (p.x + k * p.y > 0.0) {\n        p = vec2(p.x-k*p.y,-k*p.x-p.y) / 2.0;\n    }\n    p.x -= clamp(p.x, -2.0 * r, 0.0);\n    return -length(p) * sign(p.y);\n}\n\nfloat sdPentagon(in vec2 p, in float r) {\n    const vec3 k = vec3(0.809016994, 0.587785252, 0.726542528);\n    p.y = -(p.y) * 1.25;\n    p.x = abs(p.x) * 1.25;\n    p -= 2.0 * min(dot(vec2(-k.x, k.y), p), 0.0) * vec2(-k.x, k.y);\n    p -= 2.0 * min(dot(vec2(k.x, k.y), p), 0.0) * vec2(k.x, k.y);\n    p -= vec2(clamp(p.x, -r*k.z, r*k.z), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdOctagon(in vec2 p, in float r) {\n    // pi/8: cos, sin, tan.\n    const vec3 k = vec3(\n        -0.9238795325,   // sqrt(2+sqrt(2))/2\n        0.3826834323,   // sqrt(2-sqrt(2))/2\n        0.4142135623\n    ); // sqrt(2)-1\n    // reflections\n    p = abs(p) * 1.1;\n    p -= 2.0 * min(dot(vec2(k.x,k.y), p), 0.0) * vec2(k.x,k.y);\n    p -= 2.0 * min(dot(vec2(-k.x,k.y), p), 0.0) * vec2(-k.x,k.y);\n    // Polygon side.\n    p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n    return length(p) * sign(p.y);\n}\n\nfloat sdStar(in vec2 p, in float r, in uint n, in float m) { // m=[2,n]\n    // these 4 lines can be precomputed for a given shape\n    float an = 3.141593 / float(n);\n    float en = 3.141593 / m;\n    vec2  acs = vec2(cos(an), sin(an));\n    vec2  ecs = vec2(cos(en), sin(en)); // ecs=vec2(0,1) and simplify, for regular polygon,\n\n    // reduce to first sector\n    float bn = mod(atan(p.x, p.y), 2.0 * an) - an;\n    p = length(p) * vec2(cos(bn), abs(sin(bn)));\n\n    // line sdf\n    p -= r * acs;\n    p += ecs * clamp(-dot(p, ecs), 0.0, r * acs.y / ecs.y);\n    return length(p) * sign(p.x);\n}\n\nfloat sdCross(in vec2 p, in float w, in float r) {\n    p = abs(p);\n    return length(p - min(p.x + p.y, w) * 0.5) - r;\n}\n\n// TODO: Precompute this, we always pass the same parameters tot his function (v, vec2(1.0, 0.3), 0.0)\nfloat sdPlus( in vec2 p, in vec2 b, float r ) {\n    p = abs(p);\n    p = (p.y > p.x) ? p.yx : p.xy;\n\n    vec2  q = p - b;\n    float k = max(q.y, q.x);\n    vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);\n\n    return sign(k)*length(max(w, 0.0)) + r;\n}\n\nfloat sdBox( in vec2 p, in vec2 b ) {\n    vec2 d = abs(p) - b;\n    return length(max(d,0.0)) + min(max(d.x,d.y),0.0);\n}\n\nuniform float uPixelRatio;\nuniform float uPadding;\n\nflat in vec4 fPickingColor;\nflat in float fPixelLength;\nflat in float fThickness;\nin vec2 vFromCenter;\n\nout vec4 fragColor;\n\nfloat cross_ish(vec2 a, vec2 b)\n{\n    return a.x * b.y - a.y * b.x;\n}\n\nvoid main() {\n    float padding = uPadding * uPixelRatio;\n    float fromCenter = length(vFromCenter);\n    float thickness = fThickness * fPixelLength;\n    float radius = 1.0 - thickness;\n    float circle = fromCenter - (1.0 - thickness);\n    float ring = opOnion(circle, thickness);\n\n    if (ring > 0.0) {\n        discard;\n    }\n\n    fragColor = fPickingColor;\n}\n";

// src/graph/labels/ring/RingLabel.ts
var RingLabel = class extends CircularLabel {
  initialize(context, points2, data, mappings2, pickingManager, font = "monospace", bold = false, charSpacing = 0, labelAtlas) {
    super.initialize(context, points2, data, mappings2, pickingManager, font, bold, charSpacing, labelAtlas);
    this.localUniforms.uPadding = 2;
  }
  getDrawShaders() {
    return {
      vs: RingLabel_vs_default,
      fs: RingLabel_fs_default
    };
  }
  getPickingShaders() {
    return {
      vs: RingLabel_vs_default,
      fs: RingLabel_picking_fs_default
    };
  }
};

// src/graph/labels/mod.ts
var types3 = {
  PointLabel,
  CircularLabel,
  RingLabel
};

// src/loaders/mod.ts
var mod_exports8 = {};
__export(mod_exports8, {
  LocalJSONL: () => LocalJSONL,
  createGraferLoaderDomain: () => createGraferLoaderDomain,
  createGraferLoaderVec3: () => createGraferLoaderVec3,
  mergeGraferLoaderDomain: () => mergeGraferLoaderDomain,
  normalizeNodeLayers: () => normalizeNodeLayers,
  setGraferLoaderDomain: () => setGraferLoaderDomain
});

// src/UX/mod.ts
var mod_exports13 = {};
__export(mod_exports13, {
  DebugMenu: () => DebugMenu,
  animation: () => mod_exports11,
  coordinate: () => mod_exports12,
  mouse: () => mod_exports9,
  picking: () => mod_exports10
});

// src/UX/mouse/mod.ts
var mod_exports9 = {};
__export(mod_exports9, {
  DragModule: () => DragModule,
  DragPan: () => DragPan,
  DragRotation: () => DragRotation,
  DragTruck: () => DragTruck,
  MouseHandler: () => MouseHandler,
  ScrollDolly: () => ScrollDolly,
  kButton2Index: () => kButton2Index,
  kIndex2Button: () => kIndex2Button
});

// src/UX/mouse/drag/DragModule.ts
var DragModule = class extends UXModule {
  constructor(viewport, enabled = false) {
    super();
    this.button = "primary";
    this.boundHandler = this.handleMouse.bind(this);
    this.viewport = viewport;
    this.enabled = enabled;
  }
  hookEvents() {
    this.viewport.mouseHandler.on(MouseHandler.events.move, this.boundHandler);
  }
  unhookEvents() {
    this.viewport.mouseHandler.off(MouseHandler.events.move, this.boundHandler);
  }
};

// src/UX/mouse/drag/DragPan.ts
var DragPan = class extends DragModule {
  handleMouse(event, state, delta) {
    if (state.buttons[this.button]) {
      const aspect = this.viewport.size[0] / this.viewport.size[1];
      const aov = this.viewport.camera.aov;
      const rotationX = -aov * (delta[1] / this.viewport.rect.height);
      const rotationY = -aov * (delta[0] / this.viewport.rect.width) * aspect;
      const r5 = quat_exports.fromEuler(quat_exports.create(), rotationX, rotationY, 0);
      this.viewport.camera.rotate(r5);
      this.viewport.render();
    }
  }
};

// src/UX/mouse/drag/DragRotation.ts
var DragRotation = class extends DragModule {
  constructor() {
    super(...arguments);
    this.button = "secondary";
  }
  handleMouse(event, state, delta) {
    if (state.buttons[this.button]) {
      const side = Math.min(this.viewport.size[0], this.viewport.size[1]);
      const rawRotation = quat_exports.fromEuler(quat_exports.create(), delta[1] / side * 90, delta[0] / side * 90, 0);
      const camInverse = quat_exports.invert(quat_exports.create(), this.viewport.camera.rotation);
      const rotation = quat_exports.mul(quat_exports.create(), camInverse, rawRotation);
      quat_exports.mul(rotation, rotation, this.viewport.camera.rotation);
      this.viewport.graph.rotate(rotation);
      this.viewport.render();
    }
  }
};

// src/UX/mouse/drag/DragTruck.ts
var DragTruck = class extends DragModule {
  handleMouse(event, state, delta) {
    if (state.buttons[this.button]) {
      const position = this.viewport.camera.position;
      const rotated = vec3_exports.transformQuat(vec3_exports.create(), position, this.viewport.camera.rotation);
      const distance4 = Math.abs(rotated[2]);
      const vertical = this.viewport.camera.aovRad * distance4;
      const pixelToWorld = vertical / this.viewport.rect.height;
      const delta3 = vec3_exports.fromValues(delta[0] * pixelToWorld, delta[1] * -pixelToWorld, 0);
      const inverse4 = quat_exports.invert(quat_exports.create(), this.viewport.camera.rotation);
      vec3_exports.transformQuat(delta3, delta3, inverse4);
      vec3_exports.add(position, position, delta3);
      this.viewport.camera.position = position;
      this.viewport.render();
    }
  }
};

// src/UX/mouse/scroll/ScrollModule.ts
var ScrollModule = class extends UXModule {
  constructor(viewport, enabled = false) {
    super();
    this.speed = 4.5;
    this.boundHandler = this.handleMouse.bind(this);
    this.viewport = viewport;
    this.enabled = enabled;
  }
  hookEvents() {
    this.viewport.mouseHandler.on(MouseHandler.events.wheel, this.boundHandler);
  }
  unhookEvents() {
    this.viewport.mouseHandler.off(MouseHandler.events.wheel, this.boundHandler);
  }
};

// src/UX/mouse/scroll/ScrollDolly.ts
var ScrollDolly = class extends ScrollModule {
  handleMouse(event, state, delta) {
    const invProjection = mat4_exports.invert(mat4_exports.create(), this.viewport.camera.projectionMatrix);
    const invView = mat4_exports.invert(mat4_exports.create(), this.viewport.camera.viewMatrix);
    const viewportCoords = vec2_exports.fromValues(
      state.canvasCoords[0] * this.viewport.pixelRatio,
      state.canvasCoords[1] * this.viewport.pixelRatio
    );
    const worldCoords = vec2_exports.fromValues(
      2 * viewportCoords[0] / this.viewport.size[0] - 1,
      1 - 2 * viewportCoords[1] / this.viewport.size[1]
    );
    const rayClip = vec4_exports.fromValues(worldCoords[0], worldCoords[1], -1, 1);
    const rayEye = vec4_exports.transformMat4(vec4_exports.create(), rayClip, invProjection);
    rayEye[2] = -1;
    rayEye[3] = 0;
    const rayWorld4 = vec4_exports.transformMat4(vec4_exports.create(), rayEye, invView);
    const rayWorld = vec3_exports.fromValues(rayWorld4[0], rayWorld4[1], rayWorld4[2]);
    vec3_exports.normalize(rayWorld, rayWorld);
    const position = this.viewport.camera.position;
    const zMult = position[2] / rayWorld[2];
    const rayZeroZ = vec3_exports.fromValues(position[0] + rayWorld[0] * zMult, position[1] + rayWorld[1] * zMult, 0);
    const distance4 = Math.max(100, vec3_exports.distance(position, rayZeroZ));
    const speed = this.speed * (distance4 / 100);
    vec3_exports.scaleAndAdd(position, position, rayWorld, delta * speed);
    this.viewport.camera.position = position;
    this.viewport.render();
  }
};

// src/UX/picking/mod.ts
var mod_exports10 = {};
__export(mod_exports10, {
  PickingManager: () => PickingManager
});

// src/UX/animation/mod.ts
var mod_exports11 = {};
__export(mod_exports11, {
  AnimationManager: () => AnimationManager,
  EaseInBack: () => EaseInBack,
  EaseInBounce: () => EaseInBounce,
  EaseInCirc: () => EaseInCirc,
  EaseInCubic: () => EaseInCubic,
  EaseInElastic: () => EaseInElastic,
  EaseInExpo: () => EaseInExpo,
  EaseInOutBack: () => EaseInOutBack,
  EaseInOutBounce: () => EaseInOutBounce,
  EaseInOutCirc: () => EaseInOutCirc,
  EaseInOutCubic: () => EaseInOutCubic,
  EaseInOutElastic: () => EaseInOutElastic,
  EaseInOutExpo: () => EaseInOutExpo,
  EaseInOutQuad: () => EaseInOutQuad,
  EaseInOutQuart: () => EaseInOutQuart,
  EaseInOutQuint: () => EaseInOutQuint,
  EaseInOutSine: () => EaseInOutSine,
  EaseInQuad: () => EaseInQuad,
  EaseInQuart: () => EaseInQuart,
  EaseInQuint: () => EaseInQuint,
  EaseInSine: () => EaseInSine,
  EaseOutBack: () => EaseOutBack,
  EaseOutBounce: () => EaseOutBounce,
  EaseOutCirc: () => EaseOutCirc,
  EaseOutCubic: () => EaseOutCubic,
  EaseOutElastic: () => EaseOutElastic,
  EaseOutExpo: () => EaseOutExpo,
  EaseOutQuad: () => EaseOutQuad,
  EaseOutQuart: () => EaseOutQuart,
  EaseOutQuint: () => EaseOutQuint,
  EaseOutSine: () => EaseOutSine,
  LinearEasing: () => LinearEasing,
  PropertyInterpolator: () => PropertyInterpolator
});

// src/UX/animation/PropertyInterpolator.ts
var PropertyInterpolator = class {
  constructor(target, property, start, end) {
    this.target = target;
    this.start = start;
    this.end = end;
    this.propertyPath = property.split(".");
    this.property = this.propertyPath[this.propertyPath.length - 1];
    this.propertyOwner = target;
    for (let i4 = 0, n5 = this.propertyPath.length - 1; i4 < n5; ++i4) {
      this.propertyOwner = this.propertyOwner[this.propertyPath[i4]];
    }
    if (Array.isArray(start) || ArrayBuffer.isView(start)) {
      this.interpolator = this.interpolateArrayProperty;
    } else {
      this.interpolator = this.interpolateNumberProperty;
    }
  }
  setPropertyValue(interpolation) {
    this.interpolator(interpolation);
  }
  interpolateNumberProperty(amount) {
    this.propertyOwner[this.property] = this.interpolate(this.start, this.end, amount);
  }
  interpolateArrayProperty(amount) {
    this.propertyOwner[this.property] = this.interpolateArray(this.start, this.end, amount);
  }
  interpolate(start, end, amount) {
    return start + (end - start) * amount;
  }
  interpolateArray(start, end, amount) {
    const result = [];
    for (let i4 = 0, n5 = start.length; i4 < n5; ++i4) {
      result.push(this.interpolate(start[i4], end[i4], amount));
    }
    return result;
  }
};

// src/UX/animation/Easing.ts
function LinearEasing(x2) {
  return x2;
}
var sin = Math.sin;
var cos = Math.cos;
var pow2 = Math.pow;
var sqrt = Math.sqrt;
var PI = Math.PI;
function EaseInSine(x2) {
  return 1 - cos(x2 * PI / 2);
}
function EaseOutSine(x2) {
  return sin(x2 * PI / 2);
}
function EaseInOutSine(x2) {
  return -(cos(PI * x2) - 1) / 2;
}
function EaseInQuad(x2) {
  return x2 * x2;
}
function EaseOutQuad(x2) {
  return 1 - (1 - x2) * (1 - x2);
}
function EaseInOutQuad(x2) {
  return x2 < 0.5 ? 2 * x2 * x2 : 1 - pow2(-2 * x2 + 2, 2) / 2;
}
function EaseInCubic(x2) {
  return x2 * x2 * x2;
}
function EaseOutCubic(x2) {
  return 1 - pow2(1 - x2, 3);
}
function EaseInOutCubic(x2) {
  return x2 < 0.5 ? 4 * x2 * x2 * x2 : 1 - pow2(-2 * x2 + 2, 3) / 2;
}
function EaseInQuart(x2) {
  return x2 * x2 * x2 * x2;
}
function EaseOutQuart(x2) {
  return 1 - pow2(1 - x2, 4);
}
function EaseInOutQuart(x2) {
  return x2 < 0.5 ? 8 * x2 * x2 * x2 * x2 : 1 - pow2(-2 * x2 + 2, 4) / 2;
}
function EaseInQuint(x2) {
  return x2 * x2 * x2 * x2 * x2;
}
function EaseOutQuint(x2) {
  return 1 - pow2(1 - x2, 5);
}
function EaseInOutQuint(x2) {
  return x2 < 0.5 ? 16 * x2 * x2 * x2 * x2 * x2 : 1 - pow2(-2 * x2 + 2, 5) / 2;
}
function EaseInExpo(x2) {
  return x2 === 0 ? 0 : pow2(2, 10 * x2 - 10);
}
function EaseOutExpo(x2) {
  return x2 === 1 ? 1 : 1 - pow2(2, -10 * x2);
}
function EaseInOutExpo(x2) {
  return x2 === 0 ? 0 : x2 === 1 ? 1 : x2 < 0.5 ? pow2(2, 20 * x2 - 10) / 2 : (2 - pow2(2, -20 * x2 + 10)) / 2;
}
function EaseInCirc(x2) {
  return 1 - sqrt(1 - pow2(x2, 2));
}
function EaseOutCirc(x2) {
  return sqrt(1 - pow2(x2 - 1, 2));
}
function EaseInOutCirc(x2) {
  return x2 < 0.5 ? (1 - sqrt(1 - pow2(2 * x2, 2))) / 2 : (sqrt(1 - pow2(-2 * x2 + 2, 2)) + 1) / 2;
}
function EaseInBack(x2) {
  const c1 = 1.70158;
  const c32 = c1 + 1;
  return c32 * x2 * x2 * x2 - c1 * x2 * x2;
}
function EaseOutBack(x2) {
  const c1 = 1.70158;
  const c32 = c1 + 1;
  return 1 + c32 * pow2(x2 - 1, 3) + c1 * pow2(x2 - 1, 2);
}
function EaseInOutBack(x2) {
  const c1 = 1.70158;
  const c22 = c1 * 1.525;
  return x2 < 0.5 ? pow2(2 * x2, 2) * ((c22 + 1) * 2 * x2 - c22) / 2 : (pow2(2 * x2 - 2, 2) * ((c22 + 1) * (x2 * 2 - 2) + c22) + 2) / 2;
}
function EaseInElastic(x2) {
  const c4 = 2 * Math.PI / 3;
  return x2 === 0 ? 0 : x2 === 1 ? 1 : -pow2(2, 10 * x2 - 10) * sin((x2 * 10 - 10.75) * c4);
}
function EaseOutElastic(x2) {
  const c4 = 2 * Math.PI / 3;
  return x2 === 0 ? 0 : x2 === 1 ? 1 : pow2(2, -10 * x2) * sin((x2 * 10 - 0.75) * c4) + 1;
}
function EaseInOutElastic(x2) {
  const c5 = 2 * Math.PI / 4.5;
  return x2 === 0 ? 0 : x2 === 1 ? 1 : x2 < 0.5 ? -(pow2(2, 20 * x2 - 10) * sin((20 * x2 - 11.125) * c5)) / 2 : pow2(2, -20 * x2 + 10) * sin((20 * x2 - 11.125) * c5) / 2 + 1;
}
function EaseOutBounce(x2) {
  const n1 = 7.5625;
  const d1 = 2.75;
  if (x2 < 1 / d1) {
    return n1 * x2 * x2;
  } else if (x2 < 2 / d1) {
    return n1 * (x2 -= 1.5 / d1) * x2 + 0.75;
  } else if (x2 < 2.5 / d1) {
    return n1 * (x2 -= 2.25 / d1) * x2 + 0.9375;
  } else {
    return n1 * (x2 -= 2.625 / d1) * x2 + 0.984375;
  }
}
function EaseInBounce(x2) {
  return 1 - EaseOutBounce(1 - x2);
}
function EaseInOutBounce(x2) {
  return x2 < 0.5 ? (1 - EaseOutBounce(1 - 2 * x2)) / 2 : (1 + EaseOutBounce(2 * x2 - 1)) / 2;
}

// src/UX/animation/AnimationManager.ts
var AnimationManager = class {
  constructor() {
    this.targets = /* @__PURE__ */ new Map();
  }
  animate(target, property, duration, start, end, cb = null, easing = LinearEasing) {
    const needsAnimationFrame = this.targets.size === 0;
    const interpolator = new PropertyInterpolator(target, property, start, end);
    let targetAnimations = this.targets.get(target);
    if (!targetAnimations) {
      targetAnimations = /* @__PURE__ */ new Map();
      this.targets.set(target, targetAnimations);
    }
    targetAnimations.set(property, {
      interpolator,
      cb,
      easing,
      duration,
      currentTime: null
    });
    if (needsAnimationFrame) {
      const time = performance.now();
      requestAnimationFrame(() => this.animationFrame(time));
    }
  }
  animationFrame(last) {
    const time = performance.now();
    const dt = time - last;
    for (const [target, animations] of this.targets) {
      for (const [property, entry] of animations) {
        if (entry.currentTime === null) {
          entry.currentTime = 0;
          continue;
        }
        entry.currentTime += dt;
        const progress = Math.min(entry.currentTime / entry.duration, 1);
        entry.interpolator.setPropertyValue(entry.easing(progress));
        if (entry.cb) {
          entry.cb(progress);
        }
        if (entry.currentTime >= entry.duration) {
          animations.delete(property);
        }
      }
      if (!animations.size) {
        this.targets.delete(target);
      }
    }
    if (this.targets.size !== 0) {
      requestAnimationFrame(() => this.animationFrame(time));
    }
  }
};

// src/UX/coordinate/mod.ts
var mod_exports12 = {};
__export(mod_exports12, {
  Coordinate: () => Coordinate,
  PixelCoordXPosition: () => PixelCoordXPosition,
  PixelCoordYPosition: () => PixelCoordYPosition
});

// src/UX/coordinate/Coordinate.ts
var PixelCoordXPosition = /* @__PURE__ */ ((PixelCoordXPosition2) => {
  PixelCoordXPosition2[PixelCoordXPosition2["CENTER"] = 0] = "CENTER";
  PixelCoordXPosition2[PixelCoordXPosition2["LEFT"] = -1] = "LEFT";
  PixelCoordXPosition2[PixelCoordXPosition2["RIGHT"] = 1] = "RIGHT";
  return PixelCoordXPosition2;
})(PixelCoordXPosition || {});
var PixelCoordYPosition = /* @__PURE__ */ ((PixelCoordYPosition2) => {
  PixelCoordYPosition2[PixelCoordYPosition2["CENTER"] = 0] = "CENTER";
  PixelCoordYPosition2[PixelCoordYPosition2["TOP"] = 1] = "TOP";
  PixelCoordYPosition2[PixelCoordYPosition2["BOTTOM"] = -1] = "BOTTOM";
  return PixelCoordYPosition2;
})(PixelCoordYPosition || {});
var kDefaultPixelCoordPosition = {
  x: 0 /* CENTER */,
  y: 0 /* CENTER */
};
var Coordinate = class {
  static worldPointToRelativePixelCoordinate(controller, point, position) {
    position = Object.assign({}, kDefaultPixelCoordPosition, position);
    const camera = controller.viewport.camera;
    const renderMatrix = mat4_exports.mul(mat4_exports.create(), camera.projectionMatrix, camera.viewMatrix);
    mat4_exports.mul(renderMatrix, renderMatrix, controller.viewport.graph.matrix);
    const projected = vec4_exports.set(
      vec4_exports.create(),
      point[0] + position.x * point[3],
      point[1] + position.y * point[3],
      point[2],
      1
    );
    vec4_exports.transformMat4(projected, projected, renderMatrix);
    const size = controller.viewport.size;
    const x2 = projected[0] / projected[3] * size[0] * 0.5 + size[0] * 0.5;
    const y3 = projected[1] / projected[3] * size[1] * 0.5 + size[1] * 0.5;
    return vec2_exports.set(vec2_exports.create(), x2, y3);
  }
  static relativePixelCoordinateToWorldPoint(controller, point) {
    const camera = controller.viewport.camera;
    const projectionMatrixInverse = mat4_exports.invert(mat4_exports.create(), camera.projectionMatrix);
    const viewMatrixInverse = mat4_exports.invert(mat4_exports.create(), camera.viewMatrix);
    const graphMatrixInverse = mat4_exports.invert(mat4_exports.create(), controller.viewport.graph.matrix);
    const size = controller.viewport.size;
    const x2 = point[0];
    const y3 = point[1];
    const deviceSpaceCoord = vec4_exports.set(
      vec4_exports.create(),
      (x2 / (size[0] * 0.5) - 1) * 1,
      (y3 / (size[1] * 0.5) - 1) * 1,
      0,
      1
    );
    const worldSpaceCoord = vec4_exports.create();
    vec4_exports.transformMat4(worldSpaceCoord, deviceSpaceCoord, projectionMatrixInverse);
    vec4_exports.transformMat4(worldSpaceCoord, worldSpaceCoord, viewMatrixInverse);
    vec4_exports.transformMat4(worldSpaceCoord, worldSpaceCoord, graphMatrixInverse);
    return worldSpaceCoord;
  }
};

// src/UX/debug/DebugMenu.ts
var import_tweakpane = __toESM(require_tweakpane(), 1);
var DebugMenu = class {
  constructor(viewport) {
    this.viewport = viewport;
    const layers = viewport.graph.layers;
    this.pane = new import_tweakpane.default({ title: "Debug Menu", expanded: false });
    this.pane.element.style.maxHeight = "calc(100vh - 8px)";
    this.pane.element.style.overflowY = "auto";
    for (let i4 = 0, n5 = layers.length; i4 < n5; ++i4) {
      const layer = layers[i4];
      const layerFolder = this.pane.addFolder({ title: layer.name, expanded: false });
      this.addLayerOptions(layerFolder, layer);
    }
    this.uxFolder = null;
    this.pane.on("change", () => {
      this.viewport.render();
    });
  }
  registerUX(ux) {
    if (!this.uxFolder) {
      this.uxFolder = this.pane.addFolder({ title: "UX", expanded: false });
    }
    const folder = this.uxFolder.addFolder({ title: ux.constructor.name, expanded: false });
    folder.addInput(ux, "enabled");
    if ("button" in ux) {
      const keys = Object.keys(kButton2Index);
      const options = {};
      for (let i4 = 0, n5 = keys.length; i4 < n5; ++i4) {
        options[keys[i4]] = keys[i4];
      }
      folder.addInput(ux, "button", { options });
    }
    if ("speed" in ux) {
      folder.addInput(ux, "speed", { min: -100, max: 100 });
    }
  }
  addLayerOptions(folder, layer) {
    folder.addInput(layer, "enabled");
    folder.addInput(layer, "nearDepth", { min: 0, max: 1, label: "near" });
    folder.addInput(layer, "farDepth", { min: 0, max: 1, label: "far" });
    if (layer.nodes) {
      const nodesFolder = folder.addFolder({ title: "Nodes", expanded: false });
      this.addLayerElementOptions(nodesFolder, layer, "nodes");
    }
    if (layer.labels) {
      const labelsFolder = folder.addFolder({ title: "Labels", expanded: false });
      this.addLayerElementOptions(labelsFolder, layer, "labels");
    }
    if (layer.edges) {
      const edgesFolder = folder.addFolder({ title: "Edges", expanded: false });
      this.addLayerElementOptions(edgesFolder, layer, "edges");
    }
  }
  addLayerElementOptions(folder, layer, key2) {
    const element = layer[key2];
    const options = {
      enabled: [element, {}],
      blendMode: [element, {
        options: {
          normal: 1 /* NORMAL */,
          additive: 2 /* ADDITIVE */,
          none: 0 /* NONE */
        }
      }],
      pixelSizing: [element, { label: "pixel sizing " }],
      billboard: [element, { label: "billboarding" }],
      gravity: [element, { min: -2, max: 2 }],
      alpha: [element, { min: 0, max: 1 }],
      fade: [element, { min: 0, max: 1 }],
      desaturate: [element, { min: 0, max: 1 }],
      brightness: [element, { min: -1, max: 1 }],
      [`${key2}NearDepth`]: [layer, { min: 0, max: 1, label: "near" }],
      [`${key2}FarDepth`]: [layer, { min: 0, max: 1, label: "far" }]
    };
    const keys = Object.keys(options);
    for (let i4 = 0, n5 = keys.length; i4 < n5; ++i4) {
      if (keys[i4] in options[keys[i4]][0]) {
        folder.addInput(options[keys[i4]][0], keys[i4], options[keys[i4]][1]);
      }
    }
  }
};

// src/utilities/mod.ts
var mod_exports14 = {};
__export(mod_exports14, {
  ColorManager: () => ColorManager,
  generateGradient: () => generateGradient
});

// src/utilities/ColorManager.ts
var ColorManager = class {
  constructor(colorMap = {}) {
    this.keyArray = Object.keys(colorMap);
    this.colorArray = Object.values(colorMap);
  }
  addColor(id, color) {
    if (!this.keyArray.includes(id)) {
      this.keyArray.push(id);
      this.colorArray.push(color);
    }
  }
  getIndexByKey(id) {
    const index = this.keyArray.indexOf(id);
    if (index === -1) {
      throw Error(`Color with key ${id} not found`);
    }
    return index;
  }
};

// src/utilities/gradient.ts
function generateGradient(colorList, samples) {
  const hexRgbList = [];
  const samplesPerPair = Math.ceil((samples - colorList.length) / (colorList.length - 1));
  for (let i4 = 0; i4 < colorList.length - 1; i4++) {
    const startColor = colorList[i4];
    const endColor = colorList[i4 + 1];
    hexRgbList.push(startColor);
    const startR = parseInt(startColor.substring(1, 3), 16);
    const startG = parseInt(startColor.substring(3, 5), 16);
    const startB = parseInt(startColor.substring(5, 7), 16);
    const endR = parseInt(endColor.substring(1, 3), 16);
    const endG = parseInt(endColor.substring(3, 5), 16);
    const endB = parseInt(endColor.substring(5, 7), 16);
    for (let j2 = 1; j2 < samplesPerPair + 1; j2++) {
      const interR = Math.round(startR + (endR - startR) / (samplesPerPair + 1) * j2).toString(16).padStart(2, "0");
      const interG = Math.round(startG + (endG - startG) / (samplesPerPair + 1) * j2).toString(16).padStart(2, "0");
      const interB = Math.round(startB + (endB - startB) / (samplesPerPair + 1) * j2).toString(16).padStart(2, "0");
      hexRgbList.push(`#${interR}${interG}${interB}`);
    }
  }
  hexRgbList.push(colorList[colorList.length - 1]);
  return hexRgbList.slice(0, samples);
}

// src/graph/Layer.ts
var Layer = class extends EventEmitter {
  constructor(nodes, edges, labels, name = "Layer") {
    super();
    this._nearDepth = 0;
    this._farDepth = 1;
    this._nodesNearDepth = 0;
    this._nodesFarDepth = 1;
    this._edgesNearDepth = 0;
    this._edgesFarDepth = 1;
    this._labelsNearDepth = 0;
    this._labelsFarDepth = 1;
    this.enabled = true;
    this.glow = 0;
    this._nodes = nodes;
    this._edges = edges;
    this._labels = labels;
    this.name = name;
    if (this._nodes) {
      this._nodes.on(EventEmitter.omniEvent, (event, id) => {
        this.emit(event, {
          layer: this.name,
          type: "node",
          id
        });
      });
    }
    if (this._edges) {
      this._edges.on(EventEmitter.omniEvent, (event, id) => {
        this.emit(event, {
          layer: this.name,
          type: "edge",
          id
        });
      });
    }
    if (this._labels) {
      this._labels.on(EventEmitter.omniEvent, (event, id) => {
        this.emit(event, {
          layer: this.name,
          type: "label",
          id
        });
      });
    }
  }
  get nodes() {
    return this._nodes;
  }
  get edges() {
    return this._edges;
  }
  get labels() {
    return this._labels;
  }
  get nearDepth() {
    return this._nearDepth;
  }
  set nearDepth(value) {
    this._nearDepth = value;
    this.updateLabelsDepths();
    this.updateNodesDepths();
    this.updateEdgesDepths();
  }
  get farDepth() {
    return this._farDepth;
  }
  set farDepth(value) {
    this._farDepth = value;
    this.updateLabelsDepths();
    this.updateNodesDepths();
    this.updateEdgesDepths();
  }
  get nodesNearDepth() {
    return this._nodesNearDepth;
  }
  set nodesNearDepth(value) {
    this._nodesNearDepth = value;
    this.updateNodesDepths();
  }
  get nodesFarDepth() {
    return this._nodesFarDepth;
  }
  set nodesFarDepth(value) {
    this._nodesFarDepth = value;
    this.updateNodesDepths();
  }
  get edgesNearDepth() {
    return this._edgesNearDepth;
  }
  set edgesNearDepth(value) {
    this._edgesNearDepth = value;
    this.updateEdgesDepths();
  }
  get edgesFarDepth() {
    return this._edgesFarDepth;
  }
  set edgesFarDepth(value) {
    this._edgesFarDepth = value;
    this.updateEdgesDepths();
  }
  get labelsNearDepth() {
    return this._labelsNearDepth;
  }
  set labelsNearDepth(value) {
    this._labelsNearDepth = value;
    this.updateLabelsDepths();
  }
  get labelsFarDepth() {
    return this._labelsFarDepth;
  }
  set labelsFarDepth(value) {
    this._labelsFarDepth = value;
    this.updateLabelsDepths();
  }
  render(context, mode, uniforms, index = 0) {
    const offset = index * -3;
    if (mode === 2 /* HIGH */) {
      this.renderLabels(context, 3 /* HIGH_PASS_1 */, uniforms[1], offset - 2, true);
      this.renderNodes(context, 3 /* HIGH_PASS_1 */, uniforms[1], offset - 1, true);
      this.renderEdges(context, 3 /* HIGH_PASS_1 */, uniforms[1], offset, true);
      this.renderEdges(context, 3 /* HIGH_PASS_1 */, uniforms[1], offset, false);
      this.renderEdges(context, 4 /* HIGH_PASS_2 */, uniforms[2], offset, false);
      this.renderNodes(context, 3 /* HIGH_PASS_1 */, uniforms[1], offset - 1, false);
      this.renderNodes(context, 4 /* HIGH_PASS_2 */, uniforms[2], offset - 1, false);
      this.renderLabels(context, 3 /* HIGH_PASS_1 */, uniforms[1], offset - 2, false);
      this.renderLabels(context, 4 /* HIGH_PASS_2 */, uniforms[2], offset - 2, false);
    } else {
      this.renderLabels(context, mode, uniforms[0], offset - 2, true);
      this.renderNodes(context, mode, uniforms[0], offset - 1, true);
      this.renderEdges(context, mode, uniforms[0], offset, true);
      this.renderEdges(context, mode, uniforms[0], offset, false);
      this.renderNodes(context, mode, uniforms[0], offset - 1, false);
      this.renderLabels(context, mode, uniforms[0], offset - 2, false);
    }
  }
  renderNodes(context, mode, uniforms, offset, opaque) {
    if (this._nodes && this._nodes.enabled && (this._nodes.opaque === opaque || mode === 4 /* HIGH_PASS_2 */)) {
      context.polygonOffset(0, offset);
      this._nodes.render(context, mode, uniforms);
    }
  }
  renderEdges(context, mode, uniforms, offset, opaque) {
    if (this._edges && this._edges.enabled && (this._edges.opaque === opaque || mode === 4 /* HIGH_PASS_2 */)) {
      context.polygonOffset(0, offset);
      this._edges.render(context, mode, uniforms);
    }
  }
  renderLabels(context, mode, uniforms, offset, opaque) {
    if (this._labels && this._labels.enabled && (this._labels.opaque === opaque || mode === 4 /* HIGH_PASS_2 */)) {
      context.polygonOffset(0, offset);
      this._labels.render(context, mode, uniforms);
    }
  }
  updateLabelsDepths() {
    if (this._labels) {
      const depthRange = this._farDepth - this._nearDepth;
      this._labels.nearDepth = this._nearDepth + depthRange * this._labelsNearDepth;
      this._labels.farDepth = this._nearDepth + depthRange * this._labelsFarDepth;
    }
  }
  updateNodesDepths() {
    if (this._nodes) {
      const depthRange = this._farDepth - this._nearDepth;
      this._nodes.nearDepth = this._nearDepth + depthRange * this._nodesNearDepth;
      this._nodes.farDepth = this._nearDepth + depthRange * this._nodesFarDepth;
    }
  }
  updateEdgesDepths() {
    if (this._edges) {
      const depthRange = this._farDepth - this._nearDepth;
      this._edges.nearDepth = this._nearDepth + depthRange * this._edgesNearDepth;
      this._edges.farDepth = this._nearDepth + depthRange * this._edgesFarDepth;
    }
  }
};

// src/UX/mouse/drag/DragTranslate.ts
var DragTranslate = class extends DragModule {
  handleMouse(event, state, delta) {
    if (state.buttons[this.button]) {
      this.viewport.graph.translate([delta[0] * state.pixelRatio, -delta[1] * state.pixelRatio, 0]);
      this.viewport.render();
    }
  }
};

// src/UX/mouse/scroll/ScrollScale.ts
var ScrollScale = class extends ScrollModule {
  handleMouse(event, state, delta) {
    const speed = 1 + this.speed * Math.abs(delta) * 0.05;
    const oldScale = this.viewport.graph.scale;
    if (delta > 0) {
      this.viewport.graph.scale = this.viewport.graph.scale / speed;
    } else {
      this.viewport.graph.scale = this.viewport.graph.scale * speed;
    }
    const coords = vec2_exports.fromValues(state.glCoords[0] - this.viewport.size[0] * 0.5, state.glCoords[1] - this.viewport.size[1] * 0.5);
    const distance4 = vec2_exports.fromValues(coords[0] - this.viewport.graph.translation[0], coords[1] - this.viewport.graph.translation[1]);
    const scale6 = this.viewport.graph.scale / oldScale;
    const scaled = vec2_exports.fromValues(distance4[0] * scale6, distance4[1] * scale6);
    const offset = vec2_exports.sub(vec2_exports.create(), scaled, distance4);
    this.viewport.graph.translate(vec3_exports.fromValues(-offset[0], -offset[1], 0));
    this.viewport.render();
  }
};

// src/grafer/GraferController.ts
var kDefaultOptions3 = {
  viewport: null,
  loadTexturesAsync: false
};
var GraferController = class extends EventEmitter {
  constructor(canvas, data, options) {
    super();
    const opts = Object.assign({}, kDefaultOptions3, options);
    this._viewport = new Viewport(canvas, opts.viewport);
    this._loadTexturesAsync = Boolean(opts.loadTexturesAsync);
    this._generateIdPrev = 0;
    this._interactionModules = {};
    if (this._viewport.camera.mode === 0 /* 2D */) {
      this._interactionModules.translate = new DragTranslate(this._viewport);
      this._interactionModules.translate.enabled = true;
      this._interactionModules.scale = new ScrollScale(this._viewport);
      this._interactionModules.scale.enabled = true;
    } else {
      this._interactionModules.dolly = new ScrollDolly(this._viewport);
      this._interactionModules.dolly.enabled = true;
      this._interactionModules.truck = new DragTruck(this._viewport);
      this._interactionModules.truck.button = "primary";
      this._interactionModules.truck.enabled = true;
      this._interactionModules.rotation = new DragRotation(this._viewport);
      this._interactionModules.rotation.button = "secondary";
      this._interactionModules.rotation.enabled = true;
      this._interactionModules.pan = new DragPan(this._viewport);
      this._interactionModules.pan.button = "auxiliary";
      this._interactionModules.pan.enabled = true;
    }
    if (data) {
      this.loadData(data);
    }
  }
  get viewport() {
    return this._viewport;
  }
  get context() {
    return this.viewport.context;
  }
  get hasColors() {
    return this._hasColors;
  }
  get interactionModules() {
    return this._interactionModules;
  }
  generateId() {
    return this._generateIdPrev++;
  }
  async loadData(data) {
    const pointsRadiusMapping = { radius: (entry) => "radius" in entry ? entry.radius : 1 };
    const texturesPromise = this.loadTextures(data);
    this.loadColors(data);
    this.loadPoints(data, pointsRadiusMapping);
    this.loadLayers(data, pointsRadiusMapping);
    if (this._viewport.graph) {
      const bbCenter = this._viewport.graph.bbCenter;
      const bbDiagonal = this._viewport.graph.bbDiagonal;
      if (this._viewport.camera.mode === 0 /* 2D */) {
        const bb = this._viewport.graph.bb;
        const bbWidth = Math.abs(bb.min[0]) + Math.abs(bb.max[0]);
        const bbHeight = Math.abs(bb.min[1]) + Math.abs(bb.max[1]);
        const size = this._viewport.size;
        const scale6 = Math.min(size[0] / bbWidth, size[1] / bbHeight);
        this._viewport.graph.scale = scale6;
        this._viewport.graph.translate([-bbCenter[0] * scale6, -bbCenter[1] * scale6, 0]);
      } else {
        this._viewport.camera.position = [-bbCenter[0], -bbCenter[1], -bbCenter[2] - bbDiagonal];
        this._viewport.camera.farPlane = Math.max(bbDiagonal * 2, 1e3);
      }
      await texturesPromise;
      this._viewport.render();
    }
  }
  render() {
    if (this._viewport.graph) {
      this._viewport.render();
    } else {
      throw new Error("No graph found.");
    }
  }
  concatenateNodesFromLayers(data) {
    var _a6, _b2, _c;
    const nodes = [];
    const layers = data.layers;
    for (let i4 = 0, n5 = layers.length; i4 < n5; ++i4) {
      const data2 = (_c = (_a6 = layers[i4].nodes) == null ? void 0 : _a6.data) != null ? _c : (_b2 = layers[i4].labels) == null ? void 0 : _b2.data;
      for (let ii = 0, nn = data2.length; ii < nn; ++ii) {
        data2[ii].point = this.generateId();
      }
      nodes.push(data2);
    }
    return nodes;
  }
  loadLayers(data, pointsRadiusMapping) {
    if (data.layers && data.layers.length) {
      const layers = data.layers;
      this._hasColors = Boolean(data.colors);
      if (!Boolean(this._viewport.graph)) {
        const nodes = this.concatenateNodesFromLayers(data);
        this._viewport.graph = Graph.createGraphFromNodes(this.context, nodes, pointsRadiusMapping);
        this._viewport.graph.picking = new PickingManager(this._viewport.context, this._viewport.mouseHandler);
      }
      for (let i4 = 0, n5 = layers.length; i4 < n5; ++i4) {
        const name = layers[i4].name || `Layer_${i4}`;
        this.addLayer(layers[i4], name, this.hasColors);
      }
    }
  }
  addLayerAt(layerData, name, useColors, index) {
    if (useColors && !this.hasColors) {
      throw new Error("No colors found.");
    }
    useColors = useColors != null ? useColors : this.hasColors;
    const hasPoints = Boolean(this._viewport.graph);
    const graph = this._viewport.graph;
    const nodesData = layerData.nodes;
    const nodes = this.addNodes(nodesData, useColors);
    const edgesData = layerData.edges;
    if (edgesData && !nodes && !hasPoints) {
      throw new Error("Cannot load an edge-only layer in a graph without points!");
    }
    const edges = this.addEdges(edgesData, nodes, useColors);
    const labelsData = layerData.labels;
    const labels = this.addLabels(labelsData, useColors);
    const layerName = name || `Layer_${index || graph.layers.length}`;
    if (graph.layers.filter((l3) => l3.name === layerName).length > 0) {
      throw new Error("A layer of this name already exists, remove existing layer first or change the name of this one!");
    }
    if (nodes || edges || labels) {
      const layer = new Layer(nodes, edges, labels, layerName);
      if (index >= 0 && index <= graph.layers.length) {
        graph.addLayerAt(layer, index);
      } else {
        graph.addLayer(layer);
      }
      layer.on(EventEmitter.omniEvent, (...args) => this.emit(...args));
      if ("options" in layerData) {
        const options = layerData.options;
        const keys = Object.keys(options);
        for (const key2 of keys) {
          if (key2 in layer) {
            layer[key2] = options[key2];
          }
        }
      }
    }
  }
  addLayer(layerData, name, useColors) {
    this.addLayerAt(layerData, name, useColors);
  }
  removeLayerByName(name) {
    const { layers } = this._viewport.graph;
    for (let i4 = 0; i4 < layers.length; i4++) {
      const layer = layers[i4];
      if (layer.name === name) {
        this.removeLayerByIndex(i4);
        i4--;
      }
    }
  }
  removeLayerByIndex(index) {
    const { layers } = this._viewport.graph;
    if (index >= 0 && index < layers.length) {
      layers.splice(index, 1);
    }
  }
  addLabels(labelsData, hasColors) {
    var _a6, _b2, _c;
    const pickingManager = this._viewport.graph.picking;
    const context = this.context;
    const graph = this._viewport.graph;
    let labels = null;
    if (labelsData) {
      const labelsType = labelsData.type ? labelsData.type : "PointLabel";
      const LabelsClass = mod_exports6.types[labelsType] || mod_exports6.PointLabel;
      const labelsMappings = Object.assign(
        {},
        LabelsClass.defaultMappings,
        labelsData.mappings
      );
      if (!hasColors) {
        const colorMapping = labelsMappings.color;
        labelsMappings.color = (entry, i4) => {
          const value = colorMapping(entry, i4);
          if (typeof value !== "number") {
            return this._viewport.colorRegistry.registerColor(value);
          }
          return value;
        };
      }
      labels = new LabelsClass(
        context,
        graph,
        labelsData.data,
        labelsMappings,
        pickingManager,
        (_a6 = labelsData.options) == null ? void 0 : _a6.font,
        (_b2 = labelsData.options) == null ? void 0 : _b2.bold,
        (_c = labelsData.options) == null ? void 0 : _c.halo
      );
      if ("options" in labelsData) {
        const options = labelsData.options;
        const keys = Object.keys(options);
        for (const key2 of keys) {
          if (key2 in labels) {
            labels[key2] = options[key2];
          }
        }
      }
    }
    return labels;
  }
  addEdges(edgesData, nodes, hasColors) {
    const pickingManager = this._viewport.graph.picking;
    const context = this.context;
    const graph = this._viewport.graph;
    const hasPoints = Boolean(this._viewport.graph);
    let edges = null;
    if (edgesData) {
      const edgesType = edgesData.type ? edgesData.type : "Straight";
      const EdgesClass = mod_exports5.types[edgesType] || mod_exports5.Straight;
      const edgesMappings = Object.assign({}, EdgesClass.defaultMappings, edgesData.mappings);
      if (!hasPoints) {
        const sourceMapping = edgesMappings.source;
        edgesMappings.source = (entry, i4) => {
          return nodes.getEntryPointID(sourceMapping(entry, i4));
        };
        const targetMapping = edgesMappings.target;
        edgesMappings.target = (entry, i4) => {
          return nodes.getEntryPointID(targetMapping(entry, i4));
        };
      }
      if (!hasColors) {
        const sourceColorMapping = edgesMappings.sourceColor;
        edgesMappings.sourceColor = (entry, i4) => {
          const value = sourceColorMapping(entry, i4);
          if (typeof value !== "number") {
            return this._viewport.colorRegistry.registerColor(value);
          }
          return value;
        };
        const targetColorMapping = edgesMappings.targetColor;
        edgesMappings.targetColor = (entry, i4) => {
          const value = targetColorMapping(entry, i4);
          if (typeof value !== "number") {
            return this._viewport.colorRegistry.registerColor(value);
          }
          return value;
        };
      }
      edges = new EdgesClass(context, graph, edgesData.data, edgesMappings, pickingManager);
      if ("options" in edgesData) {
        const options = edgesData.options;
        const keys = Object.keys(options);
        for (const key2 of keys) {
          if (key2 in edges) {
            edges[key2] = options[key2];
          }
        }
      }
    }
    return edges;
  }
  addNodes(nodesData, hasColors) {
    const pickingManager = this._viewport.graph.picking;
    const context = this.context;
    const graph = this._viewport.graph;
    let nodes = null;
    if (nodesData) {
      const nodesType = nodesData.type ? nodesData.type : "Circle";
      const NodesClass = mod_exports4.types[nodesType] || mod_exports4.Circle;
      const nodesMappings = Object.assign(
        {},
        NodesClass.defaultMappings,
        nodesData.mappings
      );
      if (!hasColors) {
        const colorMapping = nodesMappings.color;
        nodesMappings.color = (entry, i4) => {
          const value = colorMapping(entry, i4);
          if (typeof value !== "number") {
            return this._viewport.colorRegistry.registerColor(value);
          }
          return value;
        };
      }
      nodes = new NodesClass(context, graph, nodesData.data, nodesMappings, pickingManager);
      if ("options" in nodesData) {
        const options = nodesData.options;
        const keys = Object.keys(options);
        for (const key2 of keys) {
          if (key2 in nodes) {
            nodes[key2] = options[key2];
          }
        }
      }
    }
    return nodes;
  }
  loadPoints(data, pointsRadiusMapping) {
    if (data.points) {
      const mappings2 = Object.assign({}, pointsRadiusMapping, data.points.mappings);
      this._viewport.graph = new Graph(this._viewport.context, data.points.data, mappings2);
      this._viewport.graph.picking = new PickingManager(this._viewport.context, this._viewport.mouseHandler);
    }
  }
  loadColors(data) {
    if (data.colors) {
      const colors2 = data.colors;
      const colorRegistry = this._viewport.colorRegistry;
      for (let i4 = 0, n5 = colors2.length; i4 < n5; ++i4) {
        colorRegistry.registerColor(colors2[i4]);
      }
    } else {
      this._viewport.colorRegistry.registerColor("#d8dee9");
    }
  }
  loadTextures(data) {
    if (data.textures) {
      const textures = data.textures;
      const textureRegistry = this._viewport.textureRegistry;
      if (this._loadTexturesAsync) {
        for (let i4 = 0, n5 = textures.length; i4 < n5; ++i4) {
          textureRegistry.registerTexture(textures[i4]).then(() => this._viewport.render());
        }
      } else {
        const promiseList = [];
        for (let i4 = 0, n5 = textures.length; i4 < n5; ++i4) {
          promiseList.push(textureRegistry.registerTexture(textures[i4]));
        }
        return Promise.all(promiseList);
      }
    }
    return Promise.resolve([]);
  }
};

// examples/src/playground.ts
var kPolarNight = [
  { r: 59, g: 66, b: 82 },
  { r: 67, g: 76, b: 94 },
  { r: 76, g: 86, b: 106 }
];
var kSnowStorm = [
  { r: 216, g: 222, b: 233 },
  { r: 229, g: 233, b: 240 },
  { r: 236, g: 239, b: 244 }
];
var kFrost = [
  { r: 143, g: 188, b: 187 },
  { r: 136, g: 192, b: 208 },
  { r: 129, g: 161, b: 193 },
  { r: 94, g: 129, b: 172 }
];
var kAurora = [
  { r: 191, g: 97, b: 106 },
  { r: 208, g: 135, b: 112 },
  { r: 235, g: 203, b: 139 },
  { r: 163, g: 190, b: 140 },
  { r: 180, g: 142, b: 173 }
];
var kGradient = [
  { r: 76, g: 86, b: 106 },
  { r: 85, g: 95, b: 115 },
  { r: 93, g: 103, b: 124 },
  { r: 102, g: 112, b: 133 },
  { r: 111, g: 121, b: 143 },
  { r: 120, g: 130, b: 152 },
  { r: 130, g: 140, b: 162 },
  { r: 139, g: 149, b: 171 },
  { r: 148, g: 159, b: 181 },
  { r: 158, g: 168, b: 191 },
  { r: 168, g: 178, b: 201 },
  { r: 177, g: 188, b: 211 },
  { r: 187, g: 198, b: 221 },
  { r: 197, g: 208, b: 231 },
  { r: 207, g: 218, b: 241 },
  { r: 217, g: 228, b: 252 },
  { r: 228, g: 238, b: 255 },
  { r: 238, g: 248, b: 255 },
  { r: 248, g: 255, b: 255 },
  { r: 255, g: 255, b: 255 }
];
var kColorPresets = [
  { name: "none", colors: null },
  { name: "polar night", colors: kPolarNight },
  { name: "snow storm", colors: kSnowStorm },
  { name: "frost", colors: kFrost },
  { name: "aurora", colors: kAurora },
  { name: "gradient", colors: kGradient }
];
var colorsRgbToArr = (colors2) => colors2.map((val) => Object.values(val));
function createColorsSelector(folder, colors2) {
  const dummy = { preset: 0 };
  const presetOptions = {};
  for (let i4 = 0, n5 = kColorPresets.length; i4 < n5; ++i4) {
    presetOptions[kColorPresets[i4].name] = i4;
  }
  const preset = folder.addInput(dummy, "preset", { options: presetOptions });
  const remove = folder.addButton({ title: "remove color" });
  preset.on("change", (value) => {
    if (value > 0) {
      colors2.length = 0;
      colors2.push(...kColorPresets[value].colors);
      const items = folder.controller.uiContainer.items;
      while (items.length > 3) {
        items[items.length - 3].viewModel.dispose();
      }
      for (let i4 = 0, n5 = colors2.length; i4 < n5; ++i4) {
        folder.addInput(colors2, `${i4}`, { index: i4 + 1 });
      }
      remove.hidden = colors2.length <= 1;
    }
  });
  for (let i4 = 0, n5 = colors2.length; i4 < n5; ++i4) {
    folder.addInput(colors2, `${i4}`, { index: i4 + 1 });
  }
  remove.hidden = colors2.length <= 1;
  remove.on("click", () => {
    colors2.pop();
    const items = folder.controller.uiContainer.items;
    items[items.length - 3].viewModel.dispose();
    remove.hidden = colors2.length <= 1;
    dummy.preset = 0;
    preset.refresh();
  });
  folder.addButton({ title: "add color" }).on("click", () => {
    const lastColor = colors2[colors2.length - 1];
    const color = { r: lastColor.r, g: lastColor.g, b: lastColor.b };
    colors2.push(color);
    folder.addInput(colors2, `${colors2.length - 1}`, { index: colors2.length });
    remove.hidden = colors2.length <= 1;
    dummy.preset = 0;
    preset.refresh();
  });
}
function createFileInput(cb) {
  const input = document.createElement("input");
  input.type = "file";
  input.multiple = false;
  input.addEventListener("change", cb);
  return input;
}
var gLayerCount = 0;
function createFilesSelector(pane, layers, updateLoadBtn) {
  const result = {
    name: `layer_${gLayerCount++}`,
    ready: false,
    nodes: "No file selected.",
    nodesFile: null,
    nodesMapping: "",
    edges: "No file selected.",
    edgesFile: null,
    edgesMapping: "",
    meta: "No file selected.",
    metaFile: null,
    colors: [...kAurora]
  };
  const layersInd = layers.length;
  const folder = pane.addFolder({
    title: result.name,
    index: layersInd
  });
  folder.addInput(result, "name");
  folder.addSeparator();
  const nodesInput = createFileInput(() => {
    if (nodesInput.files.length) {
      result.nodesFile = nodesInput.files[0];
      result.nodes = result.nodesFile.name;
      result.ready = true;
    } else {
      result.nodes = "No file selected.";
      result.nodesFile = null;
      result.ready = false;
    }
    updateLoadBtn();
  });
  folder.addMonitor(result, "nodes");
  folder.addButton({ title: "browse..." }).on("click", () => nodesInput.click());
  folder.addInput({ nodesMapping: result.nodesMapping }, "nodesMapping").on("change", (stringVal) => {
    layers[layersInd].nodesMapping = stringVal;
  });
  folder.addSeparator();
  const edgesInput = createFileInput(() => {
    if (edgesInput.files.length) {
      result.edgesFile = edgesInput.files[0];
      result.edges = result.edgesFile.name;
    } else {
      result.edges = "No file selected.";
      result.edgesFile = null;
    }
  });
  folder.addMonitor(result, "edges");
  folder.addButton({ title: "browse..." }).on("click", () => edgesInput.click());
  folder.addInput({ edgesMapping: result.edgesMapping }, "edgesMapping").on("change", (stringVal) => {
    layers[layersInd].edgesMapping = stringVal;
  });
  folder.addSeparator();
  const metaInput = createFileInput(() => {
    if (metaInput.files.length) {
      result.metaFile = metaInput.files[0];
      result.meta = result.metaFile.name;
    } else {
      result.meta = "No file selected.";
      result.metaFile = null;
    }
  });
  folder.addMonitor(result, "meta");
  folder.addButton({ title: "browse..." }).on("click", () => metaInput.click());
  folder.addSeparator();
  const colors2 = folder.addFolder({ title: "colors", expanded: false });
  createColorsSelector(colors2, result.colors);
  folder.addSeparator();
  const misc = folder.addFolder({ title: "misc", expanded: false });
  misc.addMonitor(result, "ready");
  misc.addButton({ title: "remove layer" }).on("click", () => {
    const i4 = layers.indexOf(result);
    if (i4 !== -1) {
      layers.splice(i4, 1);
      folder.dispose();
      updateLoadBtn();
    }
  });
  folder.addSeparator();
  return result;
}
async function loadLayers(layers) {
  const loadedLayers = [];
  for (let i4 = 0, n5 = layers.length; i4 < n5; ++i4) {
    loadedLayers.push({
      nodes: await LocalJSONL.loadNodes(layers[i4].nodesFile, []),
      edges: null,
      meta: null
    });
  }
  const stats = mod_exports8.normalizeNodeLayers(loadedLayers.map((layer) => layer.nodes));
  for (let i4 = 0, n5 = layers.length; i4 < n5; ++i4) {
    if (layers[i4].edgesFile) {
      loadedLayers[i4].edges = await LocalJSONL.loadEdges(layers[i4].edgesFile, loadedLayers[i4].nodes);
    }
    if (layers[i4].metaFile) {
      loadedLayers[i4].meta = await LocalJSONL.loadMeta(layers[i4].metaFile);
    }
  }
  return {
    layers: loadedLayers,
    stats
  };
}
async function playground(container) {
  j(x`<div id="menu" class="start_menu"></div>`, container);
  const menu = new import_tweakpane2.default({
    title: "Grafer Loader",
    container: document.querySelector("#menu")
  });
  const layersFile = [];
  const addBtn = menu.addButton({ title: "add layer" });
  const loadBtn = menu.addButton({ title: "load" });
  const updateLoadBtn = () => {
    if (layersFile.length) {
      for (let i4 = 0, n5 = layersFile.length; i4 < n5; ++i4) {
        if (!layersFile[i4].ready) {
          loadBtn.hidden = true;
          return;
        }
      }
      loadBtn.hidden = false;
    } else {
      loadBtn.hidden = true;
    }
  };
  loadBtn.hidden = true;
  addBtn.on("click", () => {
    layersFile.push(createFilesSelector(menu, layersFile, updateLoadBtn));
    updateLoadBtn();
  });
  loadBtn.on("click", async () => {
    menu.dispose();
    const loading = new import_tweakpane2.default({
      title: "loading...",
      container: document.querySelector("#menu")
    });
    try {
      j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
      const canvas = document.querySelector(".grafer_container");
      const loaded = await loadLayers(layersFile);
      const layers = [];
      const colorsArr = [];
      const pointsData = [];
      const pointsMap = /* @__PURE__ */ new Map();
      loaded.layers.map((layer, layerInd) => {
        const { nodesMapping, edgesMapping, colors: colors2 } = layersFile[layerInd];
        layers.push({
          nodes: {
            data: layer.nodes.nodes,
            mappings: nodesMapping ? new Function(`return (${nodesMapping})`)() : {}
          },
          edges: {
            data: layer.edges ? layer.edges.edges : [],
            mappings: edgesMapping ? new Function(`return (${edgesMapping})`)() : {}
          }
        });
        layer.nodes.points.map((point, pointInd) => {
          if (!pointsMap.has(point.id)) {
            pointsData.push(point);
            pointsMap.set(point.id, [layerInd, pointInd]);
          }
        });
        colorsArr.push(...colorsRgbToArr(colors2));
      });
      const points2 = {
        data: pointsData
      };
      const grafer = new GraferController(canvas, { points: points2, layers, colors: colorsArr });
      const { viewport } = grafer;
      const dolly = new mod_exports13.mouse.ScrollDolly(viewport);
      dolly.enabled = true;
      const truck = new mod_exports13.mouse.DragTruck(viewport);
      truck.button = "primary";
      truck.enabled = true;
      const rotation = new mod_exports13.mouse.DragRotation(viewport);
      rotation.button = "secondary";
      rotation.enabled = true;
      const pan = new mod_exports13.mouse.DragPan(viewport);
      pan.button = "auxiliary";
      pan.enabled = true;
      const debug = new mod_exports13.DebugMenu(viewport);
      debug.registerUX(dolly);
      debug.registerUX(truck);
      debug.registerUX(rotation);
      debug.registerUX(pan);
    } catch (e5) {
      loading.addMonitor({ error: e5.toString() }, "error");
      throw e5;
    }
    loading.dispose();
  });
}

// examples/src/basic/mod.ts
var mod_exports15 = {};
__export(mod_exports15, {
  edgeColors: () => edgeColors,
  glow: () => glow,
  minimal: () => minimal,
  minimal3D: () => minimal3D,
  nodeColors: () => nodeColors,
  nodeID: () => nodeID,
  nodeRadius: () => nodeRadius
});

// examples/src/basic/minimal.ts
async function minimal(container) {
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  const nodes = {
    data: [
      { x: -8.6, y: 5 },
      { x: 8.6, y: 5 },
      { x: 0, y: -10 },
      { x: 0, y: 0 }
    ]
  };
  const edges = {
    data: [
      { source: 0, target: 1 },
      { source: 1, target: 2 },
      { source: 2, target: 0 },
      { source: 3, target: 0 },
      { source: 3, target: 1 },
      { source: 3, target: 2 }
    ]
  };
  const layers = [
    { nodes, edges }
  ];
  new GraferController(canvas, { layers });
}

// examples/src/basic/minimal3D.ts
async function minimal3D(container) {
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  const nodes = {
    data: [
      { x: -8.6, y: 5, z: 5 },
      { x: 8.6, y: 5, z: 5 },
      { x: 0, y: -10, z: 0 },
      { x: 0, y: 5, z: -8.6 },
      { x: 0, y: 0, z: 0 }
    ]
  };
  const edges = {
    data: [
      { source: 0, target: 1 },
      { source: 0, target: 2 },
      { source: 0, target: 3 },
      { source: 1, target: 2 },
      { source: 1, target: 3 },
      { source: 2, target: 3 },
      { source: 4, target: 0 },
      { source: 4, target: 1 },
      { source: 4, target: 2 },
      { source: 4, target: 3 }
    ]
  };
  const layers = [
    { nodes, edges }
  ];
  new GraferController(canvas, { layers }, {
    viewport: {
      camera: {
        mode: 1 /* 3D */
      }
    }
  });
}

// examples/src/basic/nodeColors.ts
async function nodeColors(container) {
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  const nodes = {
    data: [
      { x: -8.6, y: 5, z: 5, color: "limegreen" },
      { x: 8.6, y: 5, z: 5, color: "#af3a6f" },
      { x: 0, y: -10, z: 0, color: [128, 230, 255] },
      { x: 0, y: 5, z: -8.6, color: "rgb(40, 40, 189)" },
      { x: 0, y: 0, z: 0, color: "yellow" }
    ]
  };
  const edges = {
    data: [
      { source: 0, target: 1 },
      { source: 0, target: 2 },
      { source: 0, target: 3 },
      { source: 1, target: 2 },
      { source: 1, target: 3 },
      { source: 2, target: 3 },
      { source: 4, target: 0 },
      { source: 4, target: 1 },
      { source: 4, target: 2 },
      { source: 4, target: 3 }
    ]
  };
  const layers = [
    { nodes, edges }
  ];
  new GraferController(canvas, { layers }, {
    viewport: {
      camera: {
        mode: 1 /* 3D */
      }
    }
  });
}

// examples/src/basic/edgeColors.ts
async function edgeColors(container) {
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  const nodes = {
    data: [
      { x: -8.6, y: 5 },
      { x: 8.6, y: 5 },
      { x: 0, y: -10 },
      { x: 0, y: 0 }
    ]
  };
  const edges = {
    data: [
      { source: 0, target: 1, sourceColor: "#5e81ac", targetColor: "#b48ead" },
      { source: 1, target: 2, sourceColor: "#b48ead", targetColor: "#88c0d0" },
      { source: 2, target: 0, sourceColor: "#88c0d0", targetColor: "#5e81ac" },
      { source: 3, target: 0, sourceColor: "orange", targetColor: "#5e81ac" },
      { source: 3, target: 1, sourceColor: "orange", targetColor: "#b48ead" },
      { source: 3, target: 2, sourceColor: "orange", targetColor: "#88c0d0" }
    ]
  };
  const layers = [
    { nodes, edges }
  ];
  new GraferController(canvas, { layers });
}

// examples/src/basic/nodeRadius.ts
async function nodeRadius(container) {
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  const nodes = {
    data: [
      { x: -8.6, y: 5 },
      { x: 8.6, y: 5 },
      { x: 0, y: -10 },
      { x: 0, y: 0, color: "red", radius: 2.5 }
    ]
  };
  const edges = {
    data: [
      { source: 0, target: 1 },
      { source: 1, target: 2 },
      { source: 2, target: 0 },
      { source: 3, target: 0 },
      { source: 3, target: 1 },
      { source: 3, target: 2 }
    ]
  };
  const layers = [
    { nodes, edges }
  ];
  new GraferController(canvas, { layers });
}

// examples/src/basic/nodeID.ts
async function nodeID(container) {
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  const nodes = {
    data: [
      { id: "left", x: -8.6, y: 5 },
      { id: "right", x: 8.6, y: 5 },
      { id: "bottom", x: 0, y: -10 },
      { id: "center", x: 0, y: 0 }
    ]
  };
  const edges = {
    data: [
      { source: "left", target: "right" },
      { source: "right", target: "bottom" },
      { source: "bottom", target: "left" },
      { source: "center", target: "left" },
      { source: "center", target: "right" },
      { source: "center", target: "bottom" }
    ]
  };
  const layers = [
    { nodes, edges }
  ];
  new GraferController(canvas, { layers });
}

// examples/src/basic/glow.ts
async function glow(container) {
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  const points2 = {
    data: [
      { id: 0, x: -8.6, y: 5 },
      { id: 1, x: 8.6, y: 5 },
      { id: 2, x: 0, y: -10 },
      { id: 3, x: 0, y: 0 }
    ],
    options: {
      positionClassMode: 1
    }
  };
  const layers = [
    {
      nodes: { data: [
        { point: 0, color: "lime" },
        { point: 1, color: "teal" }
      ] },
      edges: {
        data: [
          { source: 0, target: 1, sourceColor: "lime", targetColor: "teal" },
          { source: 1, target: 2 },
          { source: 2, target: 0 }
        ],
        mappings: { width: () => 5 }
      },
      options: { glow: 0.1 }
    },
    {
      nodes: { data: [
        { point: 2 },
        { point: 3 }
      ] },
      labels: {
        data: [
          { point: 0, label: "glow" },
          { point: 1, label: "glow" },
          { point: 2, label: "no glow" },
          { point: 3, label: "no glow" }
        ],
        options: {
          labelPlacement: mod_exports7.labels.PointLabelPlacement.TOP
        }
      },
      edges: {
        data: [
          { source: 3, target: 0 },
          { source: 3, target: 1 },
          { source: 3, target: 2 }
        ]
      },
      options: { glow: 0 }
    }
  ];
  new GraferController(canvas, { points: points2, layers });
}

// examples/src/data/mod.ts
var mod_exports16 = {};
__export(mod_exports16, {
  addPoints: () => addPoints,
  colorRegistryIndexed: () => colorRegistryIndexed,
  colors: () => colors,
  mappings: () => mappings,
  points: () => points,
  separateNodesEdges: () => separateNodesEdges
});

// examples/src/data/points.ts
async function points(container) {
  const points2 = {
    data: [
      { id: "left", x: -8.6, y: 5 },
      { id: "right", x: 8.6, y: 5 },
      { id: "bottom", x: 0, y: -10 },
      { id: "center", x: 0, y: 0 }
    ]
  };
  const nodes = {
    data: [
      { point: "left" },
      { point: "right" },
      { point: "bottom" },
      { point: "center" }
    ]
  };
  const edges = {
    data: [
      { source: "left", target: "right" },
      { source: "right", target: "bottom" },
      { source: "bottom", target: "left" },
      { source: "center", target: "left" },
      { source: "center", target: "right" },
      { source: "center", target: "bottom" }
    ]
  };
  const layers = [
    { nodes, edges }
  ];
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  new GraferController(canvas, { points: points2, layers });
}

// examples/src/data/addPoints.ts
function generateRandomPointData(startIndex, count) {
  const data = [];
  for (let i4 = 0; i4 < count; ++i4) {
    data.push({
      id: `p_${startIndex + i4}`,
      x: Math.random() * 200 - 100,
      y: Math.random() * 200 - 100,
      radius: 1
    });
  }
  return data;
}
var gPointCount = 0;
function addNewPoints(controller) {
  const data = generateRandomPointData(gPointCount, 50);
  controller.viewport.graph.addPoints(data);
  const nodeData = data.map((p3) => ({ point: p3.id }));
  const layer = {
    nodes: {
      data: nodeData
    }
  };
  controller.addLayer(layer, `newNodes_${gPointCount}`);
  controller.render();
  gPointCount += 50;
}
async function addPoints(container) {
  const points2 = {
    data: [
      { id: "tl", x: -100, y: -100, radius: 4 },
      { id: "tr", x: 100, y: -100, radius: 4 },
      { id: "bl", x: -100, y: 100, radius: 4 },
      { id: "br", x: 100, y: 100, radius: 4 }
    ]
  };
  const nodes = {
    data: [
      { point: "tl" },
      { point: "tr" },
      { point: "bl" },
      { point: "br" }
    ]
  };
  const edges = {
    data: [
      { source: "tl", target: "tr" },
      { source: "tr", target: "br" },
      { source: "br", target: "bl" },
      { source: "bl", target: "tl" }
    ]
  };
  const layers = [
    { nodes, edges }
  ];
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  const controller = new GraferController(canvas, { points: points2, layers });
  addNewPoints(controller);
  setInterval(() => addNewPoints(controller), 5e3);
}

// examples/src/data/colorRegistryIndexed.ts
function getRandomColor() {
  const letters = "0123456789ABCDEF";
  let color = "#";
  for (let i4 = 0; i4 < 6; i4++) {
    color += letters[Math.floor(Math.random() * 16)];
  }
  return color;
}
async function colorRegistryIndexed(container) {
  const points2 = {
    data: [
      { id: "tl", x: -100, y: -100, radius: 4 },
      { id: "tr", x: 100, y: -100, radius: 4 },
      { id: "bl", x: -100, y: 100, radius: 4 },
      { id: "br", x: 100, y: 100, radius: 4 }
    ]
  };
  const nodes = {
    data: [
      { point: "tl", color: 1 },
      { point: "tr", color: 0 },
      { point: "bl", color: 0 },
      { point: "br", color: 1 }
    ]
  };
  const edges = {
    data: [
      { source: "tl", target: "tr", sourceColor: 0, targetColor: 1 },
      { source: "tr", target: "br", sourceColor: 0, targetColor: 1 },
      { source: "br", target: "bl", sourceColor: 0, targetColor: 1 },
      { source: "bl", target: "tl", sourceColor: 0, targetColor: 1 }
    ]
  };
  const layers = [
    { nodes, edges }
  ];
  const colors2 = [
    "green",
    "red"
  ];
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  const controllerOptions = {
    viewport: {
      colorRegistryType: mod_exports3.colors.ColorRegistryType.indexed
    }
  };
  const controller = new GraferController(canvas, { points: points2, colors: colors2, layers }, controllerOptions);
  setInterval(() => {
    controller.viewport.colorRegistry.updateColor(0, getRandomColor());
    controller.viewport.colorRegistry.updateColor(1, getRandomColor());
    controller.render();
  }, 1e3);
}

// examples/src/data/separateNodesEdges.ts
async function separateNodesEdges(container) {
  const points2 = {
    data: [
      { id: "top-left", x: -8.6, y: 5, radius: 0 },
      { id: "top-right", x: 8.6, y: 5, radius: 0 },
      { id: "top-center", x: 0, y: 10 },
      { id: "bottom-left", x: -8.6, y: -5 },
      { id: "bottom-right", x: 8.6, y: -5 },
      { id: "bottom-center", x: 0, y: -10, radius: 0 },
      { id: "origin", x: 0, y: 0 }
    ]
  };
  const nodes = {
    data: [
      { point: "bottom-left" },
      { point: "bottom-right" },
      { point: "top-center" },
      { point: "origin" }
    ]
  };
  const edges = {
    data: [
      { source: "top-left", target: "top-right" },
      { source: "top-right", target: "bottom-center" },
      { source: "bottom-center", target: "top-left" },
      { source: "origin", target: "top-left" },
      { source: "origin", target: "top-right" },
      { source: "origin", target: "bottom-center" }
    ]
  };
  const layers = [
    { nodes },
    { edges }
  ];
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  new GraferController(canvas, { points: points2, layers });
}

// examples/src/data/colors.ts
async function colors(container) {
  const colors2 = [
    "red",
    "limegreen",
    [0, 0, 255],
    "#88c0d0"
  ];
  const points2 = {
    data: [
      { id: "left", x: -8.6, y: 5 },
      { id: "right", x: 8.6, y: 5 },
      { id: "bottom", x: 0, y: -10 },
      { id: "center", x: 0, y: 0 }
    ]
  };
  const nodes = {
    data: [
      { point: "left", color: 0 },
      { point: "right", color: 1 },
      { point: "bottom", color: 2 },
      { point: "center", color: 3 }
    ]
  };
  const edges = {
    data: [
      { source: "left", target: "right", sourceColor: 0, targetColor: 1 },
      { source: "right", target: "bottom", sourceColor: 1, targetColor: 2 },
      { source: "bottom", target: "left", sourceColor: 2, targetColor: 0 },
      { source: "center", target: "left", sourceColor: 3, targetColor: 0 },
      { source: "center", target: "right", sourceColor: 3, targetColor: 1 },
      { source: "center", target: "bottom", sourceColor: 3, targetColor: 2 }
    ]
  };
  const layers = [
    { nodes, edges }
  ];
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  new GraferController(canvas, { colors: colors2, points: points2, layers });
}

// examples/src/data/mappings.ts
async function mappings(container) {
  const colors2 = [
    "red",
    "limegreen",
    [0, 0, 255],
    "#88c0d0",
    [255, 255, 0],
    [0, 255, 255],
    [255, 0, 255],
    "white"
  ];
  const points2 = {
    data: [
      { id: "left", x: -8.6, y: 5 },
      { id: "right", x: 8.6, y: 5 },
      { id: "bottom", x: 0, y: -10 },
      { id: "center", x: 0, y: 0 }
    ]
  };
  const nodes = {
    data: [
      { point: "left", color: 0 },
      { point: "right", color: 1 },
      { point: "bottom", color: 2 },
      { point: "center", color: 3 }
    ]
  };
  const edges = {
    data: [
      { source: "left", target: "right", color: 4 },
      { source: "right", target: "bottom", color: 5 },
      { source: "bottom", target: "left", color: 6 },
      { source: "center", target: "left", color: 7 },
      { source: "center", target: "right", color: 7 },
      { source: "center", target: "bottom", color: 7 }
    ],
    mappings: {
      sourceColor: (entry) => entry.color,
      targetColor: (entry) => entry.color
    }
  };
  const layers = [
    { nodes, edges }
  ];
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  new GraferController(canvas, { colors: colors2, points: points2, layers });
}

// examples/src/nodes/mod.ts
var mod_exports17 = {};
__export(mod_exports17, {
  box: () => box,
  circle: () => circle,
  cross: () => cross4,
  custom: () => custom,
  octagon: () => octagon,
  pentagon: () => pentagon,
  plus: () => plus,
  ring: () => ring,
  star: () => star,
  triangle: () => triangle
});

// examples/src/nodes/circle.ts
function createNodePoints(count, radius = 10) {
  const PI2 = Math.PI * 2;
  const degStep = PI2 / count;
  const result = [];
  for (let angle3 = 0, i4 = 0; angle3 < PI2; angle3 += degStep, ++i4) {
    const pX = Math.cos(angle3) * radius;
    const pY = Math.sin(angle3) * radius;
    result.push({
      id: `p${i4}-${radius}`,
      x: pX,
      y: pY
    });
  }
  return result;
}
async function circle(container) {
  const nodes = {
    type: "Circle",
    data: [
      ...createNodePoints(10, 10),
      ...createNodePoints(5, 5)
    ]
  };
  const layers = [
    { nodes }
  ];
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  new GraferController(canvas, { layers });
}

// examples/src/nodes/ring.ts
function createNodePoints2(count, radius = 10) {
  const PI2 = Math.PI * 2;
  const degStep = PI2 / count;
  const result = [];
  for (let angle3 = 0, i4 = 0; angle3 < PI2; angle3 += degStep, ++i4) {
    const pX = Math.cos(angle3) * radius;
    const pY = Math.sin(angle3) * radius;
    result.push({
      id: `p${i4}-${radius}`,
      x: pX,
      y: pY
    });
  }
  return result;
}
async function ring(container) {
  const nodes = {
    type: "Ring",
    data: [
      ...createNodePoints2(10, 10),
      ...createNodePoints2(5, 5)
    ]
  };
  const layers = [
    { nodes }
  ];
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  new GraferController(canvas, { layers });
}

// examples/src/nodes/triangle.ts
function createNodePoints3(count, radius = 10) {
  const PI2 = Math.PI * 2;
  const degStep = PI2 / count;
  const result = [];
  for (let angle3 = 0, i4 = 0; angle3 < PI2; angle3 += degStep, ++i4) {
    const pX = Math.cos(angle3) * radius;
    const pY = Math.sin(angle3) * radius;
    result.push({
      id: `p${i4}-${radius}`,
      x: pX,
      y: pY
    });
  }
  return result;
}
async function triangle(container) {
  const nodes = {
    type: "Triangle",
    data: [
      ...createNodePoints3(10, 10),
      ...createNodePoints3(5, 5)
    ]
  };
  const layers = [
    { nodes }
  ];
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  new GraferController(canvas, { layers });
}

// examples/src/nodes/pentagon.ts
function createNodePoints4(count, radius = 10) {
  const PI2 = Math.PI * 2;
  const degStep = PI2 / count;
  const result = [];
  for (let angle3 = 0, i4 = 0; angle3 < PI2; angle3 += degStep, ++i4) {
    const pX = Math.cos(angle3) * radius;
    const pY = Math.sin(angle3) * radius;
    result.push({
      id: `p${i4}-${radius}`,
      x: pX,
      y: pY
    });
  }
  return result;
}
async function pentagon(container) {
  const nodes = {
    type: "Pentagon",
    data: [
      ...createNodePoints4(10, 10),
      ...createNodePoints4(5, 5)
    ]
  };
  const layers = [
    { nodes }
  ];
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  new GraferController(canvas, { layers });
}

// examples/src/nodes/octagon.ts
function createNodePoints5(count, radius = 10) {
  const PI2 = Math.PI * 2;
  const degStep = PI2 / count;
  const result = [];
  for (let angle3 = 0, i4 = 0; angle3 < PI2; angle3 += degStep, ++i4) {
    const pX = Math.cos(angle3) * radius;
    const pY = Math.sin(angle3) * radius;
    result.push({
      id: `p${i4}-${radius}`,
      x: pX,
      y: pY
    });
  }
  return result;
}
async function octagon(container) {
  const nodes = {
    type: "Octagon",
    data: [
      ...createNodePoints5(10, 10),
      ...createNodePoints5(5, 5)
    ]
  };
  const layers = [
    { nodes }
  ];
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  new GraferController(canvas, { layers });
}

// examples/src/nodes/star.ts
function createNodePoints6(count, radius = 10) {
  const PI2 = Math.PI * 2;
  const degStep = PI2 / count;
  const result = [];
  for (let angle3 = 0, i4 = 0; angle3 < PI2; angle3 += degStep, ++i4) {
    const pX = Math.cos(angle3) * radius;
    const pY = Math.sin(angle3) * radius;
    result.push({
      id: `p${i4}-${radius}`,
      x: pX,
      y: pY
    });
  }
  return result;
}
async function star(container) {
  const nodesStar5 = {
    type: "Star",
    data: createNodePoints6(10, 10)
  };
  const nodesStar10 = {
    type: "Star",
    data: createNodePoints6(5, 5),
    options: {
      sides: 10,
      angleDivisor: 2.5
    }
  };
  const layers = [
    { nodes: nodesStar5 },
    { nodes: nodesStar10 }
  ];
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  new GraferController(canvas, { layers });
}

// examples/src/nodes/cross.ts
function createNodePoints7(count, radius = 10) {
  const PI2 = Math.PI * 2;
  const degStep = PI2 / count;
  const result = [];
  for (let angle3 = 0, i4 = 0; angle3 < PI2; angle3 += degStep, ++i4) {
    const pX = Math.cos(angle3) * radius;
    const pY = Math.sin(angle3) * radius;
    result.push({
      id: `p${i4}-${radius}`,
      x: pX,
      y: pY
    });
  }
  return result;
}
async function cross4(container) {
  const nodes = {
    type: "Cross",
    data: [
      ...createNodePoints7(10, 10),
      ...createNodePoints7(5, 5)
    ]
  };
  const layers = [
    { nodes }
  ];
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  new GraferController(canvas, { layers });
}

// examples/src/nodes/plus.ts
function createNodePoints8(count, radius = 10) {
  const PI2 = Math.PI * 2;
  const degStep = PI2 / count;
  const result = [];
  for (let angle3 = 0, i4 = 0; angle3 < PI2; angle3 += degStep, ++i4) {
    const pX = Math.cos(angle3) * radius;
    const pY = Math.sin(angle3) * radius;
    result.push({
      id: `p${i4}-${radius}`,
      x: pX,
      y: pY
    });
  }
  return result;
}
async function plus(container) {
  const nodes = {
    type: "Plus",
    data: [
      ...createNodePoints8(10, 10),
      ...createNodePoints8(5, 5)
    ]
  };
  const layers = [
    { nodes }
  ];
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  new GraferController(canvas, { layers });
}

// examples/src/nodes/box.ts
function createNodePoints9(count, radius = 10) {
  const PI2 = Math.PI * 2;
  const degStep = PI2 / count;
  const result = [];
  for (let angle3 = 0, i4 = 0; angle3 < PI2; angle3 += degStep, ++i4) {
    const pX = Math.cos(angle3) * radius;
    const pY = Math.sin(angle3) * radius;
    result.push({
      id: `p${i4}-${radius}`,
      x: pX,
      y: pY
    });
  }
  return result;
}
async function box(container) {
  const nodes = {
    type: "Box",
    data: [
      ...createNodePoints9(10, 10),
      ...createNodePoints9(5, 5)
    ]
  };
  const layers = [
    { nodes }
  ];
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  new GraferController(canvas, { layers });
}

// examples/src/nodes/custom.ts
function createNodePoints10(count, radius = 10) {
  const PI2 = Math.PI * 2;
  const degStep = PI2 / count;
  const result = [];
  for (let angle3 = 0, i4 = 0; angle3 < PI2; angle3 += degStep, ++i4) {
    const pX = Math.cos(angle3) * radius;
    const pY = Math.sin(angle3) * radius;
    result.push({
      id: `p${i4}-${radius}`,
      x: pX,
      y: pY,
      texture: Math.random() > 0.5 ? 1 : 0,
      color: Math.round(Math.random() * 6)
    });
  }
  return result;
}
async function custom(container) {
  const nodes = {
    type: "Custom",
    data: [
      ...createNodePoints10(10, 10),
      ...createNodePoints10(5, 5)
    ]
  };
  const layers = [
    { nodes }
  ];
  const colors2 = [
    "white",
    "#bf616a",
    "#d08770",
    "#ebcb8b",
    "#a3be8c",
    "#b48ead"
  ];
  const textures = [
    "https://upload.wikimedia.org/wikipedia/commons/thumb/2/2e/Tokugawa_family_crest.svg/1920px-Tokugawa_family_crest.svg.png",
    "https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/Take_ni_Suzume.svg/2560px-Take_ni_Suzume.svg.png"
  ];
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  new GraferController(canvas, { textures, colors: colors2, layers });
}

// examples/src/edges/mod.ts
var mod_exports18 = {};
__export(mod_exports18, {
  bundling: () => bundling,
  circuitBoard: () => circuitBoard,
  curvedPaths: () => curvedPaths,
  dashed: () => dashed,
  straightPaths: () => straightPaths
});

// examples/src/edges/dashed.ts
async function dashed(container) {
  const nodes = {
    data: [
      { x: -8.6, y: 5 },
      { x: 8.6, y: 5 },
      { x: 0, y: -10 },
      { x: 0, y: 0 }
    ]
  };
  const edges = {
    data: [
      { source: 0, target: 1 },
      { source: 1, target: 2 },
      { source: 2, target: 0 },
      { source: 3, target: 0 },
      { source: 3, target: 1 },
      { source: 3, target: 2 }
    ],
    type: "Dashed"
  };
  const layers = [
    { nodes, edges }
  ];
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  new GraferController(canvas, { layers });
}

// examples/src/edges/curvedPaths.ts
async function curvedPaths(container) {
  const colors2 = [
    "red",
    "limegreen",
    [0, 0, 255],
    "#88c0d0"
  ];
  const points2 = {
    data: [
      { id: "left", x: -8.6, y: 5 },
      { id: "right", x: 8.6, y: 5 },
      { id: "bottom", x: 0, y: -10, z: -5 },
      { id: "center", x: 0, y: 0, z: 5 }
    ]
  };
  const nodes = {
    data: [
      { point: "left", color: 3 },
      { point: "right", color: 1 },
      { point: "bottom", radius: 0.2 },
      { point: "center", radius: 0.2 }
    ],
    mappings: {
      radius: (entry) => entry.radius || 1
    }
  };
  const edges = {
    type: "CurvedPath",
    data: [
      { source: "left", target: "right", control: ["center", "bottom"], sourceColor: 3, targetColor: 1 }
    ]
  };
  const edgesDashed = {
    type: "Dashed",
    data: [
      { source: "left", target: "center" },
      { source: "center", target: "bottom" },
      { source: "bottom", target: "right" }
    ]
  };
  const layers = [
    { nodes, edges },
    { edges: edgesDashed }
  ];
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  new GraferController(canvas, { colors: colors2, points: points2, layers });
}

// examples/src/edges/straightPaths.ts
async function straightPaths(container) {
  const colors2 = [
    "red",
    "limegreen",
    [0, 0, 255],
    "#88c0d0"
  ];
  const points2 = {
    data: [
      { id: "left", x: -15, y: 0 },
      { id: "right", x: 15, y: 0 },
      { id: "p0", x: -13, y: 0 },
      { id: "p1", x: -12, y: -5 },
      { id: "p2", x: -11, y: 5 },
      { id: "p3", x: -10, y: 0 },
      { id: "p4", x: -2, y: 0 },
      { id: "p5", x: -1, y: -5 },
      { id: "p6", x: 0, y: 5 },
      { id: "p7", x: 1, y: 0 },
      { id: "p8", x: 9, y: 0 },
      { id: "p9", x: 10, y: -5 },
      { id: "p10", x: 11, y: 5 },
      { id: "p11", x: 12, y: 0 }
    ]
  };
  const nodes = {
    data: [
      { point: "left", color: 3 },
      { point: "right", color: 1 }
    ],
    mappings: {
      radius: (entry) => entry.radius || 1
    }
  };
  const controls = [];
  for (let i4 = 0; i4 < 12; ++i4) {
    controls.push(`p${i4}`);
  }
  const edges = {
    type: "StraightPath",
    data: [
      { source: "left", target: "right", control: controls, sourceColor: 3, targetColor: 1 }
    ]
  };
  const layers = [
    { nodes, edges }
  ];
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  new GraferController(canvas, { colors: colors2, points: points2, layers });
}

// examples/src/edges/circuitBoard.ts
async function circuitBoard(container) {
  const colors2 = [
    "#d08770",
    "#88c0d0"
  ];
  const points2 = {
    data: [
      { id: "p1-p1", x: -10, y: -5 },
      { id: "p1-c1", x: 8, y: -5 },
      { id: "p1-c2", x: 10, y: -5 },
      { id: "p1-c3", x: 10, y: -3 },
      { id: "p1-p2", x: 10, y: 11 },
      { id: "p2-p1", x: -10, y: -8 },
      { id: "p2-c1", x: 10, y: -8 },
      { id: "p2-c2", x: 13, y: -8 },
      { id: "p2-c3", x: 13, y: -5 },
      { id: "p2-p2", x: 13, y: 11 },
      { id: "p3-p1", x: -10, y: -11 },
      { id: "p3-c1", x: 12, y: -11 },
      { id: "p3-c2", x: 16, y: -11 },
      { id: "p3-c3", x: 16, y: -7 },
      { id: "p3-p2", x: 16, y: 11 },
      { id: "origin", x: 0, y: 5, radius: 8 }
    ]
  };
  const nodes = {
    data: [
      { point: "p1-p1" },
      { point: "p1-p2" },
      { point: "p2-p1" },
      { point: "p2-p2" },
      { point: "p3-p1" },
      { point: "p3-p2" },
      { point: "origin", color: 1 }
    ]
  };
  const edges = {
    type: "CurvedPath",
    data: [
      { source: "p1-p1", target: "p1-p2", control: ["p1-c1", "p1-c2", "p1-c3"] },
      { source: "p2-p1", target: "p2-p2", control: ["p2-c1", "p2-c2", "p2-c3"] },
      { source: "p3-p1", target: "p3-p2", control: ["p3-c1", "p3-c2", "p3-c3"] }
    ]
  };
  const layers = [
    { nodes, edges }
  ];
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  new GraferController(canvas, { colors: colors2, points: points2, layers });
}

// examples/src/edges/bundling.ts
function createClusterNodePoints(cluster, x2, y3, r5, count) {
  const PI2 = Math.PI * 2;
  const degStep = PI2 / count;
  const radius = r5 - 7;
  const result = [];
  for (let angle3 = 0, i4 = 0; angle3 < PI2; angle3 += degStep, ++i4) {
    const pX = Math.cos(angle3) * (Math.random() * radius + 5);
    const pY = Math.sin(angle3) * (Math.random() * radius + 5);
    result.push({
      id: `${cluster}-p${i4}`,
      x: x2 + pX,
      y: y3 + pY
    });
  }
  return result;
}
function createInnerEdges(cluster) {
  const result = [];
  for (let i4 = 0, n5 = cluster.length; i4 < n5; ++i4) {
    const n1 = cluster[i4];
    for (let ii = i4 + 1, nn = cluster.length; ii < nn; ++ii) {
      if (Math.random() > 0.75) {
        const n22 = cluster[ii];
        result.push({
          source: n1.id,
          target: n22.id,
          sourceColor: 2,
          targetColor: 2
        });
      }
    }
  }
  return result;
}
async function bundling(container) {
  const colors2 = [
    "#d08770",
    "#88c0d0",
    "#ebcb8b"
  ];
  const pointsC1 = createClusterNodePoints("c1", -30, 0, 20, 12);
  const nodesC1 = pointsC1.map((p3) => ({ point: p3.id }));
  const pointsC2 = createClusterNodePoints("c2", 40, 0, 25, 14);
  const nodesC2 = pointsC2.map((p3) => ({ point: p3.id }));
  const points2 = {
    data: [
      { id: "c1", x: -30, y: 0 },
      { id: "c1-c1", x: -10, y: 0 },
      { id: "c1-c2", x: -0, y: 0 },
      ...pointsC1,
      { id: "c2", x: 40, y: 0 },
      { id: "c2-c1", x: 15, y: 0 },
      { id: "c2-c2", x: 5, y: 0 },
      ...pointsC2
    ]
  };
  const nodes = {
    data: [
      ...nodesC1,
      ...nodesC2
    ]
  };
  const clusters = {
    type: "Ring",
    data: [
      { point: "c1", radius: 20, color: 1 },
      { point: "c2", radius: 25, color: 1 }
    ],
    mappings: {
      radius: (entry) => entry.radius
    },
    options: {
      billboard: false
    }
  };
  const clusterEdgesData = [];
  for (let i4 = 0, n5 = pointsC1.length; i4 < n5; ++i4) {
    const pointA = pointsC1[i4];
    for (let ii = 0, nn = pointsC2.length; ii < nn; ++ii) {
      if (Math.random() > 0.5) {
        const pointB = pointsC2[ii];
        clusterEdgesData.push({
          source: pointA.id,
          target: pointB.id,
          control: ["c1-c1", "c1-c2", "c2-c2", "c2-c1"],
          sourceColor: 1,
          targetColor: 1
        });
      }
    }
  }
  const clusterEdges = {
    type: "CurvedPath",
    data: clusterEdgesData,
    options: {
      alpha: 0.04,
      nearDepth: 0.9
    }
  };
  const nodesEdges = {
    data: [
      ...createInnerEdges(pointsC1),
      ...createInnerEdges(pointsC2)
    ],
    options: {
      alpha: 0.55,
      nearDepth: 0.9
    }
  };
  const layers = [
    { nodes: clusters, edges: clusterEdges },
    { nodes, edges: nodesEdges }
  ];
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  new GraferController(canvas, { colors: colors2, points: points2, layers });
}

// examples/src/labels/mod.ts
var mod_exports19 = {};
__export(mod_exports19, {
  circularLabel: () => circularLabel,
  pointLabel: () => pointLabel,
  ringLabel: () => ringLabel
});

// examples/src/labels/pointLabel.ts
function createNodePoints11(count, radius = 10) {
  const PI2 = Math.PI * 2;
  const degStep = PI2 / count;
  const result = [];
  for (let angle3 = 0, i4 = 0; angle3 < PI2; angle3 += degStep, ++i4) {
    const pX = Math.cos(angle3) * radius;
    const pY = Math.sin(angle3) * radius;
    result.push({
      id: `p${i4}-${radius}`,
      x: pX,
      y: pY,
      radius: 2,
      label: `Node p${i4}-r${radius}`,
      color: Math.round(Math.random() * 4),
      fontSize: 16
    });
  }
  return result;
}
async function pointLabel(container) {
  const nodes = {
    type: "Circle",
    data: [
      ...createNodePoints11(10, 10),
      ...createNodePoints11(5, 5)
    ]
  };
  const labels = {
    type: "PointLabel",
    data: nodes.data,
    options: {
      visibilityThreshold: 50,
      labelPlacement: 1,
      renderBackground: true,
      padding: 6
    }
  };
  const layers = [
    { nodes, labels }
  ];
  const colors2 = [
    "#bf616a",
    "#d08770",
    "#ebcb8b",
    "#a3be8c",
    "#b48ead"
  ];
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  new GraferController(canvas, { colors: colors2, layers });
}

// examples/src/labels/circularLabel.ts
function createNodePoints12(count, radius = 10) {
  const PI2 = Math.PI * 2;
  const degStep = PI2 / count;
  const result = [];
  for (let angle3 = 0, i4 = 0; angle3 < PI2; angle3 += degStep, ++i4) {
    const pX = Math.cos(angle3) * radius;
    const pY = Math.sin(angle3) * radius;
    result.push({
      id: `p${i4}-${radius}`,
      x: pX,
      y: pY,
      radius: 2,
      label: `NODE P${i4}-R${radius}`,
      color: Math.round(Math.random() * 4) + 1,
      background: true,
      fontSize: 16
    });
  }
  return result;
}
async function circularLabel(container) {
  const nodes = {
    type: "Circle",
    data: [
      ...createNodePoints12(10, 16),
      ...createNodePoints12(5, 8)
    ]
  };
  const labels = {
    type: "CircularLabel",
    data: nodes.data,
    options: {
      visibilityThreshold: 40,
      repeatLabel: -1,
      placementMargin: 5,
      renderBackground: true,
      mirror: false,
      padding: 6,
      repeatGap: 25
    }
  };
  const layers = [
    { nodes, labels }
  ];
  const colors2 = [
    "white",
    "#bf616a",
    "#d08770",
    "#ebcb8b",
    "#a3be8c",
    "#b48ead"
  ];
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  new GraferController(canvas, { colors: colors2, layers });
}

// examples/src/labels/ringLabel.ts
function createNodePoints13(count, radius = 10) {
  const PI2 = Math.PI * 2;
  const degStep = PI2 / count;
  const result = [];
  for (let angle3 = 0, i4 = 0; angle3 < PI2; angle3 += degStep, ++i4) {
    const pX = Math.cos(angle3) * radius;
    const pY = Math.sin(angle3) * radius;
    result.push({
      id: `p${i4}-${radius}`,
      x: pX,
      y: pY,
      radius: 2,
      label: `NODE P${i4}-R${radius}`,
      color: Math.round(Math.random() * 4) + 1,
      background: false,
      fontSize: 12,
      padding: 0
    });
  }
  return result;
}
async function ringLabel(container) {
  const nodes = {
    type: "Circle",
    data: [
      ...createNodePoints13(10, 16),
      ...createNodePoints13(5, 8)
    ]
  };
  const labels = {
    type: "RingLabel",
    data: nodes.data,
    options: {
      visibilityThreshold: 100,
      repeatLabel: 5,
      repeatGap: 15
    }
  };
  const layers = [
    { labels }
  ];
  const colors2 = [
    "white",
    "#bf616a",
    "#d08770",
    "#ebcb8b",
    "#a3be8c",
    "#b48ead"
  ];
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  new GraferController(canvas, { colors: colors2, layers });
}

// examples/src/UX/mod.ts
var mod_exports20 = {};
__export(mod_exports20, {
  animation: () => animation,
  drag: () => drag,
  embedded: () => embedded,
  overlay: () => overlay,
  picking: () => picking,
  tooltips: () => tooltips
});

// examples/src/UX/picking.ts
async function picking(container) {
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  const nodes = {
    data: [
      { id: "left", x: -8.6, y: 5 },
      { id: "right", x: 8.6, y: 5 },
      { id: "bottom", x: 0, y: -10 },
      { id: "center", x: 0, y: 0 }
    ]
  };
  const edges = {
    data: [
      { source: "left", target: "right" },
      { source: "right", target: "bottom" },
      { source: "bottom", target: "left" },
      { source: "center", target: "left" },
      { source: "center", target: "right" },
      { source: "center", target: "bottom" }
    ]
  };
  const layers = [
    { name: "Awesomeness", nodes, edges }
  ];
  const printEvent = (event, detail) => {
    console.log(`${event.description} => layer:"${detail.layer}" ${detail.type}:"${detail.id}"`);
  };
  const controller = new GraferController(canvas, { layers });
  controller.on(mod_exports13.picking.PickingManager.events.hoverOn, printEvent);
  controller.on(mod_exports13.picking.PickingManager.events.hoverOff, printEvent);
  controller.on(mod_exports13.picking.PickingManager.events.click, printEvent);
}

// examples/src/UX/embedded.ts
var WINDOW_DEVICE_PIXEL_RATIO = window.devicePixelRatio;
function worldToPixel(controller, position) {
  const { camera } = controller.viewport;
  const renderMatrix = mat4_exports.mul(mat4_exports.create(), camera.projectionMatrix, camera.viewMatrix);
  mat4_exports.mul(renderMatrix, renderMatrix, controller.viewport.graph.matrix);
  const projected = vec4_exports.set(vec4_exports.create(), position[0], position[1], position[2], 1);
  vec4_exports.transformMat4(projected, projected, renderMatrix);
  const { size } = controller.viewport;
  const x2 = projected[0] / projected[3] * size[0] * 0.5 + size[0] * 0.5;
  const y3 = projected[1] / projected[3] * size[1] * 0.5 + size[1] * 0.5;
  return vec2_exports.set(vec2_exports.create(), x2, y3);
}
async function embedded(container) {
  j(
    x`
        <style>
            .overlay_container {
                width: 100%;
                height: 100%;
                position: absolute;
                top: 0;
                left: 0;
                pointer-events: none;
            }
            .wrapper {
                display: grid;
                grid-template-columns: 200px minmax(0, 1fr) 150px;
                grid-template-rows: 4rem minmax(0, 1fr) 5rem;
                height: 100%;
                width: 100%;
            }
            .grafer_container {
                width: 100%;
                height: 100%;
            }
            header {
                grid-column: 1 / -1;
            }
            nav {
                grid-column: 1;
            }
            main {
                grid-column: 2 / -2;
            }
            aside {
                grid-column: -2;
            }
            footer {
                grid-column: 1 / -1;
            }

            /* Styling */
            header, nav, aside, main, footer {
                border: 3px solid;
            }
            header {
                border-color: hsl(45deg 100% 50%);
                background-color: hsl(45deg 100% 50% / 0.2);
            }
            main {
                border-color: hsl(220deg 100% 50%);
                background-color: hsl(220deg 100% 50% / 0.2);
            }
            nav {
                border-color: hsl(170deg 100% 35%);
                background-color: hsl(170deg 100% 35% / 0.2);
            }
            aside {
                border-color: hsl(300deg 100% 45%);
                background-color: hsl(300deg 100% 45% / 0.2);
            }
            footer {
                border-color: hsl(350deg 100% 60%);
                background-color: hsl(350deg 100% 60% / 0.2);
            }
        </style>

        <div class="wrapper">
            <header></header>
            <nav></nav>
            <main>
                <canvas class="grafer_container"></canvas>
                <mouse-interactions></mouse-interactions>
                <canvas class="overlay_container"></canvas>
            </main>
            <aside></aside>
            <footer></footer>
        </div>
        `,
    container
  );
  const canvas = document.querySelector(".grafer_container");
  const nodes = {
    data: [
      { id: 0, x: -8.6, y: 5 },
      { id: 1, x: 8.6, y: 5 },
      { id: 2, x: 0, y: -10 },
      { id: 3, x: 0, y: 0 }
    ]
  };
  const edges = {
    data: [
      { source: "left", target: "right" },
      { source: "right", target: "bottom" },
      { source: "bottom", target: "left" },
      { source: "center", target: "left" },
      { source: "center", target: "right" },
      { source: "center", target: "bottom" }
    ]
  };
  const layers = [
    { name: "Awesomeness", nodes, edges }
  ];
  const printEventFactory = (controller2, ctx2) => {
    return (event, detail) => {
      console.log(`${event.description} => layer:"${detail.layer}" ${detail.type}:"${detail.id}"`);
      const point = controller2.viewport.graph.getPointByID(detail.id);
      const pxPoint = worldToPixel(controller2, point);
      const bb = controller2.viewport.canvas.getBoundingClientRect();
      const rect2 = ctx2.canvas.getBoundingClientRect();
      ctx2.canvas.width = rect2.width * WINDOW_DEVICE_PIXEL_RATIO;
      ctx2.canvas.height = rect2.height * WINDOW_DEVICE_PIXEL_RATIO;
      ctx2.clearRect(0, 0, ctx2.canvas.width * WINDOW_DEVICE_PIXEL_RATIO, ctx2.canvas.height * WINDOW_DEVICE_PIXEL_RATIO);
      ctx2.beginPath();
      ctx2.arc(bb.left * WINDOW_DEVICE_PIXEL_RATIO + pxPoint[0], bb.bottom * WINDOW_DEVICE_PIXEL_RATIO - pxPoint[1], 10, 0, 2 * Math.PI);
      ctx2.fillStyle = "#" + Math.floor(Math.random() * 16777215).toString(16);
      ctx2.fill();
      ctx2.stroke();
    };
  };
  const canvasDraw = document.querySelector(".overlay_container");
  const rect = canvasDraw.getBoundingClientRect();
  canvasDraw.width = rect.width * WINDOW_DEVICE_PIXEL_RATIO;
  canvasDraw.height = rect.height * WINDOW_DEVICE_PIXEL_RATIO;
  const ctx = canvasDraw.getContext("2d");
  const controller = new GraferController(canvas, { layers });
  controller.on(mod_exports13.picking.PickingManager.events.click, printEventFactory(controller, ctx));
}

// examples/src/UX/overlay.ts
var WINDOW_DEVICE_PIXEL_RATIO2 = window.devicePixelRatio;
var onHoverOnEventFactory = (controller, tooltipCtx) => {
  return (event, detail) => {
    const point = controller.viewport.graph.getPointByID(detail.id);
    const pxPoint = mod_exports13.coordinate.Coordinate.worldPointToRelativePixelCoordinate(controller, point, {
      x: mod_exports13.coordinate.PixelCoordXPosition.CENTER,
      y: mod_exports13.coordinate.PixelCoordYPosition.CENTER
    });
    const graphBB = controller.viewport.canvas.getBoundingClientRect();
    const tooltipBB = tooltipCtx.canvas.getBoundingClientRect();
    tooltipCtx.canvas.width = tooltipBB.width * WINDOW_DEVICE_PIXEL_RATIO2;
    tooltipCtx.canvas.height = tooltipBB.height * WINDOW_DEVICE_PIXEL_RATIO2;
    tooltipCtx.clearRect(0, 0, tooltipCtx.canvas.width, tooltipCtx.canvas.height);
    tooltipCtx.beginPath();
    tooltipCtx.arc(pxPoint[0], graphBB.height * WINDOW_DEVICE_PIXEL_RATIO2 - pxPoint[1], 10, 0, 2 * Math.PI);
    tooltipCtx.fillStyle = "red";
    tooltipCtx.fill();
    tooltipCtx.stroke();
  };
};
var onHoverOffEventFactory = (tooltipCtx) => {
  return () => {
    const tooltipBB = tooltipCtx.canvas.getBoundingClientRect();
    tooltipCtx.canvas.width = tooltipBB.width * WINDOW_DEVICE_PIXEL_RATIO2;
    tooltipCtx.canvas.height = tooltipBB.height * WINDOW_DEVICE_PIXEL_RATIO2;
    tooltipCtx.clearRect(0, 0, tooltipCtx.canvas.width, tooltipCtx.canvas.height);
  };
};
async function overlay(container) {
  j(
    x`
        <style>
            .overlay_container {
                width: 100%;
                height: 100%;
                position: absolute;
                top: 0;
                left: 0;
                pointer-events: none;
            }
            .wrapper {
                display: grid;
                grid-template-columns: 200px minmax(0, 1fr) 150px;
                grid-template-rows: 4rem minmax(0, 1fr) 5rem;
                height: 100%;
                width: 100%;
            }
            .grafer_container {
                width: 100%;
                height: 100%;
            }
            header {
                grid-column: 1 / -1;
            }
            nav {
                grid-column: 1;
            }
            main {
                grid-column: 2 / -2;
                position: relative;
            }
            aside {
                grid-column: -2;
            }
            footer {
                grid-column: 1 / -1;
            }

            /* Styling */
            header, nav, aside, main, footer {
                border: 3px solid;
            }
            header {
                border-color: hsl(45deg 100% 50%);
                background-color: hsl(45deg 100% 50% / 0.2);
            }
            main {
                border-color: hsl(220deg 100% 50%);
                background-color: hsl(220deg 100% 50% / 0.2);
            }
            nav {
                border-color: hsl(170deg 100% 35%);
                background-color: hsl(170deg 100% 35% / 0.2);
            }
            aside {
                border-color: hsl(300deg 100% 45%);
                background-color: hsl(300deg 100% 45% / 0.2);
            }
            footer {
                border-color: hsl(350deg 100% 60%);
                background-color: hsl(350deg 100% 60% / 0.2);
            }
        </style>

        <div class="wrapper">
            <header></header>
            <nav></nav>
            <main>
                <canvas class="grafer_container"></canvas>
                <mouse-interactions></mouse-interactions>
                <canvas class="overlay_container"></canvas>
            </main>
            <aside></aside>
            <footer></footer>
        </div>
        `,
    container
  );
  const canvas = document.querySelector(".grafer_container");
  const nodes = {
    data: [
      { id: 0, x: -8.6, y: 5 },
      { id: 1, x: 8.6, y: 5 },
      { id: 2, x: 0, y: -10 },
      { id: 3, x: 0, y: 0, radius: 2.5 }
    ]
  };
  const edges = {
    data: [
      { source: "left", target: "right" },
      { source: "right", target: "bottom" },
      { source: "bottom", target: "left" },
      { source: "center", target: "left" },
      { source: "center", target: "right" },
      { source: "center", target: "bottom" }
    ]
  };
  const layers = [
    { name: "Awesomeness", nodes, edges }
  ];
  const tooltipCanvas = document.querySelector(".overlay_container");
  const tooltipBB = tooltipCanvas.getBoundingClientRect();
  tooltipCanvas.width = tooltipBB.width * WINDOW_DEVICE_PIXEL_RATIO2;
  tooltipCanvas.height = tooltipBB.height * WINDOW_DEVICE_PIXEL_RATIO2;
  const tooltipCtx = tooltipCanvas.getContext("2d");
  const controller = new GraferController(canvas, { layers });
  controller.on(mod_exports13.picking.PickingManager.events.hoverOn, onHoverOnEventFactory(controller, tooltipCtx));
  controller.on(mod_exports13.picking.PickingManager.events.hoverOff, onHoverOffEventFactory(tooltipCtx));
}

// examples/src/UX/tooltips.ts
var WINDOW_DEVICE_PIXEL_RATIO3 = window.devicePixelRatio;
var onHoverOnEventFactory2 = (controller) => {
  return (event, detail) => {
    const point = controller.viewport.graph.getPointByID(detail.id);
    const pxPoint = mod_exports13.coordinate.Coordinate.worldPointToRelativePixelCoordinate(controller, point, {
      x: mod_exports13.coordinate.PixelCoordXPosition.RIGHT,
      y: mod_exports13.coordinate.PixelCoordYPosition.TOP
    });
    const tooltipEl = document.querySelector(".tooltiptext");
    tooltipEl.style.left = `${pxPoint[0] / WINDOW_DEVICE_PIXEL_RATIO3}px`;
    tooltipEl.style.bottom = `${pxPoint[1] / WINDOW_DEVICE_PIXEL_RATIO3}px`;
    tooltipEl.style.visibility = "visible";
  };
};
var onHoverOffEvent = () => {
  const tooltipEl = document.querySelector(".tooltiptext");
  tooltipEl.style.visibility = "hidden";
};
async function tooltips(container) {
  j(
    x`
        <style>
            .wrapper {
                display: grid;
                grid-template-columns: 200px minmax(0, 1fr) 150px;
                grid-template-rows: 4rem minmax(0, 1fr) 5rem;
                height: 100%;
                width: 100%;
            }
            .grafer_container {
                width: 100%;
                height: 100%;
            }
            header {
                grid-column: 1 / -1;
            }
            nav {
                grid-column: 1;
            }
            main {
                grid-column: 2 / -2;
                position: relative;
            }
            aside {
                grid-column: -2;
            }
            footer {
                grid-column: 1 / -1;
            }

            /* Styling */
            header, nav, aside, main, footer {
                border: 3px solid;
            }
            header {
                border-color: hsl(45deg 100% 50%);
                background-color: hsl(45deg 100% 50% / 0.2);
            }
            main {
                border-color: hsl(220deg 100% 50%);
                background-color: hsl(220deg 100% 50% / 0.2);
            }
            nav {
                border-color: hsl(170deg 100% 35%);
                background-color: hsl(170deg 100% 35% / 0.2);
            }
            aside {
                border-color: hsl(300deg 100% 45%);
                background-color: hsl(300deg 100% 45% / 0.2);
            }
            footer {
                border-color: hsl(350deg 100% 60%);
                background-color: hsl(350deg 100% 60% / 0.2);
            }
            /* Tooltip text */
            .tooltiptext {
                visibility: hidden;
                width: 120px;
                background-color: hsl(0, 0.0%, 92.5%);
                color: black;
                text-align: center;
                padding: 5px 0;
                border-radius: 6px;
                border: 3px solid hsl(224, 6.4%, 66.1%);

                /* Position the tooltip text - see examples below! */
                position: absolute;
                x: 10px;
                y: 10px;
                z-index: 1;
            }
        </style>

        <div class="wrapper">
            <header></header>
            <nav></nav>
            <main>
                <canvas class="grafer_container"></canvas>
                <mouse-interactions></mouse-interactions>
                <span class="tooltiptext">Tooltip text</span>
            </main>
            <aside></aside>
            <footer></footer>
        </div>
        `,
    container
  );
  const canvas = document.querySelector(".grafer_container");
  const nodes = {
    data: [
      { id: 0, x: -8.6, y: 5 },
      { id: 1, x: 8.6, y: 5 },
      { id: 2, x: 0, y: -10 },
      { id: 3, x: 0, y: 0, radius: 2.5 }
    ]
  };
  const edges = {
    data: [
      { source: "left", target: "right" },
      { source: "right", target: "bottom" },
      { source: "bottom", target: "left" },
      { source: "center", target: "left" },
      { source: "center", target: "right" },
      { source: "center", target: "bottom" }
    ]
  };
  const layers = [
    { name: "Awesomeness", nodes, edges }
  ];
  const controller = new GraferController(canvas, { layers });
  controller.on(mod_exports13.picking.PickingManager.events.hoverOn, onHoverOnEventFactory2(controller));
  controller.on(mod_exports13.picking.PickingManager.events.hoverOff, onHoverOffEvent);
}

// examples/src/UX/animation.ts
function animate(controller, manager, point) {
  const diameter = point[3] * 2;
  const scale6 = Math.min(controller.viewport.size[0] / diameter, controller.viewport.size[1] / diameter);
  const translation = controller.viewport.graph.translation.slice();
  const endTranslation = [-point[0] * scale6, -point[1] * scale6, translation[2]];
  const args = [
    controller.viewport.graph,
    "translation",
    2e3,
    translation,
    endTranslation,
    () => controller.render(),
    mod_exports13.animation.EaseOutCubic
  ];
  manager.animate(...args);
  args[5] = null;
  args[1] = "scale";
  args[3] = controller.viewport.graph.scale;
  args[4] = scale6;
  manager.animate(...args);
}
async function animation(container) {
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  const nodes = {
    data: [
      { id: 0, x: -8.6, y: 5 },
      { id: 1, x: 8.6, y: 5 },
      { id: 2, x: 0, y: -10 },
      { id: 3, x: 0, y: 0 }
    ]
  };
  const edges = {
    data: [
      { source: "left", target: "right" },
      { source: "right", target: "bottom" },
      { source: "bottom", target: "left" },
      { source: "center", target: "left" },
      { source: "center", target: "right" },
      { source: "center", target: "bottom" }
    ]
  };
  const layers = [
    { name: "Awesomeness", nodes, edges }
  ];
  const animationManager = new mod_exports13.animation.AnimationManager();
  const controller = new GraferController(canvas, { layers });
  controller.on(mod_exports13.picking.PickingManager.events.click, (event, detail) => {
    const point = controller.viewport.graph.getPointByID(detail.id);
    animate(controller, animationManager, point);
  });
}

// examples/src/UX/drag.ts
async function drag(container) {
  j(x`<canvas class="grafer_container"></canvas><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  let hoveredNodeIndex = 0;
  let selectedNodeIndex = 0;
  const points2 = {
    data: [
      { id: "left", x: -8.6, y: 5 },
      { id: "right", x: 8.6, y: 5 },
      { id: "bottom", x: 0, y: -10 },
      { id: "center", x: 0, y: 0 }
    ]
  };
  const nodes = {
    data: [
      { point: "left" },
      { point: "right" },
      { point: "bottom" },
      { point: "center" }
    ]
  };
  const edges = {
    data: [
      { source: "left", target: "right" },
      { source: "right", target: "bottom" },
      { source: "bottom", target: "left" },
      { source: "center", target: "left" },
      { source: "center", target: "right" },
      { source: "center", target: "bottom" }
    ]
  };
  const layers = [
    { name: "Awesomeness", nodes, edges }
  ];
  const controller = new GraferController(canvas, { points: points2, layers });
  controller.on(mod_exports13.picking.PickingManager.events.hoverOn, onHoverEvent);
  controller.on(mod_exports13.picking.PickingManager.events.hoverOff, onHoverOffEvent2);
  function onHoverEvent(_2, detail) {
    if (detail.type === "node") {
      hoveredNodeIndex = detail.id;
      document.addEventListener("mousedown", mousedownEvent);
    }
  }
  function onHoverOffEvent2() {
    document.removeEventListener("mousedown", mousedownEvent);
  }
  function mousemoveEvent(e5) {
    const rect = e5.target.getBoundingClientRect();
    const x2 = e5.clientX - rect.left;
    const y3 = rect.height - e5.clientY + rect.top;
    const newPointCoords = mod_exports13.coordinate.Coordinate.relativePixelCoordinateToWorldPoint(
      controller,
      [x2 * devicePixelRatio, y3 * devicePixelRatio]
    );
    const point = controller.viewport.graph.getPointByIndex(selectedNodeIndex);
    controller.viewport.graph.setPointByIndex(
      selectedNodeIndex,
      {
        x: newPointCoords[0],
        y: newPointCoords[1],
        z: 0,
        radius: point[3]
      }
    );
    controller.viewport.graph.update();
    controller.render();
  }
  function mousedownEvent() {
    document.addEventListener("mouseup", mouseupEvent);
    canvas.addEventListener("mousemove", mousemoveEvent);
    controller.interactionModules.translate.enabled = false;
    selectedNodeIndex = hoveredNodeIndex;
  }
  function mouseupEvent() {
    document.removeEventListener("mouseup", mouseupEvent);
    canvas.removeEventListener("mousemove", mousemoveEvent);
    controller.interactionModules.translate.enabled = true;
  }
  document.addEventListener("mousedown", mousedownEvent);
  document.addEventListener("mouseup", mouseupEvent);
}

// examples/src/quickstart/mod.ts
var mod_exports21 = {};
__export(mod_exports21, {
  quickstart1: () => quickstart1,
  quickstart2: () => quickstart2,
  quickstart3: () => quickstart3,
  quickstart4: () => quickstart4
});

// examples/src/quickstart/nodes.json
var nodes_default = [
  {
    name: "IAD",
    x: 56.96899837777778,
    y: -26.475494338172208,
    departing_flights: 48132,
    arriving_flights: 48053,
    total_flights: 96185
  },
  {
    name: "SEA",
    x: 32.05055660671667,
    y: -19.97793911240299,
    departing_flights: 53180,
    arriving_flights: 53105,
    total_flights: 106285
  },
  {
    name: "ORD",
    x: 51.16399976666667,
    y: -24.259402860653402,
    departing_flights: 158496,
    arriving_flights: 160054,
    total_flights: 318550
  },
  {
    name: "TUP",
    x: 50.68339029947917,
    y: -29.71375283992582,
    departing_flights: 259,
    arriving_flights: 307,
    total_flights: 566
  },
  {
    name: "SFO",
    x: 32.01388888888889,
    y: -27.413648060422037,
    departing_flights: 57206,
    arriving_flights: 57187,
    total_flights: 114393
  },
  {
    name: "IAH",
    x: 47.03255547417533,
    y: -32.52504912115283,
    departing_flights: 81249,
    arriving_flights: 83960,
    total_flights: 165209
  },
  {
    name: "MIA",
    x: 55.39410909016928,
    y: -35.16037906090966,
    departing_flights: 48737,
    arriving_flights: 47563,
    total_flights: 96300
  },
  {
    name: "GJT",
    x: 39.707221985,
    y: -26.348260450417,
    departing_flights: 1385,
    arriving_flights: 1854,
    total_flights: 3239
  },
  {
    name: "PWM",
    x: 60.93927595555556,
    y: -22.996379028850374,
    departing_flights: 7836,
    arriving_flights: 7468,
    total_flights: 15304
  },
  {
    name: "TUS",
    x: 38.36611005995,
    y: -31.14256423772302,
    departing_flights: 11249,
    arriving_flights: 10922,
    total_flights: 22171
  }
];

// examples/src/quickstart/edges.json
var edges_default = [
  {
    name: "IAD_to_SEA",
    departure_airport: "IAD",
    arrival_airport: "SEA",
    num_flights: 758
  },
  {
    name: "IAD_to_ORD",
    departure_airport: "IAD",
    arrival_airport: "ORD",
    num_flights: 2036
  },
  {
    name: "IAD_to_TUP",
    departure_airport: "IAD",
    arrival_airport: "TUP",
    num_flights: 0
  },
  {
    name: "IAD_to_SFO",
    departure_airport: "IAD",
    arrival_airport: "SFO",
    num_flights: 1458
  },
  {
    name: "IAD_to_IAH",
    departure_airport: "IAD",
    arrival_airport: "IAH",
    num_flights: 781
  },
  {
    name: "IAD_to_MIA",
    departure_airport: "IAD",
    arrival_airport: "MIA",
    num_flights: 1265
  },
  {
    name: "IAD_to_GJT",
    departure_airport: "IAD",
    arrival_airport: "GJT",
    num_flights: 6
  },
  {
    name: "IAD_to_PWM",
    departure_airport: "IAD",
    arrival_airport: "PWM",
    num_flights: 341
  },
  {
    name: "IAD_to_TUS",
    departure_airport: "IAD",
    arrival_airport: "TUS",
    num_flights: 47
  },
  {
    name: "SEA_to_IAD",
    departure_airport: "SEA",
    arrival_airport: "IAD",
    num_flights: 758
  },
  {
    name: "SEA_to_ORD",
    departure_airport: "SEA",
    arrival_airport: "ORD",
    num_flights: 2044
  },
  {
    name: "SEA_to_TUP",
    departure_airport: "SEA",
    arrival_airport: "TUP",
    num_flights: 0
  },
  {
    name: "SEA_to_SFO",
    departure_airport: "SEA",
    arrival_airport: "SFO",
    num_flights: 2712
  },
  {
    name: "SEA_to_IAH",
    departure_airport: "SEA",
    arrival_airport: "IAH",
    num_flights: 801
  },
  {
    name: "SEA_to_MIA",
    departure_airport: "SEA",
    arrival_airport: "MIA",
    num_flights: 314
  },
  {
    name: "SEA_to_GJT",
    departure_airport: "SEA",
    arrival_airport: "GJT",
    num_flights: 12
  },
  {
    name: "SEA_to_PWM",
    departure_airport: "SEA",
    arrival_airport: "PWM",
    num_flights: 1
  },
  {
    name: "SEA_to_TUS",
    departure_airport: "SEA",
    arrival_airport: "TUS",
    num_flights: 284
  },
  {
    name: "ORD_to_IAD",
    departure_airport: "ORD",
    arrival_airport: "IAD",
    num_flights: 2159
  },
  {
    name: "ORD_to_SEA",
    departure_airport: "ORD",
    arrival_airport: "SEA",
    num_flights: 2090
  },
  {
    name: "ORD_to_TUP",
    departure_airport: "ORD",
    arrival_airport: "TUP",
    num_flights: 1
  },
  {
    name: "ORD_to_SFO",
    departure_airport: "ORD",
    arrival_airport: "SFO",
    num_flights: 3152
  },
  {
    name: "ORD_to_IAH",
    departure_airport: "ORD",
    arrival_airport: "IAH",
    num_flights: 3101
  },
  {
    name: "ORD_to_MIA",
    departure_airport: "ORD",
    arrival_airport: "MIA",
    num_flights: 2364
  },
  {
    name: "ORD_to_GJT",
    departure_airport: "ORD",
    arrival_airport: "GJT",
    num_flights: 36
  },
  {
    name: "ORD_to_PWM",
    departure_airport: "ORD",
    arrival_airport: "PWM",
    num_flights: 622
  },
  {
    name: "ORD_to_TUS",
    departure_airport: "ORD",
    arrival_airport: "TUS",
    num_flights: 419
  },
  {
    name: "TUP_to_IAD",
    departure_airport: "TUP",
    arrival_airport: "IAD",
    num_flights: 0
  },
  {
    name: "TUP_to_SEA",
    departure_airport: "TUP",
    arrival_airport: "SEA",
    num_flights: 0
  },
  {
    name: "TUP_to_ORD",
    departure_airport: "TUP",
    arrival_airport: "ORD",
    num_flights: 0
  },
  {
    name: "TUP_to_SFO",
    departure_airport: "TUP",
    arrival_airport: "SFO",
    num_flights: 0
  },
  {
    name: "TUP_to_IAH",
    departure_airport: "TUP",
    arrival_airport: "IAH",
    num_flights: 0
  },
  {
    name: "TUP_to_MIA",
    departure_airport: "TUP",
    arrival_airport: "MIA",
    num_flights: 3
  },
  {
    name: "TUP_to_GJT",
    departure_airport: "TUP",
    arrival_airport: "GJT",
    num_flights: 0
  },
  {
    name: "TUP_to_PWM",
    departure_airport: "TUP",
    arrival_airport: "PWM",
    num_flights: 0
  },
  {
    name: "TUP_to_TUS",
    departure_airport: "TUP",
    arrival_airport: "TUS",
    num_flights: 0
  },
  {
    name: "SFO_to_IAD",
    departure_airport: "SFO",
    arrival_airport: "IAD",
    num_flights: 1487
  },
  {
    name: "SFO_to_SEA",
    departure_airport: "SFO",
    arrival_airport: "SEA",
    num_flights: 2657
  },
  {
    name: "SFO_to_ORD",
    departure_airport: "SFO",
    arrival_airport: "ORD",
    num_flights: 2994
  },
  {
    name: "SFO_to_TUP",
    departure_airport: "SFO",
    arrival_airport: "TUP",
    num_flights: 0
  },
  {
    name: "SFO_to_IAH",
    departure_airport: "SFO",
    arrival_airport: "IAH",
    num_flights: 1505
  },
  {
    name: "SFO_to_MIA",
    departure_airport: "SFO",
    arrival_airport: "MIA",
    num_flights: 757
  },
  {
    name: "SFO_to_GJT",
    departure_airport: "SFO",
    arrival_airport: "GJT",
    num_flights: 22
  },
  {
    name: "SFO_to_PWM",
    departure_airport: "SFO",
    arrival_airport: "PWM",
    num_flights: 0
  },
  {
    name: "SFO_to_TUS",
    departure_airport: "SFO",
    arrival_airport: "TUS",
    num_flights: 119
  },
  {
    name: "IAH_to_IAD",
    departure_airport: "IAH",
    arrival_airport: "IAD",
    num_flights: 849
  },
  {
    name: "IAH_to_SEA",
    departure_airport: "IAH",
    arrival_airport: "SEA",
    num_flights: 793
  },
  {
    name: "IAH_to_ORD",
    departure_airport: "IAH",
    arrival_airport: "ORD",
    num_flights: 2975
  },
  {
    name: "IAH_to_TUP",
    departure_airport: "IAH",
    arrival_airport: "TUP",
    num_flights: 0
  },
  {
    name: "IAH_to_SFO",
    departure_airport: "IAH",
    arrival_airport: "SFO",
    num_flights: 1574
  },
  {
    name: "IAH_to_MIA",
    departure_airport: "IAH",
    arrival_airport: "MIA",
    num_flights: 1524
  },
  {
    name: "IAH_to_GJT",
    departure_airport: "IAH",
    arrival_airport: "GJT",
    num_flights: 31
  },
  {
    name: "IAH_to_PWM",
    departure_airport: "IAH",
    arrival_airport: "PWM",
    num_flights: 4
  },
  {
    name: "IAH_to_TUS",
    departure_airport: "IAH",
    arrival_airport: "TUS",
    num_flights: 780
  },
  {
    name: "MIA_to_IAD",
    departure_airport: "MIA",
    arrival_airport: "IAD",
    num_flights: 1412
  },
  {
    name: "MIA_to_SEA",
    departure_airport: "MIA",
    arrival_airport: "SEA",
    num_flights: 366
  },
  {
    name: "MIA_to_ORD",
    departure_airport: "MIA",
    arrival_airport: "ORD",
    num_flights: 2308
  },
  {
    name: "MIA_to_TUP",
    departure_airport: "MIA",
    arrival_airport: "TUP",
    num_flights: 2
  },
  {
    name: "MIA_to_SFO",
    departure_airport: "MIA",
    arrival_airport: "SFO",
    num_flights: 797
  },
  {
    name: "MIA_to_IAH",
    departure_airport: "MIA",
    arrival_airport: "IAH",
    num_flights: 1643
  },
  {
    name: "MIA_to_GJT",
    departure_airport: "MIA",
    arrival_airport: "GJT",
    num_flights: 1
  },
  {
    name: "MIA_to_PWM",
    departure_airport: "MIA",
    arrival_airport: "PWM",
    num_flights: 2
  },
  {
    name: "MIA_to_TUS",
    departure_airport: "MIA",
    arrival_airport: "TUS",
    num_flights: 25
  },
  {
    name: "GJT_to_IAD",
    departure_airport: "GJT",
    arrival_airport: "IAD",
    num_flights: 1
  },
  {
    name: "GJT_to_SEA",
    departure_airport: "GJT",
    arrival_airport: "SEA",
    num_flights: 2
  },
  {
    name: "GJT_to_ORD",
    departure_airport: "GJT",
    arrival_airport: "ORD",
    num_flights: 8
  },
  {
    name: "GJT_to_TUP",
    departure_airport: "GJT",
    arrival_airport: "TUP",
    num_flights: 0
  },
  {
    name: "GJT_to_SFO",
    departure_airport: "GJT",
    arrival_airport: "SFO",
    num_flights: 13
  },
  {
    name: "GJT_to_IAH",
    departure_airport: "GJT",
    arrival_airport: "IAH",
    num_flights: 6
  },
  {
    name: "GJT_to_MIA",
    departure_airport: "GJT",
    arrival_airport: "MIA",
    num_flights: 0
  },
  {
    name: "GJT_to_PWM",
    departure_airport: "GJT",
    arrival_airport: "PWM",
    num_flights: 0
  },
  {
    name: "GJT_to_TUS",
    departure_airport: "GJT",
    arrival_airport: "TUS",
    num_flights: 4
  },
  {
    name: "PWM_to_IAD",
    departure_airport: "PWM",
    arrival_airport: "IAD",
    num_flights: 356
  },
  {
    name: "PWM_to_SEA",
    departure_airport: "PWM",
    arrival_airport: "SEA",
    num_flights: 0
  },
  {
    name: "PWM_to_ORD",
    departure_airport: "PWM",
    arrival_airport: "ORD",
    num_flights: 628
  },
  {
    name: "PWM_to_TUP",
    departure_airport: "PWM",
    arrival_airport: "TUP",
    num_flights: 0
  },
  {
    name: "PWM_to_SFO",
    departure_airport: "PWM",
    arrival_airport: "SFO",
    num_flights: 0
  },
  {
    name: "PWM_to_IAH",
    departure_airport: "PWM",
    arrival_airport: "IAH",
    num_flights: 2
  },
  {
    name: "PWM_to_MIA",
    departure_airport: "PWM",
    arrival_airport: "MIA",
    num_flights: 1
  },
  {
    name: "PWM_to_GJT",
    departure_airport: "PWM",
    arrival_airport: "GJT",
    num_flights: 0
  },
  {
    name: "PWM_to_TUS",
    departure_airport: "PWM",
    arrival_airport: "TUS",
    num_flights: 0
  },
  {
    name: "TUS_to_IAD",
    departure_airport: "TUS",
    arrival_airport: "IAD",
    num_flights: 42
  },
  {
    name: "TUS_to_SEA",
    departure_airport: "TUS",
    arrival_airport: "SEA",
    num_flights: 273
  },
  {
    name: "TUS_to_ORD",
    departure_airport: "TUS",
    arrival_airport: "ORD",
    num_flights: 396
  },
  {
    name: "TUS_to_TUP",
    departure_airport: "TUS",
    arrival_airport: "TUP",
    num_flights: 0
  },
  {
    name: "TUS_to_SFO",
    departure_airport: "TUS",
    arrival_airport: "SFO",
    num_flights: 123
  },
  {
    name: "TUS_to_IAH",
    departure_airport: "TUS",
    arrival_airport: "IAH",
    num_flights: 760
  },
  {
    name: "TUS_to_MIA",
    departure_airport: "TUS",
    arrival_airport: "MIA",
    num_flights: 17
  },
  {
    name: "TUS_to_GJT",
    departure_airport: "TUS",
    arrival_airport: "GJT",
    num_flights: 12
  },
  {
    name: "TUS_to_PWM",
    departure_airport: "TUS",
    arrival_airport: "PWM",
    num_flights: 0
  }
];

// examples/src/quickstart/quickstart-1.ts
async function quickstart1(container) {
  j(x`<canvas class="grafer_container"></canvas>`, container);
  const canvas = document.querySelector(".grafer_container");
  const nodes = {
    data: nodes_default
  };
  const edges = {
    data: edges_default,
    mappings: {
      source: (datum) => nodes_default.findIndex((node) => node.name === datum.departure_airport),
      target: (datum) => nodes_default.findIndex((node) => node.name === datum.arrival_airport)
    }
  };
  const labels = {
    data: nodes_default,
    mappings: {
      label: (datum) => datum.name
    },
    options: {
      labelPlacement: mod_exports7.labels.PointLabelPlacement.TOP
    }
  };
  const layers = [
    { nodes, edges, labels }
  ];
  const controller = new GraferController(canvas, { layers });
  new mod_exports13.DebugMenu(controller.viewport);
}

// examples/src/quickstart/quickstart-2.ts
async function quickstart2(container) {
  j(x`<canvas class="grafer_container"></canvas>`, container);
  const canvas = document.querySelector(".grafer_container");
  const points2 = {
    data: nodes_default,
    mappings: {
      id: (datum) => datum.name
    }
  };
  const nodes = {
    data: nodes_default,
    mappings: {
      point: (datum) => datum.name
    }
  };
  const edges = {
    data: edges_default,
    mappings: {
      source: (datum) => datum.departure_airport,
      target: (datum) => datum.arrival_airport
    }
  };
  const labels = {
    data: nodes_default,
    mappings: {
      point: (datum) => datum.name,
      label: (datum) => datum.name
    },
    options: {
      labelPlacement: mod_exports7.labels.PointLabelPlacement.TOP
    }
  };
  const layers = [
    { nodes, edges, labels }
  ];
  const controller = new GraferController(canvas, { points: points2, layers });
  new mod_exports13.DebugMenu(controller.viewport);
}

// examples/src/quickstart/quickstart-3.ts
async function quickstart3(container) {
  j(x`<canvas class="grafer_container"></canvas>`, container);
  const canvas = document.querySelector(".grafer_container");
  const points2 = {
    data: nodes_default,
    mappings: {
      id: (datum) => datum.name,
      radius: (datum) => datum.total_flights && 0.25 * Math.log10(datum.total_flights) + 0.25
    }
  };
  const nodes = {
    type: "Ring",
    data: nodes_default,
    mappings: {
      point: (datum) => datum.name
    },
    options: {
      alpha: 0.3
    }
  };
  const colors2 = [
    "#ffffff",
    "#3300cc",
    "#660099",
    "#990066",
    "#cc0033"
  ];
  const edges = {
    data: edges_default,
    mappings: {
      source: (datum) => datum.departure_airport,
      sourceColor: (datum) => (datum.num_flights && Math.floor(Math.log10(datum.num_flights))) + 1,
      target: (datum) => datum.arrival_airport,
      targetColor: (datum) => (datum.num_flights && Math.floor(Math.log10(datum.num_flights))) + 1
    },
    options: {
      alpha: 0.5,
      lineWidth: 3
    }
  };
  const labels = {
    data: nodes_default,
    mappings: {
      point: (datum) => datum.name,
      label: (datum) => datum.name,
      fontSize: () => 14
    },
    options: {
      font: "Arial",
      halo: 0.2,
      labelPlacement: mod_exports7.labels.PointLabelPlacement.TOP
    }
  };
  const layers = [
    { nodes, edges, labels }
  ];
  const controller = new GraferController(canvas, { colors: colors2, points: points2, layers });
  new mod_exports13.DebugMenu(controller.viewport);
}

// examples/src/quickstart/quickstart-4.ts
async function quickstart4(container) {
  j(x`<canvas class="grafer_container"></canvas>`, container);
  const canvas = document.querySelector(".grafer_container");
  const points2 = {
    data: nodes_default,
    mappings: {
      id: (datum) => datum.name,
      radius: (datum) => datum.total_flights && 0.25 * Math.log10(datum.total_flights) + 0.25
    }
  };
  const nodes = {
    type: "Ring",
    data: nodes_default,
    mappings: {
      point: (datum) => datum.name
    },
    options: {
      alpha: 0.3
    }
  };
  const colors2 = [
    "#ffffff",
    "#3300cc",
    "#660099",
    "#990066",
    "#cc0033"
  ];
  const edges = {
    data: edges_default,
    mappings: {
      source: (datum) => datum.departure_airport,
      sourceColor: (datum) => (datum.num_flights && Math.floor(Math.log10(datum.num_flights))) + 1,
      target: (datum) => datum.arrival_airport,
      targetColor: (datum) => (datum.num_flights && Math.floor(Math.log10(datum.num_flights))) + 1
    },
    options: {
      alpha: 0.5,
      lineWidth: 3
    }
  };
  const labels = {
    data: nodes_default,
    mappings: {
      point: (datum) => datum.name,
      label: (datum) => datum.name,
      fontSize: () => 14
    },
    options: {
      font: "Arial",
      halo: 0.2,
      labelPlacement: mod_exports7.labels.PointLabelPlacement.TOP
    }
  };
  const layers = [
    { nodes, edges, labels }
  ];
  const controller = new GraferController(canvas, { colors: colors2, points: points2, layers });
  new mod_exports13.DebugMenu(controller.viewport);
  controller.on(mod_exports13.picking.PickingManager.events.hoverOn, () => {
    controller.viewport.graph.layers[0].nodes.fade = 0.7;
    controller.viewport.graph.layers[0].edges.fade = 0.7;
    controller.viewport.graph.layers[0].labels.fade = 0.7;
    controller.render();
  });
  controller.on(mod_exports13.picking.PickingManager.events.hoverOff, () => {
    controller.viewport.graph.layers[0].nodes.fade = 0;
    controller.viewport.graph.layers[0].edges.fade = 0;
    controller.viewport.graph.layers[0].labels.fade = 0;
    controller.render();
  });
}

// examples/src/benchmarks/mod.ts
var mod_exports22 = {};
__export(mod_exports22, {
  benchmarkEdge: () => benchmarkEdge,
  benchmarkLabel: () => benchmarkLabel,
  benchmarkNode: () => benchmarkNode
});

// examples/src/benchmarks/helpers.ts
function createNodePoints14(count, radius = 10) {
  const PI2 = Math.PI * 2;
  const degStep = PI2 / count;
  const result = [];
  for (let angle3 = 0, i4 = 0; angle3 < PI2; angle3 += degStep, ++i4) {
    const pX = Math.cos(angle3) * radius;
    const pY = Math.sin(angle3) * radius;
    result.push({
      id: `p${i4}-${radius}`,
      x: pX,
      y: pY,
      radius: 2,
      label: `The quick brown fox jumped over the lazy dog`,
      color: Math.round(Math.random() * 4),
      fontSize: 16
    });
  }
  return result;
}
function log(logText) {
  const logContainerEl = document.getElementsByClassName("log_output")[0];
  if (logContainerEl) {
    const logLineEl = document.createElement("p");
    logLineEl.innerHTML = logText;
    logContainerEl.append(logLineEl);
    logContainerEl.scrollTo(0, logContainerEl.scrollHeight);
  }
}

// examples/src/benchmarks/benchmarkNode.ts
var numNodes = 3e6;
async function benchmarkNode(container) {
  const startingNodes = 2;
  const addedNodesPerRing = 5;
  let data = [];
  let nodesToCreate = numNodes;
  let nodesPerRing = startingNodes;
  while (nodesToCreate > 0) {
    data = data.concat(
      createNodePoints14(
        nodesToCreate - nodesPerRing >= 0 ? nodesPerRing : nodesToCreate,
        nodesPerRing
      )
    );
    nodesToCreate -= nodesPerRing;
    nodesPerRing += addedNodesPerRing;
  }
  const nodes = {
    type: "Circle",
    data
  };
  const layers = [
    { nodes }
  ];
  const colors2 = [
    "#bf616a",
    "#d08770",
    "#ebcb8b",
    "#a3be8c",
    "#b48ead"
  ];
  j(x`<canvas class="grafer_container"></canvas><div class="log_output"></div><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  const controller = new GraferController(canvas, { colors: colors2, layers });
  const gl = document.createElement("canvas").getContext("webgl");
  const debugInfo = gl.getExtension("WEBGL_debug_renderer_info");
  log(gl.getParameter(debugInfo.UNMASKED_VENDOR_WEBGL));
  log(gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL));
  const benchmarkDelay = 5 * 1e3;
  const benchmarkLength = benchmarkDelay + 15 * 1e3;
  let benchmark = true;
  let numFrames = 0;
  const frametimeList = [];
  let frametimeOld = performance.now();
  function step() {
    numFrames++;
    const frametimeNew = performance.now();
    controller.render();
    frametimeList.push(frametimeNew - frametimeOld);
    frametimeOld = frametimeNew;
    if (benchmark) {
      window.requestAnimationFrame(step);
    }
  }
  setTimeout(() => {
    log(`Benchmark Start: ${numNodes} Nodes`);
    window.requestAnimationFrame(step);
  }, benchmarkDelay);
  setTimeout(() => {
    benchmark = false;
    const frametimeAvg = frametimeList.reduce((acc, val) => val + acc) / numFrames;
    log("Benchmark End");
    log(`Frames: ${numFrames}`);
    log(`Avg. time between frames: ${frametimeAvg}`);
    log(`Avg. FPS: ${1 / (frametimeAvg / 1e3)}`);
  }, benchmarkLength);
}

// examples/src/benchmarks/benchmarkEdge.ts
var numNodes2 = 3e6;
async function benchmarkEdge(container) {
  const startingNodes = 2;
  const addedNodesPerRing = 5;
  let data = [];
  let nodesToCreate = numNodes2;
  let nodesPerRing = startingNodes;
  while (nodesToCreate > 0) {
    data = data.concat(
      createNodePoints14(
        nodesToCreate - nodesPerRing >= 0 ? nodesPerRing : nodesToCreate,
        nodesPerRing
      )
    );
    nodesToCreate -= nodesPerRing;
    nodesPerRing += addedNodesPerRing;
  }
  const edges = {
    data: []
  };
  for (let i4 = 0; i4 < data.length; i4++) {
    edges.data.push({
      source: data[i4 ? i4 - 1 : data.length - 1].id,
      sourceColor: Math.round(Math.random() * 4),
      target: data[i4].id,
      targetColor: Math.round(Math.random() * 4)
    });
  }
  const points2 = {
    data
  };
  const layers = [
    { edges }
  ];
  const colors2 = [
    "#bf616a",
    "#d08770",
    "#ebcb8b",
    "#a3be8c",
    "#b48ead"
  ];
  j(x`<canvas class="grafer_container"></canvas><div class="log_output"></div><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  const controller = new GraferController(canvas, { points: points2, colors: colors2, layers });
  const gl = document.createElement("canvas").getContext("webgl");
  const debugInfo = gl.getExtension("WEBGL_debug_renderer_info");
  log(gl.getParameter(debugInfo.UNMASKED_VENDOR_WEBGL));
  log(gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL));
  const benchmarkDelay = 5 * 1e3;
  const benchmarkLength = benchmarkDelay + 15 * 1e3;
  let benchmark = true;
  let numFrames = 0;
  const frametimeList = [];
  let frametimeOld = performance.now();
  function step() {
    numFrames++;
    const frametimeNew = performance.now();
    controller.render();
    frametimeList.push(frametimeNew - frametimeOld);
    frametimeOld = frametimeNew;
    if (benchmark) {
      window.requestAnimationFrame(step);
    }
  }
  setTimeout(() => {
    log(`Benchmark Start: ${numNodes2} Edges`);
    window.requestAnimationFrame(step);
  }, benchmarkDelay);
  setTimeout(() => {
    benchmark = false;
    const frametimeAvg = frametimeList.reduce((acc, val) => val + acc) / numFrames;
    log("Benchmark End");
    log(`Frames: ${numFrames}`);
    log(`Avg. time between frames: ${frametimeAvg}`);
    log(`Avg. FPS: ${1 / (frametimeAvg / 1e3)}`);
  }, benchmarkLength);
}

// examples/src/benchmarks/benchmarkLabel.ts
var numNodes3 = 1e4;
async function benchmarkLabel(container) {
  const startingNodes = 2;
  const addedNodesPerRing = 5;
  let data = [];
  let nodesToCreate = numNodes3;
  let nodesPerRing = startingNodes;
  while (nodesToCreate > 0) {
    data = data.concat(
      createNodePoints14(
        nodesToCreate - nodesPerRing >= 0 ? nodesPerRing : nodesToCreate,
        nodesPerRing
      )
    );
    nodesToCreate -= nodesPerRing;
    nodesPerRing += addedNodesPerRing;
  }
  const labels = {
    type: "PointLabel",
    data,
    options: {
      visibilityThreshold: 1,
      labelPlacement: 1,
      renderBackground: true,
      padding: 6
    }
  };
  const layers = [
    { labels }
  ];
  const colors2 = [
    "#bf616a",
    "#d08770",
    "#ebcb8b",
    "#a3be8c",
    "#b48ead"
  ];
  j(x`<canvas class="grafer_container"></canvas><div class="log_output"></div><mouse-interactions></mouse-interactions>`, container);
  const canvas = document.querySelector(".grafer_container");
  const controller = new GraferController(canvas, { colors: colors2, layers });
  const gl = document.createElement("canvas").getContext("webgl");
  const debugInfo = gl.getExtension("WEBGL_debug_renderer_info");
  log(gl.getParameter(debugInfo.UNMASKED_VENDOR_WEBGL));
  log(gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL));
  const benchmarkDelay = 5 * 1e3;
  const benchmarkLength = benchmarkDelay + 15 * 1e3;
  let benchmark = true;
  let numFrames = 0;
  const frametimeList = [];
  let frametimeOld = performance.now();
  function step() {
    numFrames++;
    const frametimeNew = performance.now();
    controller.render();
    frametimeList.push(frametimeNew - frametimeOld);
    frametimeOld = frametimeNew;
    if (benchmark) {
      window.requestAnimationFrame(step);
    }
  }
  setTimeout(() => {
    log(`Benchmark Start: ${numNodes3} Labels`);
    window.requestAnimationFrame(step);
  }, benchmarkDelay);
  setTimeout(() => {
    benchmark = false;
    const frametimeAvg = frametimeList.reduce((acc, val) => val + acc) / numFrames;
    log("Benchmark End");
    log(`Frames: ${numFrames}`);
    log(`Avg. time between frames: ${frametimeAvg}`);
    log(`Avg. FPS: ${1 / (frametimeAvg / 1e3)}`);
  }, benchmarkLength);
}

// examples/src/aske/mod.ts
var mod_exports23 = {};
__export(mod_exports23, {
  bundledEdgesLoader: () => bundledEdgesLoader,
  knowledgeViewLoader: () => knowledgeViewLoader
});

// examples/src/aske/bundledEdgesLoader.ts
var import_tweakpane3 = __toESM(require_tweakpane(), 1);
async function parseJSONL2(input, cb) {
  const file = await DataFile.fromLocalSource(input);
  const sizeOf16MB = 16 * 1024 * 1024;
  const byteLength = await file.byteLength;
  const decoder = new TextDecoder();
  const lineBreak = "\n".charCodeAt(0);
  for (let offset = 0; offset <= byteLength; offset += sizeOf16MB) {
    const chunkEnd = Math.min(offset + sizeOf16MB, byteLength);
    const chunk = await file.loadData(offset, chunkEnd);
    const view = new DataView(chunk);
    let start = 0;
    for (let i4 = 0, n5 = chunk.byteLength; i4 < n5; ++i4) {
      if (view.getUint8(i4) === lineBreak || offset + i4 === byteLength) {
        const statementBuffer = new Uint8Array(chunk, start, i4 - start);
        start = i4 + 1;
        const str6 = decoder.decode(statementBuffer);
        const json = JSON.parse(str6);
        cb(json);
      }
    }
    if (start < chunk.byteLength) {
      offset -= chunk.byteLength - start;
    }
  }
}
function createFileInput2(cb) {
  const input = document.createElement("input");
  input.type = "file";
  input.multiple = false;
  input.addEventListener("change", cb);
  return input;
}
function renderMenu2(container, cb) {
  j(x`<div id="menu" class="start_menu"></div>`, container);
  const result = {
    points: "No file selected.",
    pointsFile: null,
    clusters: "No file selected.",
    clustersFile: null,
    clusterEdgesMode: "curved",
    clusterEdges: "No file selected.",
    clusterEdgesFile: null,
    nodes: "No file selected.",
    nodesFile: null,
    nodeEdges: "No file selected.",
    nodeEdgesFile: null
  };
  const menu = new import_tweakpane3.default({
    title: "Grafer Loader",
    container: document.querySelector("#menu")
  });
  const pointsInput = createFileInput2(() => {
    if (pointsInput.files.length) {
      result.pointsFile = pointsInput.files[0];
      result.points = result.pointsFile.name;
    } else {
      result.points = "No file selected.";
      result.pointsFile = null;
    }
  });
  menu.addMonitor(result, "points");
  menu.addButton({ title: "browse..." }).on("click", () => pointsInput.click());
  menu.addSeparator();
  const clustersInput = createFileInput2(() => {
    if (clustersInput.files.length) {
      result.clustersFile = clustersInput.files[0];
      result.clusters = result.clustersFile.name;
    } else {
      result.clusters = "No file selected.";
      result.clustersFile = null;
    }
  });
  menu.addMonitor(result, "clusters");
  menu.addButton({ title: "browse..." }).on("click", () => clustersInput.click());
  menu.addInput(result, "clusterEdgesMode", {
    options: {
      bundle: "bundle",
      straight: "straight",
      curved: "curved"
    }
  });
  const clusterEdgesInput = createFileInput2(() => {
    if (clusterEdgesInput.files.length) {
      result.clusterEdgesFile = clusterEdgesInput.files[0];
      result.clusterEdges = result.clusterEdgesFile.name;
    } else {
      result.clusterEdges = "No file selected.";
      result.clusterEdgesFile = null;
    }
  });
  menu.addMonitor(result, "clusterEdges");
  menu.addButton({ title: "browse..." }).on("click", () => clusterEdgesInput.click());
  menu.addSeparator();
  const nodesInput = createFileInput2(() => {
    if (nodesInput.files.length) {
      result.nodesFile = nodesInput.files[0];
      result.nodes = result.nodesFile.name;
    } else {
      result.nodes = "No file selected.";
      result.nodesFile = null;
    }
  });
  menu.addMonitor(result, "nodes");
  menu.addButton({ title: "browse..." }).on("click", () => nodesInput.click());
  const nodeEdgesInput = createFileInput2(() => {
    if (nodeEdgesInput.files.length) {
      result.nodeEdgesFile = nodeEdgesInput.files[0];
      result.nodeEdges = result.nodeEdgesFile.name;
    } else {
      result.nodeEdges = "No file selected.";
      result.nodeEdgesFile = null;
    }
  });
  menu.addMonitor(result, "nodeEdges");
  menu.addButton({ title: "browse..." }).on("click", () => nodeEdgesInput.click());
  const loadBtn = menu.addButton({ title: "load" });
  loadBtn.on("click", () => {
    cb(result);
  });
}
async function loadGraph(container, info) {
  if (info.pointsFile) {
    j(x`<canvas class="grafer_container"></canvas>`, container);
    const canvas = document.querySelector(".grafer_container");
    const layers = [];
    const points2 = {
      data: []
    };
    await parseJSONL2(info.pointsFile, (json) => {
      points2.data.push(json);
    });
    const clusterBundleEdges = {
      type: "ClusterBundle",
      data: [],
      options: {
        alpha: 0.04,
        nearDepth: 0.9
      }
    };
    const clusterStraightEdges = {
      type: "Straight",
      data: [],
      options: {
        alpha: 0.04,
        nearDepth: 0.9
      },
      mappings: {
        source: (entry) => "sourceCluster" in entry ? entry.sourceCluster : entry.source,
        target: (entry) => "targetCluster" in entry ? entry.targetCluster : entry.target
      }
    };
    const clusterCurvedEdges = {
      type: "CurvedPath",
      data: [],
      options: {
        alpha: 0.04,
        nearDepth: 0.9
      }
    };
    let edges;
    if (info.clusterEdgesMode === "bundle") {
      edges = clusterBundleEdges;
    } else if (info.clusterEdgesMode === "curved") {
      edges = clusterCurvedEdges;
    } else {
      edges = clusterStraightEdges;
    }
    const clusterLayer = {
      name: "Clusters",
      labels: {
        type: "RingLabel",
        data: [],
        mappings: {
          background: () => false,
          fontSize: () => 14,
          padding: () => 0
        },
        options: {
          visibilityThreshold: 160,
          repeatLabel: -1,
          repeatGap: 64
        }
      },
      edges
    };
    layers.push(clusterLayer);
    if (info.clustersFile) {
      const nodes = clusterLayer.labels;
      await parseJSONL2(info.clustersFile, (json) => {
        nodes.data.push(Object.assign({}, json, {
          color: 3
        }));
      });
    }
    if (info.clusterEdgesFile) {
      const edges2 = clusterLayer.edges;
      await parseJSONL2(info.clusterEdgesFile, (json) => {
        edges2.data.push(Object.assign({}, json, {
          sourceColor: 0,
          targetColor: 0
        }));
      });
    }
    const nodeLayer = {
      name: "Nodes",
      nodes: {
        type: "Circle",
        data: []
      },
      edges: {
        data: [],
        options: {
          alpha: 0.55,
          nearDepth: 0.9
        }
      },
      labels: {
        type: "PointLabel",
        data: [],
        mappings: {
          background: () => true,
          fontSize: () => 12,
          padding: () => [8, 5]
        },
        options: {
          visibilityThreshold: 8,
          labelPlacement: mod_exports7.labels.PointLabelPlacement.TOP,
          renderBackground: true
        }
      }
    };
    layers.push(nodeLayer);
    if (info.nodesFile) {
      const nodes = nodeLayer.nodes;
      await parseJSONL2(info.nodesFile, (json) => {
        nodes.data.push(Object.assign({}, json, {
          color: 1
        }));
      });
      nodeLayer.labels.data = nodes.data;
    }
    if (info.nodeEdgesFile) {
      const edges2 = nodeLayer.edges;
      await parseJSONL2(info.nodeEdgesFile, (json) => {
        edges2.data.push(Object.assign({}, json, {
          sourceColor: 2,
          targetColor: 2
        }));
      });
    }
    const colors2 = [
      "#5e81ac",
      "#d08770",
      "#ebcb8b",
      "#81a1c1"
    ];
    const controller = new GraferController(canvas, { points: points2, colors: colors2, layers });
    new mod_exports13.DebugMenu(controller.viewport);
  }
}
async function bundledEdgesLoader(container) {
  renderMenu2(container, (result) => {
    loadGraph(container, result);
  });
}

// examples/src/aske/knowledeViewLoader.ts
var import_tweakpane4 = __toESM(require_tweakpane(), 1);

// examples/src/aske/convertDataToGraferV4.ts
import alphaShape from "https://cdn.skypack.dev/alpha-shape";
async function parseJSONL3(input, cb) {
  const file = await DataFile.fromLocalSource(input);
  const sizeOf16MB = 16 * 1024 * 1024;
  const byteLength = await file.byteLength;
  const decoder = new TextDecoder();
  const lineBreak = "\n".charCodeAt(0);
  for (let offset = 0; offset <= byteLength; offset += sizeOf16MB) {
    const chunkEnd = Math.min(offset + sizeOf16MB, byteLength);
    const chunk = await file.loadData(offset, chunkEnd);
    const view = new DataView(chunk);
    let start = 0;
    for (let i4 = 0, n5 = chunk.byteLength; i4 < n5; ++i4) {
      if (view.getUint8(i4) === lineBreak || offset + i4 === byteLength) {
        const statementBuffer = new Uint8Array(chunk, start, i4 - start);
        start = i4 + 1;
        const str6 = decoder.decode(statementBuffer);
        const json = JSON.parse(str6);
        cb(json);
      }
    }
    if (start < chunk.byteLength) {
      offset -= chunk.byteLength - start;
    }
  }
}
async function convertDataToGraferV4(info) {
  let lineNumber;
  let colorIndex = 0;
  console.log("Loading points...");
  const points2 = /* @__PURE__ */ new Map();
  lineNumber = 0;
  await parseJSONL3(info.nodeLayoutFile, (json) => {
    if (lineNumber++) {
      points2.set(json.node_id, {
        id: json.node_id,
        x: json.coors[0] * info.positionScale,
        y: json.coors[1] * info.positionScale,
        z: 0,
        radius: info.pointRadius
      });
    }
  });
  console.log("Loading groups...");
  const groupLevels = [];
  const centroids = /* @__PURE__ */ new Map();
  const groups = /* @__PURE__ */ new Map();
  lineNumber = 0;
  await parseJSONL3(info.groupsFile, (json) => {
    if (lineNumber++) {
      const level = json.level;
      while (level >= groupLevels.length) {
        groupLevels.push([]);
      }
      groupLevels[level].push(json);
      groups.set(json.id, json);
      centroids.set(json.id, {
        id: json.id,
        point: json.node_id_centroid,
        label: "",
        color: colorIndex++,
        level: json.level,
        top: false
      });
    }
  });
  console.log("Loading node attributes...");
  const noiseNodes = [];
  const nodeLevelMap = /* @__PURE__ */ new Map();
  lineNumber = 0;
  await parseJSONL3(info.nodeAttsFile, (json) => {
    if (lineNumber++) {
      const groupIDs = json.group_ids;
      if (groupIDs) {
        for (const groupID of groupIDs) {
          const group = groups.get(groupID);
          if (!group.computedChildren) {
            group.computedChildren = [];
          }
          group.computedChildren.push(json.node_id);
        }
        nodeLevelMap.set(json.node_id, groups.get(groupIDs[groupIDs.length - 1]).level);
      } else {
        noiseNodes.push(json.node_id);
        nodeLevelMap.set(json.node_id, -1);
      }
    }
  });
  console.log(`Sorting group levels: ${groupLevels.length}`);
  for (let i4 = 0, n5 = groupLevels.length; i4 < n5; ++i4) {
    console.log(`Level ${i4}: ${groupLevels[i4].length}`);
    groupLevels[i4].sort((a3, b3) => b3.computedChildren.length - a3.computedChildren.length);
    const l3 = [];
    for (const group of groupLevels[i4]) {
      l3.push(group.computedChildren.length);
      if (group.computedChildren.length > info.topGroupThreshold) {
        centroids.get(group.id).top = true;
        group.top = true;
      } else {
        group.top = false;
      }
    }
    console.log(l3);
  }
  console.log("Computing color indices...");
  const nodeColors2 = /* @__PURE__ */ new Map();
  const groupColors = /* @__PURE__ */ new Map();
  for (const id of noiseNodes) {
    nodeColors2.set(id, colorIndex);
  }
  for (let i4 = groupLevels.length - 1; i4 >= 0; --i4) {
    for (const group of groupLevels[i4]) {
      let colors2 = groupColors.get(group.id);
      if (!colors2) {
        colors2 = {
          id: group.id,
          level: i4,
          primary: ++colorIndex,
          inherited: /* @__PURE__ */ new Set(),
          top: group.top
        };
        groupColors.set(group.id, colors2);
      }
      for (const nodeID2 of group.computedChildren) {
        if (nodeColors2.has(nodeID2)) {
          colors2.inherited.add(nodeColors2.get(nodeID2));
        } else {
          nodeColors2.set(nodeID2, colors2.primary);
        }
      }
    }
  }
  for (const colors2 of groupColors.values()) {
    colors2.inherited = Array.from(colors2.inherited);
  }
  console.log("Loading nodes...");
  const nodes = [];
  const nodeMap = /* @__PURE__ */ new Map();
  lineNumber = 0;
  await parseJSONL3(info.nodesFile, (json) => {
    if (lineNumber++) {
      nodes.push({
        id: json.id,
        point: json.id,
        color: nodeColors2.get(json.id),
        level: nodeLevelMap.get(json.id)
      });
      nodeMap.set(json.id, json);
    }
  });
  console.log("Computing labels...");
  for (const group of groups.values()) {
    const node = nodeMap.get(group.node_id_centroid);
    const label = node.name.length > info.maxLabelLength + 3 ? `${node.name.substr(0, info.maxLabelLength)}...` : node.name;
    centroids.get(group.id).label = label;
  }
  console.log("Computing alpha shapes...");
  const shapes = [];
  for (let i4 = 0, n5 = groupLevels.length; i4 < n5; ++i4) {
    console.log(`Level ${i4}...`);
    console.log("0%");
    for (let ii = 0, nn = groupLevels[i4].length; ii < nn; ++ii) {
      const group = groupLevels[i4][ii];
      const coors = [];
      for (const node of group.computedChildren) {
        const point = points2.get(node);
        coors.push([point.x / info.positionScale, point.y / info.positionScale]);
      }
      const cells = alphaShape(info.alpha, coors);
      for (const cell of cells) {
        const cellPoints = [];
        for (let i5 = 0, n6 = cell.length; i5 < n6; ++i5) {
          const id = `s_${points2.size}_${n6}`;
          points2.set(id, {
            id,
            x: coors[cell[i5]][0] * info.positionScale,
            y: coors[cell[i5]][1] * info.positionScale,
            z: 0,
            radius: 1
          });
          cellPoints.push(id);
        }
        if (cellPoints.length > 2) {
          throw `Cells with more than 2 points are not supported. ${cell.toString()}`;
        } else {
          shapes.push({
            id: `s_${shapes.length}`,
            source: cellPoints[0],
            target: cellPoints[1],
            sourceColor: nodeColors2.get(group.node_id_centroid),
            targetColor: nodeColors2.get(group.node_id_centroid),
            group: group.node_id_centroid,
            level: i4
          });
        }
      }
      console.log(`${Math.floor((ii + 1) / nn * 100)}%`);
    }
  }
  console.log(shapes);
  console.log(`TOTAL COLORS: ${colorIndex}`);
  return {
    points: [...points2.values()],
    nodes,
    shapes,
    colors: [...groupColors.values()],
    centroids: [...centroids.values()]
  };
}

// examples/src/aske/knowledeViewLoader.ts
var import_chroma_js3 = __toESM(require_chroma(), 1);
function createFileInput3(cb) {
  const input = document.createElement("input");
  input.type = "file";
  input.multiple = false;
  input.addEventListener("change", cb);
  return input;
}
function createFileMenu(menu, result, key2) {
  const input = createFileInput3(() => {
    if (input.files.length) {
      result[`${key2}File`] = input.files[0];
      result[key2] = result[`${key2}File`].name;
    } else {
      result[key2] = "No file selected.";
      result[`${key2}File`] = null;
    }
  });
  menu.addMonitor(result, key2);
  menu.addButton({ title: "browse..." }).on("click", () => input.click());
}
function renderMenu3(container, cb) {
  j(x`<div id="menu" class="start_menu"></div>`, container);
  const result = {
    nodes: "No file selected.",
    nodesFile: null,
    nodeAtts: "No file selected.",
    nodeAttsFile: null,
    nodeLayout: "No file selected.",
    nodeLayoutFile: null,
    groups: "No file selected.",
    groupsFile: null,
    alpha: 18,
    level: 0,
    levelCount: 3,
    maxLabelLength: 25,
    topGroupThreshold: 500,
    pointRadius: 20,
    positionScale: 5e4
  };
  const menu = new import_tweakpane4.default({
    title: "Grafer Loader",
    container: document.querySelector("#menu")
  });
  createFileMenu(menu, result, "nodes");
  menu.addSeparator();
  createFileMenu(menu, result, "nodeAtts");
  menu.addSeparator();
  createFileMenu(menu, result, "nodeLayout");
  menu.addSeparator();
  createFileMenu(menu, result, "groups");
  menu.addSeparator();
  menu.addInput(result, "alpha");
  menu.addSeparator();
  menu.addInput(result, "level");
  menu.addSeparator();
  menu.addInput(result, "levelCount");
  menu.addSeparator();
  menu.addInput(result, "maxLabelLength");
  menu.addSeparator();
  menu.addInput(result, "topGroupThreshold");
  menu.addSeparator();
  menu.addInput(result, "pointRadius");
  menu.addSeparator();
  menu.addInput(result, "positionScale");
  menu.addSeparator();
  const loadBtn = menu.addButton({ title: "load" });
  loadBtn.on("click", () => {
    cb(result);
  });
}
function getBasicLayer(name, nodeType, visibilityThreshold, pixelSizing = true) {
  const data = [];
  return {
    name,
    nodes: {
      type: nodeType,
      data,
      mappings: {
        radius: () => 100
      },
      options: {
        pixelSizing,
        nearDepth: 0.26,
        farDepth: 0.5
      }
    },
    labels: {
      type: "PointLabel",
      data,
      mappings: {
        background: () => true,
        fontSize: () => 12,
        padding: () => [8, 5]
      },
      options: {
        visibilityThreshold,
        labelPlacement: mod_exports7.labels.PointLabelPlacement.CENTER,
        renderBackground: true,
        nearDepth: 0,
        farDepth: 0.25
      }
    }
  };
}
function makeCentroidLayers(layers, data, levels = 4) {
  const centroidLayersTop = [];
  const centroidLayers = [];
  for (let i4 = 0; i4 < levels; ++i4) {
    centroidLayersTop.push(getBasicLayer(`Centroids_top_${i4}`, "Ring", 0.01));
    centroidLayers.push(getBasicLayer(`Centroids_${i4}`, "Ring", 0.1));
  }
  const centroidMap = /* @__PURE__ */ new Map();
  for (const centroid of data) {
    const nodes = centroid.top ? centroidLayersTop[centroid.level].nodes : centroidLayers[centroid.level].nodes;
    nodes.data.push(centroid);
    centroidMap.set(centroid.id, centroid);
  }
  layers.push(...centroidLayersTop, ...centroidLayers);
  return centroidMap;
}
function computeColors(colors2, colorMap, colorLevels, centroidMap, levelNumber = 0) {
  const level = colorLevels.get(levelNumber);
  const topStep = Math.floor(360 / level.top.length);
  const lowStep = Math.floor(topStep / Math.ceil(level.low.length / level.top.length + 1));
  for (let i4 = 0, n5 = level.top.length; i4 < n5; ++i4) {
    const info = level.top[i4];
    const color = import_chroma_js3.default.hsl(topStep * i4, 1, 0.5).hex();
    const centroid = centroidMap.get(info.id);
    colors2[centroid.color] = color;
    colors2[info.primary] = color;
    for (const childID of info.inherited) {
      colors2[childID] = color;
    }
  }
  for (let i4 = 0, n5 = level.low.length; i4 < n5; ++i4) {
    const info = level.low[i4];
    const color = import_chroma_js3.default.hsl(lowStep * (i4 + 1), 1, 0.5).hex();
    const centroid = centroidMap.get(info.id);
    colors2[centroid.color] = color;
    colors2[info.primary] = color;
    for (const childID of info.inherited) {
      colors2[childID] = color;
    }
  }
  const gray = "#a0a0a0";
  for (let i4 = 0, n5 = colors2.length; i4 < n5; ++i4) {
    if (colors2[i4] === null) {
      colors2[i4] = gray;
    }
  }
}
function loadLevelLayers(nodes, shapes) {
  const levelMap = /* @__PURE__ */ new Map();
  for (const node of nodes) {
    if (!levelMap.has(node.level)) {
      levelMap.set(node.level, {
        name: `Level_${node.level === -1 ? "noise" : node.level}`,
        nodes: {
          type: "Circle",
          data: [],
          options: {
            pixelSizing: true
          }
        },
        edges: {
          data: [],
          options: {
            alpha: 0.55,
            nearDepth: 0.9
          }
        }
      });
    }
    levelMap.get(node.level).nodes.data.push(node);
  }
  for (const shape of shapes) {
    if (!levelMap.has(shape.level)) {
      levelMap.set(shape.level, {
        name: `Level_${shape.level === -1 ? "noise" : shape.level}`,
        nodes: {
          type: "Circle",
          data: [],
          options: {
            pixelSizing: true
          }
        },
        edges: {
          data: [],
          options: {
            alpha: 0.55,
            nearDepth: 0.9
          }
        }
      });
    }
    levelMap.get(shape.level).edges.data.push(shape);
  }
  return levelMap.values();
}
async function loadGraph2(container, info) {
  if (!info.nodesFile || !info.nodeAttsFile || !info.nodeLayoutFile || !info.groupsFile) {
    return;
  }
  const data = await convertDataToGraferV4(info);
  j(x`<canvas class="grafer_container"></canvas>`, container);
  const canvas = document.querySelector(".grafer_container");
  const layers = [];
  const colors2 = [];
  const colorMap = /* @__PURE__ */ new Map();
  const colorLevels = /* @__PURE__ */ new Map();
  for (const color of data.colors) {
    if (colors2.length <= color.primary) {
      for (let i4 = colors2.length; i4 <= color.primary; ++i4) {
        colors2.push(null);
      }
    }
    colorMap.set(color.id, color);
    let colorLevel = colorLevels.get(color.level);
    if (!colorLevel) {
      colorLevel = {
        top: [],
        low: []
      };
      colorLevels.set(color.level, colorLevel);
    }
    if (color.top) {
      colorLevel.top.push(color);
    } else {
      colorLevel.low.push(color);
    }
  }
  const points2 = {
    data: data.points
  };
  layers.push(...loadLevelLayers(data.nodes, data.shapes));
  const centroidMap = makeCentroidLayers(layers, data.centroids, info.levelCount);
  if (colorMap.size) {
    computeColors(colors2, colorMap, colorLevels, centroidMap, info.level);
  }
  const controller = new GraferController(canvas, { points: points2, colors: colors2, layers }, {
    viewport: {
      colorRegistryType: mod_exports3.colors.ColorRegistryType.indexed,
      colorRegistryCapacity: colors2.length
    }
  });
  const graphLayers = controller.viewport.graph.layers;
  for (const layer of graphLayers) {
    const components = layer.name.split("_");
    if (components[0] === "Centroids") {
      const level = parseInt(components[components.length - 1]);
      if (level !== info.level) {
        layer.enabled = false;
      }
    }
  }
  new mod_exports13.DebugMenu(controller.viewport);
}
async function knowledgeViewLoader(container) {
  renderMenu3(container, (result) => {
    loadGraph2(container, result);
  });
}

// node_modules/@lit/reactive-element/decorators/custom-element.js
var t3 = (t4) => (e5, o4) => {
  void 0 !== o4 ? o4.addInitializer(() => {
    customElements.define(t4, e5);
  }) : customElements.define(t4, e5);
};

// examples/src/HelpElements.ts
var MouseInteractions = class extends s3 {
  static get styles() {
    return i`
            :host {
                position: absolute;
                top: 0;
                right: 0;
            }

            .container {
                padding: 15px;
                color: #d8dee9;
                font-family: helvetica;
                font-size: 10px;
            }
        `;
  }
  render() {
    return x`<div class="container">
            <div><strong>LEFT DRAG:</strong> TRUCK</div>
            <div><strong>RIGHT DRAG:</strong> ROTATE</div>
            <div><strong>MIDDLE DRAG:</strong> PAN</div>
            <div><strong>SCROLL UP/DOWN:</strong> DOLLY</div>
        </div>`;
  }
};
MouseInteractions = __decorateClass([
  t3("mouse-interactions")
], MouseInteractions);

// examples/src/mod.ts
var examples = {
  basic: mod_exports15,
  data: mod_exports16,
  nodes: mod_exports17,
  edges: mod_exports18,
  labels: mod_exports19,
  UX: mod_exports20,
  quickstart: mod_exports21,
  benchmarks: mod_exports22,
  aske: mod_exports23,
  playground
};
function getExample(examples2, path) {
  let obj = examples2;
  for (let i4 = 0, n5 = path.length; i4 < n5; ++i4) {
    if (Object.prototype.hasOwnProperty.call(obj, path[i4])) {
      obj = obj[path[i4]];
    } else {
      return null;
    }
  }
  if (typeof obj === "function") {
    return obj;
  }
  return null;
}
async function main() {
  const pathName = window.location.pathname;
  const pathComponents = pathName.split("/").filter((v2) => Boolean(v2));
  let basePath = "";
  if (window.location.hostname.indexOf("github.io") !== -1) {
    basePath = `/${pathComponents.shift()}`;
  }
  const example = getExample(examples, pathComponents);
  if (example) {
    await example(document.body);
  } else {
    renderMenu(document.body, examples, pathComponents, basePath);
  }
}
main();
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */
//# sourceMappingURL=mod.js.map
